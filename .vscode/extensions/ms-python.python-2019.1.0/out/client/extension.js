module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=227)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24);t.METADATA_KEY=r;var i=n(230);t.Container=i.Container;var o=n(46);t.BindingScopeEnum=o.BindingScopeEnum,t.BindingTypeEnum=o.BindingTypeEnum,t.TargetTypeEnum=o.TargetTypeEnum;var s=n(246);t.AsyncContainerModule=s.AsyncContainerModule,t.ContainerModule=s.ContainerModule;var a=n(247);t.injectable=a.injectable;var c=n(248);t.tagged=c.tagged;var u=n(249);t.named=u.named;var l=n(151);t.inject=l.inject,t.LazyServiceIdentifer=l.LazyServiceIdentifer;var d=n(250);t.optional=d.optional;var h=n(251);t.unmanaged=h.unmanaged;var p=n(252);t.multiInject=p.multiInject;var f=n(253);t.targetName=f.targetName;var g=n(254);t.postConstruct=g.postConstruct;var m=n(149);t.MetadataReader=m.MetadataReader;var y=n(60);t.guid=y.guid;var v=n(50);t.decorate=v.decorate;var b=n(154);t.traverseAncerstors=b.traverseAncerstors,t.taggedConstraint=b.taggedConstraint,t.namedConstraint=b.namedConstraint,t.typeConstraint=b.typeConstraint;var S=n(76);t.getServiceIdentifierAsString=S.getServiceIdentifierAsString;var _=n(255);t.multiBindToService=_.multiBindToService},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IOutputChannel=Symbol("IOutputChannel"),t.IDocumentSymbolProvider=Symbol("IDocumentSymbolProvider"),t.IsWindows=Symbol("IS_WINDOWS"),t.IDisposableRegistry=Symbol("IDiposableRegistry"),t.IMemento=Symbol("IGlobalMemento"),t.GLOBAL_MEMENTO=Symbol("IGlobalMemento"),t.WORKSPACE_MEMENTO=Symbol("IWorkspaceMemento"),t.IPersistentStateFactory=Symbol("IPersistentStateFactory"),function(e){e.Information="Information",e.Error="Error",e.Warning="Warning"}(t.LogLevel||(t.LogLevel={})),t.ILogger=Symbol("ILogger"),function(e){e[e.Installed=0]="Installed",e[e.Disabled=1]="Disabled",e[e.Ignore=2]="Ignore"}(t.InstallerResponse||(t.InstallerResponse={})),function(e){e.Linter="Linter",e.Formatter="Formatter",e.TestFramework="TestFramework",e.RefactoringLibrary="RefactoringLibrary",e.WorkspaceSymbols="WorkspaceSymbols"}(t.ProductType||(t.ProductType={})),function(e){e[e.pytest=1]="pytest",e[e.nosetest=2]="nosetest",e[e.pylint=3]="pylint",e[e.flake8=4]="flake8",e[e.pep8=5]="pep8",e[e.pylama=6]="pylama",e[e.prospector=7]="prospector",e[e.pydocstyle=8]="pydocstyle",e[e.yapf=9]="yapf",e[e.autopep8=10]="autopep8",e[e.mypy=11]="mypy",e[e.unittest=12]="unittest",e[e.ctags=13]="ctags",e[e.rope=14]="rope",e[e.isort=15]="isort",e[e.black=16]="black",e[e.bandit=17]="bandit"}(t.Product||(t.Product={})),function(e){e[e.install=1]="install",e[e.run=2]="run"}(t.ModuleNamePurpose||(t.ModuleNamePurpose={})),t.IInstaller=Symbol("IInstaller"),t.IPathUtils=Symbol("IPathUtils"),t.IRandom=Symbol("IRandom"),t.ICurrentProcess=Symbol("ICurrentProcess"),t.IConfigurationService=Symbol("IConfigurationService"),t.ISocketServer=Symbol("ISocketServer"),t.IExtensionContext=Symbol("ExtensionContext"),t.IExtensions=Symbol("IExtensions"),t.IBrowserService=Symbol("IBrowserService"),t.IPythonExtensionBanner=Symbol("IPythonExtensionBanner"),t.BANNER_NAME_LS_SURVEY="LSSurveyBanner",t.BANNER_NAME_PROPOSE_LS="ProposeLS",t.BANNER_NAME_DS_SURVEY="DSSurveyBanner",t.IFeatureDeprecationManager=Symbol("IFeatureDeprecationManager"),t.IEditorUtils=Symbol("IEditorUtils"),t.IAsyncDisposableRegistry=Symbol("IAsyncDisposableRegistry")},function(e,t){e.exports=require("vscode")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IApplicationShell=Symbol("IApplicationShell"),t.ICommandManager=Symbol("ICommandManager"),t.IDocumentManager=Symbol("IDocumentManager"),t.IWorkspaceService=Symbol("IWorkspaceService"),t.ITerminalManager=Symbol("ITerminalManager"),t.IDebugService=Symbol("IDebugManager"),t.IApplicationEnvironment=Symbol("IApplicationEnvironment"),t.IWebPanelMessageListener=Symbol("IWebPanelMessageListener"),t.IWebPanel=Symbol("IWebPanel"),t.IWebPanelProvider=Symbol("IWebPanelProvider")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IServiceManager=Symbol("IServiceManager"),t.IServiceContainer=Symbol("IServiceContainer")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.HKCU=0]="HKCU",e[e.HKLM=1]="HKLM"}(t.RegistryHive||(t.RegistryHive={})),t.IRegistry=Symbol("IRegistry"),t.IPlatformService=Symbol("IPlatformService"),t.IFileSystem=Symbol("IFileSystem")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(261),o=n(11),s=n(36);n(31),n(9);let a;function c(e,t,r,s){if(o.isTestExecution()||!function(){try{const e=n(2),t=n(155);return void 0!==e&&void 0!==t}catch(e){return!1}}())return;const c=function(){if(!o.isTestExecution()&&a)return a;const e=o.PVSC_EXTENSION_ID,t=n(2).extensions.getExtension(e),r=t.packageJSON.version,i=t.packageJSON.contributes.debuggers[0].aiKey,s=n(155).default;return a=new s(e,r,i)}(),l="number"==typeof t?{duration:t}:t||void 0,h={};if(r){const e=r;Object.getOwnPropertyNames(e).forEach(t=>{void 0!==e[t]&&null!==e[t]&&(h[t]="string"==typeof e[t]?e[t]:e[t].toString())})}s&&(h.stackTrace=function(e){let t="";for(const n of i.parse(e)){let e=n.getFileName();if(e){e=u(e);const r=n.getLineNumber(),i=n.getColumnNumber();t+=`\n\tat ${d(n)} ${e}:${r}:${i}`}else t+="\n\tat <anonymous>"}return t.trim()}(s)),s&&"ERROR"!==e&&(h.originalEventName=e,c.sendTelemetryEvent("ERROR",h,l)),c.sendTelemetryEvent(e,h,l)}function u(e){return e=e.startsWith(o.EXTENSION_ROOT_DIR)?`<pvsc>${e.substring(o.EXTENSION_ROOT_DIR.length)}`:`<hidden>${r.sep}${r.basename(e)}`}function l(e){return-1===e.indexOf("/")&&-1===e.indexOf("\\")?e:"<hidden>"}function d(e){const t=[];return"string"==typeof e.getTypeName()&&e.getTypeName().length>0&&t.push(e.getTypeName()),"string"==typeof e.getMethodName()&&e.getMethodName().length>0&&t.push(e.getMethodName()),"string"==typeof e.getFunctionName()&&e.getFunctionName().length>0&&(2===t.length&&t.join(".")===e.getFunctionName()||t.push(e.getFunctionName())),t.map(l).join(".")}t.sendTelemetryEvent=c,t.captureTelemetry=function(e,t,n=!0,r){return function(i,o,a){const u=a.value;return a.value=function(...i){if(!n)return c(e,void 0,t),u.apply(this,i);const o=new s.StopWatch,a=u.apply(this,i);return a&&"function"==typeof a.then&&"function"==typeof a.catch?a.then(n=>(c(e,o.elapsedTime,t),n)).catch(n=>{(t=t||{}).failed=!0,c(r||e,o.elapsedTime,t,n)}):c(e,o.elapsedTime,t),a},a}},t.sendTelemetryWhenDone=function(e,t,n,r){if(n=n||new s.StopWatch,"function"!=typeof t.then)throw new Error("Method is neither a Promise nor a Theneable");t.then(t=>(c(e,n.elapsedTime,r),t),t=>(c(e,n.elapsedTime,r,t),Promise.reject(t)))}},function(e,t){String.prototype.splitLines=function(e={removeEmptyEntries:!0,trim:!0}){let t=this.split(/\r?\n/g);return e&&e.trim&&(t=t.map(e=>e.trim())),e&&e.removeEmptyEntries&&(t=t.filter(e=>e.length>0)),t},String.prototype.toCommandArgument=function(){return this?this.indexOf(" ")>=0&&!this.startsWith('"')&&!this.endsWith('"')?`"${this}"`:this.toString():this},String.prototype.fileToCommandArgument=function(){return this?this.toCommandArgument().replace(/\\/g,"/"):this},String.prototype.trimQuotes=function(){return this?this.replace(/(^['"])|(['"]$)/g,""):this},Promise.prototype.ignoreErrors=function(){this.catch(()=>{})},String.prototype.format||(String.prototype.format=function(){const e=arguments;return this.replace(/{(\d+)}/g,(t,n)=>void 0===e[n]?t:e[n])})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COMPLETION="COMPLETION",e.COMPLETION_ADD_BRACKETS="COMPLETION.ADD_BRACKETS",e.DEFINITION="DEFINITION",e.HOVER_DEFINITION="HOVER_DEFINITION",e.REFERENCE="REFERENCE",e.SIGNATURE="SIGNATURE",e.SYMBOL="SYMBOL",e.FORMAT_SORT_IMPORTS="FORMAT.SORT_IMPORTS",e.FORMAT="FORMAT.FORMAT",e.FORMAT_ON_TYPE="FORMAT.FORMAT_ON_TYPE",e.EDITOR_LOAD="EDITOR.LOAD",e.LINTING="LINTING",e.GO_TO_OBJECT_DEFINITION="GO_TO_OBJECT_DEFINITION",e.UPDATE_PYSPARK_LIBRARY="UPDATE_PYSPARK_LIBRARY",e.REFACTOR_RENAME="REFACTOR_RENAME",e.REFACTOR_EXTRACT_VAR="REFACTOR_EXTRACT_VAR",e.REFACTOR_EXTRACT_FUNCTION="REFACTOR_EXTRACT_FUNCTION",e.REPL="REPL",e.PYTHON_INTERPRETER="PYTHON_INTERPRETER",e.PYTHON_INTERPRETER_DISCOVERY="PYTHON_INTERPRETER_DISCOVERY",e.PYTHON_INTERPRETER_AUTO_SELECTION="PYTHON_INTERPRETER_AUTO_SELECTION",e.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES="PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES",e.PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE="PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE",e.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL="PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL",e.WORKSPACE_SYMBOLS_BUILD="WORKSPACE_SYMBOLS.BUILD",e.WORKSPACE_SYMBOLS_GO_TO="WORKSPACE_SYMBOLS.GO_TO",e.EXECUTION_CODE="EXECUTION_CODE",e.EXECUTION_DJANGO="EXECUTION_DJANGO",e.DEBUGGER="DEBUGGER",e.DEBUGGER_ATTACH_TO_CHILD_PROCESS="DEBUGGER.ATTACH_TO_CHILD_PROCESS",e.DEBUGGER_PERFORMANCE="DEBUGGER.PERFORMANCE",e.DEBUGGER_CONFIGURATION_PROMPTS="DEBUGGER.CONFIGURATION.PROMPTS",e.UNITTEST_STOP="UNITTEST.STOP",e.UNITTEST_RUN="UNITTEST.RUN",e.UNITTEST_DISCOVER="UNITTEST.DISCOVER",e.UNITTEST_VIEW_OUTPUT="UNITTEST.VIEW_OUTPUT",e.PYTHON_LANGUAGE_SERVER_ANALYSISTIME="PYTHON_LANGUAGE_SERVER.ANALYSIS_TIME",e.PYTHON_LANGUAGE_SERVER_ENABLED="PYTHON_LANGUAGE_SERVER.ENABLED",e.PYTHON_LANGUAGE_SERVER_EXTRACTED="PYTHON_LANGUAGE_SERVER.EXTRACTED",e.PYTHON_LANGUAGE_SERVER_DOWNLOADED="PYTHON_LANGUAGE_SERVER.DOWNLOADED",e.PYTHON_LANGUAGE_SERVER_ERROR="PYTHON_LANGUAGE_SERVER.ERROR",e.PYTHON_LANGUAGE_SERVER_STARTUP="PYTHON_LANGUAGE_SERVER.STARTUP",e.PYTHON_LANGUAGE_SERVER_READY="PYTHON_LANGUAGE_SERVER.READY",e.PYTHON_LANGUAGE_SERVER_PLATFORM_NOT_SUPPORTED="PYTHON_LANGUAGE_SERVER.PLATFORM_NOT_SUPPORTED",e.PYTHON_LANGUAGE_SERVER_PLATFORM_SUPPORTED="PYTHON_LANGUAGE_SERVER.PLATFORM_SUPPORTED",e.PYTHON_LANGUAGE_SERVER_TELEMETRY="PYTHON_LANGUAGE_SERVER.EVENT",e.TERMINAL_CREATE="TERMINAL.CREATE",e.PYTHON_LANGUAGE_SERVER_LIST_BLOB_STORE_PACKAGES="PYTHON_LANGUAGE_SERVER.LIST_BLOB_PACKAGES",e.DIAGNOSTICS_ACTION="DIAGNOSTICS.ACTION",e.DIAGNOSTICS_MESSAGE="DIAGNOSTICS.MESSAGE",e.PLATFORM_INFO="PLATFORM.INFO",e.SELECT_LINTER="LINTING.SELECT",e.LINTER_NOT_INSTALLED_PROMPT="LINTER_NOT_INSTALLED_PROMPT"}(t.EventName||(t.EventName={})),function(e){e.FailedToParseVersion="FailedToParseVersion",e.FailedToDetermineOS="FailedToDetermineOS"}(t.PlatformErrors||(t.PlatformErrors={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INTERPRETER_LOCATOR_SERVICE="IInterpreterLocatorService",t.WINDOWS_REGISTRY_SERVICE="WindowsRegistryService",t.CONDA_ENV_FILE_SERVICE="CondaEnvFileService",t.CONDA_ENV_SERVICE="CondaEnvService",t.CURRENT_PATH_SERVICE="CurrentPathService",t.KNOWN_PATH_SERVICE="KnownPathsService",t.GLOBAL_VIRTUAL_ENV_SERVICE="VirtualEnvService",t.WORKSPACE_VIRTUAL_ENV_SERVICE="WorkspaceVirtualEnvService",t.PIPENV_SERVICE="PipEnvService",t.IInterpreterVersionService=Symbol("IInterpreterVersionService"),t.IKnownSearchPathsForInterpreters=Symbol("IKnownSearchPathsForInterpreters"),t.IVirtualEnvironmentsSearchPathProvider=Symbol("IVirtualEnvironmentsSearchPathProvider"),t.IInterpreterLocatorService=Symbol("IInterpreterLocatorService"),t.ICondaService=Symbol("ICondaService"),function(e){e.Unknown="Unknown",e.Conda="Conda",e.VirtualEnv="VirtualEnv",e.Pipenv="PipEnv",e.Pyenv="Pyenv",e.Venv="Venv"}(t.InterpreterType||(t.InterpreterType={})),t.IInterpreterService=Symbol("IInterpreterService"),t.IInterpreterDisplay=Symbol("IInterpreterDisplay"),t.IShebangCodeLensProvider=Symbol("IShebangCodeLensProvider"),t.IInterpreterHelper=Symbol("IInterpreterHelper"),t.IPipEnvService=Symbol("IPipEnvService"),t.IInterpreterLocatorHelper=Symbol("IInterpreterLocatorHelper"),t.IInterpreterWatcher=Symbol("IInterpreterWatcher"),t.IInterpreterWatcherBuilder=Symbol("IInterpreterWatcherBuilder"),t.InterpreterLocatorProgressHandler=Symbol("InterpreterLocatorProgressHandler"),t.IInterpreterLocatorProgressService=Symbol("IInterpreterLocatorProgressService")},function(e,t,n){"use strict";function r(){return"1"===process.env.VSC_PYTHON_UNIT_TEST}Object.defineProperty(t,"__esModule",{value:!0}),t.PYTHON_LANGUAGE="python",t.PYTHON=[{scheme:"file",language:t.PYTHON_LANGUAGE},{scheme:"untitled",language:t.PYTHON_LANGUAGE}],t.PVSC_EXTENSION_ID="ms-python.python",function(e){e.Set_Interpreter="python.setInterpreter",e.Set_ShebangInterpreter="python.setShebangInterpreter",e.Exec_In_Terminal="python.execInTerminal",e.Exec_Selection_In_Terminal="python.execSelectionInTerminal",e.Exec_Selection_In_Django_Shell="python.execSelectionInDjangoShell",e.Tests_View_UI="python.viewTestUI",e.Tests_Picker_UI="python.selectTestToRun",e.Tests_Picker_UI_Debug="python.selectTestToDebug",e.Tests_Discover="python.discoverTests",e.Tests_Run_Failed="python.runFailedTests",e.Sort_Imports="python.sortImports",e.Tests_Run="python.runtests",e.Tests_Debug="python.debugtests",e.Tests_Ask_To_Stop_Test="python.askToStopUnitTests",e.Tests_Ask_To_Stop_Discovery="python.askToStopUnitTestDiscovery",e.Tests_Stop="python.stopUnitTests",e.Tests_ViewOutput="python.viewTestOutput",e.Tests_Select_And_Run_Method="python.selectAndRunTestMethod",e.Tests_Select_And_Debug_Method="python.selectAndDebugTestMethod",e.Tests_Select_And_Run_File="python.selectAndRunTestFile",e.Tests_Run_Current_File="python.runCurrentTestFile",e.Refactor_Extract_Variable="python.refactorExtractVariable",e.Refaactor_Extract_Method="python.refactorExtractMethod",e.Update_SparkLibrary="python.updateSparkLibrary",e.Build_Workspace_Symbols="python.buildWorkspaceSymbols",e.Start_REPL="python.startREPL",e.Create_Terminal="python.createTerminal",e.Set_Linter="python.setLinter",e.Enable_Linter="python.enableLinting",e.Run_Linter="python.runLinting",e.Enable_SourceMap_Support="python.enableSourceMapSupport"}(t.Commands||(t.Commands={})),function(e){e.Test_Pass="$(check)",e.Test_Fail="$(alert)",e.Test_Error="$(x)",e.Test_Skip="$(circle-slash)"}(t.Octicons||(t.Octicons={})),t.Button_Text_Tests_View_Output="View Output",function(e){e.CodeLensRunUnitTest="Run Test",e.CodeLensDebugUnitTest="Debug Test"}(t.Text||(t.Text={})),function(e){e.MaxUnitTestCodeLensDelay=5e3}(t.Delays||(t.Delays={})),function(e){let t,n,r;!function(e){e.InvalidSyntax="E0001"}(t=e.pylint||(e.pylint={})),function(e){e.InvalidSyntax="F999"}(n=e.prospector||(e.prospector={})),function(e){e.InvalidSyntax="E999"}(r=e.flake8||(e.flake8={}))}(t.LinterErrors||(t.LinterErrors={})),t.STANDARD_OUTPUT_CHANNEL="STANDARD_OUTPUT_CHANNEL",t.isTestExecution=function(){return"1"===process.env.VSC_PYTHON_CI_TEST||r()},t.isUnitTestExecution=r,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(45))},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(7),a=n(79),c=n(1),u="Python Extension: ";let l=r=class{static error(e="",t){(new r).logError(`${e}, ${t}`)}static warn(e="",t=""){(new r).logWarning(`${e}, ${t}`)}static verbose(e=""){(new r).logInformation(e)}logError(e,t){t?console.error(`${u}${e}`,t):console.error(`${u}${e}`)}logWarning(e,t){t?console.warn(`${u}${e}`,t):console.warn(`${u}${e}`)}logInformation(e,t){t?console.info(`${u}${e}`,t):console.info(`${u}${e}`)}};var d;function h(e,t=d.None,n){return function(r,i,o){const a=o.value;return o.value=function(...i){const o=r&&r.constructor?r.constructor.name:"";function u(e){n!==c.LogLevel.Error&&p(e)}function h(e){p(void 0,e)}function p(n,r){const a=[e];a.push(`Class name = ${o}`),(t&&d.Arguments)===d.Arguments&&a.push(function(e){try{return(e||[]).map((e,t)=>{if(void 0===e)return`Arg ${t+1}: undefined`;if(null===e)return`Arg ${t+1}: null`;try{return e&&e.fsPath?`Arg ${t+1}: <Uri:${e.fsPath}>`:`Arg ${t+1}: ${JSON.stringify(e)}`}catch(e){return`Arg ${t+1}: <argument cannot be serialized for logging>`}}).join(", ")}catch(e){return""}}(i)),(t&d.ReturnValue)===d.ReturnValue&&a.push(function(e){if(void 0===e)return"Return Value: undefined";if(null===e)return"Return Value: null";try{return`Return Value: ${JSON.stringify(e)}`}catch(e){return"Return Value: <Return value cannot be serialized for logging>"}}(n)),r?((new l).logError(a.join(", "),r),s.sendTelemetryEvent("ERROR",void 0,void 0,r)):(new l).logInformation(a.join(", "))}try{const e=a.apply(this,i);return e&&"function"==typeof e.then&&"function"==typeof e.catch?e.then(e=>(u(e),e)).catch(e=>{h(e)}):u(e),e}catch(e){throw h(e),e}},o}}i([a.skipIfTest(!1)],l.prototype,"logError",null),i([a.skipIfTest(!1)],l.prototype,"logWarning",null),i([a.skipIfTest(!1)],l.prototype,"logInformation",null),l=r=i([o.injectable()],l),t.Logger=l,function(e){e[e.None=0]="None",e[e.Arguments=1]="Arguments",e[e.ReturnValue=2]="ReturnValue"}(d=t.LogOptions||(t.LogOptions={})),t.traceVerbose=function(e){(new l).logInformation(e)},t.traceError=function(e,t){(new l).logError(e,t)},t.traceInfo=function(e){(new l).logInformation(e)},function(e){e.verbose=function(e,t=d.Arguments|d.ReturnValue){return h(e,t)},e.error=function(e){return h(e,d.Arguments|d.ReturnValue,c.LogLevel.Error)},e.info=function(e){return h(e)},e.warn=function(e){return h(e,d.Arguments|d.ReturnValue,c.LogLevel.Warning)}}(t.traceDecorators||(t.traceDecorators={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(18),i=n(3),o=n(45);let s,a;!function(e){e.warnSourceMaps=l("diagnostics.warnSourceMaps","Source map support is enabled in the Python Extension, this will adversely impact performance of the extension."),e.disableSourceMaps=l("diagnostics.disableSourceMaps","Disable Source Map Support"),e.warnBeforeEnablingSourceMaps=l("diagnostics.warnBeforeEnablingSourceMaps","Enabling source map support in the Python Extension will adversely impact performance of the extension."),e.enableSourceMapsAndReloadVSC=l("diagnostics.enableSourceMapsAndReloadVSC","Enable and reload Window."),e.lsNotSupported=l("diagnostics.lsNotSupported","Your operating system does not meet the minimum requirements of the Language Server. Reverting to the alternative, Jedi."),e.invalidPythonPathInDebuggerSettings=l("diagnostics.invalidPythonPathInDebuggerSettings",'You need to select a Python interpreter before you start debugging.\n\nTip: click on "Select Python Interpreter" in the status bar.'),e.invalidPythonPathInDebuggerLaunch=l("diagnostics.invalidPythonPathInDebuggerLaunch","The Python path in your debug configuration is invalid.")}(t.Diagnostics||(t.Diagnostics={})),function(e){e.canceled=l("Common.canceled","Canceled"),e.loadingExtension=l("Common.loadingPythonExtension","Python extension loading..."),e.openOutputPanel=l("Common.openOutputPanel","Show output")}(t.Common||(t.Common={})),function(e){e.bannerMessage=l("LanguageService.bannerMessage","Can you please take 2 minutes to tell us how the Python Language Server is working for you?"),e.bannerLabelYes=l("LanguageService.bannerLabelYes","Yes, take survey now"),e.bannerLabelNo=l("LanguageService.bannerLabelNo","No, thanks"),e.lsFailedToStart=l("LanguageService.lsFailedToStart","We encountered an issue starting the Language Server. Reverting to the alternative, Jedi. Check the Python output panel for details."),e.lsFailedToDownload=l("LanguageService.lsFailedToDownload","We encountered an issue downloading the Language Server. Reverting to the alternative, Jedi. Check the Python output panel for details."),e.lsFailedToExtract=l("LanguageService.lsFailedToExtract","We encountered an issue extracting the Language Server. Reverting to the alternative, Jedi. Check the Python output panel for details."),e.downloadFailedOutputMessage=l("LanguageService.downloadFailedOutputMessage","download failed."),e.extractionFailedOutputMessage=l("LanguageService.extractionFailedOutputMessage","extraction failed."),e.extractionCompletedOutputMessage=l("LanguageService.extractionCompletedOutputMessage","complete."),e.extractionDoneOutputMessage=l("LanguageService.extractionDoneOutputMessage","done."),e.reloadVSCodeIfSeachPathHasChanged=l("LanguageService.reloadVSCodeIfSeachPathHasChanged","Search paths have changed for this Python interpreter. Please reload the extension to ensure that the IntelliSense works correctly.")}(t.LanguageService||(t.LanguageService={})),function(e){e.loading=l("Interpreters.LoadingInterpreters","Loading Python Interpreters"),e.refreshing=l("Interpreters.RefreshingInterpreters","Refreshing Python Interpreters")}(t.Interpreters||(t.Interpreters={})),function(e){e.installedButNotEnabled=l("Linter.InstalledButNotEnabled","Linter {0} is installed but not enabled."),e.replaceWithSelectedLinter=l("Linter.replaceWithSelectedLinter","Multiple linters are enabled in settings. Replace with '{0}'?")}(t.Linters||(t.Linters={})),function(e){e.bannerMessage=l("DataScienceSurveyBanner.bannerMessage","Can you please take 2 minutes to tell us how the Python Data Science features are working for you?"),e.bannerLabelYes=l("DataScienceSurveyBanner.bannerLabelYes","Yes, take survey now"),e.bannerLabelNo=l("DataScienceSurveyBanner.bannerLabelNo","No, thanks")}(t.DataScienceSurveyBanner||(t.DataScienceSurveyBanner={})),function(e){e.historyTitle=l("DataScience.historyTitle","Python Interactive"),e.badWebPanelFormatString=l("DataScience.badWebPanelFormatString","<html><body><h1>{0} is not a valid file name</h1></body></html>"),e.sessionDisposed=l("DataScience.sessionDisposed","Cannot execute code, session has been disposed."),e.unknownMimeTypeFormat=l("DataScience.unknownMimeTypeFormat","Mime type {0} is not currently supported"),e.exportDialogTitle=l("DataScience.exportDialogTitle","Export to Jupyter Notebook"),e.exportDialogFilter=l("DataScience.exportDialogFilter","Jupyter Notebooks"),e.exportDialogComplete=l("DataScience.exportDialogComplete","Notebook written to {0}"),e.exportDialogFailed=l("DataScience.exportDialogFailed","Failed to export notebook. {0}"),e.exportOpenQuestion=l("DataScience.exportOpenQuestion","Open in browser"),e.runCellLensCommandTitle=l("python.command.python.datascience.runcell.title","Run cell"),e.importDialogTitle=l("DataScience.importDialogTitle","Import Jupyter Notebook"),e.importDialogFilter=l("DataScience.importDialogFilter","Jupyter Notebooks"),e.notebookCheckForImportTitle=l("DataScience.notebookCheckForImportTitle","Do you want to import the Jupyter Notebook into Python code?"),e.notebookCheckForImportYes=l("DataScience.notebookCheckForImportYes","Import"),e.notebookCheckForImportNo=l("DataScience.notebookCheckForImportNo","Later"),e.notebookCheckForImportDontAskAgain=l("DataScience.notebookCheckForImportDontAskAgain","Don't Ask Again"),e.jupyterNotSupported=l("DataScience.jupyterNotSupported","Jupyter is not installed"),e.jupyterNbConvertNotSupported=l("DataScience.jupyterNbConvertNotSupported","Jupyter nbconvert is not installed"),e.jupyterLaunchTimedOut=l("DataScience.jupyterLaunchTimedOut","The Jupyter notebook server failed to launch in time"),e.jupyterLaunchNoURL=l("DataScience.jupyterLaunchNoURL","Failed to find the URL of the launched Jupyter notebook server"),e.pythonInteractiveHelpLink=l("DataScience.pythonInteractiveHelpLink","See [https://aka.ms/pyaiinstall] for help on installing jupyter."),e.importingFormat=l("DataScience.importingFormat","Importing {0}"),e.startingJupyter=l("DataScience.startingJupyter","Starting Jupyter server"),e.connectingToJupyter=l("DataScience.connectingToJupyter","Connecting to Jupyter server"),e.exportingFormat=l("DataScience.exportingFormat","Exporting {0}"),e.runAllCellsLensCommandTitle=l("python.command.python.datascience.runallcells.title","Run all cells"),e.importChangeDirectoryComment=l("DataScience.importChangeDirectoryComment","#%% Change working directory from the workspace root to the ipynb file location. Turn this addition off with the DataScience.changeDirOnImportExport setting"),e.exportChangeDirectoryComment=l("DataScience.exportChangeDirectoryComment","# Change directory to VSCode workspace root so that relative path loads work correctly. Turn this addition off with the DataScience.changeDirOnImportExport setting"),e.restartKernelMessage=l("DataScience.restartKernelMessage","Do you want to restart the Jupter kernel? All variables will be lost."),e.restartKernelMessageYes=l("DataScience.restartKernelMessageYes","Restart"),e.restartKernelMessageNo=l("DataScience.restartKernelMessageNo","Cancel"),e.restartingKernelStatus=l("DataScience.restartingKernelStatus","Restarting iPython Kernel"),e.executingCode=l("DataScience.executingCode","Executing Cell"),e.collapseAll=l("DataScience.collapseAll","Collapse all cell inputs"),e.expandAll=l("DataScience.expandAll","Expand all cell inputs"),e.exportKey=l("DataScience.export","Export as Jupyter Notebook"),e.restartServer=l("DataScience.restartServer","Restart iPython Kernel"),e.undo=l("DataScience.undo","Undo"),e.redo=l("DataScience.redo","Redo"),e.clearAll=l("DataScience.clearAll","Remove All Cells"),e.pythonVersionHeader=l("DataScience.pythonVersionHeader","Python Version:"),e.pythonRestartHeader=l("DataScience.pythonRestartHeader","Restarted Kernel:"),e.pythonVersionHeaderNoPyKernel=l("DataScience.pythonVersionHeaderNoPyKernel","Python Version may not match, no ipykernel found:"),e.jupyterSelectURILaunchLocal=l("DataScience.jupyterSelectURILaunchLocal","Launch local Jupyter server"),e.jupyterSelectURISpecifyURI=l("DataScience.jupyterSelectURISpecifyURI","Type in the URI for the Jupyter server"),e.jupyterSelectURIPrompt=l("DataScience.jupyterSelectURIPrompt","Enter the URI of a Jupyter server"),e.jupyterSelectURIInvalidURI=l("DataScience.jupyterSelectURIInvalidURI","Invalid URI specified"),e.jupyterNotebookFailure=l("DataScience.jupyterNotebookFailure","Jupyter notebook failed to launch. \r\n{0}"),e.jupyterNotebookConnectFailed=l("DataScience.jupyterNotebookConnectFailed","Failed to connect to Jupyter notebook. \r\n{0}\r\n{1}"),e.notebookVersionFormat=l("DataScience.notebookVersionFormat","Jupyter Notebook Version: {0}"),e.jupyterKernelNotSupportedOnActive=l("DataScience.jupyterKernelNotSupportedOnActive","iPython kernel cannot be started from '{0}'. Using closest match {1} instead."),e.jupyterKernelSpecNotFound=l("DataScience.jupyterKernelSpecNotFound","Cannot create a iPython kernel spec and none are available for use"),e.interruptKernel=l("DataScience.interruptKernel","Interrupt iPython Kernel"),e.interruptKernelStatus=l("DataScience.interruptKernelStatus","Interrupting iPython Kernel"),e.exportCancel=l("DataScience.exportCancel","Cancel"),e.restartKernelAfterInterruptMessage=l("DataScience.restartKernelAfterInterruptMessage","Interrupting the kernel timed out. Do you want to restart the kernel instead? All variables will be lost."),e.pythonInterruptFailedHeader=l("DataScience.pythonInterruptFailedHeader","Keyboard interrupt crashed the kernel. Kernel restarted."),e.sysInfoURILabel=l("DataScience.sysInfoURILabel","Jupyter Server URI: "),e.executingCodeFailure=l("DataScience.executingCodeFailure","Executing code failed : {0}"),e.inputWatermark=l("DataScience.inputWatermark","Shift-enter to run")}(t.DataScience||(t.DataScience={})),function(e){e.selectConfigurationTitle=l("debug.selectConfigurationTitle","Select a debug configuration"),e.selectConfigurationPlaceholder=l("debug.selectConfigurationPlaceholder","Debug Configuration"),e.debugFileConfigurationLabel=l("debug.debugFileConfigurationLabel","Python File"),e.debugFileConfigurationDescription=l("debug.debugFileConfigurationDescription","Debug currently active Python file"),e.debugModuleConfigurationLabel=l("debug.debugModuleConfigurationLabel","Module"),e.debugModuleConfigurationDescription=l("debug.debugModuleConfigurationDescription","Debug a python module by invoking it with '-m'"),e.remoteAttachConfigurationLabel=l("debug.remoteAttachConfigurationLabel","Remote Attach"),e.remoteAttachConfigurationDescription=l("debug.remoteAttachConfigurationDescription","Attach to a remote ptsvd debug server"),e.debugDjangoConfigurationLabel=l("debug.debugDjangoConfigurationLabel","Django"),e.debugDjangoConfigurationDescription=l("debug.debugDjangoConfigurationDescription","Launch and debug a Django web application"),e.debugFlaskConfigurationLabel=l("debug.debugFlaskConfigurationLabel","Flask"),e.debugFlaskConfigurationDescription=l("debug.debugFlaskConfigurationDescription","Launch and debug a Flask web application"),e.debugPyramidConfigurationLabel=l("debug.debugPyramidConfigurationLabel","Pyramid"),e.debugPyramidConfigurationDescription=l("debug.debugPyramidConfigurationDescription","Web Application"),e.djangoEnterManagePyPathTitle=l("debug.djangoEnterManagePyPathTitle","Debug Django"),e.djangoEnterManagePyPathPrompt=l("debug.djangoEnterManagePyPathPrompt","Enter path to manage.py ('${workspaceFolder}' points to the root of the current workspace folder)"),e.djangoEnterManagePyPathInvalidFilePathError=l("debug.djangoEnterManagePyPathInvalidFilePathError","Enter a valid python file path"),e.flaskEnterAppPathOrNamePathTitle=l("debug.flaskEnterAppPathOrNamePathTitle","Debug Flask"),e.flaskEnterAppPathOrNamePathPrompt=l("debug.flaskEnterAppPathOrNamePathPrompt","Enter path to application, e.g. 'app.py' or 'app'"),e.flaskEnterAppPathOrNamePathInvalidNameError=l("debug.flaskEnterAppPathOrNamePathInvalidNameError","Enter a valid name"),e.moduleEnterModuleTitle=l("debug.moduleEnterModuleTitle","Debug Module"),e.moduleEnterModulePrompt=l("debug.moduleEnterModulePrompt","Enter Python module/package name"),e.moduleEnterModuleInvalidNameError=l("debug.moduleEnterModuleInvalidNameError","Enter a valid module name"),e.pyramidEnterDevelopmentIniPathTitle=l("debug.pyramidEnterDevelopmentIniPathTitle","Debug Pyramid"),e.pyramidEnterDevelopmentIniPathPrompt=l("debug.pyramidEnterDevelopmentIniPathPrompt","`Enter path to development.ini ('${workspaceFolderToken}' points to the root of the current workspace folder)`"),e.pyramidEnterDevelopmentIniPathInvalidFilePathError=l("debug.pyramidEnterDevelopmentIniPathInvalidFilePathError","Enter a valid file path"),e.attachRemotePortTitle=l("debug.attachRemotePortTitle","Remote Debugging"),e.attachRemotePortPrompt=l("debug.attachRemotePortPrompt","Enter the port number that the ptvsd server is listening on"),e.attachRemotePortValidationError=l("debug.attachRemotePortValidationError","Enter a valid port number"),e.attachRemoteHostTitle=l("debug.attachRemoteHostTitle","Remote Debugging"),e.attachRemoteHostPrompt=l("debug.attachRemoteHostPrompt","Enter host name"),e.attachRemoteHostValidationError=l("debug.attachRemoteHostValidationError","Enter a host name or IP address")}(t.DebugConfigurationPrompts||(t.DebugConfigurationPrompts={})),function(e){e.testErrorDiagnosticMessage=l("UnitTests.testErrorDiagnosticMessage","Error"),e.testFailDiagnosticMessage=l("UnitTests.testFailDiagnosticMessage","Fail"),e.testSkippedDiagnosticMessage=l("UnitTests.testSkippedDiagnosticMessage","Skipped")}(t.UnitTests||(t.UnitTests={}));const c={};let u;function l(e,t){return()=>(function(e,t){s&&d()===u||h();if(s&&s.hasOwnProperty(e))return c[e]=s[e],s[e];if(a&&a.hasOwnProperty(e))return c[e]=a[e],a[e];return c[e]=t,t})(e,t)}function d(){const e=process.env.VSCODE_NLS_CONFIG;return e?JSON.parse(e).locale:"en-us"}function h(){u=d();const e=i.join(o.EXTENSION_ROOT_DIR,`package.nls.${u}.json`);if(r.existsSync(e)){const t=r.readFileSync(e,"utf8");s=JSON.parse(t)}else s={};if(!a){const e=i.join(o.EXTENSION_ROOT_DIR,"package.nls.json");if(r.existsSync(e)){const t=r.readFileSync(e,"utf8");a=JSON.parse(t)}else a={}}}t.localize=l,t.getCollection=function(){return s&&d()===u||h(),Object.assign({},a,s)},t.getAskedForCollection=function(){return c},h()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IBufferDecoder=Symbol("IBufferDecoder"),t.IProcessServiceFactory=Symbol("IProcessServiceFactory"),t.IPythonExecutionFactory=Symbol("IPythonExecutionFactory"),t.IPythonExecutionService=Symbol("IPythonExecutionService");t.StdErrError=class extends Error{constructor(e){super(e)}},t.IPythonToolExecutionService=Symbol("IPythonToolRunnerService")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.Discovering=1]="Discovering",e[e.Idle=2]="Idle",e[e.Running=3]="Running",e[e.Fail=4]="Fail",e[e.Error=5]="Error",e[e.Skipped=6]="Skipped",e[e.Pass=7]="Pass"}(t.TestStatus||(t.TestStatus={})),t.ITestConfigSettingsService=Symbol("ITestConfigSettingsService"),t.IWorkspaceTestManagerService=Symbol("IWorkspaceTestManagerService"),t.ITestsHelper=Symbol("ITestsHelper"),t.ITestVisitor=Symbol("ITestVisitor"),t.ITestCollectionStorageService=Symbol("ITestCollectionStorageService"),t.ITestResultsService=Symbol("ITestResultsService"),t.ITestDebugLauncher=Symbol("ITestDebugLauncher"),t.ITestManagerFactory=Symbol("ITestManagerFactory"),t.ITestManagerServiceFactory=Symbol("TestManagerServiceFactory"),t.ITestManager=Symbol("ITestManager"),t.ITestDiscoveryService=Symbol("ITestDiscoveryService"),t.ITestsParser=Symbol("ITestsParser"),t.IUnitTestSocketServer=Symbol("IUnitTestSocketServer"),t.ITestRunner=Symbol("ITestRunner"),function(e){e[e.pytest=0]="pytest",e[e.nosetests=1]="nosetests"}(t.PassCalculationFormulae||(t.PassCalculationFormulae={})),t.IXUnitParser=Symbol("IXUnitParser"),t.ITestMessageService=Symbol("ITestMessageService")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=function(e){return r(this,void 0,void 0,function*(){return new Promise(t=>{setTimeout(t,e)})})};class i{constructor(e=null){this.scope=e,this._resolved=!1,this._rejected=!1,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){this._resolve.apply(this.scope?this.scope:this,arguments),this._resolved=!0}reject(e){this._reject.apply(this.scope?this.scope:this,arguments),this._rejected=!0}get promise(){return this._promise}get resolved(){return this._resolved}get rejected(){return this._rejected}get completed(){return this._rejected||this._resolved}}function o(e=null){return new i(e)}t.createDeferred=o,t.createDeferredFrom=function(...e){const t=o();return Promise.all(e).then(t.resolve.bind(t)).catch(t.reject.bind(t)),t},t.createDeferredFromPromise=function(e){const t=o();return e.then(t.resolve.bind(t)).catch(t.reject.bind(t)),t}},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IUnitTestConfigurationService=Symbol("IUnitTestConfigurationService"),t.ITestResultDisplay=Symbol("ITestResultDisplay"),t.ITestDisplay=Symbol("ITestDisplay"),t.IUnitTestManagementService=Symbol("IUnitTestManagementService"),t.ITestConfigurationManagerFactory=Symbol("ITestConfigurationManagerFactory"),function(e){e.removeTests="removeTests",e.discovery="discovery",e.runAll="runAll",e.runSpecific="runSpecific",e.debugAll="debugAll",e.debugSpecific="debugSpecific"}(t.TestFilter||(t.TestFilter={})),t.IArgumentsService=Symbol("IArgumentsService"),t.IArgumentsHelper=Symbol("IArgumentsHelper"),t.ITestManagerRunner=Symbol("ITestManagerRunner"),t.IUnitTestHelper=Symbol("IUnitTestHelper"),t.IUnitTestDiagnosticService=Symbol("IUnitTestDiagnosticService"),function(e){e[e.Error=0]="Error",e[e.Failure=1]="Failure",e[e.Skip=2]="Skip",e[e.Pass=3]="Pass"}(t.PythonUnitTestMessageSeverity||(t.PythonUnitTestMessageSeverity={})),function(e){e[e.Error=0]="Error",e[e.Fail=1]="Fail",e[e.Skipped=2]="Skipped",e[e.Pass=3]="Pass"}(t.DiagnosticMessageType||(t.DiagnosticMessageType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CANCELLATION_REASON="cancelled_user_request",function(e){e.auto="auto",e.ui="ui",e.codelens="codelens",e.commandPalette="commandpalette"}(t.CommandSource||(t.CommandSource={})),t.TEST_OUTPUT_CHANNEL="TEST_OUTPUT_CHANNEL",t.NOSETEST_PROVIDER="nosetest",t.PYTEST_PROVIDER="pytest",t.UNITTEST_PROVIDER="unittest"},function(e,t,n){var r=n(18),i=n(321),o=n(322),s=[],a=n(59);var c=function(){};function u(e){i(e),e.gracefulify=u,e.FileReadStream=f,e.FileWriteStream=g,e.createReadStream=function(e,t){return new f(e,t)},e.createWriteStream=function(e,t){return new g(e,t)};var t=e.readFile;e.readFile=function(e,n,r){"function"==typeof n&&(r=n,n=null);return function e(n,r,i){return t(n,r,function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof i&&i.apply(this,arguments),d()):l([e,[n,r,i]])})}(e,n,r)};var n=e.writeFile;e.writeFile=function(e,t,r,i){"function"==typeof r&&(i=r,r=null);return function e(t,r,i,o){return n(t,r,i,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof o&&o.apply(this,arguments),d()):l([e,[t,r,i,o]])})}(e,t,r,i)};var r=e.appendFile;r&&(e.appendFile=function(e,t,n,i){"function"==typeof n&&(i=n,n=null);return function e(t,n,i,o){return r(t,n,i,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof o&&o.apply(this,arguments),d()):l([e,[t,n,i,o]])})}(e,t,n,i)});var s=e.readdir;function a(t){return s.apply(e,t)}if(e.readdir=function(e,t,n){var r=[e];"function"!=typeof t?r.push(t):n=t;return r.push(function(e,t){t&&t.sort&&t.sort(),!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof n&&n.apply(this,arguments),d()):l([a,[r]])}),a(r)},"v0.8"===process.version.substr(0,4)){var c=o(e);f=c.ReadStream,g=c.WriteStream}var h=e.ReadStream;f.prototype=Object.create(h.prototype),f.prototype.open=function(){var e=this;y(e.path,e.flags,e.mode,function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())})};var p=e.WriteStream;function f(e,t){return this instanceof f?(h.apply(this,arguments),this):f.apply(Object.create(f.prototype),arguments)}function g(e,t){return this instanceof g?(p.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}g.prototype=Object.create(p.prototype),g.prototype.open=function(){var e=this;y(e.path,e.flags,e.mode,function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))})},e.ReadStream=f,e.WriteStream=g;var m=e.open;function y(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function e(t,n,r,i){return m(t,n,r,function(o,s){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?("function"==typeof i&&i.apply(this,arguments),d()):l([e,[t,n,r,i]])})}(e,t,n,r)}return e.open=y,e}function l(e){c("ENQUEUE",e[0].name,e[1]),s.push(e)}function d(){var e=s.shift();e&&(c("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}a.debuglog?c=a.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(c=function(){var e=a.format.apply(a,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){c(s),n(80).equal(s.length,0)}),e.exports=u(n(168)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&(e.exports=u(r)),e.exports.close=r.close=function(e){return function(t,n){return e.call(r,t,function(e){e||d(),"function"==typeof n&&n.apply(this,arguments)})}}(r.close),e.exports.closeSync=r.closeSync=function(e){return function(t){var n=e.apply(r,arguments);return d(),n}}(r.closeSync)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.bashCShellFish="bashCShellFish",e.commandPromptAndPowerShell="commandPromptAndPowerShell",e.pyenv="pyenv",e.conda="conda",e.pipenv="pipenv"}(t.TerminalActivationProviders||(t.TerminalActivationProviders={})),function(e){e.powershell="powershell",e.powershellCore="powershellCore",e.commandPrompt="commandPrompt",e.gitbash="gitbash",e.bash="bash",e.zsh="zsh",e.ksh="ksh",e.fish="fish",e.cshell="cshell",e.tcshell="tshell",e.wsl="wsl",e.xonsh="xonsh",e.other="other"}(t.TerminalShellType||(t.TerminalShellType={})),t.ITerminalServiceFactory=Symbol("ITerminalServiceFactory"),t.ITerminalHelper=Symbol("ITerminalHelper"),t.ITerminalActivator=Symbol("ITerminalActivator"),t.ITerminalActivationCommandProvider=Symbol("ITerminalActivationCommandProvider"),t.ITerminalActivationHandler=Symbol("ITerminalActivationHandler")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(156),i=n(156);t.makePatchingRequire=i.makePatchingRequire;var o=function(e){return!0},s=function(){function e(){this.version=n(265).version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some(function(e){var t=e.filter;return!t||t(!1)})},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var r={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,n.forEach(function(e){var t=e.listener,n=e.filter;try{n&&n(!0)&&t(r)}catch(e){}}),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,n){void 0===n&&(n=o),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:n})},e.prototype.unsubscribe=function(e,t,n){void 0===n&&(n=o);var r=this.subscribers[e];if(r)for(var i=0;i<r.length;++i)if(r[i].listener===t&&r[i].filter===n)return r.splice(i,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach(function(t){return delete e.knownPatches[t]})},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(t(n))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new s,n(157).prototype.require=r.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));t.channel=global.diagnosticsSource},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Global="Global",e.WorkspaceFolder="WorkspaceFolder"}(t.DiagnosticScope||(t.DiagnosticScope={})),function(e){e.always="always",e.session="session"}(t.DiagnosticIgnoreScope||(t.DiagnosticIgnoreScope={})),t.IDiagnosticsService=Symbol("IDiagnosticsService"),t.IDiagnosticFilterService=Symbol("IDiagnosticFilterService"),t.IDiagnosticHandlerService=Symbol("IDiagnosticHandlerService"),t.IInvalidPythonPathInDebuggerService=Symbol("IInvalidPythonPathInDebuggerService"),t.ISourceMapSupportService=Symbol("ISourceMapSupportService")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IExtensionActivationManager=Symbol("IExtensionActivationManager"),t.IExtensionActivationService=Symbol("IExtensionActivationService"),function(e){e.Jedi="Jedi",e.DotNet="DotNet"}(t.LanguageServerActivator||(t.LanguageServerActivator={})),t.ILanguageServerActivator=Symbol("ILanguageServerActivator"),t.IHttpClient=Symbol("IHttpClient"),t.ILanguageServerFolderService=Symbol("ILanguageServerFolderService"),t.ILanguageServerDownloader=Symbol("ILanguageServerDownloader"),t.ILanguageServerPackageService=Symbol("ILanguageServerPackageService"),t.MajorLanguageServerVersion=Symbol("MajorLanguageServerVersion"),t.IDownloadChannelRule=Symbol("IDownloadChannelRule"),t.ILanguageServerCompatibilityService=Symbol("ILanguageServerCompatibilityService"),function(e){e.base="base",e.simple="simple",e.downloaded="downloaded"}(t.LanguageClientFactory||(t.LanguageClientFactory={})),t.ILanguageClientFactory=Symbol("ILanguageClientFactory"),t.ILanguageServerAnalysisOptions=Symbol("ILanguageServerAnalysisOptions"),t.ILanguageServerManager=Symbol("ILanguageServerManager"),t.ILanguageServer=Symbol("ILanguageServer"),t.IInterpreterDataService=Symbol("InterpreterDataService"),function(e){e.Windows32Bit="win-x86",e.Windows64Bit="win-x64",e.Mac64Bit="osx-x64",e.Linux64Bit="linux-x64"}(t.PlatformName||(t.PlatformName={})),t.IPlatformData=Symbol("IPlatformData")},function(e,t,n){"use strict";const r=n(320),i={};r(i,n(167)),r(i,n(323)),r(i,n(171)),r(i,n(39)),r(i,n(88)),r(i,n(331)),r(i,n(335)),r(i,n(336)),r(i,n(337)),r(i,n(338)),r(i,n(344)),r(i,n(55)),e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDataScience=Symbol("IDataScience"),t.IDataScienceCommandListener=Symbol("IDataScienceCommandListener"),function(e){e[e.Success=0]="Success",e[e.TimedOut=1]="TimedOut",e[e.Restarted=2]="Restarted"}(t.InterruptResult||(t.InterruptResult={})),t.INotebookServer=Symbol("INotebookServer"),t.IJupyterExecution=Symbol("IJupyterExecution"),t.IJupyterSession=Symbol("IJupyterSession"),t.IJupyterSessionManager=Symbol("IJupyterSessionManager"),t.INotebookImporter=Symbol("INotebookImporter"),t.INotebookExporter=Symbol("INotebookExporter"),t.IHistoryProvider=Symbol("IHistoryProvider"),t.IHistory=Symbol("IHistory"),t.IPostOffice=Symbol("IPostOffice"),t.IDataScienceCodeLensProvider=Symbol("IDataScienceCodeLensProvider"),t.ICodeWatcher=Symbol("ICodeWatcher"),function(e){e[e.editing=-1]="editing",e[e.init=0]="init",e[e.executing=1]="executing",e[e.finished=2]="finished",e[e.error=3]="error"}(t.CellState||(t.CellState={})),t.ICodeCssGenerator=Symbol("ICodeCssGenerator"),t.IStatusProvider=Symbol("IStatusProvider"),t.IJupyterCommandFactory=Symbol("IJupyterCommandFactory")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH_1="The number of constructor arguments in the derived class ",t.ARGUMENTS_LENGTH_MISMATCH_2=" must be >= than the number of constructor arguments of its base class.",t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.RunAllCells="python.datascience.runallcells",e.RunCell="python.datascience.runcell",e.RunCurrentCell="python.datascience.runcurrentcell",e.RunCurrentCellAdvance="python.datascience.runcurrentcelladvance",e.ShowHistoryPane="python.datascience.showhistorypane",e.ImportNotebook="python.datascience.importnotebook",e.SelectJupyterURI="python.datascience.selectjupyteruri",e.ExportFileAsNotebook="python.datascience.exportfileasnotebook",e.ExportFileAndOutputAsNotebook="python.datascience.exportfileandoutputasnotebook",e.UndoCells="python.datascience.undocells",e.RedoCells="python.datascience.redocells",e.RemoveAllCells="python.datascience.removeallcells",e.InterruptKernel="python.datascience.interruptkernel",e.RestartKernel="python.datascience.restartkernel",e.ExpandAllCells="python.datascience.expandallcells",e.CollapseAllCells="python.datascience.collapseallcells",e.ExportOutputAsNotebook="python.datascience.exportoutputasnotebook"}(t.Commands||(t.Commands={})),function(e){e.HasCodeCells="python.datascience.hascodecells",e.DataScienceEnabled="python.datascience.featureenabled",e.HaveInteractiveCells="python.datascience.haveinteractivecells",e.HaveRedoableCells="python.datascience.haveredoablecells",e.HaveInteractive="python.datascience.haveinteractive"}(t.EditorContexts||(t.EditorContexts={})),function(e){e.PythonCellMarker=/^(#\s*%%|#\s*\<codecell\>|#\s*In\[\d*?\]|#\s*In\[ \])/,e.PythonMarkdownCellMarker=/^(#\s*%%\s*\[markdown\]|#\s*\<markdowncell\>)/}(t.RegExpValues||(t.RegExpValues={})),function(e){e.StartCell="start_cell",e.FinishCell="finish_cell",e.UpdateCell="update_cell",e.GotoCodeCell="gotocell_code",e.RestartKernel="restart_kernel",e.Export="export_to_ipynb",e.GetAllCells="get_all_cells",e.ReturnAllCells="return_all_cells",e.DeleteCell="delete_cell",e.DeleteAllCells="delete_all_cells",e.Undo="undo",e.Redo="redo",e.ExpandAll="expand_all",e.CollapseAll="collapse_all",e.StartProgress="start_progress",e.StopProgress="stop_progress",e.Interrupt="interrupt",e.SendInfo="send_info",e.SubmitNewCell="submit_new_cell",e.UpdateSettings="update_settings"}(t.HistoryMessages||(t.HistoryMessages={})),function(e){e.ImportNotebook="DATASCIENCE.IMPORT_NOTEBOOK",e.RunCell="DATASCIENCE.RUN_CELL",e.RunCurrentCell="DATASCIENCE.RUN_CURRENT_CELL",e.RunCurrentCellAndAdvance="DATASCIENCE.RUN_CURRENT_CELL_AND_ADVANCE",e.RunAllCells="DATASCIENCE.RUN_ALL_CELLS",e.DeleteAllCells="DATASCIENCE.DELETE_ALL_CELLS",e.DeleteCell="DATASCIENCE.DELETE_CELL",e.GotoSourceCode="DATASCIENCE.GOTO_SOURCE",e.RestartKernel="DATASCIENCE.RESTART_KERNEL",e.ExportNotebook="DATASCIENCE.EXPORT_NOTEBOOK",e.Undo="DATASCIENCE.UNDO",e.Redo="DATASCIENCE.REDO",e.ShowHistoryPane="DATASCIENCE.SHOW_HISTORY_PANE",e.ExpandAll="DATASCIENCE.EXPAND_ALL",e.CollapseAll="DATASCIENCE.COLLAPSE_ALL",e.SelectJupyterURI="DATASCIENCE.SELECT_JUPYTER_URI",e.SetJupyterURIToLocal="DATASCIENCE.SET_JUPYTER_URI_LOCAL",e.SetJupyterURIToUserSpecified="DATASCIENCE.SET_JUPYTER_URI_USER_SPECIFIED",e.Interrupt="DATASCIENCE.INTERRUPT",e.ExportPythonFile="DATASCIENCE.EXPORT_PYTHON_FILE",e.ExportPythonFileAndOutput="DATASCIENCE.EXPORT_PYTHON_FILE_AND_OUTPUT",e.StartJupyter="DATASCIENCE.JUPYTERSTARTUPCOST",e.SubmitCellThroughInput="DATASCIENCE.SUBMITCELLFROMREPL",e.ConnectLocalJupyter="DATASCIENCE.CONNECTLOCALJUPYTER",e.ConnectRemoteJupyter="DATASCIENCE.CONNECTREMOTEJUPYTER",e.ConnectFailedJupyter="DATASCIENCE.CONNECTFAILEDJUPYTER"}(t.Telemetry||(t.Telemetry={})),function(e){e.PythonInteractiveHelpLink="https://aka.ms/pyaiinstall"}(t.HelpLinks||(t.HelpLinks={})),function(e){e.JupyterServerLocalLaunch="local"}(t.Settings||(t.Settings={})),function(e){e.ChangeDirectory=["{0}","import os","try:","\tos.chdir(os.path.join(os.getcwd(), '{1}'))","\tprint(os.getcwd())","except:","\tpass",""]}(t.CodeSnippits||(t.CodeSnippits={})),function(e){e.EmptyFileName="2DB9B899-6519-4E1B-88B0-FA728A274115",e.GeneratedThemeName="ipython-theme"}(t.Identifiers||(t.Identifiers={}))},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";t.fromCallback=function(e){return Object.defineProperty(function(){if("function"!=typeof arguments[arguments.length-1])return new Promise((t,n)=>{arguments[arguments.length]=((e,r)=>{if(e)return n(e);t(r)}),arguments.length++,e.apply(this,arguments)});e.apply(this,arguments)},"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty(function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);e.apply(this,arguments).then(e=>t(null,e),t)},"name",{value:e.name})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=1]="Unknown",e[e.x86=2]="x86",e[e.x64=3]="x64"}(t.Architecture||(t.Architecture={})),function(e){e.Unknown="Unknown",e.Windows="Windows",e.OSX="OSX",e.Linux="Linux"}(t.OSType||(t.OSType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IAvailableLinterActivator=Symbol("IAvailableLinterActivator"),t.ILinterManager=Symbol("ILinterManager"),function(e){e[e.Hint=0]="Hint",e[e.Error=1]="Error",e[e.Warning=2]="Warning",e[e.Information=3]="Information"}(t.LintMessageSeverity||(t.LintMessageSeverity={})),t.ILintingEngine=Symbol("ILintingEngine")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.StopWatch=class{constructor(){this.started=Date.now()}get elapsedTime(){return Date.now()-this.started}reset(){this.started=Date.now()}}},function(e,t,n){"use strict";var r=function(){function e(){}return e.info=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.enableDebug&&console.info(e.TAG+t,n)},e.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.disableWarnings||console.warn(e.TAG+t,n)},e.enableDebug=!1,e.disableWarnings=!1,e.TAG="ApplicationInsights:",e}();e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IInterpreterAutoSeletionProxyService=Symbol("IInterpreterAutoSeletionProxyService"),t.IInterpreterAutoSelectionService=Symbol("IInterpreterAutoSelectionService"),function(e){e.all="all",e.currentPath="currentPath",e.workspaceVirtualEnvs="workspaceEnvs",e.settings="settings",e.cachedInterpreters="cachedInterpreters",e.systemWide="system",e.windowsRegistry="windowsRegistry"}(t.AutoSelectionRule||(t.AutoSelectionRule={})),t.IInterpreterAutoSelectionRule=Symbol("IInterpreterAutoSelectionRule")},function(e,t,n){"use strict";const r=(0,n(33).fromCallback)(n(326)),i=n(327);e.exports={mkdirs:r,mkdirsSync:i,mkdirp:r,mkdirpSync:i,ensureDir:r,ensureDirSync:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDebugConfigurationService=Symbol("IDebugConfigurationService"),t.IDebuggerBanner=Symbol("IDebuggerBanner"),t.IDebugConfigurationProvider=Symbol("IDebugConfigurationProvider"),function(e){e.default="default",e.launchFile="launchFile",e.remoteAttach="remoteAttach",e.launchDjango="launchDjango",e.launchFlask="launchFlask",e.launchModule="launchModule",e.launchPyramid="launchPyramid"}(t.DebugConfigurationType||(t.DebugConfigurationType={})),function(e){e.launchJson="launch.json",e.settingsJson="settings.json"}(t.PythonPathSource||(t.PythonPathSource={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=i},function(e,t){var n;t=e.exports=G,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],s=t.src=[],a=0,c=a++;s[c]="0|[1-9]\\d*";var u=a++;s[u]="[0-9]+";var l=a++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var h=a++;s[h]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var p=a++;s[p]="(?:"+s[c]+"|"+s[l]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[l]+")";var g=a++;s[g]="(?:-("+s[p]+"(?:\\."+s[p]+")*))";var m=a++;s[m]="(?:-?("+s[f]+"(?:\\."+s[f]+")*))";var y=a++;s[y]="[0-9A-Za-z-]+";var v=a++;s[v]="(?:\\+("+s[y]+"(?:\\."+s[y]+")*))";var b=a++,S="v?"+s[d]+s[g]+"?"+s[v]+"?";s[b]="^"+S+"$";var _="[v=\\s]*"+s[h]+s[m]+"?"+s[v]+"?",w=a++;s[w]="^"+_+"$";var P=a++;s[P]="((?:<|>)?=?)";var C=a++;s[C]=s[u]+"|x|X|\\*";var T=a++;s[T]=s[c]+"|x|X|\\*";var I=a++;s[I]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[g]+")?"+s[v]+"?)?)?";var E=a++;s[E]="[v=\\s]*("+s[C]+")(?:\\.("+s[C]+")(?:\\.("+s[C]+")(?:"+s[m]+")?"+s[v]+"?)?)?";var O=a++;s[O]="^"+s[P]+"\\s*"+s[I]+"$";var R=a++;s[R]="^"+s[P]+"\\s*"+s[E]+"$";var x=a++;s[x]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var k=a++;s[k]="(?:~>?)";var D=a++;s[D]="(\\s*)"+s[k]+"\\s+",o[D]=new RegExp(s[D],"g");var A=a++;s[A]="^"+s[k]+s[I]+"$";var j=a++;s[j]="^"+s[k]+s[E]+"$";var N=a++;s[N]="(?:\\^)";var F=a++;s[F]="(\\s*)"+s[N]+"\\s+",o[F]=new RegExp(s[F],"g");var M=a++;s[M]="^"+s[N]+s[I]+"$";var L=a++;s[L]="^"+s[N]+s[E]+"$";var W=a++;s[W]="^"+s[P]+"\\s*("+_+")$|^$";var U=a++;s[U]="^"+s[P]+"\\s*("+S+")$|^$";var H=a++;s[H]="(\\s*)"+s[P]+"\\s*("+_+"|"+s[I]+")",o[H]=new RegExp(s[H],"g");var B=a++;s[B]="^\\s*("+s[I]+")\\s+-\\s+("+s[I]+")\\s*$";var V=a++;s[V]="^\\s*("+s[E]+")\\s+-\\s+("+s[E]+")\\s*$";var q=a++;s[q]="(<|>)?=?\\s*\\*";for(var $=0;$<a;$++)n($,s[$]),o[$]||(o[$]=new RegExp(s[$]));function K(e,t){if(e instanceof G)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t?o[w]:o[b]).test(e))return null;try{return new G(e,t)}catch(e){return null}}function G(e,t){if(e instanceof G){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof G))return new G(e,t);n("SemVer",e,t),this.loose=t;var s=e.trim().match(t?o[w]:o[b]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=K,t.valid=function(e,t){var n=K(e,t);return n?n.version:null},t.clean=function(e,t){var n=K(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=G,G.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},G.prototype.toString=function(){return this.version},G.prototype.compare=function(e){return n("SemVer.compare",this.version,this.loose,e),e instanceof G||(e=new G(e,this.loose)),this.compareMain(e)||this.comparePre(e)},G.prototype.compareMain=function(e){return e instanceof G||(e=new G(e,this.loose)),J(this.major,e.major)||J(this.minor,e.minor)||J(this.patch,e.patch)},G.prototype.comparePre=function(e){if(e instanceof G||(e=new G(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return J(r,i)}while(++t)},G.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new G(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Q(e,t))return null;var n=K(e),r=K(t);if(n.prerelease.length||r.prerelease.length){for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return"pre"+i;return"prerelease"}for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return i},t.compareIdentifiers=J;var z=/^[0-9]+$/;function J(e,t){var n=z.test(e),r=z.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}function Y(e,t,n){return new G(e,n).compare(new G(t,n))}function X(e,t,n){return Y(e,t,n)>0}function Z(e,t,n){return Y(e,t,n)<0}function Q(e,t,n){return 0===Y(e,t,n)}function ee(e,t,n){return 0!==Y(e,t,n)}function te(e,t,n){return Y(e,t,n)>=0}function ne(e,t,n){return Y(e,t,n)<=0}function re(e,t,n,r){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e!==n;break;case"":case"=":case"==":i=Q(e,n,r);break;case"!=":i=ee(e,n,r);break;case">":i=X(e,n,r);break;case">=":i=te(e,n,r);break;case"<":i=Z(e,n,r);break;case"<=":i=ne(e,n,r);break;default:throw new TypeError("Invalid operator: "+t)}return i}function ie(e,t){if(e instanceof ie){if(e.loose===t)return e;e=e.value}if(!(this instanceof ie))return new ie(e,t);n("comparator",e,t),this.loose=t,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return J(t,e)},t.major=function(e,t){return new G(e,t).major},t.minor=function(e,t){return new G(e,t).minor},t.patch=function(e,t){return new G(e,t).patch},t.compare=Y,t.compareLoose=function(e,t){return Y(e,t,!0)},t.rcompare=function(e,t,n){return Y(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=X,t.lt=Z,t.eq=Q,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=ie;var oe={};function se(e,t){if(e instanceof se)return e.loose===t?e:new se(e.raw,t);if(e instanceof ie)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,n,r,i,o,s,a,c,u,l,d,h){return((t=ae(n)?"":ae(r)?">="+n+".0.0":ae(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ae(c)?"":ae(u)?"<"+(+c+1)+".0.0":ae(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+a)).trim()}function ue(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(r=0;r<e.length;r++)if(n(e[r].semver),e[r].semver!==oe&&e[r].semver.prerelease.length>0){var i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function de(e,t,n,r){var i,o,s,a,c;switch(e=new G(e,r),t=new se(t,r),n){case">":i=X,o=ne,s=Z,a=">",c=">=";break;case"<":i=Z,o=te,s=X,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var u=0;u<t.set.length;++u){var l=null,d=null;if(t.set[u].forEach(function(e){e.semver===oe&&(e=new ie(">=0.0.0")),l=l||e,d=d||e,i(e.semver,l.semver,r)?l=e:s(e.semver,d.semver,r)&&(d=e)}),l.operator===a||l.operator===c)return!1;if((!d.operator||d.operator===a)&&o(e,d.semver))return!1;if(d.operator===c&&s(e,d.semver))return!1}return!0}ie.prototype.parse=function(e){var t=this.loose?o[W]:o[U],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new G(n[2],this.loose):this.semver=oe},ie.prototype.toString=function(){return this.value},ie.prototype.test=function(e){return n("Comparator.test",e,this.loose),this.semver===oe||("string"==typeof e&&(e=new G(e,this.loose)),re(e,this.operator,this.semver,this.loose))},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||c},t.Range=se,se.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),n("range",e,t);var r=t?o[V]:o[B];e=e.replace(r,ce),n("hyphen replace",e),e=e.replace(o[H],"$1$2$3"),n("comparator trim",e,o[H]),e=(e=(e=e.replace(o[D],"$1~")).replace(o[F],"$1^")).split(/\s+/).join(" ");var i=t?o[W]:o[U],s=e.split(" ").map(function(e){return function(e,t){return n("comp",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var r=t?o[L]:o[M];return e.replace(r,function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),"-"!==s.charAt(0)&&(s="-"+s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var r=t?o[j]:o[A];return e.replace(r,function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ae(r)?a="":ae(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ae(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),"-"!==s.charAt(0)&&(s="-"+s),a=">="+r+"."+i+"."+o+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var r=t?o[R]:o[O];return e.replace(r,function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var c=ae(i),u=c||ae(o),l=u||ae(s),d=l;return"="===r&&d&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&d?(u&&(o=0),l&&(s=0),">"===r?(r=">=",u?(i=+i+1,o=0,s=0):l&&(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):u?t=">="+i+".0.0 <"+(+i+1)+".0.0":l&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[q],"")}(e,t),n("stars",e),e}(e,t)}).join(" ").split(/\s+/);return this.loose&&(s=s.filter(function(e){return!!e.match(i)})),s=s.map(function(e){return new ie(e,t)})},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new se(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new G(e,this.loose));for(var t=0;t<this.set.length;t++)if(ue(this.set[t],e))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new G(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new se(t,n)}catch(e){return null}return e.forEach(function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new G(r=e,n)))}),r},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return de(e,t,"<",n)},t.gtr=function(e,t,n){return de(e,t,">",n)},t.outside=de,t.prerelease=function(e,t){var n=K(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof G)return e;if("string"!=typeof e)return null;var t=e.match(o[x]);return null==t?null:K((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});const i=n(48);t.ErrorCodes=i.ErrorCodes,t.ResponseError=i.ResponseError,t.CancellationToken=i.CancellationToken,t.CancellationTokenSource=i.CancellationTokenSource,t.Disposable=i.Disposable,t.Event=i.Event,t.Emitter=i.Emitter,t.Trace=i.Trace,t.SetTraceNotification=i.SetTraceNotification,t.LogTraceNotification=i.LogTraceNotification,t.RequestType=i.RequestType,t.RequestType0=i.RequestType0,t.NotificationType=i.NotificationType,t.NotificationType0=i.NotificationType0,t.MessageReader=i.MessageReader,t.MessageWriter=i.MessageWriter,t.ConnectionStrategy=i.ConnectionStrategy,t.StreamMessageReader=i.StreamMessageReader,t.StreamMessageWriter=i.StreamMessageWriter,t.IPCMessageReader=i.IPCMessageReader,t.IPCMessageWriter=i.IPCMessageWriter,t.createClientPipeTransport=i.createClientPipeTransport,t.createServerPipeTransport=i.createServerPipeTransport,t.generateRandomPipeName=i.generateRandomPipeName,t.createClientSocketTransport=i.createClientSocketTransport,t.createServerSocketTransport=i.createServerSocketTransport,r(n(412)),r(n(413)),t.createProtocolConnection=function(e,t,n,r){return i.createMessageConnection(e,t,n,r)}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(281)),r(n(159)),r(n(296))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=r.basename(__dirname);t.EXTENSION_ROOT_DIR="client"===i?r.join(__dirname,"..",".."):r.join(__dirname,"..","..","..","..")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WINDOWS_PATH_VARIABLE_NAME="Path",t.NON_WINDOWS_PATH_VARIABLE_NAME="PATH",t.IS_WINDOWS=/^win/.test(process.platform)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),s=n(407);t.RequestType=s.RequestType,t.RequestType0=s.RequestType0,t.RequestType1=s.RequestType1,t.RequestType2=s.RequestType2,t.RequestType3=s.RequestType3,t.RequestType4=s.RequestType4,t.RequestType5=s.RequestType5,t.RequestType6=s.RequestType6,t.RequestType7=s.RequestType7,t.RequestType8=s.RequestType8,t.RequestType9=s.RequestType9,t.ResponseError=s.ResponseError,t.ErrorCodes=s.ErrorCodes,t.NotificationType=s.NotificationType,t.NotificationType0=s.NotificationType0,t.NotificationType1=s.NotificationType1,t.NotificationType2=s.NotificationType2,t.NotificationType3=s.NotificationType3,t.NotificationType4=s.NotificationType4,t.NotificationType5=s.NotificationType5,t.NotificationType6=s.NotificationType6,t.NotificationType7=s.NotificationType7,t.NotificationType8=s.NotificationType8,t.NotificationType9=s.NotificationType9;var a=n(122);t.MessageReader=a.MessageReader,t.StreamMessageReader=a.StreamMessageReader,t.IPCMessageReader=a.IPCMessageReader,t.SocketMessageReader=a.SocketMessageReader;var c=n(123);t.MessageWriter=c.MessageWriter,t.StreamMessageWriter=c.StreamMessageWriter,t.IPCMessageWriter=c.IPCMessageWriter,t.SocketMessageWriter=c.SocketMessageWriter;var u=n(92);t.Disposable=u.Disposable,t.Event=u.Event,t.Emitter=u.Emitter;var l=n(408);t.CancellationTokenSource=l.CancellationTokenSource,t.CancellationToken=l.CancellationToken;var d,h,p,f,g,m=n(409);i(n(410)),i(n(411)),function(e){e.type=new s.NotificationType("$/cancelRequest")}(d||(d={})),t.NullLogger=Object.freeze({error:function(){},warn:function(){},info:function(){},log:function(){}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(h=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(h=t.Trace||(t.Trace={})),function(e){e.type=new s.NotificationType("$/setTraceNotification")}(p=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new s.NotificationType("$/logTraceNotification")}(f=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(g=t.ConnectionErrors||(t.ConnectionErrors={}));var y,v=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,Object.setPrototypeOf(i,t.prototype),i}return r(t,e),t}(Error);function b(e,t,n,r){var i,a,c=0,b=0,S=0,_="2.0",w=void 0,P=Object.create(null),C=void 0,T=Object.create(null),I=new m.LinkedMap,E=Object.create(null),O=Object.create(null),R=h.Off,x=y.New,k=new u.Emitter,D=new u.Emitter,A=new u.Emitter,j=new u.Emitter;function N(e){return"req-"+e.toString()}function F(e,t){s.isRequestMessage(t)?e.set(N(t.id),t):s.isResponseMessage(t)?e.set(function(e){return null===e?"res-unknown-"+(++S).toString():"res-"+e.toString()}(t.id),t):e.set("not-"+(++b).toString(),t)}function M(e){}function L(){return x===y.Listening}function W(){return x===y.Closed}function U(){return x===y.Disposed}function H(){x!==y.New&&x!==y.Listening||(x=y.Closed,D.fire(void 0))}function B(){i||0===I.size||(i=setImmediate(function(){i=void 0,function(){if(0===I.size)return;var e=I.shift();try{s.isRequestMessage(e)?function(e){if(U())return;function n(n,r,i){var o={jsonrpc:_,id:e.id};n instanceof s.ResponseError?o.error=n.toJson():o.result=void 0===n?null:n,q(o,r,i),t.write(o)}function r(n,r,i){var o={jsonrpc:_,id:e.id,error:n.toJson()};q(o,r,i),t.write(o)}!function(e){if(R===h.Off||!a)return;var t=void 0;R===h.Verbose&&e.params&&(t="Params: "+JSON.stringify(e.params,null,4)+"\n\n");a.log("Received request '"+e.method+" - ("+e.id+")'.",t)}(e);var i,c,u=P[e.method];u&&(i=u.type,c=u.handler);var d=Date.now();if(c||w){var p=new l.CancellationTokenSource,f=String(e.id);O[f]=p;try{var g=void 0,m=g=void 0===e.params||void 0!==i&&0===i.numberOfParams?c?c(p.token):w(e.method,p.token):o.array(e.params)&&(void 0===i||i.numberOfParams>1)?c?c.apply(void 0,e.params.concat([p.token])):w.apply(void 0,[e.method].concat(e.params,[p.token])):c?c(e.params,p.token):w(e.method,e.params,p.token);g?m.then?m.then(function(t){delete O[f],n(t,e.method,d)},function(t){delete O[f],t instanceof s.ResponseError?r(t,e.method,d):t&&o.string(t.message)?r(new s.ResponseError(s.ErrorCodes.InternalError,"Request "+e.method+" failed with message: "+t.message),e.method,d):r(new s.ResponseError(s.ErrorCodes.InternalError,"Request "+e.method+" failed unexpectedly without providing any details."),e.method,d)}):(delete O[f],n(g,e.method,d)):(delete O[f],function(n,r,i){void 0===n&&(n=null);var o={jsonrpc:_,id:e.id,result:n};q(o,r,i),t.write(o)}(g,e.method,d))}catch(t){delete O[f],t instanceof s.ResponseError?n(t,e.method,d):t&&o.string(t.message)?r(new s.ResponseError(s.ErrorCodes.InternalError,"Request "+e.method+" failed with message: "+t.message),e.method,d):r(new s.ResponseError(s.ErrorCodes.InternalError,"Request "+e.method+" failed unexpectedly without providing any details."),e.method,d)}}else r(new s.ResponseError(s.ErrorCodes.MethodNotFound,"Unhandled method "+e.method),e.method,d)}(e):s.isNotificationMessage(e)?function(e){if(U())return;var t,r=void 0;if(e.method===d.type.method)t=function(e){var t=e.id,n=O[String(t)];n&&n.cancel()};else{var i=T[e.method];i&&(t=i.handler,r=i.type)}if(t||C)try{!function(e){if(R===h.Off||!a||e.method===f.type.method)return;var t=void 0;R===h.Verbose&&(t=e.params?"Params: "+JSON.stringify(e.params,null,4)+"\n\n":"No parameters provided.\n\n");a.log("Received notification '"+e.method+"'.",t)}(e),void 0===e.params||void 0!==r&&0===r.numberOfParams?t?t():C(e.method):o.array(e.params)&&(void 0===r||r.numberOfParams>1)?t?t.apply(void 0,e.params):C.apply(void 0,[e.method].concat(e.params)):t?t(e.params):C(e.method,e.params)}catch(t){t.message?n.error("Notification handler '"+e.method+"' failed with message: "+t.message):n.error("Notification handler '"+e.method+"' failed unexpectedly.")}else A.fire(e)}(e):s.isResponseMessage(e)?function(e){if(U())return;if(null===e.id)e.error?n.error("Received response message without id: Error is: \n"+JSON.stringify(e.error,void 0,4)):n.error("Received response message without id. No further error information provided.");else{var t=String(e.id),r=E[t];if(function(e,t){if(R===h.Off||!a)return;var n=void 0;R===h.Verbose&&(e.error&&e.error.data?n="Error data: "+JSON.stringify(e.error.data,null,4)+"\n\n":e.result?n="Result: "+JSON.stringify(e.result,null,4)+"\n\n":void 0===e.error&&(n="No result returned.\n\n"));if(t){var r=e.error?" Request failed: "+e.error.message+" ("+e.error.code+").":"";a.log("Received response '"+t.method+" - ("+e.id+")' in "+(Date.now()-t.timerStart)+"ms."+r,n)}else a.log("Received response "+e.id+" without active response promise.",n)}(e,r),r){delete E[t];try{if(e.error){var i=e.error;r.reject(new s.ResponseError(i.code,i.message,i.data))}else{if(void 0===e.result)throw new Error("Should never happen.");r.resolve(e.result)}}catch(i){i.message?n.error("Response handler '"+r.method+"' failed with message: "+i.message):n.error("Response handler '"+r.method+"' failed unexpectedly.")}}}}(e):function(e){if(!e)return void n.error("Received empty message.");n.error("Received message which is neither a response nor a notification message:\n"+JSON.stringify(e,null,4));var t=e;if(o.string(t.id)||o.number(t.id)){var r=String(t.id),i=E[r];i&&i.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{B()}}()}))}e.onClose(H),e.onError(function(e){k.fire([e,void 0,void 0])}),t.onClose(H),t.onError(function(e){k.fire(e)});var V=function(e){try{if(s.isNotificationMessage(e)&&e.method===d.type.method){var n=N(e.params.id),i=I.get(n);if(s.isRequestMessage(i)){var o=r&&r.cancelUndispatched?r.cancelUndispatched(i,M):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return I.delete(n),o.id=i.id,q(o,e.method,Date.now()),void t.write(o)}}F(I,e)}finally{B()}};function q(e,t,n){if(R!==h.Off&&a){var r=void 0;R===h.Verbose&&(e.error&&e.error.data?r="Error data: "+JSON.stringify(e.error.data,null,4)+"\n\n":e.result?r="Result: "+JSON.stringify(e.result,null,4)+"\n\n":void 0===e.error&&(r="No result returned.\n\n")),a.log("Sending response '"+t+" - ("+e.id+")'. Processing request took "+(Date.now()-n)+"ms",r)}}function $(){if(W())throw new v(g.Closed,"Connection is closed.");if(U())throw new v(g.Disposed,"Connection is disposed.")}function K(e){return void 0===e?null:e}function G(e,t){var n,r=e.numberOfParams;switch(r){case 0:n=null;break;case 1:n=K(t[0]);break;default:n=[];for(var i=0;i<t.length&&i<r;i++)n.push(K(t[i]));if(t.length<r)for(i=t.length;i<r;i++)n.push(null)}return n}var z={sendNotification:function(e){for(var n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if($(),o.string(e))switch(n=e,i.length){case 0:r=null;break;case 1:r=i[0];break;default:r=i}else n=e.method,r=G(e,i);var c={jsonrpc:_,method:n,params:r};!function(e){if(R!==h.Off&&a){var t=void 0;R===h.Verbose&&(t=e.params?"Params: "+JSON.stringify(e.params,null,4)+"\n\n":"No parameters provided.\n\n"),a.log("Sending notification '"+e.method+"'.",t)}}(c),t.write(c)},onNotification:function(e,t){$(),o.func(e)?C=e:t&&(o.string(e)?T[e]={type:void 0,handler:t}:T[e.method]={type:e,handler:t})},sendRequest:function(e){for(var n,r,i=[],u=1;u<arguments.length;u++)i[u-1]=arguments[u];$(),function(){if(!L())throw new Error("Call listen() first.")}();var p=void 0;if(o.string(e))switch(n=e,i.length){case 0:r=null;break;case 1:l.CancellationToken.is(i[0])?(r=null,p=i[0]):r=K(i[0]);break;default:var f=i.length-1;l.CancellationToken.is(i[f])?(p=i[f],r=2===i.length?K(i[0]):i.slice(0,f).map(function(e){return K(e)})):r=i.map(function(e){return K(e)})}else{n=e.method,r=G(e,i);var g=e.numberOfParams;p=l.CancellationToken.is(i[g])?i[g]:void 0}var m=c++,y=new Promise(function(e,i){var o={jsonrpc:_,id:m,method:n,params:r},c={method:n,timerStart:Date.now(),resolve:e,reject:i};!function(e){if(R!==h.Off&&a){var t=void 0;R===h.Verbose&&e.params&&(t="Params: "+JSON.stringify(e.params,null,4)+"\n\n"),a.log("Sending request '"+e.method+" - ("+e.id+")'.",t)}}(o);try{t.write(o)}catch(e){c.reject(new s.ResponseError(s.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),c=null}c&&(E[String(m)]=c)});return p&&p.onCancellationRequested(function(){z.sendNotification(d.type,{id:m})}),y},onRequest:function(e,t){$(),o.func(e)?w=e:t&&(o.string(e)?P[e]={type:void 0,handler:t}:P[e.method]={type:e,handler:t})},trace:function(e,t,n){void 0===n&&(n=!1),a=(R=e)===h.Off?void 0:t,!n||W()||U()||z.sendNotification(p.type,{value:h.toString(e)})},onError:k.event,onClose:D.event,onUnhandledNotification:A.event,onDispose:j.event,dispose:function(){if(!U()){x=y.Disposed,j.fire(void 0);var n=new Error("Connection got disposed.");Object.keys(E).forEach(function(e){E[e].reject(n)}),E=Object.create(null),O=Object.create(null),I=new m.LinkedMap,o.func(t.dispose)&&t.dispose(),o.func(e.dispose)&&e.dispose()}},listen:function(){$(),function(){if(L())throw new v(g.AlreadyListening,"Connection is already listening")}(),x=y.Listening,e.listen(V)},inspect:function(){console.log("inspect")}};return z.onNotification(f.type,function(e){R!==h.Off&&a&&a.log(e.message,R===h.Verbose?e.verbose:void 0)}),z}t.ConnectionError=v,function(e){e.is=function(e){var t=e;return t&&o.func(t.cancelUndispatched)}}(t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(y||(y={})),t.createMessageConnection=function(e,n,r,i){return r||(r=t.NullLogger),b(function(e){return void 0!==e.listen&&void 0===e.read}(e)?e:new a.StreamMessageReader(e),function(e){return void 0!==e.write&&void 0===e.end}(n)?n:new c.StreamMessageWriter(n),r,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(11);t.PTVSD_PATH=r.join(i.EXTENSION_ROOT_DIR,"pythonFiles","lib","python"),t.DebuggerTypeName="python"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=n(24);function o(e,t,n,i,o){var s={},a="number"==typeof o,c=void 0!==o&&a?o.toString():n;if(a&&void 0!==n)throw new Error(r.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(s=Reflect.getMetadata(e,t));var u=s[c];if(Array.isArray(u))for(var l=0,d=u;l<d.length;l++){var h=d[l];if(h.key===i.key)throw new Error(r.DUPLICATED_METADATA+" "+h.key)}else u=[];u.push(i),s[c]=u,Reflect.defineMetadata(e,s,t)}function s(e,t){Reflect.decorate(e,t)}t.tagParameter=function(e,t,n,r){o(i.TAGGED,e,t,r,n)},t.tagProperty=function(e,t,n){o(i.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"==typeof n?s([function(e,t){return function(n,r){t(n,r,e)}}(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):s([e],t)}},function(e,t,n){"use strict";var r=function(){return function(){}}();e.exports=r},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=n(111),o=n(112),s=n(62),a=n(113),c=n(37),u=n(78),l=function(){function e(){}return e.getCookie=function(t,n){var r="";if(t&&t.length&&"string"==typeof n)for(var i=t+"=",o=n.split(";"),s=0;s<o.length;s++){n=o[s];if((n=e.trim(n))&&0===n.indexOf(i)){r=n.substring(i.length,o[s].length);break}}return r},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},n=e.map(function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)}).join(""),r=new Buffer(n,"binary").toString("base64");return r.substr(0,r.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",i=0;i<4;i++)r+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var o=n[8+4*Math.random()|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,i=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,(i>0?i+".":"")+r+":"+n+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var n={};for(var r in t){var i="",o=t[r],s=typeof o;if(e.isPrimitive(o))i=o.toString();else if(null===o||"undefined"===s)i="";else{if("function"===s){c.info("key: "+r+" was function; will not serialize");continue}var a=e.isArray(o)?o:e.extractObject(o);try{i=e.isPrimitive(a)?a:JSON.stringify(a)}catch(e){i=o.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+r+", could not be serialized")}}n[r]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return n}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||0==n.length||!t)return!0;for(var r=0;r<n.length;r++){if(new RegExp(n[r].replace(/\./g,".").replace(/\*/g,".*")).test(s.parse(t).hostname))return!1}return!0},e.getCorrelationContextTarget=function(e,t){var n=e.headers&&e.headers[u.requestContextHeader];if(n)for(var r=n.split(","),i=0;i<r.length;++i){var o=r[i].split("=");if(2==o.length&&o[0]==t)return o[1]}},e.makeRequest=function(t,n,a,u){n&&0===n.indexOf("//")&&(n="https:"+n);var l=s.parse(n),d=r({},a,{host:l.hostname,port:l.port,path:l.pathname}),h=void 0;if("https:"===l.protocol&&(h=t.proxyHttpsUrl||void 0),"http:"===l.protocol&&(h=t.proxyHttpUrl||void 0),h){0===h.indexOf("//")&&(h="http:"+h);var p=s.parse(h);"https:"===p.protocol?(c.info("Proxies that use HTTPS are not supported"),h=void 0):d=r({},d,{host:p.hostname,port:p.port||"80",path:n,headers:r({},d.headers,{Host:l.hostname})})}var f="https:"===l.protocol&&!h;return f&&void 0!==t.httpsAgent?d.agent=t.httpsAgent:f||void 0===t.httpAgent?f&&(d.agent=e.tlsRestrictedAgent):d.agent=t.httpAgent,f?o.request(d,u):i.request(d,u)},e.MAX_PROPERTY_LENGTH=1024,e.tlsRestrictedAgent=new o.Agent({secureOptions:a.SSL_OP_NO_SSLv2|a.SSL_OP_NO_SSLv3|a.SSL_OP_NO_TLSv1|a.SSL_OP_NO_TLSv1_1}),e}();e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDiagnosticsCommandFactory=Symbol("IDiagnosticsCommandFactory")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(5);t.DiagnosticCommandPromptHandlerServiceId="DiagnosticCommandPromptHandlerServiceId";let l=class{constructor(e){this.appShell=e.get(c.IApplicationShell)}handle(e,t={commandPrompts:[]}){return o(this,void 0,void 0,function*(){const n=t.commandPrompts.map(e=>e.prompt),r=yield this.displayMessage(t.message?t.message:e.message,e.severity,n);if(!r)return;const i=t.commandPrompts.find(e=>e.prompt===r);i&&i.command&&(yield i.command.invoke())})}displayMessage(e,t,n){return o(this,void 0,void 0,function*(){switch(t){case a.DiagnosticSeverity.Error:return this.appShell.showErrorMessage(e,...n);case a.DiagnosticSeverity.Warning:return this.appShell.showWarningMessage(e,...n);default:return this.appShell.showInformationMessage(e,...n)}})}};l=r([s.injectable(),i(0,s.inject(u.IServiceContainer))],l),t.DiagnosticCommandPromptHandlerService=l},function(e,t,n){"use strict";const r=n(33).fromPromise,i=n(167);e.exports={pathExists:r(function(e){return i.access(e).then(()=>!0).catch(()=>!1)}),pathExistsSync:i.existsSync}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2);n(8);const o=n(11),s=n(12),a=n(348),c=n(349);t.debounce=function(e){return function(t,n,r){const i=r.value;e=e&&o.isTestExecution()?void 0:e,r.value=c(function(){return i.apply(this,arguments)},e)}},t.clearCachedResourceSpecificIngterpreterData=function(e,t,r=n(2)){new a.InMemoryInterpreterSpecificCache(e,0,[t],r).clear()},t.cacheResourceSpecificInterpreterData=function(e,t,i=n(2)){return function(n,o,c){const u=c.value;c.value=function(...n){return r(this,void 0,void 0,function*(){const r=new a.InMemoryInterpreterSpecificCache(e,t,n,i);if(r.hasData)return s.traceVerbose(`Cached data exists ${e}, ${n[0]?n[0].fsPath:"<No Resource>"}`),Promise.resolve(r.data);const o=u.apply(this,n);return o.then(e=>r.data=e).ignoreErrors(),o})}}},t.swallowExceptions=function(e){return function(t,n,r){const i=r.value,a=`Python Extension (Error in ${e}, method:${n}):`;r.value=function(...e){try{const t=i.apply(this,e);if(t&&"function"==typeof t.then&&"function"==typeof t.catch)return t.catch(e=>{o.isTestExecution()||s.traceError(a,e)})}catch(e){if(o.isTestExecution())return;s.traceError(a,e)}}}},t.displayProgress=function(e,t=i.ProgressLocation.Window){return function(n,s,a){const c=a.value;a.value=function(...n){return r(this,void 0,void 0,function*(){const r={location:t,title:e},s=c.apply(this,n);return o.isTestExecution()||i.window.withProgress(r,()=>s),s})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=Object.prototype.toString;function i(e){return"[object String]"===r.call(e)}function o(e){return"[object Function]"===r.call(e)}function s(e){return Array.isArray(e)}t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"[object Number]"===r.call(e)},t.error=function(e){return"[object Error]"===r.call(e)},t.func=o,t.array=s,t.stringArray=function(e){return s(e)&&e.every(e=>i(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&o(e.then)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(4);n(8);const s=n(14),a=n(1),c=n(640),u=n(35),l=n(186),d="(?<line>\\d+),(?<column>-?\\d+),(?<type>\\w+),(?<code>\\w\\d+):(?<message>.*)\\r?(\\n|$)";function h(e,t){const n=l(t,"g").exec(e);if(null!==n)return n.groups()}function p(e,t,n,r=0){const i=h(e,t);if(i)return i.line=Number(i.line),i.column=Number(i.column),{code:i.code,message:i.message,column:isNaN(i.column)||i.column<=0?0:i.column-r,line:i.line,type:i.type,provider:n}}t.matchNamedRegEx=h,t.parseLine=p;t.BaseLinter=class{constructor(e,t,n,r=0){this.outputChannel=t,this.serviceContainer=n,this.columnOffset=r,this._info=n.get(u.ILinterManager).getLinterInfo(e),this.errorHandler=new c.ErrorHandler(this.info.product,t,n),this.configService=n.get(a.IConfigurationService),this.workspace=n.get(o.IWorkspaceService)}get pythonSettings(){return this._pythonSettings}get info(){return this._info}lint(e,t){return r(this,void 0,void 0,function*(){return this._pythonSettings=this.configService.getSettings(e.uri),this.runLinter(e,t)})}getWorkspaceRootPath(e){const t=this.workspace.getWorkspaceFolder(e.uri),n=t&&"string"==typeof t.uri.fsPath?t.uri.fsPath:void 0;return"string"==typeof n?n:i.dirname(e.uri.fsPath)}get logger(){return this.serviceContainer.get(a.ILogger)}parseMessagesSeverity(e,t){if(t[e]){const n=t[e];switch(n){case"Error":return u.LintMessageSeverity.Error;case"Hint":return u.LintMessageSeverity.Hint;case"Information":return u.LintMessageSeverity.Information;case"Warning":return u.LintMessageSeverity.Warning;default:if(u.LintMessageSeverity[n])return u.LintMessageSeverity[n]}}return u.LintMessageSeverity.Information}run(e,t,n,i=d){return r(this,void 0,void 0,function*(){if(!this.info.isEnabled(t.uri))return[];const r=this.info.getExecutionInfo(e,t.uri),o=this.getWorkspaceRootPath(t),a=this.serviceContainer.get(s.IPythonToolExecutionService);try{const e=yield a.exec(r,{cwd:o,token:n,mergeStdOutErr:!1},t.uri);return this.displayLinterResultHeader(e.stdout),yield this.parseMessages(e.stdout,t,n,i)}catch(e){return this.handleError(e,t.uri,r),[]}})}parseMessages(e,t,n,i){return r(this,void 0,void 0,function*(){const t=e.splitLines({removeEmptyEntries:!1,trim:!1});return this.parseLines(t,i)})}handleError(e,t,n){this.errorHandler.handleError(e,t,n).catch(this.logger.logError.bind(this,"Error in errorHandler.handleError"))}parseLine(e,t){return p(e,t,this.info.id,this.columnOffset)}parseLines(e,t){const n=[];for(const r of e)try{const e=this.parseLine(r,t);if(e&&(n.push(e),n.length>=this.pythonSettings.linting.maxNumberOfProblems))break}catch(e){this.logger.logError(`Linter '${this.info.id}' failed to parse the line '${r}.`,e)}return n}displayLinterResultHeader(e){this.outputChannel.append(`${"#".repeat(10)}Linting Output - ${this.info.id}${"#".repeat(10)}\n`),this.outputChannel.append(e)}}},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guid=function(){function e(){return Math.floor(65536*(Math.random()+1)).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},function(e,t){e.exports=require("crypto")},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const a=n(0),c=n(4),u=n(7),l=n(9),d=n(26);let h=class{constructor(e,t,n,r,i,o="default"){this.code=e,this.message=t,this.severity=n,this.scope=r,this.resource=i,this.invokeHandler=o}};h=i([a.injectable()],h),t.BaseDiagnostic=h;let p=r=class{constructor(e,t,n=!1){this.supportedDiagnosticCodes=e,this.serviceContainer=t,this.runInBackground=n,this.filterService=t.get(d.IDiagnosticFilterService)}handle(e){return s(this,void 0,void 0,function*(){if(0===e.length)return;const t=e.filter(e=>{if(e.invokeHandler&&"always"===e.invokeHandler)return!0;const t=this.getDiagnosticsKey(e);return-1===r.handledDiagnosticCodeKeys.indexOf(t)&&(r.handledDiagnosticCodeKeys.push(t),!0)});yield this.onHandle(t)})}canHandle(e){return s(this,void 0,void 0,function*(){return u.sendTelemetryEvent(l.EventName.DIAGNOSTICS_MESSAGE,void 0,{code:e.code}),this.supportedDiagnosticCodes.filter(t=>t===e.code).length>0})}getDiagnosticsKey(e){if(e.scope===d.DiagnosticScope.Global)return e.code;const t=this.serviceContainer.get(c.IWorkspaceService),n=e.resource?t.getWorkspaceFolder(e.resource):void 0;return`${e.code}dbe75733-0407-4124-a1b2-ca769dc30523${n?n.uri.fsPath:""}`}};p.handledDiagnosticCodeKeys=[],p=r=i([a.injectable(),o(0,a.unmanaged()),o(1,a.unmanaged()),o(2,a.unmanaged())],p),t.BaseDiagnosticsService=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.InvalidEnvironmentPathVariableDiagnostic="InvalidEnvironmentPathVariableDiagnostic",e.InvalidDebuggerTypeDiagnostic="InvalidDebuggerTypeDiagnostic",e.NoPythonInterpretersDiagnostic="NoPythonInterpretersDiagnostic",e.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic="MacInterpreterSelectedAndNoOtherInterpretersDiagnostic",e.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic="MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic",e.InvalidPythonPathInDebuggerSettingsDiagnostic="InvalidPythonPathInDebuggerSettingsDiagnostic",e.InvalidPythonPathInDebuggerLaunchDiagnostic="InvalidPythonPathInDebuggerLaunchDiagnostic",e.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic="EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic",e.NoCurrentlySelectedPythonInterpreterDiagnostic="InvalidPythonInterpreterDiagnostic",e.LSNotSupportedDiagnostic="LSNotSupportedDiagnostic"}(t.DiagnosticCodes||(t.DiagnosticCodes={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(28),s=n(3),a=n(345),c=n(2),u=n(11);n(8);const l=n(47),d=n(14),h=n(1),p=n(16),f=n(56),g=n(36),m=n(70),y=n(10),v=n(12),b=new Map;b.set("none",c.CompletionItemKind.Value),b.set("type",c.CompletionItemKind.Class),b.set("tuple",c.CompletionItemKind.Class),b.set("dict",c.CompletionItemKind.Class),b.set("dictionary",c.CompletionItemKind.Class),b.set("function",c.CompletionItemKind.Function),b.set("lambda",c.CompletionItemKind.Function),b.set("generator",c.CompletionItemKind.Function),b.set("class",c.CompletionItemKind.Class),b.set("instance",c.CompletionItemKind.Reference),b.set("method",c.CompletionItemKind.Method),b.set("builtin",c.CompletionItemKind.Class),b.set("builtinfunction",c.CompletionItemKind.Function),b.set("module",c.CompletionItemKind.Module),b.set("file",c.CompletionItemKind.File),b.set("xrange",c.CompletionItemKind.Class),b.set("slice",c.CompletionItemKind.Class),b.set("traceback",c.CompletionItemKind.Class),b.set("frame",c.CompletionItemKind.Class),b.set("buffer",c.CompletionItemKind.Class),b.set("dictproxy",c.CompletionItemKind.Class),b.set("funcdef",c.CompletionItemKind.Function),b.set("property",c.CompletionItemKind.Property),b.set("import",c.CompletionItemKind.Module),b.set("keyword",c.CompletionItemKind.Keyword),b.set("constant",c.CompletionItemKind.Variable),b.set("variable",c.CompletionItemKind.Variable),b.set("value",c.CompletionItemKind.Value),b.set("param",c.CompletionItemKind.Variable),b.set("statement",c.CompletionItemKind.Keyword);const S=new Map;function _(e){if(b.has(e)){const t=b.get(e);if(t)return t}return c.CompletionItemKind.Keyword}function w(e){if(S.has(e)){const t=S.get(e);if(t)return t}return c.SymbolKind.Variable}var P;S.set("none",c.SymbolKind.Variable),S.set("type",c.SymbolKind.Class),S.set("tuple",c.SymbolKind.Class),S.set("dict",c.SymbolKind.Class),S.set("dictionary",c.SymbolKind.Class),S.set("function",c.SymbolKind.Function),S.set("lambda",c.SymbolKind.Function),S.set("generator",c.SymbolKind.Function),S.set("class",c.SymbolKind.Class),S.set("instance",c.SymbolKind.Class),S.set("method",c.SymbolKind.Method),S.set("builtin",c.SymbolKind.Class),S.set("builtinfunction",c.SymbolKind.Function),S.set("module",c.SymbolKind.Module),S.set("file",c.SymbolKind.File),S.set("xrange",c.SymbolKind.Array),S.set("slice",c.SymbolKind.Class),S.set("traceback",c.SymbolKind.Class),S.set("frame",c.SymbolKind.Class),S.set("buffer",c.SymbolKind.Array),S.set("dictproxy",c.SymbolKind.Class),S.set("funcdef",c.SymbolKind.Function),S.set("property",c.SymbolKind.Property),S.set("import",c.SymbolKind.Module),S.set("keyword",c.SymbolKind.Variable),S.set("constant",c.SymbolKind.Constant),S.set("variable",c.SymbolKind.Variable),S.set("value",c.SymbolKind.Variable),S.set("param",c.SymbolKind.Variable),S.set("statement",c.SymbolKind.Variable),S.set("boolean",c.SymbolKind.Boolean),S.set("int",c.SymbolKind.Number),S.set("longlean",c.SymbolKind.Number),S.set("float",c.SymbolKind.Number),S.set("complex",c.SymbolKind.Number),S.set("string",c.SymbolKind.String),S.set("unicode",c.SymbolKind.String),S.set("list",c.SymbolKind.Array),function(e){e[e.Arguments=0]="Arguments",e[e.Completions=1]="Completions",e[e.Hover=2]="Hover",e[e.Usages=3]="Usages",e[e.Definitions=4]="Definitions",e[e.Symbols=5]="Symbols"}(P=t.CommandType||(t.CommandType={}));const C=new Map;C.set(P.Arguments,"arguments"),C.set(P.Completions,"completions"),C.set(P.Definitions,"definitions"),C.set(P.Hover,"tooltip"),C.set(P.Usages,"usages"),C.set(P.Symbols,"names");class T{constructor(e,t,n){this.extensionRootDir=e,this.serviceContainer=n,this.cmdId=0,this.previousData="",this.commands=new Map,this.commandQueue=[],this.spawnRetryAttempts=0,this.additionalAutoCompletePaths=[],this.ignoreJediMemoryFootprint=!1,this.pidUsageFailures={timer:new g.StopWatch,counter:0},this.disposables=[],this.workspacePath=t;const r=n.get(h.IConfigurationService);this.pythonSettings=r.getSettings(c.Uri.file(t)),this.lastKnownPythonInterpreter=this.pythonSettings.pythonPath,this.logger=n.get(h.ILogger);const i=n.get(y.IInterpreterService).onDidChangeInterpreter(this.onDidChangeInterpreter.bind(this));this.disposables.push(i),this.initialized=p.createDeferred(),this.startLanguageServer().then(()=>this.initialized.resolve()).ignoreErrors(),this.proposeNewLanguageServerPopup=n.get(h.IPythonExtensionBanner,h.BANNER_NAME_PROPOSE_LS),this.checkJediMemoryFootprint().ignoreErrors()}static getProperty(e,t){return e[t]}dispose(){for(;this.disposables.length>0;){const e=this.disposables.pop();e&&e.dispose()}this.killProcess()}getNextCommandId(){const e=this.cmdId;return this.cmdId+=1,e}sendCommand(e){return i(this,void 0,void 0,function*(){if(yield this.initialized.promise,yield this.languageServerStarted.promise,!this.proc)return Promise.reject(new Error("Python proc not initialized"));const t=e,n=this.createPayload(t);t.deferred=p.createDeferred();try{this.proc.stdin.write(`${JSON.stringify(n)}\n`),this.commands.set(t.id,t),this.commandQueue.push(t.id)}catch(e){return console.error(e),"This socket is closed."===e.message?this.killProcess():this.handleError("sendCommand",e.message),Promise.reject(e)}return t.deferred.promise})}initialize(){return this.spawnProcess(s.join(this.extensionRootDir,"pythonFiles")).catch(e=>{this.languageServerStarted&&this.languageServerStarted.reject(e),this.handleError("spawnProcess",e)})}shouldCheckJediMemoryFootprint(){return!this.ignoreJediMemoryFootprint&&-1!==this.pythonSettings.jediMemoryLimit&&(!this.lastCmdIdProcessedForPidUsage||!this.lastCmdIdProcessed||this.lastCmdIdProcessedForPidUsage!==this.lastCmdIdProcessed)}checkJediMemoryFootprint(){return i(this,void 0,void 0,function*(){-1!==this.pythonSettings.jediMemoryLimit&&(yield this.checkJediMemoryFootprintImpl(),setTimeout(()=>this.checkJediMemoryFootprint(),15e3))})}checkJediMemoryFootprintImpl(){return i(this,void 0,void 0,function*(){if(!this.proc||this.proc.killed)return;if(!this.shouldCheckJediMemoryFootprint())return;this.lastCmdIdProcessedForPidUsage=this.lastCmdIdProcessed;const e=p.createDeferred();return a.stat(this.proc.pid,(t,n)=>i(this,void 0,void 0,function*(){if(t)this.pidUsageFailures.counter+=1,this.pidUsageFailures.timer.elapsedTime>6e4&&(this.ignoreJediMemoryFootprint=this.pidUsageFailures.counter>2,this.pidUsageFailures.counter=0,this.pidUsageFailures.timer.reset()),console.error("Python Extension: (pidusage)",t);else{const e=Math.min(Math.max(this.pythonSettings.jediMemoryLimit,1024),8192);n&&n.memory>1024*e*1024&&(this.logger.logWarning(`IntelliSense process memory consumption exceeded limit of ${e} MB and process will be restarted.\nThe limit is controlled by the 'python.jediMemoryLimit' setting.`),yield this.restartLanguageServer())}e.resolve()})),e.promise})}onDidChangeInterpreter(){return i(this,void 0,void 0,function*(){this.lastKnownPythonInterpreter!==this.pythonSettings.pythonPath&&(this.lastKnownPythonInterpreter=this.pythonSettings.pythonPath,this.additionalAutoCompletePaths=yield this.buildAutoCompletePaths(),this.restartLanguageServer().ignoreErrors())})}environmentVariablesChangeHandler(){return i(this,void 0,void 0,function*(){const e=yield this.buildAutoCompletePaths();this.additionalAutoCompletePaths.join(",")!==e.join(",")&&(this.additionalAutoCompletePaths=e,this.restartLanguageServer().ignoreErrors())})}startLanguageServer(){return i(this,void 0,void 0,function*(){const e=yield this.buildAutoCompletePaths();return this.additionalAutoCompletePaths=e,u.isTestExecution()||(yield this.proposeNewLanguageServerPopup.showBanner()),this.restartLanguageServer()})}restartLanguageServer(){return this.killProcess(),this.clearPendingRequests(),this.initialize()}clearPendingRequests(){this.commandQueue=[],this.commands.forEach(e=>{void 0!==e.deferred&&e.deferred.resolve()}),this.commands.clear()}killProcess(){try{this.proc&&this.proc.kill()}catch(e){}this.proc=void 0}handleError(e,t){v.Logger.error(`${e} jediProxy`,`Error (${e}) ${t}`)}spawnProcess(e){return i(this,void 0,void 0,function*(){this.languageServerStarted&&!this.languageServerStarted.completed&&this.languageServerStarted.reject(new Error("Language Server not started.")),this.languageServerStarted=p.createDeferred();const t=yield this.serviceContainer.get(d.IPythonExecutionFactory).create({resource:c.Uri.file(this.workspacePath)});if(0===(yield t.getExecutablePath().catch(()=>"")).length)return;const n=["completion.py"];"string"==typeof this.pythonSettings.jediPath&&this.pythonSettings.jediPath.length>0&&(n.push("custom"),n.push(this.pythonSettings.jediPath));const r=t.execObservable(n,{cwd:e});this.proc=r.proc,this.languageServerStarted.resolve(),this.proc.on("end",e=>{v.Logger.error("spawnProcess.end",`End - ${e}`)}),this.proc.on("error",t=>{this.handleError("error",`${t}`),this.spawnRetryAttempts+=1,this.spawnRetryAttempts<10&&t&&t.message&&t.message.indexOf("This socket has been ended by the other party")>=0&&this.spawnProcess(e).catch(e=>{this.languageServerStarted&&this.languageServerStarted.reject(e),this.handleError("spawnProcess",e)})}),r.out.subscribe(e=>{if("stderr"===e.source)this.handleError("stderr",e.out);else{const t=e.out,n=this.previousData=`${this.previousData}${t}`;let r;try{r=n.splitLines().map(e=>JSON.parse(e)),this.previousData=""}catch(e){return void(-1===e.message.indexOf("Unexpected end of input")&&-1===e.message.indexOf("Unexpected end of JSON input")&&-1===e.message.indexOf("Unexpected token")&&this.handleError("stdout",e.message))}r.forEach(e=>{if(!e)return;const t=T.getProperty(e,"id");if(!this.commands.has(t))return;const n=this.commands.get(t);if(!n)return;if(this.lastCmdIdProcessed=n.id,T.getProperty(e,"arguments"))return void this.commandQueue.splice(this.commandQueue.indexOf(n.id),1);this.commands.delete(t);const r=this.commandQueue.indexOf(n.id);if(r&&this.commandQueue.splice(r,1),n.token.isCancellationRequested)return void this.safeResolve(n,void 0);const i=this.getCommandHandler(n.command);i&&i.call(this,n,e),this.checkQueueLength()})}},e=>this.handleError("subscription.error",`${e}`))})}getCommandHandler(e){switch(e){case P.Completions:return this.onCompletion;case P.Definitions:return this.onDefinition;case P.Hover:return this.onHover;case P.Symbols:return this.onSymbols;case P.Usages:return this.onUsages;case P.Arguments:return this.onArguments;default:return}}onCompletion(e,t){let n=T.getProperty(t,"results");(n=Array.isArray(n)?n:[]).forEach(e=>{const t=e.type;e.type=_(t),e.kind=w(t),e.rawType=_(t)});const r={items:n,requestId:e.id};this.safeResolve(e,r)}onDefinition(e,t){const n=T.getProperty(t,"results"),r={requestId:e.id,definitions:[]};n.length>0&&(r.definitions=n.map(e=>{const t=e.type;return{fileName:e.fileName,text:e.text,rawType:t,type:_(t),kind:w(t),container:e.container,range:{startLine:e.range.start_line,startColumn:e.range.start_column,endLine:e.range.end_line,endColumn:e.range.end_column}}})),this.safeResolve(e,r)}onHover(e,t){const n=T.getProperty(t,"results"),r={requestId:e.id,items:n.map(e=>({kind:w(e.type),description:e.description,signature:e.signature,docstring:e.docstring,text:e.text}))};this.safeResolve(e,r)}onSymbols(e,t){let n=T.getProperty(t,"results");n=Array.isArray(n)?n:[];const r={requestId:e.id,definitions:[]};r.definitions=n.map(e=>{const t=e.type;return{fileName:e.fileName,text:e.text,rawType:t,type:_(t),kind:w(t),container:e.container,range:{startLine:e.range.start_line,startColumn:e.range.start_column,endLine:e.range.end_line,endColumn:e.range.end_column}}}),this.safeResolve(e,r)}onUsages(e,t){let n=T.getProperty(t,"results");n=Array.isArray(n)?n:[];const r={requestId:e.id,references:n.map(e=>({columnIndex:e.column,fileName:e.fileName,lineIndex:e.line-1,moduleName:e.moduleName,name:e.name}))};this.safeResolve(e,r)}onArguments(e,t){const n=T.getProperty(t,"results");this.safeResolve(e,{requestId:e.id,definitions:n})}checkQueueLength(){if(this.commandQueue.length>10){this.commandQueue.splice(0,this.commandQueue.length-10).forEach(e=>{if(this.commands.has(e)){const t=this.commands.get(e);try{this.safeResolve(t,void 0)}catch(e){}finally{this.commands.delete(e)}}})}}createPayload(e){const t={id:e.id,prefix:"",lookup:C.get(e.command),path:e.fileName,source:e.source,line:e.lineIndex,column:e.columnIndex,config:this.getConfig()};return e.command===P.Symbols&&(delete t.column,delete t.line),t}getPathFromPythonCommand(e){return i(this,void 0,void 0,function*(){try{const t=(yield(yield this.serviceContainer.get(d.IPythonExecutionFactory).create({resource:c.Uri.file(this.workspacePath)})).exec(e,{cwd:this.workspacePath})).stdout.trim().splitLines();return 0===t.length?"":(yield o.pathExists(t[0]))?t[0]:""}catch(e){return""}})}buildAutoCompletePaths(){return i(this,void 0,void 0,function*(){const e=[this.getPathFromPythonCommand(["-c","import sys;print(sys.prefix)"]).catch(()=>""),this.getPathFromPythonCommand(["-c","import sys;print(sys.executable)"]).then(e=>s.dirname(e)).catch(()=>""),this.getPathFromPythonCommand(["-c","from distutils.sysconfig import get_python_lib; print(get_python_lib())"]).then(e=>l.IS_WINDOWS&&e.length>0?s.join(e,".."):e).catch(()=>""),this.getPathFromPythonCommand(["-m","site","--user-site"]).catch(()=>"")];try{const t=yield this.getEnvironmentVariablesProvider().getEnvironmentVariables(c.Uri.file(this.workspacePath)).then(e=>e?T.getProperty(e,"PYTHONPATH"):"").then(e=>"string"==typeof e&&e.trim().length>0?e.trim():"").then(e=>e.split(s.delimiter).filter(e=>e.trim().length>0)),n=t.filter(e=>!s.isAbsolute(e)).map(e=>s.resolve(this.workspacePath,e));return(yield Promise.all(e)).concat(...t,...n).filter(e=>e.length>0)}catch(e){return console.error("Python Extension: jediProxy.filePaths",e),[]}})}getEnvironmentVariablesProvider(){return this.environmentVariablesProvider||(this.environmentVariablesProvider=this.serviceContainer.get(m.IEnvironmentVariablesProvider),this.environmentVariablesProvider.onDidEnvironmentVariablesChange(this.environmentVariablesChangeHandler.bind(this))),this.environmentVariablesProvider}getConfig(){const e=this.pythonSettings.autoComplete?this.pythonSettings.autoComplete.extraPaths.map(e=>s.isAbsolute(e)?e:"string"!=typeof this.workspacePath?"":s.join(this.workspacePath,e)):[];return"string"==typeof this.workspacePath&&e.unshift(this.workspacePath),{extraPaths:e.concat(this.additionalAutoCompletePaths).filter(e=>e.length>0).filter((e,t,n)=>n.indexOf(e)===t),useSnippets:!1,caseInsensitiveCompletion:!0,showDescriptions:!0,fuzzyMatcher:!0}}safeResolve(e,t){e&&e.deferred&&e.deferred.resolve(t)}}r([f.swallowExceptions("JediProxy")],T.prototype,"onDidChangeInterpreter",null),r([f.debounce(1500),f.swallowExceptions("JediProxy")],T.prototype,"environmentVariablesChangeHandler",null),r([f.swallowExceptions("JediProxy")],T.prototype,"startLanguageServer",null),t.JediProxy=T;t.JediProxyHandler=class{constructor(e){this.jediProxy=e,this.commandCancellationTokenSources=new Map}get JediProxy(){return this.jediProxy}dispose(){this.jediProxy&&this.jediProxy.dispose()}sendCommand(e,t){const n=e;if(n.id=n.id||this.jediProxy.getNextCommandId(),this.commandCancellationTokenSources.has(e.command)){const t=this.commandCancellationTokenSources.get(e.command);t&&t.cancel()}const r=new c.CancellationTokenSource;return this.commandCancellationTokenSources.set(e.command,r),n.token=r.token,this.jediProxy.sendCommand(n).catch(e=>{console.error(e)})}sendCommandNonCancellableCommand(e,t){const n=e;return n.id=n.id||this.jediProxy.getNextCommandId(),t&&(n.token=t),this.jediProxy.sendCommand(n).catch(e=>{console.error(e)})}}},function(e,t){e.exports=require("./node_modules/diff-match-patch")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(120),c=n(2),u=n(4);n(8);const l=n(12),d=n(1),h=n(16),p=n(7),f=n(9);let g=class{constructor(e,t,n=!1){this.name=e,this.serviceContainer=t,this.cachePerWorkspace=n,this.promisesPerResource=new Map,this.handlersAddedToResource=new Set,this.locating=new c.EventEmitter,this._hasInterpreters=h.createDeferred(),this.cacheKeyPrefix=`INTERPRETERS_CACHE_v3_${e}`}get onLocating(){return this.locating.event}get hasInterpreters(){return this._hasInterpreters.promise}getInterpreters(e,t){return o(this,void 0,void 0,function*(){const n=this.getCacheKey(e);let r=this.promisesPerResource.get(n);if(!r||t){r=h.createDeferred(),this.promisesPerResource.set(n,r),this.addHandlersForInterpreterWatchers(n,e).ignoreErrors();const t=this.getInterpretersImplementation(e).then(t=>o(this,void 0,void 0,function*(){yield this.cacheInterpreters(t,e),l.traceVerbose(`Interpreters returned by ${this.name} are of count ${Array.isArray(t)?t.length:0}`),r.resolve(t)})).catch(e=>r.reject(e));p.sendTelemetryWhenDone(f.EventName.PYTHON_INTERPRETER_DISCOVERY,t,void 0,{locator:this.name}),this.locating.fire(r.promise)}if(r.promise.then(e=>this._hasInterpreters.resolve(e.length>0)).catch(e=>this._hasInterpreters.resolve(!1)),r.completed)return r.promise;const i=t?void 0:this.getCachedInterpreters(e);return Array.isArray(i)?i:r.promise})}addHandlersForInterpreterWatchers(e,t){return o(this,void 0,void 0,function*(){if(this.handlersAddedToResource.has(e))return;this.handlersAddedToResource.add(e);const n=yield this.getInterpreterWatchers(t),r=this.serviceContainer.get(d.IDisposableRegistry);n.forEach(n=>{n.onDidCreate(()=>{l.Logger.verbose(`Interpreter Watcher change handler for ${this.cacheKeyPrefix}`),this.promisesPerResource.delete(e),this.getInterpreters(t).ignoreErrors()},this,r)})})}getInterpreterWatchers(e){return o(this,void 0,void 0,function*(){return[]})}createPersistenceStore(e){const t=this.getCacheKey(e),n=this.serviceContainer.get(d.IPersistentStateFactory);return this.cachePerWorkspace?n.createWorkspacePersistentState(t,void 0):n.createGlobalPersistentState(t,void 0)}getCachedInterpreters(e){const t=this.createPersistenceStore(e);if(Array.isArray(t.value))return t.value.map(e=>Object.assign({},e,{cachedEntry:!0}))}cacheInterpreters(e,t){return o(this,void 0,void 0,function*(){yield this.createPersistenceStore(t).updateValue(e)})}getCacheKey(e){if(!e||!this.cachePerWorkspace)return this.cacheKeyPrefix;const t=this.serviceContainer.get(u.IWorkspaceService);if(!Array.isArray(t.workspaceFolders))return this.cacheKeyPrefix;const n=t.getWorkspaceFolder(e);return n?`${this.cacheKeyPrefix}:${a(n.uri.fsPath)}`:this.cacheKeyPrefix}};g=r([s.injectable(),i(0,s.unmanaged()),i(1,s.unmanaged()),i(2,s.unmanaged())],g),t.CacheableLocatorService=g},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentVariablesService=Symbol("IEnvironmentVariablesService"),t.IEnvironmentVariablesProvider=Symbol("IEnvironmentVariablesProvider")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(43),o=n(421),s=n(422),a=n(57),c=n(423),u=n(72);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(43));class l{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}}var d,h,p,f,g;!function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"}(d=t.ErrorAction||(t.ErrorAction={})),function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"}(h=t.CloseAction||(t.CloseAction={}));class m{constructor(e){this.name=e,this.restarts=[]}error(e,t,n){return n&&n<=3?d.Continue:d.Shutdown}closed(){if(this.restarts.push(Date.now()),this.restarts.length<5)return h.Restart;return this.restarts[this.restarts.length-1]-this.restarts[0]<=18e4?(r.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),h.DoNotRestart):(this.restarts.shift(),h.Restart)}}!function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"}(p=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={})),function(e){e[e.Stopped=1]="Stopped",e[e.Running=2]="Running"}(f=t.State||(t.State={})),function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"}(g||(g={}));const y=[i.SymbolKind.File,i.SymbolKind.Module,i.SymbolKind.Namespace,i.SymbolKind.Package,i.SymbolKind.Class,i.SymbolKind.Method,i.SymbolKind.Property,i.SymbolKind.Field,i.SymbolKind.Constructor,i.SymbolKind.Enum,i.SymbolKind.Interface,i.SymbolKind.Function,i.SymbolKind.Variable,i.SymbolKind.Constant,i.SymbolKind.String,i.SymbolKind.Number,i.SymbolKind.Boolean,i.SymbolKind.Array,i.SymbolKind.Object,i.SymbolKind.Key,i.SymbolKind.Null,i.SymbolKind.EnumMember,i.SymbolKind.Struct,i.SymbolKind.Event,i.SymbolKind.Operator,i.SymbolKind.TypeParameter],v=[i.CompletionItemKind.Text,i.CompletionItemKind.Method,i.CompletionItemKind.Function,i.CompletionItemKind.Constructor,i.CompletionItemKind.Field,i.CompletionItemKind.Variable,i.CompletionItemKind.Class,i.CompletionItemKind.Interface,i.CompletionItemKind.Module,i.CompletionItemKind.Property,i.CompletionItemKind.Unit,i.CompletionItemKind.Value,i.CompletionItemKind.Enum,i.CompletionItemKind.Keyword,i.CompletionItemKind.Snippet,i.CompletionItemKind.Color,i.CompletionItemKind.File,i.CompletionItemKind.Reference,i.CompletionItemKind.Folder,i.CompletionItemKind.EnumMember,i.CompletionItemKind.Constant,i.CompletionItemKind.Struct,i.CompletionItemKind.Event,i.CompletionItemKind.Operator,i.CompletionItemKind.TypeParameter];function b(e,t){return void 0===e[t]&&(e[t]={}),e[t]}var S;!function(e){e.is=function(e){let t=e;return t&&a.func(t.register)&&a.func(t.unregister)&&a.func(t.dispose)&&void 0!==t.messages}}(S||(S={}));class _{constructor(e,t,n,r,i,o){this._client=e,this._event=t,this._type=n,this._middleware=r,this._createParams=i,this._selectorFilter=o,this._selectors=new Map}static textDocumentFilter(e,t){for(const n of e)if(r.languages.match(n,t))return!0;return!1}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){this._selectorFilter&&!this._selectorFilter(this._selectors.values(),e)||(this._middleware?this._middleware(e,e=>this._client.sendNotification(this._type,this._createParams(e))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&this._listener.dispose()}}class w extends _{constructor(e,t){super(e,r.workspace.onDidOpenTextDocument,i.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t),_.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let n=t.registerOptions.documentSelector;r.workspace.textDocuments.forEach(e=>{let t=e.uri.toString();if(!this._syncedDocuments.has(t)&&r.languages.match(n,e)){let n=this._client.clientOptions.middleware,r=e=>{this._client.sendNotification(this._type,this._createParams(e))};n.didOpen?n.didOpen(e,r):r(e),this._syncedDocuments.set(t,e)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}}class P extends _{constructor(e,t){super(e,r.workspace.onDidCloseTextDocument,i.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t),_.textDocumentFilter),this._syncedDocuments=t}get messages(){return i.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(e=>{if(r.languages.match(t,e)&&!this._selectorFilter(n,e)){let t=this._client.clientOptions.middleware,n=e=>{this._client.sendNotification(this._type,this._createParams(e))};this._syncedDocuments.delete(e.uri.toString()),t.didClose?t.didClose(e,n):n(e)}})}}class C{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return i.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&void 0!==n.change&&n.change!==i.TextDocumentSyncKind.None&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){if(0!==e.contentChanges.length)for(const t of this._changeData.values())if(r.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===i.TextDocumentSyncKind.Incremental){let t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t)):this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t)}else if(t.syncKind===i.TextDocumentSyncKind.Full){let t=e=>{this._changeDelayer?(this._changeDelayer.uri!==e.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=e.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))})):(this._changeDelayer={uri:e.document.uri.toString(),delayer:new c.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(i.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document))},-1))};n.didChange?n.didChange(e,t):t(e)}}}unregister(e){this._changeData.delete(e),0===this._changeData.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!this._forcingDelivery&&this._changeDelayer)try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}}class T extends _{constructor(e){super(e,r.workspace.onWillSaveTextDocument,i.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(e,t)=>_.textDocumentFilter(e,t.document))}get messages(){return i.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}}class I{constructor(e){this._client=e,this._selectors=new Map}get messages(){return i.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){t.registerOptions.documentSelector&&(this._listener||(this._listener=r.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(_.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=e=>this._client.sendRequest(i.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then(e=>{let t=this._client.protocol2CodeConverter.asTextEdits(e);return void 0===t?[]:t});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),0===this._selectors.size&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}class E extends _{constructor(e){super(e,r.workspace.onDidSaveTextDocument,i.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),_.textDocumentFilter)}get messages(){return i.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){b(b(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.save&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!n.save.includeText})})}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}}class O{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return i.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){b(b(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let n=[];for(let e of t.registerOptions.watchers){if(!a.string(e.globPattern))continue;let t=!0,o=!0,s=!0;void 0!==e.kind&&null!==e.kind&&(t=0!=(e.kind&i.WatchKind.Create),o=0!=(e.kind&i.WatchKind.Change),s=0!=(e.kind&i.WatchKind.Delete));let c=r.workspace.createFileSystemWatcher(e.globPattern,!t,!o,!s);this.hookListeners(c,t,o,s),n.push(c)}this._watchers.set(t.id,n)}registerRaw(e,t){let n=[];for(let e of t)this.hookListeners(e,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,r,o){t&&e.onDidCreate(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Created}),null,o),n&&e.onDidChange(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Changed}),null,o),r&&e.onDidDelete(e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let e of t)e.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}}class R{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wrong feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}}t.TextDocumentFeature=R;class x{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()}),this._providers.clear()}}class k extends R{constructor(e){super(e,i.CompletionRequest.type)}fillClientCapabilities(e){let t=b(b(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0},t.completionItemKind={valueSet:v}}initialize(e,t){e.completionProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[],n=this._client,o=(e,t,r,o)=>n.sendRequest(i.CompletionRequest.type,n.code2ProtocolConverter.asCompletionParams(e,t,r),o).then(n.protocol2CodeConverter.asCompletionResult,e=>(n.logFailedRequest(i.CompletionRequest.type,e),Promise.resolve([]))),s=(e,t)=>n.sendRequest(i.CompletionResolveRequest.type,n.code2ProtocolConverter.asCompletionItem(e),t).then(n.protocol2CodeConverter.asCompletionItem,t=>(n.logFailedRequest(i.CompletionResolveRequest.type,t),Promise.resolve(e))),a=this._client.clientOptions.middleware;return r.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(e,t,n,r)=>a.provideCompletionItem?a.provideCompletionItem(e,t,r,n,o):o(e,t,r,n),resolveCompletionItem:e.resolveProvider?(e,t)=>a.resolveCompletionItem?a.resolveCompletionItem(e,t,s):s(e,t):void 0},...t)}}class D extends R{constructor(e){super(e,i.HoverRequest.type)}fillClientCapabilities(e){const t=b(b(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[i.MarkupKind.Markdown,i.MarkupKind.PlainText]}initialize(e,t){e.hoverProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asHover,e=>(t.logFailedRequest(i.HoverRequest.type,e),Promise.resolve(null))),o=t.clientOptions.middleware;return r.languages.registerHoverProvider(e.documentSelector,{provideHover:(e,t,r)=>o.provideHover?o.provideHover(e,t,r,n):n(e,t,r)})}}class A extends R{constructor(e){super(e,i.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=b(b(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText]}}initialize(e,t){e.signatureHelpProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asSignatureHelp,e=>(t.logFailedRequest(i.SignatureHelpRequest.type,e),Promise.resolve(null))),o=t.clientOptions.middleware,s=e.triggerCharacters||[];return r.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(e,t,r)=>o.provideSignatureHelp?o.provideSignatureHelp(e,t,r,n):n(e,t,r)},...s)}}class j extends R{constructor(e){super(e,i.DefinitionRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"definition").dynamicRegistration=!0}initialize(e,t){e.definitionProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(i.DefinitionRequest.type,e),Promise.resolve(null))),o=t.clientOptions.middleware;return r.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(e,t,r)=>o.provideDefinition?o.provideDefinition(e,t,r,n):n(e,t,r)})}}class N extends R{constructor(e){super(e,i.ReferencesRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){e.referencesProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>t.sendRequest(i.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(e,n,r),o).then(t.protocol2CodeConverter.asReferences,e=>(t.logFailedRequest(i.ReferencesRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(e,t,r,i)=>o.provideReferences?o.provideReferences(e,t,r,i,n):n(e,t,r,i)})}}class F extends R{constructor(e){super(e,i.DocumentHighlightRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){e.documentHighlightProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(i.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDocumentHighlights,e=>(t.logFailedRequest(i.DocumentHighlightRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(e,t,r)=>o.provideDocumentHighlights?o.provideDocumentHighlights(e,t,r,n):n(e,t,r)})}}class M extends R{constructor(e){super(e,i.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=b(b(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:y},t.hierarchicalDocumentSymbolSupport=!0}initialize(e,t){e.documentSymbolProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(e),n).then(e=>{if(null!==e){if(0===e.length)return[];{let n=e[0];return i.DocumentSymbol.is(n)?t.protocol2CodeConverter.asDocumentSymbols(e):t.protocol2CodeConverter.asSymbolInformations(e)}}},e=>(t.logFailedRequest(i.DocumentSymbolRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(e,t)=>o.provideDocumentSymbols?o.provideDocumentSymbols(e,t,n):n(e,t)})}}class L extends x{constructor(e){super(e,i.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=b(b(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:y}}initialize(e){e.workspaceSymbolProvider&&this.register(this.messages,{id:u.generateUuid(),registerOptions:void 0})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.WorkspaceSymbolRequest.type,{query:e},n).then(t.protocol2CodeConverter.asSymbolInformations,e=>(t.logFailedRequest(i.WorkspaceSymbolRequest.type,e),Promise.resolve([]))),o=t.clientOptions.middleware;return r.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(e,t)=>o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(e,t,n):n(e,t)})}}class W extends R{constructor(e){super(e,i.CodeActionRequest.type)}fillClientCapabilities(e){const t=b(b(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.codeActionLiteralSupport={codeActionKind:{valueSet:["",i.CodeActionKind.QuickFix,i.CodeActionKind.Refactor,i.CodeActionKind.RefactorExtract,i.CodeActionKind.RefactorInline,i.CodeActionKind.RefactorRewrite,i.CodeActionKind.Source,i.CodeActionKind.SourceOrganizeImports]}}}initialize(e,t){e.codeActionProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),context:t.code2ProtocolConverter.asCodeActionContext(r)};return t.sendRequest(i.CodeActionRequest.type,s,o).then(e=>{if(null===e)return;let n=[];for(let r of e)i.Command.is(r)?n.push(t.protocol2CodeConverter.asCommand(r)):n.push(t.protocol2CodeConverter.asCodeAction(r));return n},e=>(t.logFailedRequest(i.CodeActionRequest.type,e),Promise.resolve([])))},o=t.clientOptions.middleware;return r.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(e,t,r,i)=>o.provideCodeActions?o.provideCodeActions(e,t,r,i,n):n(e,t,r,i)})}}class U extends R{constructor(e){super(e,i.CodeLensRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){e.codeLensProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(e),n).then(t.protocol2CodeConverter.asCodeLenses,e=>(t.logFailedRequest(i.CodeLensRequest.type,e),Promise.resolve([]))),o=(e,n)=>t.sendRequest(i.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(e),n).then(t.protocol2CodeConverter.asCodeLens,n=>(t.logFailedRequest(i.CodeLensResolveRequest.type,n),e)),s=t.clientOptions.middleware;return r.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(e,t)=>s.provideCodeLenses?s.provideCodeLenses(e,t,n):n(e,t),resolveCodeLens:e.resolveProvider?(e,t)=>s.resolveCodeLens?s.resolveCodeLens(e,t,o):o(e,t):void 0})}}class H extends R{constructor(e){super(e,i.DocumentFormattingRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){e.documentFormattingProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{let o={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),options:t.code2ProtocolConverter.asFormattingOptions(n)};return t.sendRequest(i.DocumentFormattingRequest.type,o,r).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(i.DocumentFormattingRequest.type,e),Promise.resolve([])))},o=t.clientOptions.middleware;return r.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(e,t,r)=>o.provideDocumentFormattingEdits?o.provideDocumentFormattingEdits(e,t,r,n):n(e,t,r)})}}class B extends R{constructor(e){super(e,i.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentRangeFormattingProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),range:t.code2ProtocolConverter.asRange(n),options:t.code2ProtocolConverter.asFormattingOptions(r)};return t.sendRequest(i.DocumentRangeFormattingRequest.type,s,o).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(i.DocumentRangeFormattingRequest.type,e),Promise.resolve([])))},o=t.clientOptions.middleware;return r.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(e,t,r,i)=>o.provideDocumentRangeFormattingEdits?o.provideDocumentRangeFormattingEdits(e,t,r,i,n):n(e,t,r,i)})}}class V extends R{constructor(e){super(e,i.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){e.documentOnTypeFormattingProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client,n=e.moreTriggerCharacter||[],o=(e,n,r,o,s)=>{let a={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),ch:r,options:t.code2ProtocolConverter.asFormattingOptions(o)};return t.sendRequest(i.DocumentOnTypeFormattingRequest.type,a,s).then(t.protocol2CodeConverter.asTextEdits,e=>(t.logFailedRequest(i.DocumentOnTypeFormattingRequest.type,e),Promise.resolve([])))},s=t.clientOptions.middleware;return r.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(e,t,n,r,i)=>s.provideOnTypeFormattingEdits?s.provideOnTypeFormattingEdits(e,t,n,r,i,o):o(e,t,n,r,i)},e.firstTriggerCharacter,...n)}}class q extends R{constructor(e){super(e,i.RenameRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"rename").dynamicRegistration=!0}initialize(e,t){e.renameProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r,o)=>{let s={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e),position:t.code2ProtocolConverter.asPosition(n),newName:r};return t.sendRequest(i.RenameRequest.type,s,o).then(t.protocol2CodeConverter.asWorkspaceEdit,e=>(t.logFailedRequest(i.RenameRequest.type,e),Promise.reject(new Error(e.message))))},o=t.clientOptions.middleware;return r.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(e,t,r,i)=>o.provideRenameEdits?o.provideRenameEdits(e,t,r,i,n):n(e,t,r,i)})}}class $ extends R{constructor(e){super(e,i.DocumentLinkRequest.type)}fillClientCapabilities(e){b(b(e,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(e,t){e.documentLinkProvider&&t&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client,n=(e,n)=>t.sendRequest(i.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(e),n).then(t.protocol2CodeConverter.asDocumentLinks,e=>{t.logFailedRequest(i.DocumentLinkRequest.type,e),Promise.resolve(new Error(e.message))}),o=(e,n)=>t.sendRequest(i.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(e),n).then(t.protocol2CodeConverter.asDocumentLink,e=>{t.logFailedRequest(i.DocumentLinkResolveRequest.type,e),Promise.resolve(new Error(e.message))}),s=t.clientOptions.middleware;return r.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(e,t)=>s.provideDocumentLinks?s.provideDocumentLinks(e,t,n):n(e,t),resolveDocumentLink:e.resolveProvider?(e,t)=>s.resolveDocumentLink?s.resolveDocumentLink(e,t,o):o(e,t):void 0})}}class K{constructor(e){this._client=e,this._listeners=new Map}get messages(){return i.DidChangeConfigurationNotification.type}fillClientCapabilities(e){b(b(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;void 0!==e&&this.register(this.messages,{id:u.generateUuid(),registerOptions:{section:e}})}register(e,t){let n=r.workspace.onDidChangeConfiguration(e=>{this.onDidChangeConfiguration(t.registerOptions.section,e)});this._listeners.set(t.id,n),void 0!==t.registerOptions.section&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(void 0!==(n=a.string(e)?[e]:e)&&void 0!==t){if(!n.some(e=>t.affectsConfiguration(e)))return}let r=e=>{void 0!==e?this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)}):this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})},o=this.getMiddleware();o?o(n,r):r(n)}extractSettingsInformation(e){function t(e,t){let n=e;for(let e=0;e<t.length-1;e++){let r=n[t[e]];r||(r=Object.create(null),n[t[e]]=r),n=r}return n}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let s=e[o],a=s.indexOf("."),c=null;if(c=a>=0?r.workspace.getConfiguration(s.substr(0,a),n).get(s.substr(a+1)):r.workspace.getConfiguration(s,n)){let n=e[o].split(".");t(i,n)[n[n.length-1]]=c}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;return e.workspace&&e.workspace.didChangeConfiguration?e.workspace.didChangeConfiguration:void 0}}class G{constructor(e){this._client=e,this._commands=new Map}get messages(){return i.ExecuteCommandRequest.type}fillClientCapabilities(e){b(b(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register(this.messages,{id:u.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let n=this._client;if(t.registerOptions.commands){let e=[];for(const o of t.registerOptions.commands)e.push(r.commands.registerCommand(o,(...e)=>{let t={command:o,arguments:e};return n.sendRequest(i.ExecuteCommandRequest.type,t).then(void 0,e=>{n.logFailedRequest(i.ExecuteCommandRequest.type,e)})}));this._commands.set(t.id,e)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(e=>e.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(e=>e.dispose())}),this._commands.clear()}}!function(e){e.is=function(e){return e&&i.MessageReader.is(e.reader)&&i.MessageWriter.is(e.writer)}}(t.MessageTransports||(t.MessageTransports={}));t.BaseLanguageClient=class{constructor(e,t,n){this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||p.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,errorHandler:n.errorHandler||new m(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=g.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new c.Delayer(250),this._onReady=new Promise((e,t)=>{this._onReadyCallbacks={resolve:e,reject:t}}),this._onStop=void 0,this._telemetryEmitter=new i.Emitter,this._stateChangeEmitter=new i.Emitter,this._tracer={log:(e,t)=>{this.logTrace(e,t)}},this._c2p=o.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=s.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===g.Running?f.Running:f.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(t){throw this.error(`Sending request ${a.string(e)?e:e.method} failed.`,t),t}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(t){throw this.error(`Registering request handler ${a.string(e)?e:e.method} failed.`,t),t}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(t){throw this.error(`Sending notification ${a.string(e)?e:e.method} failed.`,t),t}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(t){throw this.error(`Registering notification handler ${a.string(e)?e:e.method} failed.`,t),t}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=r.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new m(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(t=>{t.trace(e,this._tracer)})},()=>{})}data2String(e){if(e instanceof i.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}return e instanceof Error?a.string(e.stack)?e.stack:e.message:a.string(e)?e:e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=p.Info&&this.outputChannel.show(!0)}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=p.Warn&&this.outputChannel.show(!0)}error(e,t){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=p.Error&&this.outputChannel.show(!0)}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t))}needsStart(){return this.state===g.Initial||this.state===g.Stopping||this.state===g.Stopped}needsStop(){return this.state===g.Starting||this.state===g.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===g.Running&&!!this._resolvedConnection}start(){return this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?r.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):r.languages.createDiagnosticCollection()),this.state=g.Starting,this.resolveConnection().then(e=>(e.onLogMessage(e=>{switch(e.type){case i.MessageType.Error:this.error(e.message);break;case i.MessageType.Warning:this.warn(e.message);break;case i.MessageType.Info:this.info(e.message);break;default:this.outputChannel.appendLine(e.message)}}),e.onShowMessage(e=>{switch(e.type){case i.MessageType.Error:r.window.showErrorMessage(e.message);break;case i.MessageType.Warning:r.window.showWarningMessage(e.message);break;case i.MessageType.Info:r.window.showInformationMessage(e.message);break;default:r.window.showInformationMessage(e.message)}}),e.onRequest(i.ShowMessageRequest.type,e=>{let t;switch(e.type){case i.MessageType.Error:t=r.window.showErrorMessage;break;case i.MessageType.Warning:t=r.window.showWarningMessage;break;case i.MessageType.Info:t=r.window.showInformationMessage;break;default:t=r.window.showInformationMessage}let n=e.actions||[];return t(e.message,...n)}),e.onTelemetry(e=>{this._telemetryEmitter.fire(e)}),e.listen(),this.initialize(e))).then(void 0,e=>{this.state=g.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),r.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new r.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:process.pid,rootPath:n||null,rootUri:n?this._c2p.asUri(r.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:a.func(t)?t():t,trace:i.Trace.toString(this._trace),workspaceFolders:null};return this.fillInitializeParams(o),e.initialize(o).then(t=>{this._resolvedConnection=e,this._initializeResult=t,this.state=g.Running;let n=void 0;return a.number(t.capabilities.textDocumentSync)&&t.capabilities.textDocumentSync!==i.TextDocumentSyncKind.None?n={openClose:!0,change:t.capabilities.textDocumentSync,save:{includeText:!1}}:void 0!==t.capabilities.textDocumentSync&&null!==t.capabilities.textDocumentSync&&(n=t.capabilities.textDocumentSync),this._capabilities=Object.assign({},t.capabilities,{resolvedTextDocumentSync:n}),e.onDiagnostics(e=>this.handleDiagnostics(e)),e.onRequest(i.RegistrationRequest.type,e=>this.handleRegistrationRequest(e)),e.onRequest("client/registerFeature",e=>this.handleRegistrationRequest(e)),e.onRequest(i.UnregistrationRequest.type,e=>this.handleUnregistrationRequest(e)),e.onRequest("client/unregisterFeature",e=>this.handleUnregistrationRequest(e)),e.onRequest(i.ApplyWorkspaceEditRequest.type,e=>this.handleApplyWorkspaceEdit(e)),e.sendNotification(i.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),t}).then(void 0,t=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(t)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t)):t instanceof i.ResponseError&&t.data&&t.data.retry?r.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then(n=>{n&&"retry"===n.id?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(t))}):(t&&t.message&&r.window.showErrorMessage(t.message),this.error("Server initialization failed.",t),this.stop(),this._onReadyCallbacks.reject(t))})}_clientGetRootPath(){let e=r.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===g.Stopping&&this._onStop?this._onStop:(this.state=g.Stopping,this.cleanUp(),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=g.Stopped,this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=g.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(e=>e.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(e=>e.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let e of this._dynamicFeatures.values())e.dispose();e&&this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(e){this._fileEvents.push(e),this._fileEventDelayer.trigger(()=>{this.onReady().then(()=>{this.resolveConnection().then(e=>{this.isConnectionActive()&&e.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]})},e=>{this.error("Notify file events failed.",e)})})}forceDocumentSync(){this._dynamicFeatures.get(i.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),r=this.clientOptions.middleware.handleDiagnostics;r?r(t,n,(e,t)=>this.setDiagnostics(e,t)):this.setDiagnostics(t,n)}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}createConnection(){let e=(e,t,n)=>{this.handleConnectionError(e,t,n)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>(function(e,t,n,r){let o=new l,s=i.createProtocolConnection(e,t,o);return s.onError(e=>{n(e[0],e[1],e[2])}),s.onClose(r),{listen:()=>s.listen(),sendRequest:(e,...t)=>s.sendRequest(a.string(e)?e:e.method,...t),onRequest:(e,t)=>s.onRequest(a.string(e)?e:e.method,t),sendNotification:(e,t)=>s.sendNotification(a.string(e)?e:e.method,t),onNotification:(e,t)=>s.onNotification(a.string(e)?e:e.method,t),trace:(e,t,n=!1)=>s.trace(e,t,n),initialize:e=>s.sendRequest(i.InitializeRequest.type,e),shutdown:()=>s.sendRequest(i.ShutdownRequest.type,void 0),exit:()=>s.sendNotification(i.ExitNotification.type),onLogMessage:e=>s.onNotification(i.LogMessageNotification.type,e),onShowMessage:e=>s.onNotification(i.ShowMessageNotification.type,e),onTelemetry:e=>s.onNotification(i.TelemetryEventNotification.type,e),didChangeConfiguration:e=>s.sendNotification(i.DidChangeConfigurationNotification.type,e),didChangeWatchedFiles:e=>s.sendNotification(i.DidChangeWatchedFilesNotification.type,e),didOpenTextDocument:e=>s.sendNotification(i.DidOpenTextDocumentNotification.type,e),didChangeTextDocument:e=>s.sendNotification(i.DidChangeTextDocumentNotification.type,e),didCloseTextDocument:e=>s.sendNotification(i.DidCloseTextDocumentNotification.type,e),didSaveTextDocument:e=>s.sendNotification(i.DidSaveTextDocumentNotification.type,e),onDiagnostics:e=>s.onNotification(i.PublishDiagnosticsNotification.type,e),dispose:()=>s.dispose()}})(n.reader,n.writer,e,t))}handleConnectionClosed(){if(this.state===g.Stopping||this.state===g.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch(e){}let e=h.DoNotRestart;try{e=this._clientOptions.errorHandler.closed()}catch(e){}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===h.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=g.Stopped,this.cleanUp(!1,!0)):e===h.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=g.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===d.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){r.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let n=r.workspace.getConfiguration(this._id),o=i.Trace.Off;n&&(o=i.Trace.fromString(n.get("trace.server","off"))),this._trace=o,e.trace(this._trace,this._tracer,t)}hookFileEvents(e){let t,n=this._clientOptions.synchronize.fileEvents;n&&(t=a.array(n)?n:[n])&&this._dynamicFeatures.get(i.DidChangeWatchedFilesNotification.type.method).registerRaw(u.generateUuid(),t)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),S.is(e)){let t=e.messages;if(Array.isArray(t))for(let n of t)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}registerBuiltinFeatures(){this.registerFeature(new K(this)),this.registerFeature(new w(this,this._syncedDocuments)),this.registerFeature(new C(this)),this.registerFeature(new T(this)),this.registerFeature(new I(this)),this.registerFeature(new E(this)),this.registerFeature(new P(this,this._syncedDocuments)),this.registerFeature(new O(this,e=>this.notifyFileEvent(e))),this.registerFeature(new k(this)),this.registerFeature(new D(this)),this.registerFeature(new A(this)),this.registerFeature(new j(this)),this.registerFeature(new N(this)),this.registerFeature(new F(this)),this.registerFeature(new M(this)),this.registerFeature(new L(this)),this.registerFeature(new W(this)),this.registerFeature(new U(this)),this.registerFeature(new H(this)),this.registerFeature(new B(this)),this.registerFeature(new V(this)),this.registerFeature(new q(this)),this.registerFeature(new $(this)),this.registerFeature(new G(this))}fillInitializeParams(e){for(let t of this._features)a.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};b(e,"workspace").applyEdit=!0,b(b(e,"workspace"),"workspaceEdit").documentChanges=!0,b(b(e,"textDocument"),"publishDiagnostics").relatedInformation=!0;for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let e of this._features)e.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,n)=>{for(let t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Registration failed.`));const r=t.registerOptions||{};r.documentSelector=r.documentSelector||this._clientOptions.documentSelector;const i={id:t.id,registerOptions:r};e.register(this._method2Message.get(t.method),i)}t()})}handleUnregistrationRequest(e){return new Promise((t,n)=>{for(let t of e.unregisterations){const e=this._dynamicFeatures.get(t.method);if(!e)return void n(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));e.unregister(t.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;r.workspace.textDocuments.forEach(e=>n.set(e.uri.toString(),e));let i=!1;if(t.documentChanges)for(const e of t.documentChanges)if(e.textDocument.version&&e.textDocument.version>=0){let t=n.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){i=!0;break}}return i?Promise.resolve({applied:!1}):r.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(e=>({applied:e}))}logFailedRequest(e,t){t instanceof i.ResponseError&&t.code===i.ErrorCodes.RequestCancelled||this.error(`Request ${e.method} failed.`,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class i extends r{constructor(){super([i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),"-","4",i._randomHex(),i._randomHex(),i._randomHex(),"-",i._oneOf(i._timeHighBits),i._randomHex(),i._randomHex(),i._randomHex(),"-",i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex(),i._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return i._oneOf(i._chars)}}function o(){return new i}i._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],i._timeHighBits=["8","9","a","b"],t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=o;const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return s.test(e)}t.isUUID=a,t.parse=function(e){if(!a(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return o().asHex()}},function(e,t,n){"use strict";var r,i=n(84),o=i.Buffer,s={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(s[r]=i[r]);var a=s.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(a[r]=o[r]);if(s.Buffer.prototype=o.prototype,a.from&&a.from!==Uint8Array.from||(a.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,n)}),a.alloc||(a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=o(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!s.kStringMaxLength)try{s.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16),i=n(13);class o extends Error{constructor(){super(i.Common.canceled())}}t.CancellationError=o,function(e){function t(e){return!!e&&e.isCancellationRequested}e.race=function(e,t){if(t){const n=r.createDeferred();return t.onCancellationRequested(()=>{n.completed||n.reject(new o)}),t.isCancellationRequested?n.reject(new o):e(t).then(e=>{n.completed||n.resolve(e)}).catch(e=>{n.completed||n.reject(e)}),n.promise}return e()},e.isCanceled=t,e.throwIfCanceled=function(e){if(t(e))throw new o}}(t.Cancellation||(t.Cancellation={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(42);n(8);const c=n(12),u=n(6),l=n(1),d=n(36),h=n(7),p=n(9);var f;!function(e){e.runNextRule="runNextRule",e.exit="exit"}(f=t.NextAction||(t.NextAction={}));let g=class{constructor(e,t,n){this.ruleName=e,this.fs=t,this.stateStore=n.createGlobalPersistentState(`InterpreterAutoSeletionRule-${this.ruleName}`,void 0)}setNextRule(e){this.nextRule=e}autoSelectInterpreter(e,t){return o(this,void 0,void 0,function*(){yield this.clearCachedInterpreterIfInvalid(e);const n=new d.StopWatch,r=yield this.onAutoSelectInterpreter(e,t);c.traceVerbose(`Rule = ${this.ruleName}, result = ${r}`);const i=r===f.runNextRule;h.sendTelemetryEvent(p.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{elapsedTime:n.elapsedTime},{rule:this.ruleName,identified:i}),r===f.runNextRule&&(yield this.next(e,t))})}getPreviouslyAutoSelectedInterpreter(e){const t=this.stateStore.value;return c.traceVerbose(`Current value for rule ${this.ruleName} is ${t?JSON.stringify(t):"nothing"}`),t}setGlobalInterpreter(e,t){return o(this,void 0,void 0,function*(){if(yield this.cacheSelectedInterpreter(void 0,e),!e||!t||!e.version)return!1;const n=t.getAutoSelectedInterpreter(void 0),r=n&&n.version?a.compare(e.version.raw,n.version.raw):1;return r>0?(yield t.setGlobalInterpreter(e),!0):0===r})}clearCachedInterpreterIfInvalid(e){return o(this,void 0,void 0,function*(){this.stateStore.value&&!(yield this.fs.fileExists(this.stateStore.value.path))&&(h.sendTelemetryEvent(p.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{},{rule:this.ruleName,interpreterMissing:!0}),yield this.cacheSelectedInterpreter(e,void 0))})}cacheSelectedInterpreter(e,t){return o(this,void 0,void 0,function*(){const e=(t?t.path:"")===(this.stateStore.value?this.stateStore.value.path:"");h.sendTelemetryEvent(p.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{},{rule:this.ruleName,updated:e}),yield this.stateStore.updateValue(t)})}next(e,t){return o(this,void 0,void 0,function*(){return c.traceVerbose(`Executing next rule from ${this.ruleName}`),this.nextRule&&t?this.nextRule.autoSelectInterpreter(e,t):void 0})}};r([c.traceDecorators.verbose("autoSelectInterpreter")],g.prototype,"autoSelectInterpreter",null),r([c.traceDecorators.verbose("setGlobalInterpreter")],g.prototype,"setGlobalInterpreter",null),g=r([s.injectable(),i(0,s.unmanaged()),i(1,s.inject(u.IFileSystem)),i(2,s.inject(l.IPersistentStateFactory))],g),t.BaseRuleService=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30);function i(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function o(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=i,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var r="",i=n(e,t);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach(function(e){var t="Object";null!==e.implementationType&&(t=o(e.implementationType)),r=r+"\n "+t,e.constraint.metaData&&(r=r+" - "+e.constraint.metaData)})),r},t.circularDependencyToException=function e(t){t.childRequests.forEach(function(t){if(function e(t,n){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===n||e(t.parentRequest,n))}(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var r=i(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(r.CIRCULAR_DEPENDENCY+" "+n)}e(t)})},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach(function(e){n+=e.toString()+"\n"})," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),i=n(109),o=function(){function e(){}return e.getCurrentContext=function(){return e.enabled?Zone.current.get("context"):null},e.generateContextObject=function(e,t,n,r){return t=t||e,this.enabled?{operation:{name:n,id:e,parentId:t},customProperties:new s(r)}:null},e.runWithContext=function(t,n){e.enabled?Zone.current.fork({name:"AI-"+(t&&t.operation.parentId||"Unknown"),properties:{context:t}}).run(n):n()},e.wrapCallback=function(t){return e.enabled?Zone.current.wrap(t,"User-wrapped method"):t},e.enable=function(){if(!this.enabled)if(this.isNodeVersionCompatible()){if(!e.hasEverEnabled){this.hasEverEnabled=!0;try{"undefined"==typeof Zone&&n(277)}catch(e){r.warn("Failed to require zone.js")}i.registerContextPreservation(function(e){return Zone.current.wrap(e,"AI-ContextPreservation")}),this.patchError(),this.patchTimers(["setTimeout","setInterval"])}this.enabled=!0}else this.enabled=!1},e.disable=function(){this.enabled=!1},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.patchTimers=function(e){e.forEach(function(e){var t=global[e];global[e]=function(){var e=t.apply(this,arguments);return e.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)},e}})},e.patchError=function(){var e=global.Error;function t(){if(!(this instanceof t))return t.apply(Object.create(t.prototype),arguments);var n=e.stackRewrite;if(e.prepareStackTrace){e.stackRewrite=!1;var r=e.prepareStackTrace;e.prepareStackTrace=function(e,t){for(var n=!1,i=0;i<t.length;i++){var o=t[i].getFileName();if(o)if(-1===o.indexOf("AutoCollection/CorrelationContextManager")&&-1===o.indexOf("AutoCollection\\CorrelationContextManager")){if(n)break}else n=!0}return i=Math.max(0,i-1),n&&t.splice(0,i),r(e,t)}}if(e.apply(this,arguments),e.stackRewrite=n,this.stack&&"string"==typeof this.stack){var i=this.stack.split("\n");i.length>3&&0===i[2].trim().indexOf("at Error.AppInsightsAsyncCorrelatedErrorWrapper")&&i.splice(2,1),this.stack=i.map(function(e){var t=e.indexOf(") [");return t>-1&&(e=e.substr(0,t+1)),e}).join("\n")}for(var o=Object.getOwnPropertyNames(this).concat(Object.keys(this)),s=0;s<o.length;s++){var a=o[s],c=Zone.__symbol__(a);Object.defineProperty(this,a,{enumerable:!1}),Object.defineProperty(this,c,{enumerable:!1,writable:!0})}return this}t.prototype=e.prototype;for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r];t[i]||Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}global.Error=t},e.enabled=!1,e.hasEverEnabled=!1,e}();t.CorrelationContextManager=o;var s=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map(function(e){var t=e.split("=");return{key:t[0],value:t[1]}}).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var n=this.props[t];if(n.key===e)return n.value}},e.prototype.setProperty=function(t,n){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(n))r.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+n);else{for(var i=0;i<this.props.length;++i){var o=this.props[i];if(o.key===t)return void(o.value=n)}this.props.push({key:t,value:n})}},e.bannedCharacters=/[,=]/,e}()},function(e,t,n){"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(11),i=n(115);t.isNotInstalledError=function(e){const t=e;if("object"!=typeof e||null===e)return!1;if(e instanceof i.ModuleNotInstalledError)return!0;const n=e.message.indexOf("No module named")>=0;return"ENOENT"===t.code||127===t.code||n},t.skipIfTest=function(e){return function(t,n,i){const o=i.value;return i.value=function(...t){return r.isTestExecution()?e?Promise.resolve():void 0:o.apply(this,t)},i}}},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){if(e<0)throw new Error("start must be non-negative");if(t<0)throw new Error("length must be non-negative");this.start=e,this.length=t}static fromBounds(e,t){return new r(e,t-e)}get end(){return this.start+this.length}contains(e){return e>=this.start&&e<this.end}}r.empty=r.fromBounds(0,0),t.TextRange=r,function(e){e[e.Unknown=0]="Unknown",e[e.String=1]="String",e[e.Comment=2]="Comment",e[e.Keyword=3]="Keyword",e[e.Number=4]="Number",e[e.Identifier=5]="Identifier",e[e.Operator=6]="Operator",e[e.Colon=7]="Colon",e[e.Semicolon=8]="Semicolon",e[e.Comma=9]="Comma",e[e.OpenBrace=10]="OpenBrace",e[e.CloseBrace=11]="CloseBrace",e[e.OpenBracket=12]="OpenBracket",e[e.CloseBracket=13]="CloseBracket",e[e.OpenCurly=14]="OpenCurly",e[e.CloseCurly=15]="CloseCurly"}(t.TokenType||(t.TokenType={})),function(e){e[e.CommentsAndStrings=0]="CommentsAndStrings",e[e.Full=1]="Full"}(t.TokenizerMode||(t.TokenizerMode={}))},function(e,t,n){var r=n(390);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.prototype.toString;function i(e){return"[object String]"===r.call(e)}function o(e){return Array.isArray(e)}t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"[object Number]"===r.call(e)},t.error=function(e){return"[object Error]"===r.call(e)},t.func=function(e){return"[object Function]"===r.call(e)},t.array=o,t.stringArray=function(e){return o(e)&&e.every(function(e){return i(e)})}},function(e,t){e.exports=require("buffer")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPythonPathUpdaterServiceFactory=Symbol("IPythonPathUpdaterServiceFactory"),t.IPythonPathUpdaterServiceManager=Symbol("IPythonPathUpdaterServiceManager"),t.IInterpreterSelector=Symbol("IInterpreterSelector"),t.IInterpreterComparer=Symbol("IInterpreterComparer")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(4),l=n(11),d=n(1),h=n(5),p=n(20),f=n(15);t.selectTestWorkspace=function(){return o(this,void 0,void 0,function*(){if(Array.isArray(c.workspace.workspaceFolders)&&0!==c.workspace.workspaceFolders.length){if(1===c.workspace.workspaceFolders.length)return c.workspace.workspaceFolders[0].uri;{const e=yield c.window.showWorkspaceFolderPick({placeHolder:"Select a workspace"});return e?e.uri:void 0}}})},t.extractBetweenDelimiters=function(e,t,n){return(e=e.substring(e.indexOf(t)+t.length)).substring(0,e.lastIndexOf(n))},t.convertFileToPackage=function(e){const t=e.lastIndexOf(".");return e.substring(0,t).replace(/\//g,".").replace(/\\/g,".")};let g=class{constructor(e,t){this.flatteningVisitor=e,this.appShell=t.get(u.IApplicationShell),this.commandManager=t.get(u.ICommandManager)}parseProviderName(e){switch(e){case d.Product.nosetest:return"nosetest";case d.Product.pytest:return"pytest";case d.Product.unittest:return"unittest";default:throw new Error(`Unknown Test Product ${e}`)}}parseProduct(e){switch(e){case"nosetest":return d.Product.nosetest;case"pytest":return d.Product.pytest;case"unittest":return d.Product.unittest;default:throw new Error(`Unknown Test Provider ${e}`)}}getSettingsPropertyNames(e){switch(this.parseProviderName(e)){case"pytest":return{argsName:"pyTestArgs",pathName:"pyTestPath",enabledName:"pyTestEnabled"};case"nosetest":return{argsName:"nosetestArgs",pathName:"nosetestPath",enabledName:"nosetestsEnabled"};case"unittest":return{argsName:"unittestArgs",enabledName:"unittestEnabled"};default:throw new Error(`Unknown Test Provider '${e}'`)}}flattenTestFiles(e){e.forEach(e=>this.flatteningVisitor.visitTestFile(e));const t={testFiles:e,testFunctions:this.flatteningVisitor.flattenedTestFunctions,testSuites:this.flatteningVisitor.flattenedTestSuites,testFolders:[],rootTestFolders:[],summary:{passed:0,failures:0,errors:0,skipped:0}};return this.placeTestFilesIntoFolders(t),t}placeTestFilesIntoFolders(e){const t=[];e.testFiles.forEach(e=>{const n=a.dirname(e.name);-1===t.indexOf(n)&&t.push(n)}),e.testFolders=[];const n=new Map;t.sort(),t.forEach(t=>{t.split(a.sep).reduce((t,r,i,o)=>{let s,c=r;if(t.length>0&&(s=n.get(t),c=a.join(t,r)),!n.has(c)){const t={name:c,testFiles:[],folders:[],nameToRun:c,time:0};n.set(c,t),s?s.folders.push(t):e.rootTestFolders.push(t),e.testFiles.filter(e=>a.dirname(e.name)===c).forEach(e=>{t.testFiles.push(e)}),e.testFolders.push(t)}return c},"")})}parseTestName(e,t,n){if(!n)return;const r=a.isAbsolute(e)?e:a.resolve(t,e),i=n.testFolders.filter(t=>t.nameToRun===e||t.name===e||t.name===r);if(i.length>0)return{testFolder:i};const o=n.testFiles.filter(t=>t.nameToRun===e||t.name===e||t.fullPath===r);if(o.length>0)return{testFile:o};const s=n.testFunctions.filter(t=>t.testFunction.nameToRun===e||t.testFunction.name===e).map(e=>e.testFunction);return s.length>0?{testFunction:s}:{testFile:[{name:e,nameToRun:e,functions:[],suites:[],xmlName:e,fullPath:"",time:0}]}}displayTestErrorMessage(e){this.appShell.showErrorMessage(e,l.Button_Text_Tests_View_Output).then(e=>{e===l.Button_Text_Tests_View_Output&&this.commandManager.executeCommand(l.Commands.Tests_ViewOutput,void 0,p.CommandSource.ui)})}mergeTests(e){return e.reduce((e,t,n)=>0===n?e:(e.summary.errors+=t.summary.errors,e.summary.failures+=t.summary.failures,e.summary.passed+=t.summary.passed,e.summary.skipped+=t.summary.skipped,e.rootTestFolders.push(...t.rootTestFolders),e.testFiles.push(...t.testFiles),e.testFolders.push(...t.testFolders),e.testFunctions.push(...t.testFunctions),e.testSuites.push(...t.testSuites),e),e[0])}shouldRunAllTests(e){return!e||!(Array.isArray(e.testFile)&&e.testFile.length>0||Array.isArray(e.testFolder)&&e.testFolder.length>0||Array.isArray(e.testFunction)&&e.testFunction.length>0||Array.isArray(e.testSuite)&&e.testSuite.length>0)}};g=r([s.injectable(),i(0,s.inject(f.ITestVisitor)),i(0,s.named("TestFlatteningVisitor")),i(1,s.inject(h.IServiceContainer))],g),t.TestsHelper=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INugetService=Symbol("INugetService"),t.INugetRepository=Symbol("INugetRepository")},function(e,t,n){"use strict";const r=n(33).fromCallback,i=n(330);e.exports={remove:r(i),removeSync:i.sync}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(358);function i(e){switch(e){case 95:return!0;case 6277:case 6278:case 8472:case 8494:case 12443:case 12444:return!0}switch(r.getUnicodeCategory(e)){case r.UnicodeCategory.UppercaseLetter:case r.UnicodeCategory.LowercaseLetter:case r.UnicodeCategory.TitlecaseLetter:case r.UnicodeCategory.ModifierLetter:case r.UnicodeCategory.OtherLetter:case r.UnicodeCategory.LetterNumber:return!0}return!1}function o(e){return e>=48&&e<=57||95===e}t.isIdentifierStartChar=i,t.isIdentifierChar=function(e){if(i(e))return!0;switch(e){case 183:case 903:case 4969:case 4970:case 4971:case 4972:case 4973:case 4974:case 4975:case 4976:case 4977:case 6618:return!0}switch(r.getUnicodeCategory(e)){case r.UnicodeCategory.NonSpacingMark:case r.UnicodeCategory.SpacingCombiningMark:case r.UnicodeCategory.DecimalDigitNumber:case r.UnicodeCategory.ConnectorPunctuation:return!0}return!1},t.isWhiteSpace=function(e){return e<=32||8203===e},t.isLineBreak=function(e){return 13===e||10===e},t.isNumber=function(e){return e>=48&&e<=57||95===e},t.isDecimal=o,t.isHex=function(e){return o(e)||e>=97&&e<=102||e>=65&&e<=70||95===e},t.isOctal=function(e){return e>=48&&e<=55||95===e},t.isBinary=function(e){return 48===e||49===e||95===e}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(66),o=n(28),s=n(0),a=n(120),c=n(17),u=n(3),l=n(2);var d;!function(e){e[e.Delete=0]="Delete",e[e.Insert=1]="Insert",e[e.Replace=2]="Replace"}(d||(d={}));const h=c.EOL.length;class p{constructor(e,t){this.action=e,this.start=t,this.text=""}apply(){switch(this.action){case d.Insert:return l.TextEdit.insert(this.start,this.text);case d.Delete:return l.TextEdit.delete(new l.Range(this.start,this.end));case d.Replace:return l.TextEdit.replace(new l.Range(this.start,this.end),this.text);default:return new l.TextEdit(new l.Range(new l.Position(0,0),new l.Position(0,0)),"")}}}function f(e,t,r=0){let i=r,o=0;if(i>0){e.split(/\r?\n/g).filter((e,t)=>t<i).forEach(e=>o+=e.length+h)}const s=[];let a=null;for(let e=0;e<t.length;e+=1){const r=new l.Position(i,o);for(let n=0;n<t[e][1].length;n+=1)"\n"!==t[e][1][n]?o+=1:(o=0,i+=1);const c=n(66);switch(t[e][0]){case c.DIFF_DELETE:if(null===a)a=new p(d.Delete,r);else if(a.action!==d.Delete)throw new Error("cannot format due to an internal error.");a.end=new l.Position(i,o);break;case c.DIFF_INSERT:null===a?a=new p(d.Insert,r):a.action===d.Delete&&(a.action=d.Replace),i=r.line,o=r.character,a.text+=t[e][1];break;case c.DIFF_EQUAL:null!==a&&(s.push(a),a=null)}}return null!==a&&s.push(a),s}function g(e){const t=[];if(!e)return t;const r=e.split(/[\r\n]/);let o=0;const s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;for(;o<r.length;){const e=r[o].match(s);if(!e)throw new Error(`Invalid patch string: ${r[o]}`);const a=new i.diff_match_patch.patch_obj;t.push(a),a.start1=parseInt(e[1],10),""===e[2]?(a.start1-=1,a.length1=1):"0"===e[2]?a.length1=0:(a.start1-=1,a.length1=parseInt(e[2],10)),a.start2=parseInt(e[3],10),""===e[4]?(a.start2-=1,a.length2=1):"0"===e[4]?a.length2=0:(a.start2-=1,a.length2=parseInt(e[4],10)),o+=1;const c=n(66);for(;o<r.length;){const e=r[o].charAt(0);let t;try{t=r[o].substring(1)}catch(e){throw new Error("Illegal escape in patch_fromText")}if("-"===e)a.diffs.push([c.DIFF_DELETE,t]);else if("+"===e)a.diffs.push([c.DIFF_INSERT,t]);else if(" "===e)a.diffs.push([c.DIFF_EQUAL,t]);else{if("@"===e)break;if(""!==e)throw new Error(`Invalid patch mode '${e}' in: ${t}`)}o+=1}}return t}t.getTextEditsFromPatch=function(e,t){if(t.startsWith("---")&&(t=t.substring(t.indexOf("@@"))),0===t.length)return[];t=t.replace(/\\ No newline at end of file[\r\n]/,"");const r=new(n(66).diff_match_patch),i=g.call(r,t);if(!Array.isArray(i)||0===i.length)throw new Error("Unable to parse Patch string");const o=[];return i.forEach(t=>{t.diffs.forEach(e=>{e[1]+=c.EOL}),f(e,t.diffs,t.start1).forEach(e=>o.push(e.apply()))}),o},t.getWorkspaceEditsFromPatch=function(e,t){const r=new l.WorkspaceEdit;return e.forEach(e=>{const i=e.indexOf("@@");if(-1===i)return;const s=e.substring(0,i).split(/\r?\n/g).map(e=>e.trim()).filter(e=>e.length>0&&e.toLowerCase().endsWith(".py")&&e.indexOf(" a")>0);if(e.startsWith("---")&&(e=e.substring(i)),0===e.length)return;if(0===s.length)return;let a=s[0].substring(s[0].indexOf(" a")+3).trim();if(a=t&&!u.isAbsolute(a)?u.resolve(t,a):a,!o.existsSync(a))return;e=e.replace(/\\ No newline at end of file[\r\n]/,"");const h=new(n(66).diff_match_patch),p=g.call(h,e);if(!Array.isArray(p)||0===p.length)throw new Error("Unable to parse Patch string");const m=o.readFileSync(a).toString("utf8"),y=l.Uri.file(a);p.forEach(e=>{e.diffs.forEach(e=>{e[1]+=c.EOL}),f(m,e.diffs,e.start1).forEach(e=>{switch(e.action){case d.Delete:r.delete(y,new l.Range(e.start,e.end));break;case d.Insert:r.insert(y,e.start,e.text);break;case d.Replace:r.replace(y,new l.Range(e.start,e.end),e.text)}})})}),r},t.getTextEdits=function(e,t){return f(e,(new(n(66).diff_match_patch)).diff_main(e,t)).map(e=>e.apply())},t.getTempFileWithDocumentContents=function(e){return new Promise((t,n)=>{const r=u.extname(e.uri.fsPath),i=`${e.uri.fsPath}.${a(e.uri.fsPath)}${r}`;o.writeFile(i,e.getText(),e=>{e&&n(`Failed to create a temporary file, ${e.message}`),t(i)})})};let m=class{getWorkspaceEditsFromPatch(e,t,r){const i=new l.WorkspaceEdit;if(t.startsWith("---")&&(t=t.substring(t.indexOf("@@"))),0===t.length)return i;t=t.replace(/\\ No newline at end of file[\r\n]/,"");const o=new(n(66).diff_match_patch),s=g.call(o,t);if(!Array.isArray(s)||0===s.length)throw new Error("Unable to parse Patch string");return s.forEach(t=>{t.diffs.forEach(e=>{e[1]+=c.EOL}),f(e,t.diffs,t.start1).forEach(e=>{switch(e.action){case d.Delete:i.delete(r,new l.Range(e.start,e.end));break;case d.Insert:i.insert(r,e.start,e.text);break;case d.Replace:i.replace(r,new l.Range(e.start,e.end),e.text)}})}),i}};m=r([s.injectable()],m),t.EditorUtils=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(18),i=n(3),o=n(184);t.fsExistsAsync=function(e){return new Promise(t=>{r.exists(e,e=>t(e))})},t.fsReaddirAsync=function(e){return new Promise(t=>{r.readdir(e,(n,r)=>{if(n)return t([]);t(r.map(t=>i.join(e,t)))})})},t.getSubDirectories=function(e){return new Promise(t=>{r.readdir(e,(n,o)=>{if(n)return t([]);const s=[];o.forEach(t=>{const n=i.join(e,t);try{r.statSync(n).isDirectory()&&s.push(n)}catch(e){}}),t(s)})})},t.createTemporaryFile=function(e,t){const n={postfix:e};return t&&(n.dir=t),new Promise((e,t)=>{o.file(n,(n,r,i,o)=>{if(n)return t(n);e({filePath:r,cleanupCallback:o})})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.create=function(e){return{dispose:e}}}(t.Disposable||(t.Disposable={})),function(e){var t={dispose:function(){}};e.None=function(){return t}}(t.Event||(t.Event={}));var r=function(){function e(){}return e.prototype.add=function(e,t,n){var r=this;void 0===t&&(t=null),this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:function(){return r.remove(e,t)}})},e.prototype.remove=function(e,t){if(void 0===t&&(t=null),this._callbacks){for(var n=!1,r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this._callbacks)return[];for(var n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0),o=0,s=r.length;o<s;o++)try{n.push(r[o].apply(i[o],e))}catch(e){console.error(e)}return n},e.prototype.isEmpty=function(){return!this._callbacks||0===this._callbacks.length},e.prototype.dispose=function(){this._callbacks=void 0,this._contexts=void 0},e}(),i=function(){function e(e){this._options=e}return Object.defineProperty(e.prototype,"event",{get:function(){var t=this;return this._event||(this._event=function(n,i,o){var s;return t._callbacks||(t._callbacks=new r),t._options&&t._options.onFirstListenerAdd&&t._callbacks.isEmpty()&&t._options.onFirstListenerAdd(t),t._callbacks.add(n,i),s={dispose:function(){t._callbacks.remove(n,i),s.dispose=e._noop,t._options&&t._options.onLastListenerRemove&&t._callbacks.isEmpty()&&t._options.onLastListenerRemove(t)}},Array.isArray(o)&&o.push(s),s}),this._event},enumerable:!0,configurable:!0}),e.prototype.fire=function(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)},e.prototype.dispose=function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)},e._noop=function(){},e}();t.Emitter=i},function(e,t){e.exports=require("net")},function(e,t,n){e.exports=f,f.Minimatch=g;var r={sep:"/"};try{r=n(3)}catch(e){}var i=f.GLOBSTAR=g.GLOBSTAR={},o=n(450),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="[^/]",c=a+"*?",u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",l="(?:(?!(?:\\/|^)\\.).)*?",d=function(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}("().*{}+?[]^$\\!");var h=/\/+/;function p(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function f(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new g(t,n).match(e))}function g(e,t){if(!(this instanceof g))return new g(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==r.sep&&(e=e.split(r.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function m(e,t){if(t||(t=this instanceof g?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:o(e)}f.filter=function(e,t){return t=t||{},function(n,r,i){return f(n,e,t)}},f.defaults=function(e){if(!e||!Object.keys(e).length)return f;var t=f,n=function(n,r,i){return t.minimatch(n,r,p(e,i))};return n.Minimatch=function(n,r){return new t.Minimatch(n,p(e,r))},n},g.defaults=function(e){return e&&Object.keys(e).length?f.defaults(e).Minimatch:g},g.prototype.debug=function(){},g.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map(function(e){return e.split(h)}),this.debug(this.pattern,n),n=n.map(function(e,t,n){return e.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(e){return-1===e.indexOf(!1)}),this.debug(this.pattern,n),this.set=n},g.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=0;if(this.options.nonegate)return;for(var r=0,i=e.length;r<i&&"!"===e.charAt(r);r++)t=!t,n++;n&&(this.pattern=e.substr(n));this.negate=t},f.braceExpand=function(e,t){return m(e,t)},g.prototype.braceExpand=m,g.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return i;if(""===e)return"";var r,o="",u=!!n.nocase,l=!1,h=[],p=[],f=!1,g=-1,m=-1,v="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=this;function S(){if(r){switch(r){case"*":o+=c,u=!0;break;case"?":o+=a,u=!0;break;default:o+="\\"+r}b.debug("clearStateChar %j %j",r,o),r=!1}}for(var _,w=0,P=e.length;w<P&&(_=e.charAt(w));w++)if(this.debug("%s\t%s %s %j",e,w,o,_),l&&d[_])o+="\\"+_,l=!1;else switch(_){case"/":return!1;case"\\":S(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,w,o,_),f){this.debug("  in class"),"!"===_&&w===m+1&&(_="^"),o+=_;continue}b.debug("call clearStateChar %j",r),S(),r=_,n.noext&&S();continue;case"(":if(f){o+="(";continue}if(!r){o+="\\(";continue}h.push({type:r,start:w-1,reStart:o.length,open:s[r].open,close:s[r].close}),o+="!"===r?"(?:(?!(?:":"(?:",this.debug("plType %j %j",r,o),r=!1;continue;case")":if(f||!h.length){o+="\\)";continue}S(),u=!0;var C=h.pop();o+=C.close,"!"===C.type&&p.push(C),C.reEnd=o.length;continue;case"|":if(f||!h.length||l){o+="\\|",l=!1;continue}S(),o+="|";continue;case"[":if(S(),f){o+="\\"+_;continue}f=!0,m=w,g=o.length,o+=_;continue;case"]":if(w===m+1||!f){o+="\\"+_,l=!1;continue}if(f){var T=e.substring(m+1,w);try{RegExp("["+T+"]")}catch(e){var I=this.parse(T,y);o=o.substr(0,g)+"\\["+I[0]+"\\]",u=u||I[1],f=!1;continue}}u=!0,f=!1,o+=_;continue;default:S(),l?l=!1:!d[_]||"^"===_&&f||(o+="\\"),o+=_}f&&(T=e.substr(m+1),I=this.parse(T,y),o=o.substr(0,g)+"\\["+I[0],u=u||I[1]);for(C=h.pop();C;C=h.pop()){var E=o.slice(C.reStart+C.open.length);this.debug("setting tail",o,C),E=E.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,n){return n||(n="\\"),t+t+n+"|"}),this.debug("tail=%j\n   %s",E,E,C,o);var O="*"===C.type?c:"?"===C.type?a:"\\"+C.type;u=!0,o=o.slice(0,C.reStart)+O+"\\("+E}S(),l&&(o+="\\\\");var R=!1;switch(o.charAt(0)){case".":case"[":case"(":R=!0}for(var x=p.length-1;x>-1;x--){var k=p[x],D=o.slice(0,k.reStart),A=o.slice(k.reStart,k.reEnd-8),j=o.slice(k.reEnd-8,k.reEnd),N=o.slice(k.reEnd);j+=N;var F=D.split("(").length-1,M=N;for(w=0;w<F;w++)M=M.replace(/\)[+*?]?/,"");var L="";""===(N=M)&&t!==y&&(L="$");var W=D+A+N+L+j;o=W}""!==o&&u&&(o="(?=.)"+o);R&&(o=v+o);if(t===y)return[o,u];if(!u)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var U=n.nocase?"i":"";try{var H=new RegExp("^"+o+"$",U)}catch(e){return new RegExp("$.")}return H._glob=e,H._src=o,H};var y={};f.makeRe=function(e,t){return new g(e,t||{}).makeRe()},g.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?c:t.dot?u:l,r=t.nocase?"i":"",o=e.map(function(e){return e.map(function(e){return e===i?n:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,r)}catch(e){this.regexp=!1}return this.regexp},f.match=function(e,t,n){var r=new g(t,n=n||{});return e=e.filter(function(e){return r.match(e)}),r.options.nonull&&!e.length&&e.push(t),e},g.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==r.sep&&(e=e.split(r.sep).join("/"));e=e.split(h),this.debug(this.pattern,"split",e);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=e.length-1;o>=0&&!(i=e[o]);o--);for(o=0;o<s.length;o++){var a=s[o],c=e;n.matchBase&&1===a.length&&(c=[i]);var u=this.matchOne(c,a,t);if(u)return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},g.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,s=0,a=e.length,c=t.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u,l=t[s],d=e[o];if(this.debug(t,l,d),!1===l)return!1;if(l===i){this.debug("GLOBSTAR",[t,l,d]);var h=o,p=s+1;if(p===c){for(this.debug("** at the end");o<a;o++)if("."===e[o]||".."===e[o]||!r.dot&&"."===e[o].charAt(0))return!1;return!0}for(;h<a;){var f=e[h];if(this.debug("\nglobstar while",e,h,t,p,f),this.matchOne(e.slice(h),t.slice(p),n))return this.debug("globstar found match!",h,a,f),!0;if("."===f||".."===f||!r.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!n||(this.debug("\n>>> no match, partial?",e,h,t,p),h!==a))}if("string"==typeof l?(u=r.nocase?d.toLowerCase()===l.toLowerCase():d===l,this.debug("string match",l,d,u)):(u=d.match(l),this.debug("pattern match",l,d,u)),!u)return!1}if(o===a&&s===c)return!0;if(o===a)return n;if(s===c)return o===a-1&&""===e[o];throw new Error("wtf?")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(182);class o{resolve(e){return i.isString(e)?this.__resolveString(e):i.isArray(e)?this.__resolveArray(e):i.isObject(e)?this.__resolveLiteral(e):e}resolveAny(e){return i.isString(e)?this.__resolveString(e):i.isArray(e)?this.__resolveAnyArray(e):i.isObject(e)?this.__resolveAnyLiteral(e):e}__resolveString(e){return e.replace(/\$\{(.*?)\}/g,(e,t)=>{const n=this[t];return i.isString(n)?n:e&&(e.indexOf("env.")>0||e.indexOf("env:")>0)?"":e})}__resolveLiteral(e){const t=Object.create(null);return Object.keys(e).forEach(n=>{const r=e[n];t[n]=this.resolve(r)}),t}__resolveAnyLiteral(e){const t=Object.create(null);return Object.keys(e).forEach(n=>{const r=e[n];t[n]=this.resolveAny(r)}),t}__resolveArray(e){return e.map(e=>this.__resolveString(e))}__resolveAnyArray(e){return e.map(e=>this.resolveAny(e))}}t.AbstractSystemVariables=o;t.SystemVariables=class extends o{constructor(e){super(),this._workspaceFolder="string"==typeof e?e:__dirname,this._workspaceFolderName=r.basename(this._workspaceFolder),Object.keys(process.env).forEach(e=>{this[`env:${e}`]=this[`env.${e}`]=process.env[e]})}get cwd(){return this.workspaceFolder}get workspaceRoot(){return this._workspaceFolder}get workspaceFolder(){return this._workspaceFolder}get workspaceRootFolderName(){return this._workspaceFolderName}get workspaceFolderBasename(){return this._workspaceFolderName}}},function(e,t,n){"use strict";const r=n(17).homedir();e.exports=(e=>{if("string"!=typeof e)throw new TypeError(`Expected a string, got ${typeof e}`);return r?e.replace(/^~($|\/|\\)/,`${r}$1`):e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8);const r=n(98),i=n(2),o=n(218),s=n(219),a=n(29);function c(e,t,n,i){return{data:{source:s.appendLineFeed(e),cell_type:"code",outputs:[],metadata:{},execution_count:0},id:i||r(),file:t,line:n,state:a.CellState.init}}function u(e,t,n,i){return{id:i||r(),file:t,line:n,state:a.CellState.finished,data:{cell_type:"markdown",source:s.generateMarkdownFromCodeLines(e),metadata:{}}}}function l(e,t,n,r,i,s){const a=t.splitLines({trim:!1}),l=a[0];if(new o.CellMatcher(e).isMarkdown(l)){const e=i?a.findIndex(e=>e.trim().length>0&&!e.trim().startsWith("#")):-1;return e>=0?[u(a.slice(0,e),n,r,s),c(a.slice(e),n,r+e)]:[u(a,n,r,s)]}return[c(a,n,r,s)]}function d(e,t){const n=new o.CellMatcher(t),r=[];for(let t=0;t<e.lineCount;t+=1){const o=e.lineAt(t);if(n.isCell(o.text)){if(r.length>0){const n=r[r.length-1];n.range=new i.Range(n.range.start,e.lineAt(t-1).range.end)}const s=n.exec(o.text);void 0!==s&&r.push({range:o.range,title:s})}}if(r.length>=1){const t=e.lineAt(e.lineCount-1),n=r[r.length-1];n.range=new i.Range(n.range.start,t.range.end)}return r}t.generateCells=l,t.hasCells=function(e,t){const n=new o.CellMatcher(t);for(let t=0;t<e.lineCount;t+=1){const r=e.lineAt(t);if(n.isCell(r.text))return!0}return!1},t.generateCellRanges=d,t.generateCellsFromDocument=function(e,t){const n=d(e,t);return Array.prototype.concat(...n.map(n=>{const r=e.getText(n.range);return l(t,r,e.fileName,n.range.start.line)}))}},function(e,t,n){var r=n(558),i=n(559);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDebugSessionEventHandlers=Symbol("IDebugSessionEventHandlers"),t.IChildProcessAttachService=Symbol("IChildProcessAttachService")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IVirtualEnvironmentManager=Symbol("VirtualEnvironmentManager")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPythonInPathCommandProvider=Symbol("IPythonInPathCommandProvider"),t.IPipEnvServiceHelper=Symbol("IPipEnvServiceHelper")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnacondaCompanyNames=["Anaconda, Inc.","Continuum Analytics, Inc."],t.AnacondaCompanyName="Anaconda, Inc.",t.AnacondaDisplayName="Anaconda",t.AnacondaIdentfiers=["Anaconda","Conda","Continuum"]},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(28),o=n(3),s=n(2),a=n(4),c=n(11);n(8);const u=n(79),l=n(14),d=n(1),h=n(90),p=n(135);t.BaseFormatter=class{constructor(e,t,n){this.Id=e,this.product=t,this.serviceContainer=n,this.outputChannel=n.get(d.IOutputChannel,c.STANDARD_OUTPUT_CHANNEL),this.helper=n.get(p.IFormatterHelper),this.workspace=n.get(a.IWorkspaceService)}getDocumentPath(e,t){return o.basename(e.uri.fsPath)===e.uri.fsPath?t:o.dirname(e.fileName)}getWorkspaceUri(e){const t=this.workspace.getWorkspaceFolder(e.uri);if(t)return t.uri;const n=this.workspace.workspaceFolders;return Array.isArray(n)&&n.length>0?n[0].uri:s.Uri.file(__dirname)}provideDocumentFormattingEdits(e,t,n,i,o){return r(this,void 0,void 0,function*(){"string"==typeof o&&0!==o.length||(o=this.getWorkspaceUri(e).fsPath);const t=yield this.createTempFile(e);if(this.checkCancellation(e.fileName,t,n))return[];const r=this.helper.getExecutionInfo(this.product,i,e.uri);r.args.push(t);const a=this.serviceContainer.get(l.IPythonToolExecutionService).exec(r,{cwd:o,throwOnStdErr:!1,token:n},e.uri).then(e=>e.stdout).then(r=>this.checkCancellation(e.fileName,t,n)?[]:h.getTextEditsFromPatch(e.getText(),r)).catch(r=>this.checkCancellation(e.fileName,t,n)?[]:(this.handleError(this.Id,r,e.uri).catch(()=>{}),[])).then(n=>(this.deleteTempFile(e.fileName,t).ignoreErrors(),n));return s.window.setStatusBarMessage(`Formatting with ${this.Id}`,a),a})}handleError(e,t,n){return r(this,void 0,void 0,function*(){let e=`Formatting with ${this.Id} failed.`;if(u.isNotInstalledError(t)){const t=this.serviceContainer.get(d.IInstaller);(yield t.isInstalled(this.product,n))||(e+=`\nYou could either install the '${this.Id}' formatter, turn it off or use another formatter.`,t.promptToInstall(this.product,n).catch(e=>console.error("Python Extension: promptToInstall",e)))}this.outputChannel.appendLine(`\n${e}\n${t}`)})}createTempFile(e){return r(this,void 0,void 0,function*(){return e.isDirty?h.getTempFileWithDocumentContents(e):e.fileName})}deleteTempFile(e,t){return e!==t?i.unlink(t):Promise.resolve()}checkCancellation(e,t,n){return!(!n||!n.isCancellationRequested||(this.deleteTempFile(e,t).ignoreErrors(),0))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICodeExecutionService=Symbol("ICodeExecutionService"),t.ICodeExecutionHelper=Symbol("ICodeExecutionHelper"),t.ICodeExecutionManager=Symbol("ICodeExecutionManager"),t.ITerminalAutoActivation=Symbol("ITerminalAutoActivation")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(106),i=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new r.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(105),i=n(154),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=i.namedConstraint(e),new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new r.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=i.taggedConstraint(e)(t),new r.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return i.typeConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return i.namedConstraint(e)(t.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return i.taggedConstraint(e)(t)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.typeConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,i.namedConstraint(e))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(e)(t))},new r.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!i.traverseAncerstors(t,e)},new r.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(61),o=n(0);function s(e=0,t=10){return e+function(){let e=0;const t=i.randomBytes(2);return(e=(t.readUInt8(0)<<8)+t.readUInt8(1))/(Math.pow(16,4)-1)}()*(t-e)}t.getRandomBetween=s;let a=class{getRandomInt(e=0,t=10){return s(e,t)}};a=r([o.injectable()],a),t.Random=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IApplicationDiagnostics=Symbol("IApplicationDiagnostics")},function(e,t,n){"use strict";if(Object.defineProperty(t,"__esModule",{value:!0}),t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL,t.IsInitialized){var r=n(263),i=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),o={bunyan:r.bunyan,console:r.console,mongodb:r.mongodb,mongodbCore:r.mongodbCore,mysql:r.mysql,redis:r.redis,pg:r.pg,pgPool:r.pgPool,winston:r.winston};for(var s in o)-1===i.indexOf(s)&&o[s].enable()}t.registerContextPreservation=function(e){t.IsInitialized&&n(25).channel.addContextPreservation(e)}},function(e,t,n){"use strict";var r=n(111),i=n(112),o=n(37),s=n(52),a=n(78),c=n(301),u=n(77),l=n(109),d=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),l.IsInitialized&&(n(302).enable(e,this._client),n(303).enable(e,this._client),n(304).enable(e,this._client),n(305).enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;r.get;var n=r.request,o=i.request,s=function(n,r){var i=!r[e.disableCollectionRequestOption]&&!n[e.alreadyAutoCollectedFlag];n[e.alreadyAutoCollectedFlag]=!0,n&&r&&i&&e.trackRequest(t._client,{options:r,request:n})};r.request=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=n.call.apply(n,[r,e].concat(t));return s(o,e),o},i.request=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=o.call.apply(o,[i,e].concat(t));return s(r,e),r},r.get=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,o=(i=r.request).call.apply(i,[r,e].concat(t));return o.end(),o},i.get=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=(r=i.request).call.apply(r,[i,e].concat(t));return o.end(),o}},e.trackRequest=function(t,n){if(n.options&&n.request&&t){var r=new c(n.options,n.request),i=u.CorrelationContextManager.getCurrentContext(),l=i&&i.operation&&i.operation.parentId+e.requestNumber+++".";if(s.canIncludeCorrelationHeader(t,r.getUrl())&&n.request.getHeader&&n.request.setHeader){if(t.config&&t.config.correlationId){var d=n.request.getHeader(a.requestContextHeader);if(d){var h=d.split(","),p=a.requestContextSourceKey+"=";h.some(function(e){return e.substring(0,p.length)===p})||n.request.setHeader(a.requestContextHeader,d+","+a.requestContextSourceKey+"="+t.config.correlationId)}else n.request.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+t.config.correlationId)}if(i&&i.operation){n.request.setHeader(a.requestIdHeader,l),n.request.setHeader(a.parentIdHeader,i.operation.id),n.request.setHeader(a.rootIdHeader,l);var f=i.customProperties.serializeToHeader();f&&n.request.setHeader(a.correlationContextHeader,f)}}n.request.on&&(n.request.on("response",function(e){r.onResponse(e);var i=r.getDependencyTelemetry(n,l);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects["http.ClientResponse"]=e,t.trackDependency(i)}),n.request.on("error",function(e){r.onError(e);var i=r.getDependencyTelemetry(n,l);i.contextObjects=i.contextObjects||{},i.contextObjects["http.RequestOptions"]=n.options,i.contextObjects["http.ClientRequest"]=n.request,i.contextObjects.Error=e,t.trackDependency(i)}))}else o.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!n.options,!n.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=d},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("constants")},function(e,t,n){"use strict";var r=n(52),i=n(37),o=function(){function e(){}return e.queryCorrelationId=function(t,n){var o=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(o))n(e.completedLookups[o]);else if(e.pendingLookups[o])e.pendingLookups[o].push(n);else{e.pendingLookups[o]=[n];var s=function(){if(e.pendingLookups[o]){var n={method:"GET",disableAppInsightsAutoCollection:!0};i.info(e.TAG,n);var a=r.makeRequest(t,o,n,function(n){if(200===n.statusCode){var r="";n.setEncoding("utf-8"),n.on("data",function(e){r+=e}),n.on("end",function(){i.info(e.TAG,r);var t=e.correlationIdPrefix+r;e.completedLookups[o]=t,e.pendingLookups[o]&&e.pendingLookups[o].forEach(function(e){return e(t)}),delete e.pendingLookups[o]})}else n.statusCode>=400&&n.statusCode<500?(e.completedLookups[o]=void 0,delete e.pendingLookups[o]):setTimeout(s,t.correlationIdRetryIntervalMs)});a&&(a.on("error",function(t){i.warn(e.TAG,t)}),a.end())}};setTimeout(s,0)}},e.cancelCorrelationIdQuery=function(t,n){var r=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[r];i&&(e.pendingLookups[r]=i.filter(function(e){return e!=n}),0==e.pendingLookups[r].length&&delete e.pendingLookups[r])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var n=(e.currentRootId++).toString(16);return e.appendSuffix(t,n,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var n="|"===e[0]?1:0;return e.substring(n,t)},e.generateRootId=function(){return"|"+r.w3cTraceId()+"."},e.appendSuffix=function(t,n,i){if(t.length+n.length<e.requestIdMaxLength)return t+n+i;var o=e.requestIdMaxLength-9;if(t.length>o)for(;o>1;--o){var s=t[o-1];if("."===s||"_"===s)break}if(o<=1)return e.generateRootId();for(n=r.randomu32().toString(16);n.length<8;)n="0"+n;return t.substring(0,o)+n+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=r.randomu32(),e}();e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ModuleNotInstalledError=class extends Error{constructor(e){super(`Module '${e}' not installed.`)}}},function(e,t,n){"use strict";const r=n(33).fromCallback,i=n(332);e.exports={readJson:r(i.readFile),readJsonSync:i.readFileSync,writeJson:r(i.writeFile),writeJsonSync:i.writeFileSync}},function(e,t,n){var r=n(174).Symbol;e.exports=r},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(176),o=n(81);function s(e,t,n){const o=e.getText(new r.Range(new r.Position(0,0),t));return(new i.Tokenizer).tokenize(o,0,o.length,n)}t.getDocumentTokens=s,t.isPositionInsideStringOrComment=function(e,t){const n=s(e,t.translate(1,0),o.TokenizerMode.CommentsAndStrings),r=e.offsetAt(t),i=n.getItemContaining(r-1);if(i>=0){const e=n.getItemAt(i);return e.type===o.TokenType.String||e.type===o.TokenType.Comment}if(r>0&&i>=0){const e=n.getItemAt(i);return e.end===r&&e.type===o.TokenType.Comment}return!1}},function(e,t,n){!function(){var t=n(376),r=n(180).utf8,i=n(377),o=n(180).bin,s=function(e,n){e.constructor==String?e=n&&"binary"===n.encoding?o.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var a=t.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,d=-1732584194,h=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[c>>>5]|=128<<c%32,a[14+(c+64>>>9<<4)]=c;var f=s._ff,g=s._gg,m=s._hh,y=s._ii;for(p=0;p<a.length;p+=16){var v=u,b=l,S=d,_=h;l=y(l=y(l=y(l=y(l=m(l=m(l=m(l=m(l=g(l=g(l=g(l=g(l=f(l=f(l=f(l=f(l,d=f(d,h=f(h,u=f(u,l,d,h,a[p+0],7,-680876936),l,d,a[p+1],12,-389564586),u,l,a[p+2],17,606105819),h,u,a[p+3],22,-1044525330),d=f(d,h=f(h,u=f(u,l,d,h,a[p+4],7,-176418897),l,d,a[p+5],12,1200080426),u,l,a[p+6],17,-1473231341),h,u,a[p+7],22,-45705983),d=f(d,h=f(h,u=f(u,l,d,h,a[p+8],7,1770035416),l,d,a[p+9],12,-1958414417),u,l,a[p+10],17,-42063),h,u,a[p+11],22,-1990404162),d=f(d,h=f(h,u=f(u,l,d,h,a[p+12],7,1804603682),l,d,a[p+13],12,-40341101),u,l,a[p+14],17,-1502002290),h,u,a[p+15],22,1236535329),d=g(d,h=g(h,u=g(u,l,d,h,a[p+1],5,-165796510),l,d,a[p+6],9,-1069501632),u,l,a[p+11],14,643717713),h,u,a[p+0],20,-373897302),d=g(d,h=g(h,u=g(u,l,d,h,a[p+5],5,-701558691),l,d,a[p+10],9,38016083),u,l,a[p+15],14,-660478335),h,u,a[p+4],20,-405537848),d=g(d,h=g(h,u=g(u,l,d,h,a[p+9],5,568446438),l,d,a[p+14],9,-1019803690),u,l,a[p+3],14,-187363961),h,u,a[p+8],20,1163531501),d=g(d,h=g(h,u=g(u,l,d,h,a[p+13],5,-1444681467),l,d,a[p+2],9,-51403784),u,l,a[p+7],14,1735328473),h,u,a[p+12],20,-1926607734),d=m(d,h=m(h,u=m(u,l,d,h,a[p+5],4,-378558),l,d,a[p+8],11,-2022574463),u,l,a[p+11],16,1839030562),h,u,a[p+14],23,-35309556),d=m(d,h=m(h,u=m(u,l,d,h,a[p+1],4,-1530992060),l,d,a[p+4],11,1272893353),u,l,a[p+7],16,-155497632),h,u,a[p+10],23,-1094730640),d=m(d,h=m(h,u=m(u,l,d,h,a[p+13],4,681279174),l,d,a[p+0],11,-358537222),u,l,a[p+3],16,-722521979),h,u,a[p+6],23,76029189),d=m(d,h=m(h,u=m(u,l,d,h,a[p+9],4,-640364487),l,d,a[p+12],11,-421815835),u,l,a[p+15],16,530742520),h,u,a[p+2],23,-995338651),d=y(d,h=y(h,u=y(u,l,d,h,a[p+0],6,-198630844),l,d,a[p+7],10,1126891415),u,l,a[p+14],15,-1416354905),h,u,a[p+5],21,-57434055),d=y(d,h=y(h,u=y(u,l,d,h,a[p+12],6,1700485571),l,d,a[p+3],10,-1894986606),u,l,a[p+10],15,-1051523),h,u,a[p+1],21,-2054922799),d=y(d,h=y(h,u=y(u,l,d,h,a[p+8],6,1873313359),l,d,a[p+15],10,-30611744),u,l,a[p+6],15,-1560198380),h,u,a[p+13],21,1309151649),d=y(d,h=y(h,u=y(u,l,d,h,a[p+4],6,-145523070),l,d,a[p+11],10,-1120210379),u,l,a[p+2],15,718787259),h,u,a[p+9],21,-343485551),u=u+v>>>0,l=l+b>>>0,d=d+S>>>0,h=h+_>>>0}return t.endian([u,l,d,h])};s._ff=function(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},s._gg=function(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},s._hh=function(e,t,n,r,i,o,s){var a=e+(t^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+t},s._ii=function(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(s(e,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):t.bytesToHex(r)}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.regEx=e,this.startWord=t}test(e){return this.regEx.lastIndex=-1,this.regEx.test(e)}}t.BlockRegEx=r,t.IF_REGEX=new r(/^( |\t)*if +.*: *$/g,"if"),t.ELIF_REGEX=new r(/^( |\t)*elif +.*: *$/g,"elif"),t.ELSE_REGEX=new r(/^( |\t)*else *: *$/g,"else"),t.FOR_IN_REGEX=new r(/^( |\t)*for \w in .*: *$/g,"for"),t.ASYNC_FOR_IN_REGEX=new r(/^( |\t)*async *for \w in .*: *$/g,"for"),t.WHILE_REGEX=new r(/^( |\t)*while .*: *$/g,"while"),t.TRY_REGEX=new r(/^( |\t)*try *: *$/g,"try"),t.FINALLY_REGEX=new r(/^( |\t)*finally *: *$/g,"finally"),t.EXCEPT_REGEX=new r(/^( |\t)*except *\w* *(as)? *\w* *: *$/g,"except"),t.DEF_REGEX=new r(/^( |\t)*def \w *\(.*$/g,"def"),t.ASYNC_DEF_REGEX=new r(/^( |\t)*async *def \w *\(.*$/g,"async"),t.CLASS_REGEX=new r(/^( |\t)*class *\w* *.*: *$/g,"class")},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(92),o=n(83),s=8192,a=new Buffer("\r","ascii")[0],c=new Buffer("\n","ascii")[0],u=function(){function e(e){void 0===e&&(e="utf8"),this.encoding=e,this.index=0,this.buffer=new Buffer(s)}return e.prototype.append=function(e){var t=e;if("string"==typeof e){var n=e,r=Buffer.byteLength(n,this.encoding);(t=new Buffer(r)).write(n,0,r,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var i=(Math.ceil((this.index+t.length)/s)+1)*s;0===this.index?(this.buffer=new Buffer(i),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],i)}this.index+=t.length},e.prototype.tryReadHeaders=function(){for(var e=void 0,t=0;t+3<this.index&&(this.buffer[t]!==a||this.buffer[t+1]!==c||this.buffer[t+2]!==a||this.buffer[t+3]!==c);)t++;if(t+3>=this.index)return e;e=Object.create(null),this.buffer.toString("ascii",0,t).split("\r\n").forEach(function(t){var n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");var r=t.substr(0,n),i=t.substr(n+1).trim();e[r]=i});var n=t+4;return this.buffer=this.buffer.slice(n),this.index=this.index-n,e},e.prototype.tryReadContent=function(e){if(this.index<e)return null;var t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t},Object.defineProperty(e.prototype,"numberOfBytes",{get:function(){return this.index},enumerable:!0,configurable:!0}),e}();!function(e){e.is=function(e){var t=e;return t&&o.func(t.listen)&&o.func(t.dispose)&&o.func(t.onError)&&o.func(t.onClose)&&o.func(t.onPartialMessage)}}(t.MessageReader||(t.MessageReader={}));var l=function(){function e(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.partialMessageEmitter=new i.Emitter}return e.prototype.dispose=function(){this.errorEmitter.dispose(),this.closeEmitter.dispose()},Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEmitter.event},enumerable:!0,configurable:!0}),e.prototype.fireError=function(e){this.errorEmitter.fire(this.asError(e))},Object.defineProperty(e.prototype,"onClose",{get:function(){return this.closeEmitter.event},enumerable:!0,configurable:!0}),e.prototype.fireClose=function(){this.closeEmitter.fire(void 0)},Object.defineProperty(e.prototype,"onPartialMessage",{get:function(){return this.partialMessageEmitter.event},enumerable:!0,configurable:!0}),e.prototype.firePartialMessage=function(e){this.partialMessageEmitter.fire(e)},e.prototype.asError=function(e){return e instanceof Error?e:new Error("Reader recevied error. Reason: "+(o.string(e.message)?e.message:"unknown"))},e}();t.AbstractMessageReader=l;var d=function(e){function t(t,n){void 0===n&&(n="utf8");var r=e.call(this)||this;return r.readable=t,r.buffer=new u(n),r._partialMessageTimeout=1e4,r}return r(t,e),Object.defineProperty(t.prototype,"partialMessageTimeout",{get:function(){return this._partialMessageTimeout},set:function(e){this._partialMessageTimeout=e},enumerable:!0,configurable:!0}),t.prototype.listen=function(e){var t=this;this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e,this.readable.on("data",function(e){t.onData(e)}),this.readable.on("error",function(e){return t.fireError(e)}),this.readable.on("close",function(){return t.fireClose()})},t.prototype.onData=function(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){var t=this.buffer.tryReadHeaders();if(!t)return;var n=t["Content-Length"];if(!n)throw new Error("Header must provide a Content-Length property.");var r=parseInt(n);if(isNaN(r))throw new Error("Content-Length value must be a number.");this.nextMessageLength=r}var i=this.buffer.tryReadContent(this.nextMessageLength);if(null===i)return void this.setPartialMessageTimer();this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var o=JSON.parse(i);this.callback(o)}},t.prototype.clearPartialMessageTimer=function(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)},t.prototype.setPartialMessageTimer=function(){var e=this;this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=setTimeout(function(t,n){e.partialMessageTimer=void 0,t===e.messageToken&&(e.firePartialMessage({messageToken:t,waitingTime:n}),e.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))},t}(l);t.StreamMessageReader=d;var h=function(e){function t(t){var n=e.call(this)||this;n.process=t;var r=n.process;return r.on("error",function(e){return n.fireError(e)}),r.on("close",function(){return n.fireClose()}),n}return r(t,e),t.prototype.listen=function(e){this.process.on("message",e)},t}(l);t.IPCMessageReader=h;var p=function(e){function t(t,n){return void 0===n&&(n="utf-8"),e.call(this,t,n)||this}return r(t,e),t}(d);t.SocketMessageReader=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(92),o=n(83);!function(e){e.is=function(e){var t=e;return t&&o.func(t.dispose)&&o.func(t.onClose)&&o.func(t.onError)&&o.func(t.write)}}(t.MessageWriter||(t.MessageWriter={}));var s=function(){function e(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter}return e.prototype.dispose=function(){this.errorEmitter.dispose(),this.closeEmitter.dispose()},Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEmitter.event},enumerable:!0,configurable:!0}),e.prototype.fireError=function(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])},Object.defineProperty(e.prototype,"onClose",{get:function(){return this.closeEmitter.event},enumerable:!0,configurable:!0}),e.prototype.fireClose=function(){this.closeEmitter.fire(void 0)},e.prototype.asError=function(e){return e instanceof Error?e:new Error("Writer recevied error. Reason: "+(o.string(e.message)?e.message:"unknown"))},e}();t.AbstractMessageWriter=s;var a=function(e){function t(t,n){void 0===n&&(n="utf8");var r=e.call(this)||this;return r.writable=t,r.encoding=n,r.errorCount=0,r.writable.on("error",function(e){return r.fireError(e)}),r.writable.on("close",function(){return r.fireClose()}),r}return r(t,e),t.prototype.write=function(e){var t=JSON.stringify(e),n=["Content-Length: ",Buffer.byteLength(t,this.encoding).toString(),"\r\n","\r\n"];try{this.writable.write(n.join(""),"ascii"),this.writable.write(t,this.encoding),this.errorCount=0}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}},t}(s);t.StreamMessageWriter=a;var c=function(e){function t(t){var n=e.call(this)||this;n.process=t,n.errorCount=0,n.queue=[],n.sending=!1;var r=n.process;return r.on("error",function(e){return n.fireError(e)}),r.on("close",function(){return n.fireClose}),n}return r(t,e),t.prototype.write=function(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)},t.prototype.doWriteMessage=function(e){var t=this;try{this.process.send&&(this.sending=!0,this.process.send(e,void 0,void 0,function(n){t.sending=!1,n?(t.errorCount++,t.fireError(n,e,t.errorCount)):t.errorCount=0,t.queue.length>0&&t.doWriteMessage(t.queue.shift())}))}catch(t){this.errorCount++,this.fireError(t,e,this.errorCount)}},t}(s);t.IPCMessageWriter=c;var u=function(e){function t(t,n){void 0===n&&(n="utf8");var r=e.call(this)||this;return r.socket=t,r.queue=[],r.sending=!1,r.encoding=n,r.errorCount=0,r.socket.on("error",function(e){return r.fireError(e)}),r.socket.on("close",function(){return r.fireClose()}),r}return r(t,e),t.prototype.write=function(e){this.sending||0!==this.queue.length?this.queue.push(e):this.doWriteMessage(e)},t.prototype.doWriteMessage=function(e){var t=this,n=JSON.stringify(e),r=["Content-Length: ",Buffer.byteLength(n,this.encoding).toString(),"\r\n","\r\n"];try{this.sending=!0,this.socket.write(r.join(""),"ascii",function(r){r&&t.handleError(r,e);try{t.socket.write(n,t.encoding,function(n){t.sending=!1,n?t.handleError(n,e):t.errorCount=0,t.queue.length>0&&t.doWriteMessage(t.queue.shift())})}catch(r){t.handleError(r,e)}})}catch(t){this.handleError(t,e)}},t.prototype.handleError=function(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)},t}(s);t.SocketMessageWriter=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDotNetCompatibilityService=Symbol("IDotNetCompatibilityService"),t.IOSDotNetCompatibilityService=Symbol("IOSDotNetCompatibilityService")},function(e,t,n){e.exports=b;var r=n(18),i=n(195),o=n(94),s=(o.Minimatch,n(453)),a=n(69).EventEmitter,c=n(3),u=n(80),l=n(126),d=n(455),h=n(196),p=(h.alphasort,h.alphasorti,h.setopts),f=h.ownProp,g=n(456),m=(n(59),h.childrenIgnored),y=h.isIgnored,v=n(198);function b(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return d(e,t)}return new _(e,t,n)}b.sync=d;var S=b.GlobSync=d.GlobSync;function _(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new S(e,t)}if(!(this instanceof _))return new _(e,t,n);p(this,e,t),this._didRealPath=!1;var r=this.minimatch.set.length;this.matches=new Array(r),"function"==typeof n&&(n=v(n),this.on("error",n),this.on("end",function(e){n(null,e)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===r)return a();for(var o=!0,s=0;s<r;s++)this._process(this.minimatch.set[s],s,!1,a);function a(){--i._processing,i._processing<=0&&(o?process.nextTick(function(){i._finish()}):i._finish())}o=!1}b.glob=b,b.hasMagic=function(e,t){var n=function(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}({},t);n.noprocess=!0;var r=new _(e,n).minimatch.set;if(!e)return!1;if(r.length>1)return!0;for(var i=0;i<r[0].length;i++)if("string"!=typeof r[0][i])return!0;return!1},b.Glob=_,s(_,a),_.prototype._finish=function(){if(u(this instanceof _),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();h.finish(this),this.emit("end",this.found)}},_.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,r)}function r(){0==--e&&t._finish()}},_.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var r=Object.keys(n),o=this,s=r.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);r.forEach(function(n,r){n=o._makeAbs(n),i.realpath(n,o.realpathCache,function(r,i){r?"stat"===r.syscall?a[n]=!0:o.emit("error",r):a[i]=!0,0==--s&&(o.matches[e]=a,t())})})},_.prototype._mark=function(e){return h.mark(this,e)},_.prototype._makeAbs=function(e){return h.makeAbs(this,e)},_.prototype.abort=function(){this.aborted=!0,this.emit("abort")},_.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},_.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var r=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<r.length;t++){var i=r[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},_.prototype._process=function(e,t,n,r){if(u(this instanceof _),u("function"==typeof r),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,r]);else{for(var i,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,r);case 0:i=null;break;default:i=e.slice(0,s).join("/")}var a,c=e.slice(s);null===i?a=".":l(i)||l(e.join("/"))?(i&&l(i)||(i="/"+i),a=i):a=i;var d=this._makeAbs(a);if(m(this,a))return r();c[0]===o.GLOBSTAR?this._processGlobStar(i,a,d,c,t,n,r):this._processReaddir(i,a,d,c,t,n,r)}},_.prototype._processReaddir=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,function(c,u){return a._processReaddir2(e,t,n,r,i,o,u,s)})},_.prototype._processReaddir2=function(e,t,n,r,i,o,s,a){if(!s)return a();for(var u=r[0],l=!!this.minimatch.negate,d=u._glob,h=this.dot||"."===d.charAt(0),p=[],f=0;f<s.length;f++){if("."!==(m=s[f]).charAt(0)||h)(l&&!e?!m.match(u):m.match(u))&&p.push(m)}var g=p.length;if(0===g)return a();if(1===r.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(f=0;f<g;f++){var m=p[f];e&&(m="/"!==e?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=c.join(this.root,m)),this._emitMatch(i,m)}return a()}r.shift();for(f=0;f<g;f++){m=p[f];e&&(m="/"!==e?e+"/"+m:e+m),this._process([m].concat(r),i,o,a)}a()},_.prototype._emitMatch=function(e,t){if(!this.aborted&&!y(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=l(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0;var i=this.statCache[n];i&&this.emit("stat",t,i),this.emit("match",t)}}},_.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,i=g("lstat\0"+e,function(r,i){if(r&&"ENOENT"===r.code)return t();var o=i&&i.isSymbolicLink();n.symlinks[e]=o,o||!i||i.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())});i&&r.lstat(e,i)}},_.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=g("readdir\0"+e+"\0"+t,n))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,n);if(f(this.cache,e)){var i=this.cache[e];if(!i||"FILE"===i)return n();if(Array.isArray(i))return n(null,i)}r.readdir(e,function(e,t,n){return function(r,i){r?e._readdirError(t,r,n):e._readdirEntries(t,i,n)}}(this,e,n))}},_.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var i=t[r];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,n(null,t)}},_.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},_.prototype._processGlobStar=function(e,t,n,r,i,o,s){var a=this;this._readdir(n,o,function(c,u){a._processGlobStar2(e,t,n,r,i,o,u,s)})},_.prototype._processGlobStar2=function(e,t,n,r,i,o,s,a){if(!s)return a();var c=r.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,i,!1,a);var d=this.symlinks[n],h=s.length;if(d&&o)return a();for(var p=0;p<h;p++){if("."!==s[p].charAt(0)||this.dot){var f=u.concat(s[p],c);this._process(f,i,!0,a);var g=u.concat(s[p],r);this._process(g,i,!0,a)}}a()},_.prototype._processSimple=function(e,t,n){var r=this;this._stat(e,function(i,o){r._processSimple2(e,t,i,o,n)})},_.prototype._processSimple2=function(e,t,n,r,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!r)return i();if(e&&l(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),o&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()},_.prototype._stat=function(e,t){var n=this._makeAbs(e),i="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,n)){var o=this.cache[n];if(Array.isArray(o)&&(o="DIR"),!i||"DIR"===o)return t(null,o);if(i&&"FILE"===o)return t()}var s=this.statCache[n];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return i&&"FILE"===a?t():t(null,a,s)}var c=this,u=g("stat\0"+n,function(i,o){if(o&&o.isSymbolicLink())return r.stat(n,function(r,i){r?c._stat2(e,n,null,o,t):c._stat2(e,n,r,i,t)});c._stat2(e,n,i,o,t)});u&&r.lstat(n,u)},_.prototype._stat2=function(e,t,n,r,i){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,i();var o="/"===e.slice(-1);if(this.statCache[t]=r,"/"===t.slice(-1)&&r&&!r.isDirectory())return i(null,!1,r);var s=!0;return r&&(s=r.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,o&&"FILE"===s?i():i(null,s,r)}},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function i(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",r=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||r)}e.exports="win32"===process.platform?i:r,e.exports.posix=r,e.exports.win32=i},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(32),o=n(3),s=n(2);n(8);const a=n(7),c=n(9),u=n(200),l=n(11),d=n(47),h=n(56),p=n(95),f=n(96);class g{constructor(e,t,n){this.interpreterAutoSelectionService=t,this.downloadLanguageServer=!0,this.jediEnabled=!0,this.jediPath="",this.jediMemoryLimit=1024,this.envFile="",this.venvPath="",this.venvFolders=[],this.condaPath="",this.pipenvPath="",this.devOptions=[],this.disableInstallationChecks=!1,this.globalModuleInstallation=!1,this.autoUpdateLanguageServer=!0,this.changed=new s.EventEmitter,this.disposables=[],this._pythonPath="",this.workspace=n||new u.WorkspaceService,this.workspaceRoot=e||s.Uri.file(__dirname),this.initialize()}get onDidChange(){return this.changed.event}static getInstance(e,t,n){n=n||new u.WorkspaceService;const r=g.getSettingsUriAndTarget(e,n).uri,i=r?r.fsPath:"";if(!g.pythonSettings.has(i)){const o=new g(r,t,n);g.pythonSettings.set(i,o);const s=n.getConfiguration("editor",e||null),u=!!s&&s.get("formatOnType",!1);a.sendTelemetryEvent(c.EventName.COMPLETION_ADD_BRACKETS,void 0,{enabled:!!o.autoComplete&&o.autoComplete.addBrackets}),a.sendTelemetryEvent(c.EventName.FORMAT_ON_TYPE,void 0,{enabled:u})}return g.pythonSettings.get(i)}static getSettingsUriAndTarget(e,t){t=t||new u.WorkspaceService;const n=e?t.getWorkspaceFolder(e):void 0;let r=n?n.uri:void 0;return!r&&Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0&&(r=t.workspaceFolders[0].uri),{uri:r,target:r?s.ConfigurationTarget.WorkspaceFolder:s.ConfigurationTarget.Global}}static dispose(){if(!l.isTestExecution())throw new Error("Dispose can only be called from unit tests");g.pythonSettings.forEach(e=>e&&e.dispose()),g.pythonSettings.clear()}dispose(){this.disposables.forEach(e=>e&&e.dispose()),this.disposables=[]}update(e){const t=this.workspaceRoot.fsPath,n=new p.SystemVariables(this.workspaceRoot?this.workspaceRoot.fsPath:void 0);if(this.pythonPath=n.resolveAny(e.get("pythonPath")),0===this.pythonPath.length||"python"===this.pythonPath){const e=this.interpreterAutoSelectionService.getAutoSelectedInterpreter(this.workspaceRoot);e&&this.interpreterAutoSelectionService.setWorkspaceInterpreter(this.workspaceRoot,e).ignoreErrors(),this.pythonPath=e?e.path:this.pythonPath}this.pythonPath=m(this.pythonPath,t),this.venvPath=n.resolveAny(e.get("venvPath")),this.venvFolders=n.resolveAny(e.get("venvFolders"));const r=n.resolveAny(e.get("condaPath"));this.condaPath=r&&r.length>0?m(r,t):r;const i=n.resolveAny(e.get("pipenvPath"));this.pipenvPath=i&&i.length>0?m(i,t):i,this.downloadLanguageServer=n.resolveAny(e.get("downloadLanguageServer",!0)),this.jediEnabled=n.resolveAny(e.get("jediEnabled",!0)),this.autoUpdateLanguageServer=n.resolveAny(e.get("autoUpdateLanguageServer",!0)),this.jediEnabled&&(this.jediPath=n.resolveAny(e.get("jediPath")),"string"==typeof this.jediPath&&this.jediPath.length>0?this.jediPath=m(n.resolveAny(this.jediPath),t):this.jediPath="",this.jediMemoryLimit=e.get("jediMemoryLimit")),this.envFile=n.resolveAny(e.get("envFile")),this.devOptions=n.resolveAny(e.get("devOptions")),this.devOptions=Array.isArray(this.devOptions)?this.devOptions:[];const a=n.resolveAny(e.get("linting"));this.linting?Object.assign(this.linting,a):this.linting=a;const c=n.resolveAny(e.get("analysis"));this.analysis?Object.assign(this.analysis,c):this.analysis=c,this.disableInstallationChecks=!0===e.get("disableInstallationCheck"),this.globalModuleInstallation=!0===e.get("globalModuleInstallation");const u=n.resolveAny(e.get("sortImports"));this.sortImports?Object.assign(this.sortImports,u):this.sortImports=u,this.sortImports=this.sortImports?this.sortImports:{path:"",args:[]},this.linting=this.linting?this.linting:{enabled:!1,ignorePatterns:[],flake8Args:[],flake8Enabled:!1,flake8Path:"flake",lintOnSave:!1,maxNumberOfProblems:100,mypyArgs:[],mypyEnabled:!1,mypyPath:"mypy",banditArgs:[],banditEnabled:!1,banditPath:"bandit",pep8Args:[],pep8Enabled:!1,pep8Path:"pep8",pylamaArgs:[],pylamaEnabled:!1,pylamaPath:"pylama",prospectorArgs:[],prospectorEnabled:!1,prospectorPath:"prospector",pydocstyleArgs:[],pydocstyleEnabled:!1,pydocstylePath:"pydocstyle",pylintArgs:[],pylintEnabled:!1,pylintPath:"pylint",pylintCategorySeverity:{convention:s.DiagnosticSeverity.Hint,error:s.DiagnosticSeverity.Error,fatal:s.DiagnosticSeverity.Error,refactor:s.DiagnosticSeverity.Hint,warning:s.DiagnosticSeverity.Warning},pep8CategorySeverity:{E:s.DiagnosticSeverity.Error,W:s.DiagnosticSeverity.Warning},flake8CategorySeverity:{E:s.DiagnosticSeverity.Error,W:s.DiagnosticSeverity.Warning,F:s.DiagnosticSeverity.Warning},mypyCategorySeverity:{error:s.DiagnosticSeverity.Error,note:s.DiagnosticSeverity.Hint},pylintUseMinimalCheckers:!1},this.linting.pylintPath=m(n.resolveAny(this.linting.pylintPath),t),this.linting.flake8Path=m(n.resolveAny(this.linting.flake8Path),t),this.linting.pep8Path=m(n.resolveAny(this.linting.pep8Path),t),this.linting.pylamaPath=m(n.resolveAny(this.linting.pylamaPath),t),this.linting.prospectorPath=m(n.resolveAny(this.linting.prospectorPath),t),this.linting.pydocstylePath=m(n.resolveAny(this.linting.pydocstylePath),t),this.linting.mypyPath=m(n.resolveAny(this.linting.mypyPath),t),this.linting.banditPath=m(n.resolveAny(this.linting.banditPath),t);const d=n.resolveAny(e.get("formatting"));this.formatting?Object.assign(this.formatting,d):this.formatting=d,this.formatting=this.formatting?this.formatting:{autopep8Args:[],autopep8Path:"autopep8",provider:"autopep8",blackArgs:[],blackPath:"black",yapfArgs:[],yapfPath:"yapf"},this.formatting.autopep8Path=m(n.resolveAny(this.formatting.autopep8Path),t),this.formatting.yapfPath=m(n.resolveAny(this.formatting.yapfPath),t),this.formatting.blackPath=m(n.resolveAny(this.formatting.blackPath),t);const h=n.resolveAny(e.get("autoComplete"));this.autoComplete?Object.assign(this.autoComplete,h):this.autoComplete=h,this.autoComplete=this.autoComplete?this.autoComplete:{extraPaths:[],addBrackets:!1,showAdvancedMembers:!1,typeshedPaths:[]};const f=n.resolveAny(e.get("workspaceSymbols"));this.workspaceSymbols?Object.assign(this.workspaceSymbols,f):this.workspaceSymbols=f,this.workspaceSymbols=this.workspaceSymbols?this.workspaceSymbols:{ctagsPath:"ctags",enabled:!0,exclusionPatterns:[],rebuildOnFileSave:!0,rebuildOnStart:!0,tagFilePath:o.join(t,"tags")},this.workspaceSymbols.tagFilePath=m(n.resolveAny(this.workspaceSymbols.tagFilePath),t);const g=n.resolveAny(e.get("unitTest"));this.unitTest?Object.assign(this.unitTest,g):(this.unitTest=g,l.isTestExecution()&&!this.unitTest&&(this.unitTest={nosetestArgs:[],pyTestArgs:[],unittestArgs:[],promptToConfigure:!0,debugPort:3e3,nosetestsEnabled:!1,pyTestEnabled:!1,unittestEnabled:!1,nosetestPath:"nosetests",pyTestPath:"pytest",autoTestDiscoverOnSaveEnabled:!0})),this.unitTest=this.unitTest?this.unitTest:{promptToConfigure:!0,debugPort:3e3,nosetestArgs:[],nosetestPath:"nosetest",nosetestsEnabled:!1,pyTestArgs:[],pyTestEnabled:!1,pyTestPath:"pytest",unittestArgs:[],unittestEnabled:!1,autoTestDiscoverOnSaveEnabled:!0},this.unitTest.pyTestPath=m(n.resolveAny(this.unitTest.pyTestPath),t),this.unitTest.nosetestPath=m(n.resolveAny(this.unitTest.nosetestPath),t),this.unitTest.cwd&&(this.unitTest.cwd=m(n.resolveAny(this.unitTest.cwd),t)),this.unitTest.nosetestArgs=this.unitTest.nosetestArgs.map(e=>n.resolveAny(e)),this.unitTest.pyTestArgs=this.unitTest.pyTestArgs.map(e=>n.resolveAny(e)),this.unitTest.unittestArgs=this.unitTest.unittestArgs.map(e=>n.resolveAny(e));const y=n.resolveAny(e.get("terminal"));this.terminal?Object.assign(this.terminal,y):(this.terminal=y,l.isTestExecution()&&!this.terminal&&(this.terminal={})),this.terminal=this.terminal?this.terminal:{executeInFileDir:!0,launchArgs:[],activateEnvironment:!0};const v=n.resolveAny(e.get("dataScience"));this.datascience?Object.assign(this.datascience,v):this.datascience=v}get pythonPath(){return this._pythonPath}set pythonPath(e){if(this._pythonPath!==e)try{this._pythonPath=this.getPythonExecutable(e)}catch(t){this._pythonPath=e}}getPythonExecutable(e){return function(e){if("python"===(e=f(e))||-1===e.indexOf(o.sep)||o.basename(e)===o.dirname(e))return e;if(y(e))return e;const t=["python","python4","python3.6","python3.5","python3","python2.7","python2"];for(let n of t)if(d.IS_WINDOWS){if(n=`${n}.exe`,y(o.join(e,n)))return o.join(e,n);if(y(o.join(e,"scripts",n)))return o.join(e,"scripts",n)}else{if(y(o.join(e,n)))return o.join(e,n);if(y(o.join(e,"bin",n)))return o.join(e,"bin",n)}return e}(e)}initialize(){const e=()=>{const e=this.workspace.getConfiguration("python",this.workspaceRoot);this.update(e),this.debounceChangeNotification()};this.disposables.push(this.interpreterAutoSelectionService.onDidChangeAutoSelectedInterpreter(e.bind(this))),this.disposables.push(this.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration("python")&&e()}));const t=this.workspace.getConfiguration("python",this.workspaceRoot);t&&this.update(t)}debounceChangeNotification(){this.changed.fire()}}function m(e,t){return e=f(e),l.isTestExecution()&&!e?t:-1===e.indexOf(o.sep)?e:o.isAbsolute(e)?e:o.resolve(t,e)}function y(e){try{return i.execFileSync(e,["-c","print(1234)"],{encoding:"utf8"}).startsWith("1234")}catch(e){return!1}}g.pythonSettings=new Map,r([h.debounce(1)],g.prototype,"debounceChangeNotification",null),t.PythonSettings=g},function(e){e.exports=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),i=n(205),o=n(210),s=n(16),a=n(204),c=n(14);t.ProcessService=class{constructor(e,t){this.decoder=e,this.env=t}static isAlive(e){try{return process.kill(e,0),!0}catch(e){return!1}}static kill(e){const t=n(210);try{t(e)}catch(e){}}execObservable(e,t,n={}){const s=this.getDefaultOptions(n),a=s.encoding?s.encoding:"utf8",u=r.spawn(e,t,s);let l=!1;const d=new i.Observable(e=>{const t=[],r=(e,n,r)=>{e.on(n,r),t.push({dispose:()=>e.removeListener(n,r)})};n.token&&t.push(n.token.onCancellationRequested(()=>{l||u.killed||(u.kill(),l=!0)}));const i=(t,r)=>{const i=this.decoder.decode([r],a);"stderr"===t&&n.throwOnStdErr?e.error(new c.StdErrError(i)):e.next({source:t,out:i})};r(u.stdout,"data",e=>i("stdout",e)),r(u.stderr,"data",e=>i("stderr",e)),u.once("close",()=>{l=!0,e.complete(),t.forEach(e=>e.dispose())}),u.once("error",n=>{l=!0,e.error(n),t.forEach(e=>e.dispose())})});return{proc:u,out:d,dispose:()=>{u&&!u.killed&&o(u.pid)}}}exec(e,t,n={}){const i=this.getDefaultOptions(n),o=i.encoding?i.encoding:"utf8",a=r.spawn(e,t,i),u=s.createDeferred(),l=[],d=(e,t,n)=>{e.on(t,n),l.push({dispose:()=>e.removeListener(t,n)})};n.token&&l.push(n.token.onCancellationRequested(()=>{a.killed||u.completed||a.kill()}));const h=[];d(a.stdout,"data",e=>h.push(e));const p=[];return d(a.stderr,"data",e=>{n.mergeStdOutErr?(h.push(e),p.push(e)):p.push(e)}),a.once("close",()=>{if(u.completed)return;const e=0===p.length?void 0:this.decoder.decode(p,o);if(e&&e.length>0&&n.throwOnStdErr)u.reject(new c.StdErrError(e));else{const t=this.decoder.decode(h,o);u.resolve({stdout:t,stderr:e})}l.forEach(e=>e.dispose())}),a.once("error",e=>{u.reject(e),l.forEach(e=>e.dispose())}),u.promise}shellExec(e,t={}){const n=this.getDefaultOptions(t);return new Promise((t,i)=>{r.exec(e,n,(e,r,o)=>{e&&null!==e?i(e):n.throwOnStdErr&&o&&o.length?i(new Error(o)):t({stderr:o&&o.length>0?o:void 0,stdout:r})})})}getDefaultOptions(e){const t=Object.assign({},e),n=t;if(n){const e=n.encoding="string"==typeof n.encoding&&n.encoding.length>0?n.encoding:a.DEFAULT_ENCODING;delete n.encoding,n.encoding=e}if(t.env&&0!==Object.keys(t.env).length)t.env=Object.assign({},t.env);else{const e=this.env?this.env:process.env;t.env=Object.assign({},e)}return t.env.PYTHONUNBUFFERED="1",t.env.PYTHONIOENCODING||(t.env.PYTHONIOENCODING="utf-8"),t}}},function(e,t,n){"use strict";var r="undefined"!=typeof window&&window,i="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,o="undefined"!=typeof global&&global,s=r||o||i;t.root=s,function(){if(!s)throw new Error("RxJS could not find any global context (window, self, global)")}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseDiagnosticCommand=class{constructor(e){this.diagnostic=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);t.ProductNames=new Map,t.ProductNames.set(r.Product.autopep8,"autopep8"),t.ProductNames.set(r.Product.bandit,"bandit"),t.ProductNames.set(r.Product.black,"black"),t.ProductNames.set(r.Product.flake8,"flake8"),t.ProductNames.set(r.Product.mypy,"mypy"),t.ProductNames.set(r.Product.nosetest,"nosetest"),t.ProductNames.set(r.Product.pep8,"pep8"),t.ProductNames.set(r.Product.pylama,"pylama"),t.ProductNames.set(r.Product.prospector,"prospector"),t.ProductNames.set(r.Product.pydocstyle,"pydocstyle"),t.ProductNames.set(r.Product.pylint,"pylint"),t.ProductNames.set(r.Product.pytest,"pytest"),t.ProductNames.set(r.Product.yapf,"yapf"),t.ProductNames.set(r.Product.rope,"rope")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IModuleInstaller=Symbol("IModuleInstaller"),t.IPythonInstallation=Symbol("IPythonInstallation"),t.IInstallationChannelManager=Symbol("IInstallationChannelManager"),t.IProductService=Symbol("IProductService"),t.IProductPathService=Symbol("IProductPathService")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(18),s=n(0),a=n(3),c=n(2),u=n(10),l=n(11),d=n(23),h=n(1),p=n(22);let f=class{constructor(e){this.serviceContainer=e}installModule(e,t){return i(this,void 0,void 0,function*(){const n=yield this.getExecutionInfo(e,t),r=this.serviceContainer.get(d.ITerminalServiceFactory).getTerminalService(t),i=yield this.processInstallArgs(n.args,t);if(n.moduleName){const e=this.serviceContainer.get(h.IConfigurationService).getSettings(t),o=["-m",n.moduleName].concat(i),s=e.pythonPath,c=yield this.serviceContainer.get(u.IInterpreterService).getActiveInterpreter(t);c&&c.type===u.InterpreterType.Unknown?e.globalModuleInstallation?(yield this.isPathWritableAsync(a.dirname(s)))?yield r.sendCommand(s,o):this.elevatedInstall(s,o):yield r.sendCommand(s,o.concat(["--user"])):yield r.sendCommand(s,o)}else yield r.sendCommand(n.execPath,i)})}processInstallArgs(e,t){return i(this,void 0,void 0,function*(){const n=e.findIndex(e=>"PYLINT"===e.toUpperCase());if(-1===n)return e;const r=yield this.serviceContainer.get(u.IInterpreterService).getActiveInterpreter(t);if(r&&r.version&&2===r.version.major){const t=[...e];return t[n]='"pylint<2.0.0"',t}return e})}isPathWritableAsync(e){return i(this,void 0,void 0,function*(){const t=`${e}${a.sep}___vscpTest___`;return new Promise(e=>{o.open(t,o.constants.O_CREAT|o.constants.O_RDWR,(n,r)=>(n||o.close(r,()=>{o.unlink(t,p.noop)}),e(!n)))})})}elevatedInstall(e,t){const r=this.serviceContainer.get(h.IOutputChannel,l.STANDARD_OUTPUT_CHANNEL),i=`"${e.replace(/\\/g,"/")}" ${t.join(" ")}`;r.appendLine(""),r.appendLine(`[Elevated] ${i}`),n(507).exec(i,{name:"VS Code Python"},(e,t,n)=>{e?c.window.showErrorMessage(e):(r.show(),t&&(r.appendLine(""),r.append(t)),n&&(r.appendLine(""),r.append(`Warning: ${n}`)))})}};f=r([s.injectable()],f),t.ModuleInstaller=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFormatterHelper=Symbol("IFormatterHelper")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(42);t.parseVersion=function(e){e=e.replace(/\.00*(?=[1-9]|0\.)/,".");const t=r.coerce(e);return null!==t&&r.valid(t)?t:new r.SemVer("0.0.0")},t.parsePythonVersion=function(e){if(!e||0===e.trim().length)return;const t=(e||"").split(".").map(e=>e.trim()).filter(e=>e.length>0).filter((e,t)=>t<4);if(t.length>0&&t[t.length-1].indexOf("-")>0){const e=t[t.length-1];t[t.length-1]=e.split("-")[0].trim(),t.push(e.split("-")[1].trim())}for(;t.length<4;)t.push("");for(let e=0;e<3;e+=1)t[e]=/^\d+$/.test(t[e])?t[e]:"0";-1===["alpha","beta","candidate","final"].indexOf(t[3])&&t.pop();const n=`${t[0]}.${t[1]}.${t[2]}`,i=4===t.length?`${n}-${t[3]}`:n;return new r.SemVer(i)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(34),a=n(6);var c;!function(e){e.x86="x86",e.x64="x64"}(c||(c={}));let u=class{getKeys(e,t,r){return i(this,void 0,void 0,function*(){return function(e){return i(this,void 0,void 0,function*(){const t=n(138);return new Promise(n=>{new t(e).keys((e,t)=>{if(e||!Array.isArray(t))return n([]);n(t.filter(e=>"string"==typeof e.key).map(e=>e.key))})})})}({hive:d(t),arch:l(r),key:e})})}getValue(e,t,r,o=""){return i(this,void 0,void 0,function*(){return function(e,t=""){return i(this,void 0,void 0,function*(){const r=n(138);return new Promise(n=>{new r(e).get(t,(e,t)=>{if(e||!t||"string"!=typeof t.value)return n(void 0);n(t.value)})})})}({hive:d(t),arch:l(r),key:e},o)})}};function l(e){switch(e){case s.Architecture.x86:return c.x86;case s.Architecture.x64:return c.x64;default:return}}function d(e){const t=n(138);switch(e){case a.RegistryHive.HKCU:return t.HKCU;case a.RegistryHive.HKLM:return t.HKLM;default:return}}u=r([o.injectable()],u),t.RegistryImplementation=u,t.getArchitectureDisplayName=function(e){switch(e){case s.Architecture.x64:return"64-bit";case s.Architecture.x86:return"32-bit";default:return""}}},function(e,t,n){var r=n(59),i=n(3),o=n(32).spawn,s="HKLM",a=[s,"HKCU","HKCR","HKU","HKCC"],c=["REG_SZ","REG_MULTI_SZ","REG_EXPAND_SZ","REG_DWORD","REG_QWORD","REG_BINARY","REG_NONE"],u=/(\\[a-zA-Z0-9_\s]+)*/,l=/^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/,d=/^(.*)\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\s+([^\s].*)$/;function h(e,t){if(!(this instanceof h))return new h(e,t);Error.captureStackTrace(this,h),this.__defineGetter__("name",function(){return h.name}),this.__defineGetter__("message",function(){return e}),this.__defineGetter__("code",function(){return t})}function p(e){var t={stdout:"",stderr:""};return e.stdout.on("data",function(e){t.stdout+=e.toString()}),e.stderr.on("data",function(e){t.stderr+=e.toString()}),t}function f(e,t,n){var i=n.stdout.trim(),o=n.stderr.trim();return new h(r.format("%s command exited with code %d:\n%s\n%s",e,t,i,o),t)}function g(e,t){t&&e.push("/reg:"+function(e){if("x64"==e)return"64";if("x86"==e)return"32";throw new Error("illegal architecture: "+e+" (use x86 or x64)")}(t))}function m(){return"win32"===process.platform?i.join(process.env.windir,"system32","reg.exe"):"REG"}function y(e,t,n,r,i,o,s){if(!(this instanceof y))return new y(e,t,n,r,i,o,s);var a=e,c=t,u=n,l=r,d=i,h=o,p=s;this.__defineGetter__("host",function(){return a}),this.__defineGetter__("hive",function(){return c}),this.__defineGetter__("key",function(){return u}),this.__defineGetter__("name",function(){return l}),this.__defineGetter__("type",function(){return d}),this.__defineGetter__("value",function(){return h}),this.__defineGetter__("arch",function(){return p})}function v(e){if(!(this instanceof v))return new v(e);var t=e||{},n=""+(t.host||""),r=""+(t.hive||s),i=""+(t.key||""),o=t.arch||null;if(this.__defineGetter__("host",function(){return n}),this.__defineGetter__("hive",function(){return r}),this.__defineGetter__("key",function(){return i}),this.__defineGetter__("path",function(){return(0==n.length?"":"\\\\"+n+"\\")+r+i}),this.__defineGetter__("arch",function(){return o}),this.__defineGetter__("parent",function(){var e=i.lastIndexOf("\\");return new v({host:this.host,hive:this.hive,key:-1==e?"":i.substring(0,e),arch:this.arch})}),-1==a.indexOf(r))throw new Error("illegal hive specified.");if(!u.test(i))throw new Error("illegal key specified.");if(o&&"x64"!=o&&"x86"!=o)throw new Error("illegal architecture specified (use x86 or x64)")}r.inherits(h,Error),r.inherits(y,Object),v.HKLM=s,v.HKCU="HKCU",v.HKCR="HKCR",v.HKU="HKU",v.HKCC="HKCC",v.HIVES=a,v.REG_SZ="REG_SZ",v.REG_MULTI_SZ="REG_MULTI_SZ",v.REG_EXPAND_SZ="REG_EXPAND_SZ",v.REG_DWORD="REG_DWORD",v.REG_QWORD="REG_QWORD",v.REG_BINARY="REG_BINARY",v.REG_NONE="REG_NONE",v.REG_TYPES=c,v.DEFAULT_VALUE="",v.prototype.values=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];g(t,this.arch);var n=o(m(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",i=this,s=null,a=p(n);return n.on("close",function(t){if(!s)if(0!==t)e(f("QUERY",t,a),null);else{for(var n=[],o=[],c=r.split("\n"),u=0,l=0,h=c.length;l<h;l++){var p=c[l].trim();p.length>0&&(0!=u&&n.push(p),++u)}for(l=0,h=n.length;l<h;l++){var g,m,v,b=d.exec(n[l]);b&&(g=b[1].trim(),m=b[2].trim(),v=b[3],o.push(new y(i.host,i.hive,i.key,g,m,v,i.arch)))}e(null,o)}}),n.stdout.on("data",function(e){r+=e.toString()}),n.on("error",function(t){s=t,e(t)}),this},v.prototype.keys=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["QUERY",this.path];g(t,this.arch);var n=o(m(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r="",i=this,s=null,a=p(n);return n.on("close",function(t){s||0!==t&&e(f("QUERY",t,a),null)}),n.stdout.on("data",function(e){r+=e.toString()}),n.stdout.on("end",function(){for(var t=[],n=[],o=r.split("\n"),s=0,a=o.length;s<a;s++){var c=o[s].trim();c.length>0&&t.push(c)}for(s=0,a=t.length;s<a;s++){var u,d=l.exec(t[s]);d&&(d[1],(u=d[2])&&u!==i.key&&n.push(new v({host:i.host,hive:i.hive,key:u,arch:i.arch})))}e(null,n)}),n.on("error",function(t){s=t,e(t)}),this},v.prototype.get=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var n=["QUERY",this.path];""==e?n.push("/ve"):n=n.concat(["/v",e]),g(n,this.arch);var r=o(m(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i="",s=this,a=null,c=p(r);return r.on("close",function(e){if(!a)if(0!==e)t(f("QUERY",e,c),null);else{for(var n=[],r=null,o=i.split("\n"),u=0,l=0,h=o.length;l<h;l++){var p=o[l].trim();p.length>0&&(0!=u&&n.push(p),++u)}var g,m,v,b=n[n.length-1]||"",S=d.exec(b);S&&(g=S[1].trim(),m=S[2].trim(),v=S[3],r=new y(s.host,s.hive,s.key,g,m,v,s.arch)),t(null,r)}}),r.stdout.on("data",function(e){i+=e.toString()}),r.on("error",function(e){a=e,t(e)}),this},v.prototype.set=function(e,t,n,r){if("function"!=typeof r)throw new TypeError("must specify a callback");if(-1==c.indexOf(t))throw Error("illegal type specified.");var i=["ADD",this.path];""==e?i.push("/ve"):i=i.concat(["/v",e]),g(i=i.concat(["/t",t,"/d",n,"/f"]),this.arch);var s=o(m(),i,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),a=null,u=p(s);return s.on("close",function(e){a||r(0!==e?f("ADD",e,u):null)}),s.stdout.on("data",function(e){}),s.on("error",function(e){a=e,r(e)}),this},v.prototype.remove=function(e,t){if("function"!=typeof t)throw new TypeError("must specify a callback");var n=e?["DELETE",this.path,"/f","/v",e]:["DELETE",this.path,"/f","/ve"];g(n,this.arch);var r=o(m(),n,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),i=null,s=p(r);return r.on("close",function(e){i||(0!==e?t(f("DELETE",e,s),null):t(null))}),r.stdout.on("data",function(e){}),r.on("error",function(e){i=e,t(e)}),this},v.prototype.clear=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f","/va"];g(t,this.arch);var n=o(m(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=p(n);return n.on("close",function(t){r||(0!==t?e(f("DELETE",t,i),null):e(null))}),n.stdout.on("data",function(e){}),n.on("error",function(t){r=t,e(t)}),this},v.prototype.erase=v.prototype.clear,v.prototype.destroy=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["DELETE",this.path,"/f"];g(t,this.arch);var n=o(m(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=p(n);return n.on("close",function(t){r||(0!==t?e(f("DELETE",t,i),null):e(null))}),n.stdout.on("data",function(e){}),n.on("error",function(t){r=t,e(t)}),this},v.prototype.create=function(e){if("function"!=typeof e)throw new TypeError("must specify a callback");var t=["ADD",this.path,"/f"];g(t,this.arch);var n=o(m(),t,{cwd:void 0,env:process.env,stdio:["ignore","pipe","pipe"]}),r=null,i=p(n);return n.on("close",function(t){r||(0!==t?e(f("ADD",t,i),null):e(null))}),n.stdout.on("data",function(e){}),n.on("error",function(t){r=t,e(t)}),this},v.prototype.keyExists=function(e){return this.values(function(t,n){if(t)return 1==t.code?e(null,!1):e(t);e(null,!0)}),this},v.prototype.valueExists=function(e,t){return this.get(e,function(e,n){if(e)return 1==e.code?t(null,!1):t(e);t(null,!0)}),this},e.exports=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IEnvironmentActivationService=Symbol("IEnvironmentActivationService")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(17);n(8);const c=n(5),u=n(7),l=n(9),d=n(4),h=n(11),p=n(6),f=n(14),g=n(23),m=n(1),y=n(132),v=n(133);var b=n(1);t.Product=b.Product;const S="darwin"===a.platform()?"brew install ctags":"sudo apt-get install exuberant-ctags";class _{constructor(e,t){this.serviceContainer=e,this.outputChannel=t,this.appShell=e.get(d.IApplicationShell),this.configService=e.get(m.IConfigurationService),this.workspaceService=e.get(d.IWorkspaceService),this.productService=e.get(v.IProductService)}promptToInstall(e,t){const n=t?this.workspaceService.getWorkspaceFolder(t):void 0,r=`${e}${n?n.uri.fsPath:""}`;if(_.PromptPromises.has(r))return _.PromptPromises.get(r);const i=this.promptToInstallImplementation(e,t);return _.PromptPromises.set(r,i),i.then(()=>_.PromptPromises.delete(r)).ignoreErrors(),i.catch(()=>_.PromptPromises.delete(r)).ignoreErrors(),i}install(e,t){return o(this,void 0,void 0,function*(){if(e===m.Product.unittest)return m.InstallerResponse.Installed;const n=yield this.serviceContainer.get(v.IInstallationChannelManager).getInstallationChannel(e,t);if(!n)return m.InstallerResponse.Ignore;const r=O(e,m.ModuleNamePurpose.install),i=this.serviceContainer.get(m.ILogger);return yield n.installModule(r,t).catch(i.logError.bind(i,`Error in installing the module '${r}'`)),this.isInstalled(e,t).then(e=>e?m.InstallerResponse.Installed:m.InstallerResponse.Ignore)})}isInstalled(e,t){return o(this,void 0,void 0,function*(){if(e===m.Product.unittest)return!0;const n=this.getExecutableNameFromSettings(e,t);if(this.isExecutableAModule(e,t)){return(yield this.serviceContainer.get(f.IPythonExecutionFactory).create({resource:t})).isModuleInstalled(n)}return(yield this.serviceContainer.get(f.IProcessServiceFactory).create(t)).exec(n,["--version"],{mergeStdOutErr:!0}).then(()=>!0).catch(()=>!1)})}getExecutableNameFromSettings(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(v.IProductPathService,n).getExecutableNameFromSettings(e,t)}isExecutableAModule(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(v.IProductPathService,n).isExecutableAModule(e,t)}}_.PromptPromises=new Map,t.BaseInstaller=_;class w extends _{constructor(e,t){super(e,t)}install(e,t){return o(this,void 0,void 0,function*(){if(this.serviceContainer.get(p.IPlatformService).isWindows)this.outputChannel.appendLine("Install Universal Ctags Win32 to enable support for Workspace Symbols"),this.outputChannel.appendLine("Download the CTags binary from the Universal CTags site."),this.outputChannel.appendLine("Option 1: Extract ctags.exe from the downloaded zip to any folder within your PATH so that Visual Studio Code can run it."),this.outputChannel.appendLine("Option 2: Extract to any folder and add the path to this folder to the command setting."),this.outputChannel.appendLine("Option 3: Extract to any folder and define that path in the python.workspaceSymbols.ctagsPath setting of your user settings file (settings.json)."),this.outputChannel.show();else{const e=this.serviceContainer.get(g.ITerminalServiceFactory).getTerminalService(t),n=this.serviceContainer.get(m.ILogger);e.sendCommand(S,[]).catch(n.logError.bind(n,`Failed to install ctags. Script sent '${S}'.`))}return m.InstallerResponse.Ignore})}promptToInstallImplementation(e,t){return o(this,void 0,void 0,function*(){return"Yes"===(yield this.appShell.showErrorMessage("Install CTags to enable Python workspace symbols?","Yes","No"))?this.install(e,t):m.InstallerResponse.Ignore})}}t.CTagsInstaller=w;class P extends _{promptToInstallImplementation(e,t){return o(this,void 0,void 0,function*(){const n=[m.Product.autopep8,m.Product.black,m.Product.yapf],r=n.map(e=>y.ProductNames.get(e)),i=y.ProductNames.get(e);r.splice(r.indexOf(i),1);const o=[...r.map(e=>`Use ${e}`)];let s=`Formatter ${i} is not installed. Install?`;if(this.isExecutableAModule(e,t))o.splice(0,0,"Yes");else{s=`Path to the ${i} formatter is invalid (${this.getExecutableNameFromSettings(e,t)})`}const a=yield this.appShell.showErrorMessage(s,...o);if("Yes"===a)return this.install(e,t);if("string"==typeof a)for(const e of n){const n=y.ProductNames.get(e);if(a.endsWith(n))return yield this.configService.updateSetting("formatting.provider",n,t),this.install(e,t)}return m.InstallerResponse.Ignore})}}t.FormatterInstaller=P;class C extends _{promptToInstallImplementation(e,t){return o(this,void 0,void 0,function*(){const n=e===m.Product.pylint,r=y.ProductNames.get(e),i=`${r}_DisableLinterInstallPrompt`;if(n&&!0===this.getStoredResponse(i))return m.InstallerResponse.Ignore;const o=n?["Select Linter","Do not show again"]:["Select Linter"];let s=`Linter ${r} is not installed.`;if(this.isExecutableAModule(e,t))o.splice(0,0,"Install");else{s=`Path to the ${r} linter is invalid (${this.getExecutableNameFromSettings(e,t)})`}const a=yield this.appShell.showErrorMessage(s,...o);if("Install"===a)return u.sendTelemetryEvent(l.EventName.LINTER_NOT_INSTALLED_PROMPT,void 0,{tool:r,action:"install"}),this.install(e,t);if("Do not show again"===a)return yield this.setStoredResponse(i,!0),u.sendTelemetryEvent(l.EventName.LINTER_NOT_INSTALLED_PROMPT,void 0,{tool:r,action:"disablePrompt"}),m.InstallerResponse.Ignore;if("Select Linter"===a){u.sendTelemetryEvent(l.EventName.LINTER_NOT_INSTALLED_PROMPT,void 0,{action:"select"}),yield this.serviceContainer.get(d.ICommandManager).executeCommand(h.Commands.Set_Linter)}return m.InstallerResponse.Ignore})}getStoredResponse(e){return!0===this.serviceContainer.get(m.IPersistentStateFactory).createGlobalPersistentState(e,void 0).value}setStoredResponse(e,t){return o(this,void 0,void 0,function*(){const n=this.serviceContainer.get(m.IPersistentStateFactory).createGlobalPersistentState(e,void 0);n&&n.value!==t&&(yield n.updateValue(t))})}}t.LinterInstaller=C;class T extends _{promptToInstallImplementation(e,t){return o(this,void 0,void 0,function*(){const n=y.ProductNames.get(e),r=[];let i=`Test framework ${n} is not installed. Install?`;if(this.isExecutableAModule(e,t))r.push(...["Yes","No"]);else{i=`Path to the ${n} test framework is invalid (${this.getExecutableNameFromSettings(e,t)})`}return"Yes"===(yield this.appShell.showErrorMessage(i,...r))?this.install(e,t):m.InstallerResponse.Ignore})}}t.TestFrameworkInstaller=T;class I extends _{promptToInstallImplementation(e,t){return o(this,void 0,void 0,function*(){const n=y.ProductNames.get(e);return"Yes"===(yield this.appShell.showErrorMessage(`Refactoring library ${n} is not installed. Install?`,"Yes","No"))?this.install(e,t):m.InstallerResponse.Ignore})}}t.RefactoringLibraryInstaller=I;let E=class{constructor(e,t){this.serviceContainer=e,this.outputChannel=t,this.productService=e.get(v.IProductService)}dispose(){}promptToInstall(e,t){return o(this,void 0,void 0,function*(){return this.createInstaller(e).promptToInstall(e,t)})}install(e,t){return o(this,void 0,void 0,function*(){return this.createInstaller(e).install(e,t)})}isInstalled(e,t){return o(this,void 0,void 0,function*(){return this.createInstaller(e).isInstalled(e,t)})}translateProductToModuleName(e,t){return O(e,t)}createInstaller(e){switch(this.productService.getProductType(e)){case m.ProductType.Formatter:return new P(this.serviceContainer,this.outputChannel);case m.ProductType.Linter:return new C(this.serviceContainer,this.outputChannel);case m.ProductType.WorkspaceSymbols:return new w(this.serviceContainer,this.outputChannel);case m.ProductType.TestFramework:return new T(this.serviceContainer,this.outputChannel);case m.ProductType.RefactoringLibrary:return new I(this.serviceContainer,this.outputChannel)}throw new Error(`Unknown product ${e}`)}};function O(e,t){switch(e){case m.Product.mypy:return"mypy";case m.Product.nosetest:return t===m.ModuleNamePurpose.install?"nose":"nosetests";case m.Product.pylama:return"pylama";case m.Product.prospector:return"prospector";case m.Product.pylint:return"pylint";case m.Product.pytest:return"pytest";case m.Product.autopep8:return"autopep8";case m.Product.black:return"black";case m.Product.pep8:return"pep8";case m.Product.pydocstyle:return"pydocstyle";case m.Product.yapf:return"yapf";case m.Product.flake8:return"flake8";case m.Product.unittest:return"unittest";case m.Product.rope:return"rope";case m.Product.bandit:return"bandit";default:throw new Error(`Product ${e} cannot be installed as a Python Module.`)}}E=r([s.injectable(),i(0,s.inject(c.IServiceContainer)),i(1,s.inject(m.IOutputChannel)),i(1,s.named(h.STANDARD_OUTPUT_CHANNEL))],E),t.ProductInstaller=E},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});t.ContextKey=class{constructor(e,t){this.name=e,this.commandManager=t}set(e){return r(this,void 0,void 0,function*(){this.lastValue!==e&&(this.lastValue=e,yield this.commandManager.executeCommand("setContext",this.name,this.lastValue))})}}},function(e,t){e.exports=require("./node_modules/@jupyterlab/services")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IConfigurationProviderUtils=Symbol("IConfigurationProviderUtils"),t.IDebugConfigurationResolver=Symbol("IDebugConfigurationResolver"),t.IDebugConfigurationProviderFactory=Symbol("IDebugConfigurationProviderFactory")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.RedirectOutput="RedirectOutput",e.Django="Django",e.Jinja="Jinja",e.DebugStdLib="DebugStdLib",e.Sudo="Sudo",e.Pyramid="Pyramid",e.FixFilePathCase="FixFilePathCase",e.WindowsClient="WindowsClient",e.UnixClient="UnixClient",e.StopOnEntry="StopOnEntry",e.ShowReturnValue="ShowReturnValue",e.SubProcess="Multiprocess"}(t.DebugOptions||(t.DebugOptions={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(47),u=n(6),l=n(91),d=n(10),h=n(101),p=c.IS_WINDOWS?/^python(\d+(.\d+)?)?\.exe$/:/^python(\d+(.\d+)?)?$/;t.lookForInterpretersInDirectory=function(e){return l.fsReaddirAsync(e).then(e=>e.filter(e=>p.test(a.basename(e)))).catch(e=>(console.error("Python Extension (lookForInterpretersInDirectory.fsReaddirAsync):",e),[]))};let f=class{constructor(e,t){this.fs=e,this.pipEnvServiceHelper=t}mergeInterpreters(e){return o(this,void 0,void 0,function*(){const t=e.map(e=>Object.assign({},e)).map(e=>(e.path=a.normalize(e.path),e)).reduce((e,t)=>{const n=t&&t.version?t.version.raw:void 0,r=e.find(e=>!!(e.version&&e.version.raw===n&&e.path&&t.path&&this.fs.arePathsSame(a.dirname(e.path),a.dirname(t.path))));if(r){r.type===d.InterpreterType.Unknown&&t.type!==d.InterpreterType.Unknown&&(r.type=t.type);const e=["envName","envPath","path","sysPrefix","architecture","sysVersion","version"];for(const n of e)!r[n]&&t[n]&&(r[n]=t[n])}else e.push(t);return e},[]);return yield Promise.all(t.map(e=>o(this,void 0,void 0,function*(){const t=yield this.pipEnvServiceHelper.getPipEnvInfo(e.path);t&&(e.type=d.InterpreterType.Pipenv,e.pipEnvWorkspaceFolder=t.workspaceFolder.fsPath,e.envName=t.envName||e.envName)}))),t})}};f=r([s.injectable(),i(0,s.inject(u.IFileSystem)),i(1,s.inject(h.IPipEnvServiceHelper))],f),t.InterpreterLocatorHelper=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(4);n(8);const u=n(6),l=n(23),d=n(1);let h=class{constructor(e,t,n,r,i){this.terminalServiceFactory=e,this.configurationService=t,this.workspace=n,this.disposables=r,this.platformService=i}executeFile(e){return o(this,void 0,void 0,function*(){const t=this.configurationService.getSettings(e);yield this.setCwdForFileExecution(e);const n=this.platformService.isWindows?t.pythonPath.replace(/\\/g,"/"):t.pythonPath,r=t.terminal.launchArgs;yield this.getTerminalService(e).sendCommand(n,r.concat(e.fsPath.fileToCommandArgument()))})}execute(e,t){return o(this,void 0,void 0,function*(){e&&0!==e.trim().length&&(yield this.initializeRepl(),yield this.getTerminalService(t).sendText(e))})}initializeRepl(e){return o(this,void 0,void 0,function*(){this.replActive&&(yield this.replActive)?yield this._terminalService.show():(this.replActive=new Promise(t=>o(this,void 0,void 0,function*(){const n=this.getReplCommandArgs(e);yield this.getTerminalService(e).sendCommand(n.command,n.args),setTimeout(()=>t(!0),1e3)})),yield this.replActive)})}getReplCommandArgs(e){const t=this.configurationService.getSettings(e);return{command:this.platformService.isWindows?t.pythonPath.replace(/\\/g,"/"):t.pythonPath,args:t.terminal.launchArgs.slice()}}getTerminalService(e){return this._terminalService||(this._terminalService=this.terminalServiceFactory.getTerminalService(e,this.terminalTitle),this.disposables.push(this._terminalService.onDidCloseTerminal(()=>{this.replActive=void 0}))),this._terminalService}setCwdForFileExecution(e){return o(this,void 0,void 0,function*(){if(!this.configurationService.getSettings(e).terminal.executeInFileDir)return;const t=a.dirname(e.fsPath),n=this.workspace.getWorkspaceFolder(e);n&&t!==n.uri.fsPath&&t.length>0&&(yield this.getTerminalService(e).sendText(`cd ${t.fileToCommandArgument()}`))})}};h=r([s.injectable(),i(0,s.inject(l.ITerminalServiceFactory)),i(1,s.inject(d.IConfigurationService)),i(2,s.inject(c.IWorkspaceService)),i(3,s.inject(d.IDisposableRegistry)),i(4,s.inject(u.IPlatformService))],h),t.TerminalCodeExecutionProvider=h},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(2),s=n(1),a=n(16),c=n(91),u=n(20),l=n(15);t.TestConfigurationManager=class{constructor(e,t,n){this.workspace=e,this.product=t,this.serviceContainer=n,this.outputChannel=n.get(s.IOutputChannel,u.TEST_OUTPUT_CHANNEL),this.installer=n.get(s.IInstaller),this.testConfigSettingsService=n.get(l.ITestConfigSettingsService)}enable(){return r(this,void 0,void 0,function*(){const e=[s.Product.pytest,s.Product.unittest,s.Product.nosetest].filter(e=>e!==this.product);for(const t of e)yield this.testConfigSettingsService.disable(this.workspace,t);return this.testConfigSettingsService.enable(this.workspace,this.product)})}disable(){return r(this,void 0,void 0,function*(){return this.testConfigSettingsService.enable(this.workspace,this.product)})}selectTestDir(e,t,n=[]){let r=t.map(t=>{const n=i.relative(e,t);if(0!==n.indexOf("."))return{label:n,description:""}}).filter(e=>void 0!==e).map(e=>e);r=[{label:".",description:"Root directory"},...r],r=n.concat(r);const s=a.createDeferred();return o.window.showQuickPick(r,{matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Select the directory containing the unit tests"}).then(e=>{if(!e)return s.resolve();s.resolve(e.label)}),s.promise}selectTestFilePattern(){const e=a.createDeferred();return o.window.showQuickPick([{label:"*test.py",description:"Python Files ending with 'test'"},{label:"*_test.py",description:"Python Files ending with '_test'"},{label:"test*.py",description:"Python Files begining with 'test'"},{label:"test_*.py",description:"Python Files begining with 'test_'"},{label:"*test*.py",description:"Python Files containing the word 'test'"}],{matchOnDescription:!0,matchOnDetail:!0,placeHolder:"Select the pattern to identify test files"}).then(t=>{if(!t)return e.resolve();e.resolve(t.label)}),e.promise}getTestDirs(e){return c.getSubDirectories(e).then(e=>{e.sort();const t=e.filter(e=>e.match(/test/i)),n=e.filter(e=>-1===t.indexOf(e));return t.push(...n),t})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(4),s=n(79),a=n(6),c=n(1),u=n(224),l=n(9),d=n(7),h=n(19),p=n(20),f=n(15);var g;!function(e){e[e.testDiscovery=0]="testDiscovery",e[e.testRunner=1]="testRunner"}(g||(g={}));t.BaseTestManager=class{constructor(e,t,n,r,s){this.testProvider=e,this.product=t,this.workspaceFolder=n,this.rootDirectory=r,this.serviceContainer=s,this._status=f.TestStatus.Unknown,this._status=f.TestStatus.Unknown;const a=s.get(c.IConfigurationService);this.settings=a.getSettings(this.rootDirectory?i.Uri.file(this.rootDirectory):void 0);const u=s.get(c.IDisposableRegistry);this._outputChannel=this.serviceContainer.get(c.IOutputChannel,p.TEST_OUTPUT_CHANNEL),this.testCollectionStorage=this.serviceContainer.get(f.ITestCollectionStorageService),this._testResultsService=this.serviceContainer.get(f.ITestResultsService),this.workspaceService=this.serviceContainer.get(o.IWorkspaceService),this.diagnosticCollection=i.languages.createDiagnosticCollection(this.testProvider),this.unitTestDiagnosticService=s.get(h.IUnitTestDiagnosticService),u.push(this)}get outputChannel(){return this._outputChannel}get testResultsService(){return this._testResultsService}get installer(){return this._installer||(this._installer=this.serviceContainer.get(c.IInstaller)),this._installer}get testDiscoveryCancellationToken(){return this.testDiscoveryCancellationTokenSource?this.testDiscoveryCancellationTokenSource.token:void 0}get testRunnerCancellationToken(){return this.testRunnerCancellationTokenSource?this.testRunnerCancellationTokenSource.token:void 0}dispose(){this.stop()}get status(){return this._status}get workingDirectory(){return this.settings.unitTest.cwd&&this.settings.unitTest.cwd.length>0?this.settings.unitTest.cwd:this.rootDirectory}stop(){this.testDiscoveryCancellationTokenSource&&this.testDiscoveryCancellationTokenSource.cancel(),this.testRunnerCancellationTokenSource&&this.testRunnerCancellationTokenSource.cancel()}reset(){this._status=f.TestStatus.Unknown,this.tests=void 0}resetTestResults(){this.tests&&this.testResultsService.resetResults(this.tests)}discoverTests(e,t=!1,n=!1,o=!1){return r(this,void 0,void 0,function*(){if(this.discoverTestsPromise)return this.discoverTestsPromise;if(!t&&this.tests&&this.tests.testFunctions.length>0)return this._status=f.TestStatus.Idle,Promise.resolve(this.tests);this._status=f.TestStatus.Discovering,o&&this.stop();const r={tool:this.testProvider,trigger:e,failed:!1};this.createCancellationToken(g.testDiscovery);const a=this.getDiscoveryOptions(t);return this.serviceContainer.get(f.ITestDiscoveryService,this.testProvider).discoverTests(a).then(e=>{this.tests=e,this._status=f.TestStatus.Idle,this.resetTestResults(),this.discoverTestsPromise=void 0;let t=!1;e.testFiles.forEach(e=>{e.errorsWhenDiscovering&&e.errorsWhenDiscovering.length>0&&(t=!0,this.outputChannel.append("_".repeat(10)),this.outputChannel.append(`There was an error in identifying unit tests in ${e.nameToRun}`),this.outputChannel.appendLine("_".repeat(10)),this.outputChannel.appendLine(e.errorsWhenDiscovering))}),t&&!n&&this.serviceContainer.get(f.ITestsHelper).displayTestErrorMessage("There were some errors in discovering unit tests");const o=this.workspaceService.getWorkspaceFolder(i.Uri.file(this.rootDirectory)).uri;return this.testCollectionStorage.storeTests(o,e),this.disposeCancellationToken(g.testDiscovery),d.sendTelemetryEvent(l.EventName.UNITTEST_DISCOVER,void 0,r),e}).catch(e=>{s.isNotInstalledError(e)&&!n&&this.installer.promptToInstall(this.product,this.workspaceFolder).catch(e=>console.error("Python Extension: isNotInstalledError",e)),this.tests=void 0,this.discoverTestsPromise=void 0,this.testDiscoveryCancellationToken&&this.testDiscoveryCancellationToken.isCancellationRequested?(e=p.CANCELLATION_REASON,this._status=f.TestStatus.Idle):(r.failed=!0,d.sendTelemetryEvent(l.EventName.UNITTEST_DISCOVER,void 0,r),this._status=f.TestStatus.Error,this.outputChannel.appendLine("Test Discovery failed: "),this.outputChannel.appendLine(e.toString()));const t=this.workspaceService.getWorkspaceFolder(i.Uri.file(this.rootDirectory)).uri;return this.testCollectionStorage.storeTests(t,null),this.disposeCancellationToken(g.testDiscovery),Promise.reject(e)})})}runTest(e,t,n,r){const i={Test_Provider:this.testProvider,Run_Failed_Tests:"false",Run_Specific_File:"false",Run_Specific_Class:"false",Run_Specific_Function:"false"},o=u.getNamesAndValues(p.CommandSource).map(e=>e.value),s={tool:this.testProvider,scope:"all",debugging:!0===r,triggerSource:-1===o.indexOf(e)?"commandpalette":e,failed:!1};!0===n&&(i.Run_Failed_Tests=n.toString(),s.scope="failed"),t&&"object"==typeof t&&(Array.isArray(t.testFile)&&t.testFile.length>0&&(s.scope="file",i.Run_Specific_File="true"),Array.isArray(t.testSuite)&&t.testSuite.length>0&&(s.scope="class",i.Run_Specific_Class="true"),Array.isArray(t.testFunction)&&t.testFunction.length>0&&(s.scope="function",i.Run_Specific_Function="true")),!1===n&&null===t&&this.resetTestResults(),this._status=f.TestStatus.Running,this.testRunnerCancellationTokenSource&&this.testRunnerCancellationTokenSource.cancel();const a=!(n||i.Run_Specific_File||i.Run_Specific_Class||i.Run_Specific_Function);return this.discoverTests(e,a,!0,!0).catch(e=>this.testDiscoveryCancellationToken&&this.testDiscoveryCancellationToken.isCancellationRequested?Promise.reject(e):(this.serviceContainer.get(f.ITestsHelper).displayTestErrorMessage("Errors in discovering tests, continuing with tests"),{rootTestFolders:[],testFiles:[],testFolders:[],testFunctions:[],testSuites:[],summary:{errors:0,failures:0,passed:0,skipped:0}})).then(e=>(this.createCancellationToken(g.testRunner),this.runTestImpl(e,t,n,r))).then(()=>(this._status=f.TestStatus.Idle,this.disposeCancellationToken(g.testRunner),d.sendTelemetryEvent(l.EventName.UNITTEST_RUN,void 0,s),this.tests)).catch(e=>(this.testRunnerCancellationToken&&this.testRunnerCancellationToken.isCancellationRequested?(e=p.CANCELLATION_REASON,this._status=f.TestStatus.Idle):(this._status=f.TestStatus.Error,s.failed=!0,d.sendTelemetryEvent(l.EventName.UNITTEST_RUN,void 0,s)),this.disposeCancellationToken(g.testRunner),Promise.reject(e)))}updateDiagnostics(e,t){return r(this,void 0,void 0,function*(){yield this.stripStaleDiagnostics(e,t);const n=t.reduce((e,t)=>(-1===e.indexOf(t.testFilePath)&&void 0!==t.testFilePath&&e.push(t.testFilePath),e),[]),r=this.serviceContainer.get(a.IFileSystem);for(const e of n){const n=i.Uri.file(e);if(!this.diagnosticCollection.has(n)){const e=[];this.diagnosticCollection.set(n,e)}const o=this.diagnosticCollection.get(n),s=[];for(const e of o)s.push(e);for(const e of t)if(r.arePathsSame(n.fsPath,i.Uri.file(e.testFilePath).fsPath)&&e.status!==f.TestStatus.Pass){const t=this.createDiagnostics(e);s.push(t)}this.diagnosticCollection.set(n,s)}})}createCancellationToken(e){this.disposeCancellationToken(e),e===g.testDiscovery?this.testDiscoveryCancellationTokenSource=new i.CancellationTokenSource:this.testRunnerCancellationTokenSource=new i.CancellationTokenSource}disposeCancellationToken(e){e===g.testDiscovery?(this.testDiscoveryCancellationTokenSource&&this.testDiscoveryCancellationTokenSource.dispose(),this.testDiscoveryCancellationTokenSource=void 0):(this.testRunnerCancellationTokenSource&&this.testRunnerCancellationTokenSource.dispose(),this.testRunnerCancellationTokenSource=void 0)}stripStaleDiagnostics(e,t){return r(this,void 0,void 0,function*(){this.diagnosticCollection.forEach((n,r,i)=>{const o=[];for(const n of r)void 0===t.find(e=>e.code===n.code)&&void 0!==e.testFunctions.find(e=>e.testFunction.nameToRun===n.code)&&o.push(n);i.set(n,o)})})}createDiagnostics(e){const t=e.locationStack[0],n=this.unitTestDiagnosticService.getMessagePrefix(e.status),r=this.unitTestDiagnosticService.getSeverity(e.severity),o=e.message.split("\n")[0],s=new i.Diagnostic(t.location.range,`${n?`${n}: `:""}${o}`,r);s.code=e.code,s.source=e.provider;const a=[];for(const t of e.locationStack){const e=new i.DiagnosticRelatedInformation(t.location,t.lineText);a.push(e)}return s.relatedInformation=a,s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(r.TAGGED_PROP,e)||[]},e}();t.MetadataReader=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===r.STACK_OVERFLOW}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=n(24),o=n(41),s=n(50),a=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=a,t.inject=function(e){return function(t,n,a){if(void 0===e)throw new Error(r.UNDEFINED_INJECT_ANNOTATION(t.name));var c=new o.Metadata(i.INJECT_TAG,e);"number"==typeof a?s.tagParameter(t,n,a,c):s.tagProperty(t,n,c)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(60),o=n(41),s=n(237),a=function(){function e(e,t,n,a){this.guid=i.guid(),this.type=e,this.serviceIdentifier=n,this.name=new s.QueryableString(t||""),this.metadata=new Array;var c=null;"string"==typeof a?c=new o.Metadata(r.NAMED_TAG,a):a instanceof o.Metadata&&(c=a),null!==c&&this.metadata.push(c)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(r.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some(function(e){return e.key!==r.INJECT_TAG&&e.key!==r.MULTI_INJECT_TAG&&e.key!==r.NAME_TAG&&e.key!==r.UNMANAGED_TAG&&e.key!==r.NAMED_TAG})},e.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(e){return e.key===r.NAMED_TAG})[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(e){return e.key!==r.INJECT_TAG&&e.key!==r.MULTI_INJECT_TAG&&e.key!==r.NAME_TAG&&e.key!==r.UNMANAGED_TAG&&e.key!==r.NAMED_TAG}):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(r.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,i=t.metadata;r<i.length;r++){var o=i[r];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(105),i=n(106),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(41),o=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||o(n,t))};t.traverseAncerstors=o;var s=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new i.Metadata(e,t),n}};t.taggedConstraint=s;var a=s(r.NAMED_TAG);t.namedConstraint=a;t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var i=n(18),o=n(17),s=n(3),a=n(2),c=n(262),u=function(e){function t(t,n,r){var o=e.call(this,function(){return o.toDispose.forEach(function(e){return e&&e.dispose()})})||this;o.extensionId=t,o.extensionVersion=n,o.userOptIn=!1,o.toDispose=[];var c=process.env.VSCODE_LOGS||"";return c&&t&&"trace"===process.env.VSCODE_LOG_LEVEL&&(c=s.join(c,t+".txt"),o.logStream=i.createWriteStream(c,{flags:"a",encoding:"utf8",autoClose:!0})),o.updateUserOptIn(r),o.toDispose.push(a.workspace.onDidChangeConfiguration(function(){return o.updateUserOptIn(r)})),o}return r(t,e),t.prototype.updateUserOptIn=function(e){var n=a.workspace.getConfiguration(t.TELEMETRY_CONFIG_ID);this.userOptIn!==n.get(t.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=n.get(t.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(e):this.dispose())},t.prototype.createAppInsightsClient=function(e){c.defaultClient?(this.appInsightsClient=new c.TelemetryClient(e),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(c.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=c.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),e&&0===e.indexOf("AIF-")&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")},t.prototype.getCommonProperties=function(){var e=Object.create(null);return e["common.os"]=o.platform(),e["common.platformversion"]=(o.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,a&&a.env&&(e["common.vscodemachineid"]=a.env.machineId,e["common.vscodesessionid"]=a.env.sessionId,e["common.vscodeversion"]=a.version),e},t.prototype.sendTelemetryEvent=function(e,t,n){this.userOptIn&&e&&this.appInsightsClient&&(this.appInsightsClient.trackEvent({name:this.extensionId+"/"+e,properties:t,measurements:n}),this.logStream&&this.logStream.write("telemetry/"+e+" "+JSON.stringify({properties:t,measurements:n})+"\n"))},t.prototype.dispose=function(){var e=this,t=new Promise(function(t){if(!e.logStream)return t(void 0);e.logStream.on("finish",t),e.logStream.end()}),n=new Promise(function(t){e.appInsightsClient?e.appInsightsClient.flush({callback:function(){e.appInsightsClient=void 0,t(void 0)}}):t(void 0)});return Promise.all([n,t])},t.TELEMETRY_CONFIG_ID="telemetry",t.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",t}(a.Disposable);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(42),o=n(157),s=Object.keys(process.binding("natives")),a=o.prototype.require;t.makePatchingRequire=function(e){var t={};return function(n){var c=a.apply(this,arguments);if(e[n]){var u=o._resolveFilename(n,this);if(t.hasOwnProperty(u))return t[u];var l=void 0;if(s.indexOf(n)<0)try{l=a.call(this,r.join(n,"package.json")).version}catch(e){return c}else l=process.version.substring(1);var d=l.indexOf("-");d>=0&&(l=l.substring(0,d));for(var h=c,p=0,f=e[n];p<f.length;p++){var g=f[p];i.satisfies(l,g.versionSpecifier)&&(h=g.patch(h,u))}return t[u]=h}return c}}},function(e,t){e.exports=require("module")},function(e,t){e.exports=require("timers")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=n(282),t.Base=n(160),t.ContextTagKeys=n(283),t.Data=n(284),t.DataPoint=n(285),t.DataPointType=n(161),t.Domain=n(51),t.Envelope=n(286),t.EventData=n(162),t.ExceptionData=n(287),t.ExceptionDetails=n(288),t.MessageData=n(289),t.MetricData=n(290),t.PageViewData=n(291),t.RemoteDependencyData=n(292),t.RequestData=n(293),t.SeverityLevel=n(294),t.StackFrame=n(295)},function(e,t,n){"use strict";var r=function(){return function(){}}();e.exports=r},function(e,t,n){"use strict";var r;!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(r||(r={})),e.exports=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(n(51));e.exports=i},function(e,t,n){"use strict";var r=n(17),i=n(37),o=function(){function e(t){if(e.INSTANCE)throw new Error("Performance tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._isInitialized=!1,this._client=t}return e.prototype.enable=function(t){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._handle=setInterval(function(){return n.trackPerformance()},6e4),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,n){var r=this;if(e.isEnabled()){var o=+new Date;t&&n?"function"==typeof n.once&&n.once("finish",function(){var t=+new Date;r._lastRequestExecutionTime=t-o,e._totalRequestCount++,n.statusCode>=400&&e._totalFailedRequestCount++}):i.warn("AutoCollectPerformance.countRequest was called with invalid parameters: ",!!t,!!n)}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork()},e.prototype._trackCpu=function(){var e=r.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,n=0,i=0,o=0,s=0,a=0;e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],l=(c.model,c.speed,c.times),d=u.times;t+=l.user-d.user||0,n+=l.sys-d.sys||0,i+=l.nice-d.nice||0,o+=l.idle-d.idle||0,s+=l.irq-d.irq||0}var h=t+n+i+o+s||1;this._client.trackMetric({name:"\\Processor(_Total)\\% Processor Time",value:(h-o)/h*100}),this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\% Processor Time",value:t/h*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=r.totalmem(),t=r.freemem(),n=e-t;this._client.trackMetric({name:"\\Process(??APP_WIN32_PROC??)\\Private Bytes",value:n}),this._client.trackMetric({name:"\\Memory\\Available Bytes",value:t})},e.prototype._trackNetwork=function(){var t=this._lastRequests,n={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},r=n.totalRequestCount-t.totalRequestCount||0,i=(t.totalFailedRequestCount,n.time-t.time),o=i/1e3;if(i>0){var s=r/o;this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",value:s}),this._client.trackMetric({name:"\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time",value:e._lastRequestExecutionTime})}this._lastRequests=n},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._lastRequestExecutionTime=0,e}();e.exports=o},function(e,t,n){"use strict";var r=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var r=this.properties||{};if(t)if("string"==typeof t)r.error=t;else if(t instanceof Error)r.error=t.message;else if("object"==typeof t)for(var i in t)r[i]=t[i]&&t[i].toString&&t[i].toString();this.properties=r},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();e.exports=r},function(e,t,n){"use strict";var r=n(111),i=n(112),o=n(37),s=n(52),a=n(78),c=n(306),u=n(77),l=n(163),d=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e){e&&!this._isAutoCorrelating?u.CorrelationContextManager.enable():!e&&this._isAutoCorrelating&&u.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return u.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var n=function(n){if(n){if("function"!=typeof n)throw new Error("onRequest handler must be a function");return function(r,i){var o=new c(r),s=t._generateCorrelationContext(o);u.CorrelationContextManager.runWithContext(s,function(){t._isEnabled&&e.trackRequest(t._client,{request:r,response:i},o),l.countRequest(r,i),"function"==typeof n&&n(r,i)})}}},o=function(e){var t=e.addListener.bind(e);e.addListener=function(e,r){switch(e){case"request":case"checkContinue":return t(e,n(r));default:return t(e,r)}},e.on=e.addListener},s=r.createServer;r.createServer=function(e){var t=s(n(e));return o(t),t};var a=i.createServer;i.createServer=function(e,t){var r=a(e,n(t));return o(r),r}},e.trackRequestSync=function(t,n){if(n.request&&n.response&&t){e.addResponseCorrelationIdHeader(t,n.response);var r=u.CorrelationContextManager.getCurrentContext(),i=new c(n.request,r&&r.operation.parentId);r&&(r.operation.id=i.getOperationId(t.context.tags)||r.operation.id,r.operation.name=i.getOperationName(t.context.tags)||r.operation.name,r.operation.parentId=i.getRequestId()||r.operation.parentId,r.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,n,n.duration,n.error)}else o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!n.request,!n.response,!t)},e.trackRequest=function(t,n,r){if(n.request&&n.response&&t){var i=u.CorrelationContextManager.getCurrentContext(),a=r||new c(n.request,i&&i.operation.parentId);s.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,n.response),i&&!r&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),n.response.once&&n.response.once("finish",function(){e.endRequest(t,a,n,null,null)}),n.request.on&&n.request.on("error",function(r){e.endRequest(t,a,n,null,r)})}else o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!n.request,!n.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var n=t.getHeader(a.requestContextHeader);if(n){var r=n.split(","),i=a.requestContextSourceKey+"=";r.some(function(e){return e.substring(0,i.length)===i})||t.setHeader(a.requestContextHeader,n+","+a.requestContextSourceKey+"="+e.config.correlationId)}else t.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+e.config.correlationId)}},e.endRequest=function(e,t,n,r,i){i?t.onError(i,r):t.onResponse(n.response,r);var o=t.getRequestTelemetry(n);if(o.tagOverrides=t.getRequestTags(e.context.tags),n.tagOverrides)for(var s in n.tagOverrides)o.tagOverrides[s]=n.tagOverrides[s];o.contextObjects=o.contextObjects||{},o.contextObjects["http.ServerRequest"]=n.request,o.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(o)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();e.exports=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(27),u=n(13),l=n(5),d=n(63),h=n(53),p=n(64),f=n(54),g=n(26);class m extends d.BaseDiagnostic{constructor(e,t){super(p.DiagnosticCodes.LSNotSupportedDiagnostic,e,a.DiagnosticSeverity.Warning,g.DiagnosticScope.Global,t)}}t.LSNotSupportedDiagnostic=m,t.LSNotSupportedDiagnosticServiceId="LSNotSupportedDiagnosticServiceId";let y=class extends d.BaseDiagnosticsService{constructor(e,t,n){super([p.DiagnosticCodes.LSNotSupportedDiagnostic],e,!1),this.lsCompatibility=t,this.messageService=n}diagnose(e){return o(this,void 0,void 0,function*(){return(yield this.lsCompatibility.isSupported())?[]:[new m(u.Diagnostics.lsNotSupported(),e)]})}onHandle(e){return o(this,void 0,void 0,function*(){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(yield this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(h.IDiagnosticsCommandFactory),r=[{prompt:"More Info",command:n.createCommand(t,{type:"launch",options:"https://aka.ms/AA3qqka"})},{prompt:"Do not show again",command:n.createCommand(t,{type:"ignore",options:g.DiagnosticScope.Global})}];yield this.messageService.handle(t,{commandPrompts:r})})}};y=r([i(0,s.inject(l.IServiceContainer)),i(1,s.inject(c.ILanguageServerCompatibilityService)),i(2,s.inject(g.IDiagnosticHandlerService)),i(2,s.named(f.DiagnosticCommandPromptHandlerServiceId))],y),t.LSNotSupportedDiagnosticService=y},function(e,t,n){const r=n(33).fromCallback,i=n(21),o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof i[e]);Object.keys(i).forEach(e=>{t[e]=i[e]}),o.forEach(e=>{t[e]=r(i[e])}),t.exists=function(e,t){return"function"==typeof t?i.exists(e,t):new Promise(t=>i.exists(e,t))},t.read=function(e,t,n,r,o,s){return"function"==typeof s?i.read(e,t,n,r,o,s):new Promise((s,a)=>{i.read(e,t,n,r,o,(e,t,n)=>{if(e)return a(e);s({bytesRead:t,buffer:n})})})},t.write=function(e,t,n,r,o,s){return"function"==typeof arguments[arguments.length-1]?i.write(e,t,n,r,o,s):"string"==typeof t?new Promise((o,s)=>{i.write(e,t,n,r,(e,t,n)=>{if(e)return s(e);o({bytesWritten:t,buffer:n})})}):new Promise((s,a)=>{i.write(e,t,n,r,o,(e,t,n)=>{if(e)return a(e);s({bytesWritten:t,buffer:n})})})}},function(e,t,n){"use strict";var r=n(18);e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:e.__proto__};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}(r)},function(e,t,n){var r=n(21),i=n(3),o=n(325);e.exports=function(e,t,n,s){s||(s=n,n={});var a=process.cwd(),c=i.resolve(a,e),u=i.resolve(a,t),l=n.filter,d=n.transform,h=n.overwrite;void 0===h&&(h=n.clobber),void 0===h&&(h=!0);var p=n.errorOnExist,f=n.dereference,g=!0===n.preserveTimestamps,m=0,y=0,v=0,b=!1;function S(e){if(m++,l)if(l instanceof RegExp){if(console.warn("Warning: fs-extra: Passing a RegExp filter is deprecated, use a function"),!l.test(e))return E(!0)}else if("function"==typeof l&&!l(e,t))return E(!0);return function(e){var t=f?r.stat:r.lstat;v++,t(e,function(t,n){if(t)return I(t);var o={name:e,mode:n.mode,mtime:n.mtime,atime:n.atime,stats:n};return n.isDirectory()?function(e){var t=e.name.replace(c,u.replace("$","$$$$"));T(t,function(n){if(n)return function(e,t){r.mkdir(t,e.mode,function(n){if(n)return I(n);r.chmod(t,e.mode,function(t){if(t)return I(t);P(e.name)})})}(e,t);P(e.name)})}(o):n.isFile()||n.isCharacterDevice()||n.isBlockDevice()?function(e){var t=e.name.replace(c,u.replace("$","$$$$"));T(t,function(n){n?_(e,t):h?w(t,function(){_(e,t)}):p?I(new Error(t+" already exists")):E()})}(o):n.isSymbolicLink()?function(e){var t=e.replace(c,u);r.readlink(e,function(e,n){if(e)return I(e);!function(e,t){f&&(e=i.resolve(a,e)),T(t,function(n){if(n)return C(e,t);r.readlink(t,function(n,r){return n?I(n):(f&&(r=i.resolve(a,r)),r===e?E():w(t,function(){C(e,t)}))})})}(n,t)})}(e):void 0})}(e)}function _(e,t){var n=r.createReadStream(e.name),i=r.createWriteStream(t,{mode:e.mode});n.on("error",I),i.on("error",I),d?d(n,i,e):i.on("open",function(){n.pipe(i)}),i.once("close",function(){r.chmod(t,e.mode,function(n){if(n)return I(n);g?o.utimesMillis(t,e.atime,e.mtime,function(e){return e?I(e):E()}):E()})})}function w(e,t){r.unlink(e,function(e){return e?I(e):t()})}function P(e){r.readdir(e,function(t,n){return t?I(t):(n.forEach(function(t){S(i.join(e,t))}),E())})}function C(e,t){r.symlink(e,t,function(e){return e?I(e):E()})}function T(e,t){r.lstat(e,function(e){return e&&"ENOENT"===e.code?t(!0):t(!1)})}function I(e){if(!b&&void 0!==s)return b=!0,s(e)}function E(e){if(e||v--,m===++y&&0===v&&void 0!==s)return s(null)}S(c)}},function(e,t,n){"use strict";const r=n(3);function i(e){return(e=r.normalize(r.resolve(e)).split(r.sep)).length>0?e[0]:null}const o=/[<>:"|?*]/;e.exports={getRootPath:i,invalidWin32Path:function(e){const t=i(e);return e=e.replace(t,""),o.test(e)}}},function(e,t,n){e.exports={copySync:n(328)}},function(e,t){e.exports=function(e){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var r=n(351),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){var r=n(117),i=n(354),o=n(355),s="[object Null]",a="[object Undefined]",c=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?a:s:c&&c in Object(e)?i(e):o(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(89),i=n(369),o=n(177),s=n(81);var a;!function(e){e[e.None=0]="None",e[e.Single=1]="Single",e[e.Double=2]="Double",e[e.TripleSingle=3]="TripleSingle",e[e.TripleDouble=4]="TripleDouble"}(a||(a={}));class c extends s.TextRange{constructor(e,t,n){super(t,n),this.type=e}}t.Tokenizer=class{constructor(){this.cs=new i.CharacterStream(""),this.tokens=[],this.mode=s.TokenizerMode.Full}tokenize(e,t,n,r){if(void 0===t)t=0;else if(t<0||t>=e.length)throw new Error("Invalid range start");if(void 0===n)n=e.length;else if(n<0||t+n>e.length)throw new Error("Invalid range length");this.mode=void 0!==r?r:s.TokenizerMode.Full,this.cs=new i.CharacterStream(e),this.cs.position=t;const a=t+n;for(;!(this.cs.isEndOfStream()||(this.AddNextToken(),this.cs.position>=a)););return new o.TextRangeCollection(this.tokens)}AddNextToken(){this.cs.skipWhitespace(),this.cs.isEndOfStream()||this.handleCharacter()||this.cs.moveNext()}handleCharacter(){const e=this.getStringPrefixLength();if(e>=0){this.cs.advance(e);const t=this.getQuoteType();if(t!==a.None)return this.handleString(t,e),!0}if(35===this.cs.currentChar)return this.handleComment(),!0;if(this.mode===s.TokenizerMode.CommentsAndStrings)return!1;switch(this.cs.currentChar){case 40:this.tokens.push(new c(s.TokenType.OpenBrace,this.cs.position,1));break;case 41:this.tokens.push(new c(s.TokenType.CloseBrace,this.cs.position,1));break;case 91:this.tokens.push(new c(s.TokenType.OpenBracket,this.cs.position,1));break;case 93:this.tokens.push(new c(s.TokenType.CloseBracket,this.cs.position,1));break;case 123:this.tokens.push(new c(s.TokenType.OpenCurly,this.cs.position,1));break;case 125:this.tokens.push(new c(s.TokenType.CloseCurly,this.cs.position,1));break;case 44:this.tokens.push(new c(s.TokenType.Comma,this.cs.position,1));break;case 59:this.tokens.push(new c(s.TokenType.Semicolon,this.cs.position,1));break;case 58:this.tokens.push(new c(s.TokenType.Colon,this.cs.position,1));break;default:if(this.isPossibleNumber()&&this.tryNumber())return!0;if(46===this.cs.currentChar){this.tokens.push(new c(s.TokenType.Operator,this.cs.position,1));break}return this.tryIdentifier()||this.tryOperator()||this.handleUnknown(),!0}return!1}tryIdentifier(){const e=this.cs.position;if(r.isIdentifierStartChar(this.cs.currentChar))for(this.cs.moveNext();r.isIdentifierChar(this.cs.currentChar);)this.cs.moveNext();return this.cs.position>e&&(this.tokens.push(new c(s.TokenType.Identifier,e,this.cs.position-e)),!0)}isPossibleNumber(){if(r.isDecimal(this.cs.currentChar))return!0;if(46===this.cs.currentChar&&r.isDecimal(this.cs.nextChar))return!0;const e=45===this.cs.currentChar||43===this.cs.currentChar?1:0;if(r.isDecimal(this.cs.lookAhead(e))||46===this.cs.lookAhead(e)){if(0===this.tokens.length)return!0;const e=this.tokens[this.tokens.length-1];if(e.type===s.TokenType.OpenBrace||e.type===s.TokenType.OpenBracket||e.type===s.TokenType.Comma||e.type===s.TokenType.Colon||e.type===s.TokenType.Semicolon||e.type===s.TokenType.Operator)return!0}if(48===this.cs.lookAhead(e)){const t=this.cs.lookAhead(e+1);if(120===t||88===t)return!0;if(98===t||66===t)return!0;if(111===t||79===t)return!0}return!1}tryNumber(){const e=this.cs.position;let t=0;if(45!==this.cs.currentChar&&43!==this.cs.currentChar||(this.cs.moveNext(),t=1),48===this.cs.currentChar){let n=0;if((120===this.cs.nextChar||88===this.cs.nextChar)&&r.isHex(this.cs.lookAhead(2))){for(this.cs.advance(2);r.isHex(this.cs.currentChar);)this.cs.moveNext();n=16}if((98===this.cs.nextChar||66===this.cs.nextChar)&&r.isBinary(this.cs.lookAhead(2))){for(this.cs.advance(2);r.isBinary(this.cs.currentChar);)this.cs.moveNext();n=2}if((111===this.cs.nextChar||79===this.cs.nextChar)&&r.isOctal(this.cs.lookAhead(2))){for(this.cs.advance(2);r.isOctal(this.cs.currentChar);)this.cs.moveNext();n=8}if(n>0){const r=this.cs.getText().substr(e+t,this.cs.position-e-t);if(!isNaN(parseInt(r,n)))return this.tokens.push(new c(s.TokenType.Number,e,r.length+t)),!0}}let n=!1;if(this.cs.currentChar>=49&&this.cs.currentChar<=57){for(;r.isDecimal(this.cs.currentChar);)this.cs.moveNext();n=46!==this.cs.currentChar&&101!==this.cs.currentChar&&69!==this.cs.currentChar}if(48===this.cs.currentChar){for(;48===this.cs.currentChar||95===this.cs.currentChar;)this.cs.moveNext();n=46!==this.cs.currentChar&&101!==this.cs.currentChar&&69!==this.cs.currentChar}if(n){const n=this.cs.getText().substr(e+t,this.cs.position-e-t);if(!isNaN(parseInt(n,10)))return this.tokens.push(new c(s.TokenType.Number,e,n.length+t)),!0}if((this.cs.currentChar>=48&&this.cs.currentChar<=57||46===this.cs.currentChar&&this.cs.nextChar>=48&&this.cs.nextChar<=57)&&this.skipFloatingPointCandidate(!1)){const t=this.cs.getText().substr(e,this.cs.position-e);if(!isNaN(parseFloat(t)))return this.tokens.push(new c(s.TokenType.Number,e,this.cs.position-e)),!0}return this.cs.position=e,!1}tryOperator(){let e=0;const t=this.cs.nextChar;switch(this.cs.currentChar){case 43:case 38:case 124:case 94:case 61:case 33:case 37:case 126:e=61===t?2:1;break;case 45:e=61===t||62===t?2:1;break;case 42:e=42===t?61===this.cs.lookAhead(2)?3:2:61===t?2:1;break;case 47:e=47===t?61===this.cs.lookAhead(2)?3:2:61===t?2:1;break;case 60:e=62===t?2:60===t?61===this.cs.lookAhead(2)?3:2:61===t?2:1;break;case 62:e=62===t?61===this.cs.lookAhead(2)?3:2:61===t?2:1;break;case 64:e=61===t?2:1;break;default:return!1}return this.tokens.push(new c(s.TokenType.Operator,this.cs.position,e)),this.cs.advance(e),e>0}handleUnknown(){const e=this.cs.position;this.cs.skipToWhitespace();const t=this.cs.position-e;return t>0&&(this.tokens.push(new c(s.TokenType.Unknown,e,t)),!0)}handleComment(){const e=this.cs.position;this.cs.skipToEol(),this.tokens.push(new c(s.TokenType.Comment,e,this.cs.position-e))}getStringPrefixLength(){if(39===this.cs.currentChar||34===this.cs.currentChar)return 0;if(39===this.cs.nextChar||34===this.cs.nextChar)switch(this.cs.currentChar){case 102:case 70:case 114:case 82:case 98:case 66:case 117:case 85:return 1}if(39===this.cs.lookAhead(2)||34===this.cs.lookAhead(2))switch(this.cs.getText().substr(this.cs.position,2).toLowerCase()){case"rf":case"ur":case"br":return 2}return-1}getQuoteType(){return 39===this.cs.currentChar?39===this.cs.nextChar&&39===this.cs.lookAhead(2)?a.TripleSingle:a.Single:34===this.cs.currentChar?34===this.cs.nextChar&&34===this.cs.lookAhead(2)?a.TripleDouble:a.Double:a.None}handleString(e,t){const n=this.cs.position-t;e===a.Single||e===a.Double?(this.cs.moveNext(),this.skipToSingleEndQuote(e===a.Single?39:34)):(this.cs.advance(3),this.skipToTripleEndQuote(e===a.TripleSingle?39:34)),this.tokens.push(new c(s.TokenType.String,n,this.cs.position-n))}skipToSingleEndQuote(e){for(;!this.cs.isEndOfStream();){if(10===this.cs.currentChar||13===this.cs.currentChar)return;if(92!==this.cs.currentChar||this.cs.nextChar!==e){if(this.cs.currentChar===e)break;this.cs.moveNext()}else this.cs.advance(2)}this.cs.moveNext()}skipToTripleEndQuote(e){for(;!this.cs.isEndOfStream()&&(this.cs.currentChar!==e||this.cs.nextChar!==e||this.cs.lookAhead(2)!==e);)this.cs.moveNext();this.cs.advance(3)}skipFloatingPointCandidate(e){const t=this.cs.position;return this.skipFractionalNumber(e),this.cs.position>t&&(101!==this.cs.currentChar&&69!==this.cs.currentChar||this.cs.moveNext(),this.skipDecimalNumber(!0)),this.cs.position>t}skipFractionalNumber(e){this.skipDecimalNumber(e),46===this.cs.currentChar&&this.cs.moveNext(),this.skipDecimalNumber(!1)}skipDecimalNumber(e){for(!e||45!==this.cs.currentChar&&43!==this.cs.currentChar||this.cs.moveNext();r.isDecimal(this.cs.currentChar);)this.cs.moveNext()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextRangeCollection=class{constructor(e){this.items=e}get start(){return this.items.length>0?this.items[0].start:0}get end(){return this.items.length>0?this.items[this.items.length-1].end:0}get length(){return this.end-this.start}get count(){return this.items.length}contains(e){return e>=this.start&&e<this.end}getItemAt(e){if(e<0||e>=this.items.length)throw new Error("index is out of range");return this.items[e]}getItemAtPosition(e){if(0===this.count)return-1;if(e<this.start)return-1;if(e>=this.end)return-1;let t=0,n=this.count-1;for(;t<=n;){const r=Math.floor(t+(n-t)/2),i=this.items[r];if(i.start===e)return r;e<i.start?n=r-1:t=r+1}return-1}getItemContaining(e){if(0===this.count)return-1;if(e<this.start)return-1;if(e>this.end)return-1;let t=0,n=this.count-1;for(;t<=n;){const r=Math.floor(t+(n-t)/2),i=this.items[r];if(i.contains(e))return r;if(r<this.count-1&&i.end<=e&&e<this.items[r+1].start)return-1;e<i.start?n=r-1:t=r+1}return-1}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(17),o=n(2),s=n(371),a=n(65);class c{constructor(e,t,n){this.tooltip=e,this.detail=t,this.signature=n}}t.LanguageItemInfo=c;t.ItemInfoSource=class{constructor(e){this.jediFactory=e,this.textConverter=new s.RestTextConverter}getItemInfoFromText(e,t,n,i,o){return r(this,void 0,void 0,function*(){const r=yield this.getHoverResultFromTextRange(e,t,n,i,o);if(r&&r.items.length)return this.getItemInfoFromHoverResult(r,"")})}getItemInfoFromDocument(e,t,n){return r(this,void 0,void 0,function*(){const r=e.getWordRangeAtPosition(t);if(!r||r.isEmpty)return;const i=yield this.getHoverResultFromDocument(e,t,n);if(!i||!i.items.length)return;const o=e.getText(r);return this.getItemInfoFromHoverResult(i,o)})}getHoverResultFromDocument(e,t,n){return r(this,void 0,void 0,function*(){if(t.character<=0||e.lineAt(t.line).text.match(/^\s*\/\//))return;const r=e.getWordRangeAtPosition(t);return r&&!r.isEmpty?this.getHoverResultFromDocumentRange(e,r,n):void 0})}getHoverResultFromDocumentRange(e,t,n){return r(this,void 0,void 0,function*(){const r={command:a.CommandType.Hover,fileName:e.fileName,columnIndex:t.end.character,lineIndex:t.end.line};return e.isDirty&&(r.source=e.getText()),this.jediFactory.getJediProxyHandler(e.uri).sendCommand(r,n)})}getHoverResultFromTextRange(e,t,n,i,o){return r(this,void 0,void 0,function*(){const r={command:a.CommandType.Hover,fileName:t,columnIndex:n.end.character,lineIndex:n.end.line,source:i};return this.jediFactory.getJediProxyHandler(e).sendCommand(r,o)})}getItemInfoFromHoverResult(e,t){const n=[];return e.items.forEach(e=>{const r=this.getSignature(e,t);let s=new o.MarkdownString;if(e.docstring){let a=e.docstring.split(/\r?\n/);if(a.length>0&&0===e.signature.indexOf(a[0])){a.shift();const t=a.findIndex(t=>e.signature.endsWith(t));t>=0&&(a=a.filter((e,n)=>n>t))}a.length>0&&t.length>0&&e.signature.startsWith(t)&&a[0].startsWith(t)&&a[0].endsWith(")")&&a.shift(),r.length>0&&(s=s.appendMarkdown(["```python",r,"```",""].join(i.EOL)));const u=this.textConverter.toMarkdown(a.join(i.EOL));return s=s.appendMarkdown(u),void n.push(new c(s,e.description,new o.MarkdownString(r)))}if(e.description){r.length>0&&s.appendMarkdown(["```python",r,"```",""].join(i.EOL));const t=this.textConverter.toMarkdown(e.description);return s.appendMarkdown(t),void n.push(new c(s,e.description,new o.MarkdownString(r)))}if(e.text){const r=t&&t.length>0?`${t}: ${e.text}`:e.text;s.appendMarkdown(["```python",r,"```",""].join(i.EOL)),n.push(new c(s,"",new o.MarkdownString))}}),n}getSignature(e,t){let{signature:n}=e;switch(e.kind){case o.SymbolKind.Constructor:case o.SymbolKind.Function:case o.SymbolKind.Method:n=`def ${n}`;break;case o.SymbolKind.Class:n=`class ${n}`;break;case o.SymbolKind.Module:n.length>0&&(n=`module ${n}`);break;default:n="string"==typeof e.text&&e.text.length>0?e.text:t}return n}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),s=n(7),a=n(9),c=n(65);class u{constructor(e){this.jediFactory=e}static parseData(e,t){if(e&&Array.isArray(e.definitions)&&e.definitions.length>0){const n=e.definitions.filter(e=>e.text===t),r=n.length>0?n[0]:e.definitions[e.definitions.length-1],i=o.Uri.file(r.fileName),s=new o.Range(r.range.startLine,r.range.startColumn,r.range.endLine,r.range.endColumn);return new o.Location(i,s)}}provideDefinition(e,t,n){return i(this,void 0,void 0,function*(){const r=e.fileName;if(e.lineAt(t.line).text.match(/^\s*\/\//))return;if(t.character<=0)return;const i=e.getWordRangeAtPosition(t);if(!i)return;const o=i.isEmpty?t.character:i.end.character,s={command:c.CommandType.Definitions,fileName:r,columnIndex:o,lineIndex:t.line};e.isDirty&&(s.source=e.getText());const a=e.getText(i),l=yield this.jediFactory.getJediProxyHandler(e.uri).sendCommand(s,n);return l?u.parseData(l,a):void 0})}}r([s.captureTelemetry(a.EventName.DEFINITION)],u.prototype,"provideDefinition",null),t.PythonDefinitionProvider=u},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(2);n(8);const s=n(47),a=n(14),c=n(16),u=n(378);t.RefactorProxy=class extends o.Disposable{constructor(e,t,n,r){super(()=>{}),this.pythonSettings=t,this.workspaceRoot=n,this.serviceContainer=r,this._previousOutData="",this._previousStdErrData="",this._startedSuccessfully=!1,this._extensionDir=e}dispose(){try{this._process.kill()}catch(e){}this._process=void 0}getOffsetAt(e,t){if(!s.IS_WINDOWS)return e.offsetAt(t);const n=e.offsetAt(t);return n-u.getWindowsLineEndingCount(e,n)}rename(e,t,n,r,i){i||(i=o.window.activeTextEditor.options);const s={lookup:"rename",file:n,start:this.getOffsetAt(e,r.start).toString(),id:"1",name:t,indent_size:i.tabSize};return this.sendCommand(JSON.stringify(s))}extractVariable(e,t,n,r,i){i||(i=o.window.activeTextEditor.options);const s={lookup:"extract_variable",file:n,start:this.getOffsetAt(e,r.start).toString(),end:this.getOffsetAt(e,r.end).toString(),id:"1",name:t,indent_size:i.tabSize};return this.sendCommand(JSON.stringify(s))}extractMethod(e,t,n,r,i){if(i||(i=o.window.activeTextEditor.options),!e.lineAt(e.lineCount-1).isEmptyOrWhitespace&&r.start.line===e.lineCount-1)return Promise.reject("Missing blank line at the end of document (PEP8).");const s={lookup:"extract_method",file:n,start:this.getOffsetAt(e,r.start).toString(),end:this.getOffsetAt(e,r.end).toString(),id:"1",name:t,indent_size:i.tabSize};return this.sendCommand(JSON.stringify(s))}sendCommand(e,t){return this.initialize(this.pythonSettings.pythonPath).then(()=>new Promise((t,n)=>{this._commandResolve=t,this._commandReject=n,this._process.stdin.write(e+"\n")}))}initialize(e){return r(this,void 0,void 0,function*(){const e=yield this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:o.Uri.file(this.workspaceRoot)});this.initialized=c.createDeferred();const t=["refactor.py",this.workspaceRoot],n=i.join(this._extensionDir,"pythonFiles"),r=e.execObservable(t,{cwd:n});return this._process=r.proc,r.out.subscribe(e=>{if("stdout"===e.source){if(!this._startedSuccessfully&&e.out.startsWith("STARTED"))return this._startedSuccessfully=!0,this.initialized.resolve();this.onData(e.out)}else this.handleStdError(e.out)},e=>this.handleError(e)),this.initialized.promise})}handleStdError(e){let t,n=this._previousStdErrData=this._previousStdErrData+e+"";try{t=n.split(/\r?\n/g).filter(e=>e.length>0).map(e=>JSON.parse(e)),this._previousStdErrData=""}catch(e){return void console.error(e)}"string"==typeof t[0].message&&0!==t[0].message.length||(t[0].message=t[0].traceback.splitLines().pop());let r=t[0].message+"\n"+t[0].traceback;if(this._startedSuccessfully)this._commandReject(`Refactor failed. ${r}`);else{if("string"==typeof t[0].type&&"ModuleNotFoundError"===t[0].type)return void this.initialized.reject("Not installed");this.initialized.reject(`Refactor failed. ${r}`)}}handleError(e){if(this._startedSuccessfully)return this._commandReject(e);this.initialized.reject(e)}onData(e){if(!this._commandResolve)return;let t,n=this._previousOutData=this._previousOutData+e+"";try{t=n.split(/\r?\n/g).filter(e=>e.length>0).map(e=>JSON.parse(e)),this._previousOutData=""}catch(e){return}this.dispose(),this._commandResolve(t[0]),this._commandResolve=void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={number:"number",string:"string",undefined:"undefined",object:"object",function:"function"};function i(e){return Array.isArray?Array.isArray(e):!(!e||typeof e.length!==r.number||e.constructor!==Array)}function o(e){return typeof e===r.string||e instanceof String}function s(e){return!(typeof e!==r.object||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}function a(e){return typeof e===r.undefined}t.isArray=i,t.isString=o,t.isStringArray=function(e){return i(e)&&e.every(e=>o(e))},t.isObject=s,t.isNumber=function(e){return(typeof e===r.number||e instanceof Number)&&!isNaN(e)},t.isBoolean=function(e){return!0===e||!1===e},t.isUndefined=a,t.isUndefinedOrNull=function(e){return a(e)||null===e};const c=Object.prototype.hasOwnProperty;function u(e){return typeof e===r.function}t.isEmptyObject=function(e){if(!s(e))return!1;for(let t in e)if(c.call(e,t))return!1;return!0},t.isFunction=u,t.areFunctions=function(...e){return e&&e.length>0&&e.every(u)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),s=n(6),a=n(16),c=n(7),u=n(9),l=n(65);function d(e,t,n=""){const r=[],i=new o.Range(e.range.start.line,e.range.start.character,e.range.end.line,e.range.end.character),s=e.kind-1,a=new o.SymbolInformation(e.name,o.SymbolKind[o.SymbolKind[s]],n,new o.Location(t,i));if(r.push(a),e.children&&e.children.length>0)for(const n of e.children){const i=d(n,t,e.name);r.push(...i)}return r}t.LanguageServerSymbolProvider=class{constructor(e){this.languageClient=e}provideDocumentSymbols(e,t){return i(this,void 0,void 0,function*(){const n=e.uri,r={textDocument:{uri:n.toString()}},i=yield this.languageClient.sendRequest("textDocument/documentSymbol",r,t),o=[];for(const e of i){const t=d(e,n);o.push(...t)}return Promise.resolve(o)})}};class h{constructor(e,t,n=500){this.jediFactory=t,this.debounceTimeoutMs=n,this.debounceRequest=new Map,this.fs=e.get(s.IFileSystem)}provideDocumentSymbols(e,t){return this.provideDocumentSymbolsThrottled(e,t)}provideDocumentSymbolsThrottled(e,t){const n=`${e.uri.fsPath}`;if(this.debounceRequest.has(n)){const e=this.debounceRequest.get(n);clearTimeout(e.timer),e.deferred.resolve([])}const r=a.createDeferred(),i=setTimeout(()=>{if(t.isCancellationRequested)return r.resolve([]);const n=e.fileName,i={command:l.CommandType.Symbols,fileName:n,columnIndex:0,lineIndex:0};e.isDirty&&(i.source=e.getText()),this.jediFactory.getJediProxyHandler(e.uri).sendCommand(i,t).then(t=>this.parseData(e,t)).then(e=>r.resolve(e)).catch(e=>r.reject(e))},this.debounceTimeoutMs);return t.onCancellationRequested(()=>{clearTimeout(i),r.resolve([]),this.debounceRequest.delete(n)}),e.isUntitled||this.debounceRequest.set(n,{timer:i,deferred:r}),r.promise}provideDocumentSymbolsUnthrottled(e,t){const n=e.fileName,r={command:l.CommandType.Symbols,fileName:n,columnIndex:0,lineIndex:0};return e.isDirty&&(r.source=e.getText()),this.jediFactory.getJediProxyHandler(e.uri).sendCommandNonCancellableCommand(r,t).then(t=>this.parseData(e,t))}parseData(e,t){if(t){return t.definitions.filter(t=>this.fs.arePathsSame(t.fileName,e.fileName)).map(e=>{const t=e.kind,n=new o.Range(e.range.startLine,e.range.startColumn,e.range.endLine,e.range.endColumn),r=o.Uri.file(e.fileName),i=new o.Location(r,n);return new o.SymbolInformation(e.text,t,e.container,i)})}return[]}}r([c.captureTelemetry(u.EventName.SYMBOL)],h.prototype,"provideDocumentSymbols",null),t.JediSymbolProvider=h},function(e,t,n){
/*!
 * Tmp
 *
 * Copyright (c) 2011-2015 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
var r=n(18),i=n(3),o=n(61),s=n(397),a=n(113),c=s(),u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",l=/XXXXXX/,d=3,h=a.O_CREAT|a.O_EXCL|a.O_RDWR,p=448,f=384,g=[],m=!1,y=!1;function v(e){var t=[],n=null;try{n=o.randomBytes(e)}catch(t){n=o.pseudoRandomBytes(e)}for(var r=0;r<e;r++)t.push(u[n[r]%u.length]);return t.join("")}function b(e,t){if("function"==typeof e){var n=e;e=t||{},t=n}else void 0===e&&(e={});return[e,t]}function S(e){if(e.name)return i.join(e.dir||c,e.name);if(e.template)return e.template.replace(l,v(6));var t=[e.prefix||"tmp-",process.pid,v(12),e.postfix||""].join("");return i.join(e.dir||c,t)}function _(e,t){var n=b(e,t),i=n[0],o=n[1],s=i.tries||d;return isNaN(s)||s<0?o(new Error("Invalid tries")):i.template&&!i.template.match(l)?o(new Error("Invalid template provided")):void function e(){var t=S(i);r.stat(t,function(n){if(!n)return s-- >0?e():o(new Error("Could not get a unique tmp filename, max tries reached "+t));o(null,t)})}()}function w(e){var t=b(e)[0],n=t.tries||d;if(isNaN(n)||n<0)throw new Error("Invalid tries");if(t.template&&!t.template.match(l))throw new Error("Invalid template provided");do{var i=S(t);try{r.statSync(i)}catch(e){return i}}while(n-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function P(e){var t=[e];do{for(var n=t.pop(),o=!1,s=r.readdirSync(n),a=0,c=s.length;a<c;a++){var u=i.join(n,s[a]);r.lstatSync(u).isDirectory()?(o||(o=!0,t.push(n)),t.push(u)):r.unlinkSync(u)}o||r.rmdirSync(n)}while(0!==t.length)}function C(e,t,n){var i=I(function(e){try{r.closeSync(e[0])}catch(e){if(e.errno!=-a.EBADF&&e.errno!=-a.ENOENT)throw e}r.unlinkSync(e[1])},[t,e]);return n.keep||g.unshift(i),i}function T(e,t){var n=I(t.unsafeCleanup?P:r.rmdirSync.bind(r),e);return t.keep||g.unshift(n),n}function I(e,t){var n=!1;return function r(){if(!n){var i=g.indexOf(r);i>=0&&g.splice(i,1),n=!0,e(t)}}}function E(){if(!y||m)for(var e=0,t=g.length;e<t;e++)try{g[e].call(null)}catch(e){}}var O=process.versions.node.split(".").map(function(e){return parseInt(e,10)});0===O[0]&&(O[1]<9||9===O[1]&&O[2]<5)&&process.addListener("uncaughtException",function(e){throw y=!0,E(),e}),process.addListener("exit",function(e){e&&(y=!0),E()}),e.exports.tmpdir=c,e.exports.dir=function(e,t){var n=b(e,t),i=n[0],o=n[1];_(i,function(e,t){if(e)return o(e);r.mkdir(t,i.mode||p,function(e){if(e)return o(e);o(null,t,T(t,i))})})},e.exports.dirSync=function(e){var t=b(e)[0],n=w(t);return r.mkdirSync(n,t.mode||p),{name:n,removeCallback:T(n,t)}},e.exports.file=function(e,t){var n=b(e,t),i=n[0],o=n[1];i.postfix=function(e){return void 0===e}(i.postfix)?".tmp":i.postfix,_(i,function(e,t){if(e)return o(e);r.open(t,h,i.mode||f,function(e,n){if(e)return o(e);o(null,t,n,C(t,n,i))})})},e.exports.fileSync=function(e){var t=b(e)[0];t.postfix=t.postfix||".tmp";var n=w(t),i=r.openSync(n,h,t.mode||f);return{name:n,fd:i,removeCallback:C(n,i,t)}},e.exports.tmpName=_,e.exports.tmpNameSync=w,e.exports.setGracefulCleanup=function(){m=!0}},function(e,t){e.exports=require("string_decoder")},function(e,t,n){"use strict";!function(t){var n,r=/^[$_a-z][$_a-z0-9]*$/i;function i(e){var t,n,i,o,s,a,c,u={},l=0,d="",h=!1;for(t=0;t<e.length;++t)if(n=e[t],o=(i=e[t+1])+e[t+2],d+=n,"\\"===n)if(h||"k<"!==o)d+=i,++t;else{if((s=e.indexOf(">",t+3))<0)throw new Error("'>' missing in named backreference.");if(!(c=u[a=e.substring(t+3,s)]))throw new Error("Named group '"+a+"' is not defined in backreference.");if("number"!=typeof c)throw new Error("Named backreference referencing duplicate named group '"+a+"'.");t=s,d+=c}else if(h)"]"===n&&(h=!1);else if("["===n)h=!0;else if("("===n&&"?:"!==o&&"?="!==o&&"?!"!==o&&(l++,"?<"===o||":<"===o)){if((s=e.indexOf(">",t+3))<0)throw new Error("'>' missing in named group.");if(a=e.substring(t+3,s),!r.test(a))throw new Error("Invalide group name '"+a+"'. Regexp group name should start with '_$a-zA-Z' and can contain only '_$a-zA-Z0-9'.");void 0===(c=u[a])?u[a]=l:"number"==typeof c?u[a]=[c,l]:c.push(l),t=s}return{mapper:u,regexText:d}}e.exports=function(e,t){if("boolean"!=typeof e){"string"!=typeof e&&(t=(e.global?"g":"")+(e.multiline?"m":"")+(e.ignoreCase?"i":""),e=e.source);var r=n?n[e]||(n[e]=i(e)):i(e),o=new RegExp(r.regexText,t);return o.groupsIndices=r.mapper,o.exec=function(e){var t=RegExp.prototype.exec.call(this,e);return t&&s(t),t},o.execGroups=function(e,t){var n=this.exec(e);return n?n.groups(t):null},o.replace=function(e,t){if("function"==typeof t)return e.replace(o,function(){var e=Array.prototype.slice.call(arguments,0,arguments.length-2);return s(e),t.apply(e,arguments)});var n=function(e,t){var n,r,i,o,s,a,c="";for(n=0;n<e.length;++n)if(r=e[n],i=e[n+1],c+=r,"$"===r)if("$"===i)c+=i,++n;else if("{"===i){if((s=e.indexOf("}",n+2))<0)throw new Error("'>' missing in replacement named group.");if(void 0===(a=t[o=e.substring(n+2,s)]))throw new Error("Named group '"+o+"' is not defined in replacement text.");if("number"!=typeof a)throw new Error("Named replacement referencing duplicate named group '"+o+"'.");c+=a,n=s}return c}(t,this.groupsIndices);return e.replace(this,n)},o}function s(e){var t,n,i=r.mapper;return e.group=function(t,n){var r=i[t];if("number"==typeof r)return e[r];if(n)return r.map(function(t){return e[t]});if(r)for(var o=0;o<r.length;++o){var s=e[r[o]];if(void 0!==s)return s}},e.groups=function(r){var o=r?n:t;if(o)return o;for(var s in o={},i)o[s]=e.group(s,r);return r?n=o:t=o},e}!1===e?n=void 0:n||(n={})}}("undefined"==typeof window||window)},function(e,t){e.exports=require("./node_modules/node-stream-zip")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),i=n(18),o=n(71),s=n(2),a=n(43),c=n(424),u=n(425),l=n(426),d=n(427),h=n(428),p=n(429),f=n(57),g=n(430),m=n(431);var y,v,b,S,_,w,P;!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(71)),function(e){e.is=function(e){return f.string(e.command)}}(y||(y={})),function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"}(v=t.TransportKind||(t.TransportKind={})),function(e){e.isSocket=function(e){let t=e;return t&&t.kind===v.socket&&f.number(t.port)}}(b||(b={})),function(e){e.is=function(e){return f.string(e.module)}}(S||(S={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.writer&&void 0!==t.reader}}(_||(_={})),function(e){e.is=function(e){let t=e;return t&&void 0!==t.process&&"boolean"==typeof t.detached}}(w||(w={}));t.LanguageClient=class extends o.BaseLanguageClient{constructor(e,t,n,r,i){let o,s,a,c,u;f.string(t)?(o=e,s=t,a=n,c=r,u=!!i):(o=e.toLowerCase(),s=e,a=t,c=n,u=r),void 0===u&&(u=!1),super(o,s,c),this._serverOptions=a,this._forceDebug=u}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,void 0!==this._isDetached&&this._isDetached||this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){e&&setTimeout(()=>{try{process.kill(e.pid,0),m.terminate(e)}catch(e){}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){let t,n=this._serverOptions;if(f.func(n))return n().then(t=>{if(o.MessageTransports.is(t))return this._isDetached=!!t.detached,t;if(_.is(t))return this._isDetached=!!t.detached,{reader:new a.StreamMessageReader(t.reader),writer:new a.StreamMessageWriter(t.writer)};{let n;return w.is(t)?(n=t.process,this._isDetached=t.detached):(n=t,this._isDetached=!1),n.stderr.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),{reader:new a.StreamMessageReader(n.stdout),writer:new a.StreamMessageWriter(n.stdin)}}});let i=n;return t=i.run||i.debug?"object"==typeof v8debug||this._forceDebug||function(){let e=process.execArgv;return!!e&&e.some(e=>/^--debug=?/.test(e)||/^--debug-brk=?/.test(e)||/^--inspect=?/.test(e)||/^--inspect-brk=?/.test(e))}()?i.debug:i.run:n,this._getServerWorkingDir(t.options).then(i=>{if(S.is(t)&&t.module){let n=t,o=n.transport||v.stdio;if(!n.runtime){let t=void 0;return new Promise((r,s)=>{let c=n.args&&n.args.slice()||[];o===v.ipc?c.push("--node-ipc"):o===v.stdio?c.push("--stdio"):o===v.pipe?(t=a.generateRandomPipeName(),c.push(`--pipe=${t}`)):b.isSocket(o)&&c.push(`--socket=${o.port}`),c.push(`--clientProcessId=${process.pid.toString()}`);let u=n.options||Object.create(null);u.execArgv=u.execArgv||[],u.cwd=i,o===v.ipc||o===v.stdio?g.fork(n.module,c||[],u,(t,n)=>{t||!n?s(t):(this._serverProcess=n,n.stderr.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),o===v.ipc?(n.stdout.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),r({reader:new a.IPCMessageReader(this._serverProcess),writer:new a.IPCMessageWriter(this._serverProcess)})):r({reader:new a.StreamMessageReader(n.stdout),writer:new a.StreamMessageWriter(n.stdin)}))}):o===v.pipe?a.createClientPipeTransport(t).then(t=>{g.fork(n.module,c||[],u,(n,i)=>{n||!i?s(n):(this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),i.stdout.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),t.onConnected().then(e=>{r({reader:e[0],writer:e[1]})}))})}):b.isSocket(o)&&a.createClientSocketTransport(o.port).then(t=>{g.fork(n.module,c||[],u,(n,i)=>{n||!i?s(n):(this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),i.stdout.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),t.onConnected().then(e=>{r({reader:e[0],writer:e[1]})}))})})})}{let t=[],s=n.options||Object.create(null);s.execArgv&&s.execArgv.forEach(e=>t.push(e)),t.push(n.module),n.args&&n.args.forEach(e=>t.push(e));let c=Object.create(null);c.cwd=i,c.env=function(e){if(!e)return process.env;let t=Object.create(null);return Object.keys(process.env).forEach(e=>t[e]=process.env[e]),Object.keys(e).forEach(n=>t[n]=e[n]),t}(s.env);let u=void 0;if(o===v.ipc?(c.stdio=[null,null,null,"ipc"],t.push("--node-ipc")):o===v.stdio?t.push("--stdio"):o===v.pipe?(u=a.generateRandomPipeName(),t.push(`--pipe=${u}`)):b.isSocket(o)&&t.push(`--socket=${o.port}`),t.push(`--clientProcessId=${process.pid.toString()}`),o===v.ipc||o===v.stdio){let i=r.spawn(n.runtime,t,c);return i&&i.pid?(this._serverProcess=i,i.stderr.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),o===v.ipc?(i.stdout.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),Promise.resolve({reader:new a.IPCMessageReader(i),writer:new a.IPCMessageWriter(i)})):Promise.resolve({reader:new a.StreamMessageReader(i.stdout),writer:new a.StreamMessageWriter(i.stdin)})):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)}if(o==v.pipe)return a.createClientPipeTransport(u).then(i=>{let o=r.spawn(n.runtime,t,c);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),o.stdout.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),i.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)});if(b.isSocket(o))return a.createClientSocketTransport(o.port).then(i=>{let o=r.spawn(n.runtime,t,c);return o&&o.pid?(this._serverProcess=o,o.stderr.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),o.stdout.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),i.onConnected().then(e=>({reader:e[0],writer:e[1]}))):Promise.reject(`Launching server using runtime ${n.runtime} failed.`)})}}else if(y.is(t)&&t.command){let n=t,o=n.args||[],s=Object.assign({},n.options);s.cwd=s.cwd||i;let c=r.spawn(n.command,o,s);return c&&c.pid?(c.stderr.on("data",t=>this.outputChannel.append(f.string(t)?t:t.toString(e))),this._serverProcess=c,this._isDetached=!!s.detached,Promise.resolve({reader:new a.StreamMessageReader(c.stdout),writer:new a.StreamMessageWriter(c.stdin)})):Promise.reject(`Launching server using command ${n.command} failed.`)}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(n,null,4)))})}registerProposedFeatures(){this.registerFeatures(P.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new u.ConfigurationFeature(this)),this.registerFeature(new d.TypeDefinitionFeature(this)),this.registerFeature(new l.ImplementationFeature(this)),this.registerFeature(new c.ColorProviderFeature(this)),this.registerFeature(new h.WorkspaceFoldersFeature(this)),this.registerFeature(new p.FoldingRangeFeature(this))}_mainGetRootPath(){let e=s.workspace.workspaceFolders;if(!e||0===e.length)return;let t=e[0];return"file"===t.uri.scheme?t.uri.fsPath:void 0}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(e=>{i.lstat(t,(n,r)=>{e(!n&&r.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};t.SettingMonitor=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return s.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new s.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,r=n?s.workspace.getConfiguration(t).get(n,!1):s.workspace.getConfiguration(t);r&&this._client.needsStart()?this._client.start():!r&&this._client.needsStop()&&this._client.stop()}},function(e){e.createAll=function(e){return[]}}(P=t.ProposedFeatures||(t.ProposedFeatures={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.default=class extends r.CompletionItem{constructor(e){super(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.default=class extends r.CodeLens{constructor(e){super(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.default=class extends r.DocumentLink{constructor(e,t){super(e,t)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(436),a=n(5);var c;t.azureCDNBlobStorageAccount="https://pvsc.azureedge.net",function(e){e.stable="stable",e.beta="beta",e.daily="daily"}(t.LanguageServerDownloadChannel||(t.LanguageServerDownloadChannel={})),function(e){e.stable="python-language-server-stable",e.beta="python-language-server-beta",e.daily="python-language-server-daily"}(c=t.LanguageServerPackageStorageContainers||(t.LanguageServerPackageStorageContainers={}));let u=class extends s.AzureBlobStoreNugetRepository{constructor(e){super(e,"https://pvsc.blob.core.windows.net",c.stable,t.azureCDNBlobStorageAccount)}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],u),t.StableLanguageServerPackageRepository=u;let l=class extends s.AzureBlobStoreNugetRepository{constructor(e){super(e,"https://pvsc.blob.core.windows.net",c.beta,t.azureCDNBlobStorageAccount)}};l=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],l),t.BetaLanguageServerPackageRepository=l;let d=class extends s.AzureBlobStoreNugetRepository{constructor(e){super(e,"https://pvsc.blob.core.windows.net",c.daily,t.azureCDNBlobStorageAccount)}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.DailyLanguageServerPackageRepository=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(448),l=n(4);n(8);const d=n(12),h=n(1),p=n(13),f=n(95),g=n(40),m=n(10),y=n(5),v=n(63),b=n(53),S=n(64),_=n(54),w=n(26),P={[S.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic]:p.Diagnostics.invalidPythonPathInDebuggerSettings(),[S.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic]:p.Diagnostics.invalidPythonPathInDebuggerLaunch()};class C extends v.BaseDiagnostic{constructor(e,t){super(e,P[e],c.DiagnosticSeverity.Error,w.DiagnosticScope.WorkspaceFolder,t,"always")}}t.InvalidPythonPathInDebuggerDiagnostic=C,t.InvalidPythonPathInDebuggerServiceId="InvalidPythonPathInDebuggerServiceId";let T=class extends v.BaseDiagnosticsService{constructor(e,t,n,r,i,o){super([S.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic,S.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic],e,!0),this.workspace=t,this.commandFactory=n,this.interpreterHelper=r,this.configService=i,this.messageService=o}diagnose(e){return o(this,void 0,void 0,function*(){return[]})}validatePythonPath(e,t,n){return o(this,void 0,void 0,function*(){return"${config:python.pythonPath}"!==(e=e?this.resolveVariables(e,n):void 0)&&e||(e=this.configService.getSettings(n).pythonPath),!!(yield this.interpreterHelper.getInterpreterInformation(e).catch(()=>void 0))||(d.traceError(`Invalid Python Path '${e}'`),t===g.PythonPathSource.launchJson?this.handle([new C(S.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic,n)]).catch(e=>d.traceError("Failed to handle invalid python path in launch.json debugger",e)).ignoreErrors():this.handle([new C(S.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic,n)]).catch(e=>d.traceError("Failed to handle invalid python path in settings.json debugger",e)).ignoreErrors(),!1)})}onHandle(e){return o(this,void 0,void 0,function*(){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0],n=this.getCommandPrompts(t);yield this.messageService.handle(t,{commandPrompts:n})})}resolveVariables(e,t){const n=t?this.workspace.getWorkspaceFolder(t):void 0;return new f.SystemVariables(n?n.uri.fsPath:void 0).resolveAny(e)}getCommandPrompts(e){switch(e.code){case S.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic:return[{prompt:"Select Python Interpreter",command:this.commandFactory.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})}];case S.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic:return[{prompt:"Open launch.json",command:{diagnostic:e,invoke:()=>o(this,void 0,void 0,function*(){const e=this.getLaunchJsonFile(c.workspace.workspaceFolders[0]);yield u.openFile(e)})}}];default:throw new Error("Invalid diagnostic for 'InvalidPythonPathInDebuggerService'")}}getLaunchJsonFile(e){return a.join(e.uri.fsPath,".vscode","launch.json")}};T=r([s.injectable(),i(0,s.inject(y.IServiceContainer)),i(1,s.inject(l.IWorkspaceService)),i(2,s.inject(b.IDiagnosticsCommandFactory)),i(3,s.inject(m.IInterpreterHelper)),i(4,s.inject(h.IConfigurationService)),i(5,s.inject(w.IDiagnosticHandlerService)),i(5,s.named(_.DiagnosticCommandPromptHandlerServiceId))],T),t.InvalidPythonPathInDebuggerService=T},function(e,t,n){var r=n(32),i=n(18),o=n(3);e.exports=function(){if("x64"===process.arch)return"x64";if("darwin"===process.platform)return"x64";if("win32"===process.platform){var e=!1;try{e=!(!process.env.SYSTEMROOT||!i.statSync(process.env.SYSTEMROOT))}catch(e){}var t=e?process.env.SYSTEMROOT:"C:\\Windows",n=!1;try{n=!!i.statSync(o.join(t,"sysnative"))}catch(e){}return n?"x64":"x86"}return"linux"===process.platform&&"64\n"===r.execSync("getconf LONG_BIT",{encoding:"utf8"})?"x64":"x86"}},function(e,t,n){e.exports=l,l.realpath=l,l.sync=d,l.realpathSync=d,l.monkeypatch=function(){r.realpath=l,r.realpathSync=d},l.unmonkeypatch=function(){r.realpath=i,r.realpathSync=o};var r=n(18),i=r.realpath,o=r.realpathSync,s=process.version,a=/^v[0-5]\./.test(s),c=n(449);function u(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function l(e,t,n){if(a)return i(e,t,n);"function"==typeof t&&(n=t,t=null),i(e,t,function(r,i){u(r)?c.realpath(e,t,n):n(r,i)})}function d(e,t){if(a)return o(e,t);try{return o(e,t)}catch(n){if(u(n))return c.realpathSync(e,t);throw n}}},function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=u,t.alphasorti=c,t.setopts=function(e,t,n){n||(n={});if(n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0);e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(l))}(e,n),e.changedCwd=!1;var o=process.cwd();r(n,"cwd")?(e.cwd=i.resolve(n.cwd),e.changedCwd=e.cwd!==o):e.cwd=o;e.root=n.root||i.resolve(e.cwd,"/"),e.root=i.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=s(e.cwd)?e.cwd:d(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new a(t,n),e.options=e.minimatch.options},t.ownProp=r,t.makeAbs=d,t.finish=function(e){for(var t=e.nounique,n=t?[]:Object.create(null),r=0,i=e.matches.length;r<i;r++){var o=e.matches[r];if(o&&0!==Object.keys(o).length){var s=Object.keys(o);t?n.push.apply(n,s):s.forEach(function(e){n[e]=!0})}else if(e.nonull){var a=e.minimatch.globSet[r];t?n.push(a):n[a]=!0}}t||(n=Object.keys(n));e.nosort||(n=n.sort(e.nocase?c:u));if(e.mark){for(var r=0;r<n.length;r++)n[r]=e._mark(n[r]);e.nodir&&(n=n.filter(function(t){var n=!/\/$/.test(t),r=e.cache[t]||e.cache[d(e,t)];return n&&r&&(n="DIR"!==r&&!Array.isArray(r)),n}))}e.ignore.length&&(n=n.filter(function(t){return!h(e,t)}));e.found=n},t.mark=function(e,t){var n=d(e,t),r=e.cache[n],i=t;if(r){var o="DIR"===r||Array.isArray(r),s="/"===t.slice(-1);if(o&&!s?i+="/":!o&&s&&(i=i.slice(0,-1)),i!==t){var a=d(e,i);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return i},t.isIgnored=h,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return!(!e.gmatcher||!e.gmatcher.match(t))})};var i=n(3),o=n(94),s=n(126),a=o.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function u(e,t){return e.localeCompare(t)}function l(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new a(n,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function d(e,t){var n=t;return n="/"===t.charAt(0)?i.join(e.root,t):s(t)||""===t?t:e.changedCwd?i.resolve(e.cwd,t):i.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function h(e,t){return!!e.ignore.length&&e.ignore.some(function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))})}},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");Object.keys(t).forEach(function(e){r[e]=t[e]});return r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}}},function(e,t,n){var r=n(197);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=r(i),e.exports.strict=r(o),i.proto=i(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=function(e){return r(this,void 0,void 0,function*(){return new Promise(t=>setTimeout(t,e))})},t.noop=function(){},t.isWindows=/^win/.test(process.platform)},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2);let s=class{get onDidChangeConfiguration(){return o.workspace.onDidChangeConfiguration}get rootPath(){return Array.isArray(o.workspace.workspaceFolders)?o.workspace.workspaceFolders[0].uri.fsPath:void 0}get workspaceFolders(){return o.workspace.workspaceFolders}get onDidChangeWorkspaceFolders(){return o.workspace.onDidChangeWorkspaceFolders}get hasWorkspaceFolders(){return Array.isArray(o.workspace.workspaceFolders)&&o.workspace.workspaceFolders.length>0}getConfiguration(e,t){return o.workspace.getConfiguration(e,t)}getWorkspaceFolder(e){return o.workspace.getWorkspaceFolder(e)}asRelativePath(e,t){return o.workspace.asRelativePath(e,t)}createFileSystemWatcher(e,t,n,r){return o.workspace.createFileSystemWatcher(e,n,n,r)}findFiles(e,t,n,r){return o.workspace.findFiles(e,t,n,r)}getWorkspaceFolderIdentifier(e,t=""){const n=e?o.workspace.getWorkspaceFolder(e):void 0;return n?n.uri.fsPath:t}};s=r([i.injectable()],s),t.WorkspaceService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(459),o=n(0),s=n(204);let a=class{decode(e,t=s.DEFAULT_ENCODING){return t=i.encodingExists(t)?t:s.DEFAULT_ENCODING,i.decode(Buffer.concat(e),t)}};a=r([o.injectable()],a),t.BufferDecoder=a},function(e){e.exports=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]},function(e){e.exports=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ENCODING="utf8"},function(e,t,n){"use strict";var r=n(130),i=n(477),o=n(484),s=n(485),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=i.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 0===e.length?this:s.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();t.Observable=a},function(e,t,n){"use strict";t.isFunction=function(e){return"function"==typeof e}},function(e,t,n){"use strict";t.errorObject={e:{}}},function(e,t,n){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=n(130).root.Symbol;t.rxSubscriber="function"==typeof r&&"function"==typeof r.for?r.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){"use strict";var r=n(32),i=r.spawn,o=r.exec;function s(e,t,n){var r={};try{Object.keys(e).forEach(function(n){e[n].forEach(function(e){r[e]||(a(e,t),r[e]=1)}),r[n]||(a(n,t),r[n]=1)})}catch(e){if(n)return n(e);throw e}if(n)return n()}function a(e,t){try{process.kill(parseInt(e,10),t)}catch(e){if("ESRCH"!==e.code)throw e}}function c(e,t,n,r,i){var o=r(e),s="";o.stdout.on("data",function(e){e=e.toString("ascii");s+=e});o.on("close",function(o){delete n[e],0==o?s.match(/\d+/g).forEach(function(o){o=parseInt(o,10),t[e].push(o),t[o]=[],n[o]=1,c(o,t,n,r,i)}):0==Object.keys(n).length&&i()})}e.exports=function(e,t,n){var r={},a={};switch(r[e]=[],a[e]=1,"function"==typeof t&&void 0===n&&(n=t,t=void 0),process.platform){case"win32":o("taskkill /pid "+e+" /T /F",n);break;case"darwin":c(e,r,a,function(e){return i("pgrep",["-P",e])},function(){s(r,t,n)});break;default:c(e,r,a,function(e){return i("ps",["-o","pid","--no-headers","--ppid",e])},function(){s(r,t,n)})}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2);n(8);const c=n(12),u=n(488),l=n(1),d=n(5),h=n(7),p=n(9),f=n(63),g=n(53),m=n(64),y=n(54),v=n(26),b="Activation of the selected Python environment is not supported in PowerShell. Consider changing your shell to Command Prompt.";t.PowershellActivationNotAvailableDiagnostic=class extends f.BaseDiagnostic{constructor(e){super(m.DiagnosticCodes.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic,b,a.DiagnosticSeverity.Warning,v.DiagnosticScope.Global,e,"always")}},t.PowerShellActivationHackDiagnosticsServiceId="EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic";let S=class extends f.BaseDiagnosticsService{constructor(e){super([m.DiagnosticCodes.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic],e,!0),this.messageService=e.get(v.IDiagnosticHandlerService,y.DiagnosticCommandPromptHandlerServiceId)}diagnose(e){return o(this,void 0,void 0,function*(){return[]})}onHandle(e){return o(this,void 0,void 0,function*(){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(yield this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(g.IDiagnosticsCommandFactory),r=this.serviceContainer.get(l.ICurrentProcess),i=this.serviceContainer.get(l.IConfigurationService),s=[{prompt:"Use Command Prompt",command:{diagnostic:t,invoke:()=>o(this,void 0,void 0,function*(){h.sendTelemetryEvent(p.EventName.DIAGNOSTICS_ACTION,void 0,{action:"switchToCommandPrompt"}),u.useCommandPromptAsDefaultShell(r,i).catch(e=>c.Logger.error("Use Command Prompt as default shell",e))})}},{prompt:"Ignore"},{prompt:"Always Ignore",command:n.createCommand(t,{type:"ignore",options:v.DiagnosticScope.Global})},{prompt:"More Info",command:n.createCommand(t,{type:"launch",options:"https://aka.ms/CondaPwsh"})}];yield this.messageService.handle(t,{commandPrompts:s})})}};S=r([s.injectable(),i(0,s.inject(d.IServiceContainer))],S),t.PowerShellActivationHackDiagnosticsService=S},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(2);let a=r=class{get activeDebugConsole(){return s.debug.activeDebugConsole}get activeDebugSession(){return s.debug.activeDebugSession}get breakpoints(){return s.debug.breakpoints}get onDidChangeActiveDebugSession(){return s.debug.onDidChangeActiveDebugSession}get onDidStartDebugSession(){return s.debug.onDidStartDebugSession}get onDidReceiveDebugSessionCustomEvent(){return s.debug.onDidReceiveDebugSessionCustomEvent}get onDidTerminateDebugSession(){return s.debug.onDidTerminateDebugSession}get onDidChangeBreakpoints(){return s.debug.onDidChangeBreakpoints}registerDebugConfigurationProvider(e,t){return s.debug.registerDebugConfigurationProvider(e,t)}startDebugging(e,t){return s.debug.startDebugging(e,t)}addBreakpoints(e){s.debug.addBreakpoints(e)}removeBreakpoints(e){s.debug.removeBreakpoints(e)}};a.instance=new r,a=r=i([o.injectable()],a),t.DebugService=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ErrorUtils=class{static outputHasModuleNotInstalledError(e,t){return!(!t||!(t.indexOf(`No module named ${e}`)>0||t.indexOf(`No module named '${e}'`)>0))}}},function(e,t,n){"use strict";const r=n(3),i=n(32),o=n(524);e.exports=((e,t)=>{if("string"!=typeof e)return Promise.reject(new Error("Expected a `target`"));let n;t=Object.assign({wait:!0},t);let s=[],a=[];const c={};Array.isArray(t.app)&&(s=t.app.slice(1),t.app=t.app[0]),"darwin"===process.platform?(n="open",t.wait&&a.push("-W"),t.app&&a.push("-a",t.app)):"win32"===process.platform||o?(n="cmd"+(o?".exe":""),a.push("/c","start",'""',"/b"),e=e.replace(/&/g,"^&"),t.wait&&a.push("/wait"),t.app&&a.push(t.app),s.length>0&&(a=a.concat(s))):(n=t.app?t.app:"android"===process.platform?"xdg-open":r.join(__dirname,"xdg-open"),s.length>0&&(a=a.concat(s)),t.wait||(c.stdio="ignore",c.detached=!0)),a.push(e),"darwin"===process.platform&&s.length>0&&(a.push("--args"),a=a.concat(s));const u=i.spawn(n,a,c);return t.wait?new Promise((e,t)=>{u.once("error",t),u.once("close",n=>{n>0?t(new Error("Exited with code "+n)):e(u)})}):(u.unref(),Promise.resolve(u))})},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(214),o=n(0);function s(e){i(e)}t.launch=s;let a=class{launch(e){s(e)}};a=r([o.injectable()],a),t.BrowserService=a},function(e,t){e.exports=require("./node_modules/request")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(3),a=n(6),c=n(1);let u=class{constructor(e){this.serviceContainer=e}getActivationCommands(e,t){const n=this.serviceContainer.get(c.IConfigurationService).getSettings(e).pythonPath;return this.getActivationCommandsForInterpreter(n,t)}findScriptFile(e,t){return i(this,void 0,void 0,function*(){const n=this.serviceContainer.get(a.IFileSystem);for(const r of t){const t=s.join(s.dirname(e),r);if(yield n.fileExists(t))return t}})}};u=r([o.injectable()],u),t.BaseActivationCommandProvider=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8);const r=n(22),i=n(31);t.CellMatcher=class{constructor(e){this.codeMatchRegEx=this.createRegExp(e?e.codeRegularExpression:void 0,i.RegExpValues.PythonCellMarker),this.markdownMatchRegEx=this.createRegExp(e?e.markdownRegularExpression:void 0,i.RegExpValues.PythonMarkdownCellMarker),this.codeExecRegEx=new RegExp(`${this.codeMatchRegEx.source}(.*)`),this.markdownExecRegEx=new RegExp(`${this.markdownMatchRegEx.source}(.*)`)}isCell(e){return this.codeMatchRegEx.test(e)||this.markdownMatchRegEx.test(e)}isMarkdown(e){return this.markdownMatchRegEx.test(e)}isCode(e){return this.codeMatchRegEx.test(e)}exec(e){let t;if(this.codeMatchRegEx.test(e)?(this.codeExecRegEx.lastIndex=-1,t=this.codeExecRegEx.exec(e)):this.markdownMatchRegEx.test(e)&&(this.markdownExecRegEx.lastIndex=-1,t=this.markdownExecRegEx.exec(e)),t)return t.length>1?t[t.length-1].trim():""}createRegExp(e,t){try{if(e)return new RegExp(e)}catch(e){r.noop()}return t}}},function(e,t,n){"use strict";function r(e,t){return e.map((n,r)=>{const i=t?t(n):n;return r===e.length-1?`${i}`:`${i}\n`})}Object.defineProperty(t,"__esModule",{value:!0}),t.concatMultilineString=function(e){if(Array.isArray(e)){let t="";for(let n=0;n<e.length;n+=1){const r=e[n];t=n<e.length-1&&!r.endsWith("\n")?t.concat(`${r}\n`):t.concat(r)}return t.trim()}return e.toString().trim()},t.formatStreamText=function(e){let t="",n=0;for(let r=0;r<e.length;r+=1)"\r"===e[r]?r<e.length-1&&"\n"===e[r+1]?(t+=e.substr(n,r-n),t+="\n",n=r+2,r+=1):n=r+1:"\n"===e[r]&&(t+=e.substr(n,r-n+1),n=r+1);return t+=e.substr(n,e.length-n)},t.appendLineFeed=r,t.generateMarkdownFromCodeLines=function(e){return r(e.slice(1).filter(e=>e.includes("#")),e=>e.trim().slice(1))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8);const r=n(31);t.JupyterInstallError=class extends Error{constructor(e,t){super(e),this.action=r.HelpLinks.PythonInteractiveHelpLink,this.actionTitle=t.format(r.HelpLinks.PythonInteractiveHelpLink)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(28),o=n(3),s=n(22),a=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;t.JupyterKernelSpec=class{constructor(e,t){this.dispose=(()=>r(this,void 0,void 0,function*(){if(this.specFile&&a.test(o.basename(o.dirname(this.specFile)))){try{yield i.remove(o.dirname(this.specFile))}catch(e){s.noop()}this.specFile=void 0}})),this.name=e.name,this.language=e.language,this.path=e.argv&&e.argv.length>0?e.argv[0]:"",this.specFile=t}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),s=n(2),a=n(11),c=n(7),u=n(9),l=n(40);let d=class{constructor(e,t,n){this.workspaceService=e,this.documentManager=t,this.configurationService=n}getWorkspaceFolder(e){if(e)return e.uri;const t=this.getProgram();if(!Array.isArray(this.workspaceService.workspaceFolders)||0===this.workspaceService.workspaceFolders.length)return t?s.Uri.file(o.dirname(t)):void 0;if(1===this.workspaceService.workspaceFolders.length)return this.workspaceService.workspaceFolders[0].uri;if(t){const e=this.workspaceService.getWorkspaceFolder(s.Uri.file(t));if(e)return e.uri}}getProgram(){const e=this.documentManager.activeTextEditor;if(e&&e.document.languageId===a.PYTHON_LANGUAGE)return e.document.fileName}resolveAndUpdatePythonPath(e,t){if(t)if("${config:python.pythonPath}"!==t.pythonPath&&t.pythonPath)this.pythonPathSource=l.PythonPathSource.launchJson;else{const n=this.configurationService.getSettings(e).pythonPath;t.pythonPath=n,this.pythonPathSource=l.PythonPathSource.settingsJson}}debugOption(e,t){e.indexOf(t)>=0||e.push(t)}isLocalHost(e){return!!(e&&["localhost","127.0.0.1","::1"].indexOf(e.toLowerCase())>=0)}isDebuggingFlask(e){return!(!e.module||"FLASK"!==e.module.toUpperCase())}sendTelemetry(e,t){const n=t.name||"",r=t.module||"",i={trigger:e,console:t.console,hasEnvVars:"object"==typeof t.env&&Object.keys(t.env).length>0,django:!!t.django,flask:this.isDebuggingFlask(t),hasArgs:Array.isArray(t.args)&&t.args.length>0,isLocalhost:this.isLocalHost(t.host),isModule:r.length>0,isSudo:!!t.sudo,jinja:!!t.jinja,pyramid:!!t.pyramid,stopOnEntry:!!t.stopOnEntry,showReturnValue:!!t.showReturnValue,subProcess:!!t.subProcess,watson:n.toLowerCase().indexOf("watson")>=0,pyspark:n.toLowerCase().indexOf("pyspark")>=0,gevent:n.toLowerCase().indexOf("gevent")>=0,scrapy:"scrapy"===r.toLowerCase()};c.sendTelemetryEvent(u.EventName.DEBUGGER,void 0,i)}};d=r([i.injectable()],d),t.BaseConfigurationResolver=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(12),u=n(6),l=n(10),d=n(100),h=n(145),p=n(67),f=n(82);let g=class extends p.CacheableLocatorService{constructor(e,t,n,r=!1){super(n,t,r),this.searchPathsProvider=e,this.virtualEnvMgr=t.get(d.IVirtualEnvironmentManager),this.helper=t.get(l.IInterpreterHelper),this.fileSystem=t.get(u.IFileSystem)}dispose(){}getInterpretersImplementation(e){return this.suggestionsFromKnownVenvs(e)}suggestionsFromKnownVenvs(e){return o(this,void 0,void 0,function*(){const t=yield this.searchPathsProvider.getSearchPaths(e);return Promise.all(t.map(t=>this.lookForInterpretersInVenvs(t,e))).then(e=>f(e))})}lookForInterpretersInVenvs(e,t){return o(this,void 0,void 0,function*(){return this.fileSystem.getSubDirectories(e).then(e=>Promise.all(this.getProspectiveDirectoriesForLookup(e))).then(e=>e.filter(e=>e.length>0)).then(e=>Promise.all(e.map(h.lookForInterpretersInDirectory))).then(e=>f(e)).then(e=>Promise.all(e.map(e=>this.getVirtualEnvDetails(e,t)))).then(e=>e.filter(e=>!!e).map(e=>e)).catch(e=>(c.traceError("Python Extension (lookForInterpretersInVenvs):",e),[]))})}getProspectiveDirectoriesForLookup(e){const t=this.serviceContainer.get(u.IPlatformService).virtualEnvBinName;return e.map(e=>this.fileSystem.getSubDirectories(e).then(e=>{const n=e.filter(e=>{const n=a.basename(e);return this.fileSystem.arePathsSame(n,t)});return 1===n.length?n[0]:""}).catch(e=>(console.error("Python Extension (getProspectiveDirectoriesForLookup):",e),"")))}getVirtualEnvDetails(e,t){return o(this,void 0,void 0,function*(){return Promise.all([this.helper.getInterpreterInformation(e),this.virtualEnvMgr.getEnvironmentName(e,t),this.virtualEnvMgr.getEnvironmentType(e,t)]).then(([e,t,n])=>{if(e)return this._hasInterpreters.resolve(!0),Object.assign({},e,{envName:t,type:n})})})}};g=r([s.injectable(),i(0,s.unmanaged()),i(1,s.unmanaged()),i(2,s.unmanaged()),i(3,s.unmanaged())],g),t.BaseVirtualEnvService=g},function(e,t,n){"use strict";function r(e){return i(e).filter(e=>"string"==typeof e)}function i(e){return Object.keys(e).map(t=>e[t])}Object.defineProperty(t,"__esModule",{value:!0}),t.getNamesAndValues=function(e){return r(e).map(t=>({name:t,value:e[t]}))},t.getNames=r,t.getValues=function(e){return i(e).filter(e=>"number"==typeof e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);t.BaseErrorHandler=class{constructor(e,t,n){this.product=e,this.outputChannel=t,this.serviceContainer=n,this.logger=this.serviceContainer.get(r.ILogger),this.installer=this.serviceContainer.get(r.IInstaller)}get nextHandler(){return this.handler}setNextHandler(e){this.handler=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ISortImportsEditingProvider=Symbol("ISortImportsEditingProvider")},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),void 0===Reflect.metadata&&n(228),n(229).initialize(n(2));const i={},o=new(n(36).StopWatch),s=n(0),a=n(2),c=n(256),u=n(27),l=n(441),d=n(443),h=n(108),p=n(212),f=n(4),g=n(11),m=n(496),y=n(502),v=n(12),b=n(512),S=n(515),_=n(520),w=n(23),P=n(1),C=n(16),T=n(13),I=n(549),E=n(553),O=n(29),R=n(49),x=n(575),k=n(99),D=n(576),A=n(40),j=n(592),N=n(38),F=n(85),M=n(10),L=n(594),W=n(633),U=n(634),H=n(5),B=n(635),V=n(636),q=n(35),$=n(653),K=n(654),G=n(659),z=n(660),J=n(661),Y=n(663),X=n(664),Z=n(226),Q=n(665),ee=n(7),te=n(9),ne=n(666),re=n(104),ie=n(20),oe=n(673);i.codeLoadingTime=o.elapsedTime;const se=C.createDeferred();let ae;function ce(e,t){const n=t.get(N.IInterpreterAutoSelectionRule,N.AutoSelectionRule.workspaceVirtualEnvs).getPreviouslyAutoSelectedInterpreter(e);return n?n.path:void 0}function ue(e){return r(this,void 0,void 0,function*(){const t=e.get(w.ITerminalHelper),n=t.identifyTerminalShell(t.getTerminalShellPath()),r=e.get(M.ICondaService),i=e.get(M.IInterpreterService),o=e.get(f.IWorkspaceService),s=e.get(P.IConfigurationService),a=o.hasWorkspaceFolders?o.workspaceFolders[0].uri:void 0,c=s.getSettings(a),[u,l,d]=yield Promise.all([r.getCondaVersion().then(e=>e?e.raw:"").catch(()=>""),i.getActiveInterpreter().catch(()=>void 0),i.getInterpreters(a).catch(()=>[])]),h=o.hasWorkspaceFolders?o.workspaceFolders.length:0,p=l&&l.version?l.version.raw:void 0,g=l?l.type:void 0,m=function(e,t){const n=t.get(f.IWorkspaceService).getConfiguration("python",e).inspect("pythonPath");return!!(n.workspaceFolderValue&&"python"!==n.workspaceFolderValue||n.workspaceValue&&"python"!==n.workspaceValue||n.globalValue&&"python"!==n.globalValue)}(a,e),y=ce(a,e),v=function(e,t){const n=t.get(N.IInterpreterAutoSelectionService).getAutoSelectedInterpreter(void 0);return!!n&&e===n.path}(c.pythonPath,e),b=!!y&&c.pythonPath===ce(a,e);return{condaVersion:u,terminal:n,pythonVersion:p,interpreterType:g,workspaceFolderCount:h,hasPython3:d.filter(e=>!(!e||!e.version)&&3===e.version.major).length>0,usingUserDefinedInterpreter:m,usingAutoSelectedWorkspaceInterpreter:b,usingGlobalInterpreter:v}})}t.activate=function(e){return r(this,void 0,void 0,function*(){try{return yield function(e){return r(this,void 0,void 0,function*(){!function(e){const t={location:a.ProgressLocation.Window,title:T.Common.loadingExtension()};a.window.withProgress(t,()=>e)}(se.promise),i.startActivateTime=o.elapsedTime;const t=new s.Container,n=new U.ServiceManager(t),w=new W.ServiceContainer(t);ae=w,function(e,t,n){t.addSingletonInstance(H.IServiceContainer,n),t.addSingletonInstance(H.IServiceManager,t),t.addSingletonInstance(P.IDisposableRegistry,e.subscriptions),t.addSingletonInstance(P.IMemento,e.globalState,P.GLOBAL_MEMENTO),t.addSingletonInstance(P.IMemento,e.workspaceState,P.WORKSPACE_MEMENTO),t.addSingletonInstance(P.IExtensionContext,e);const r=a.window.createOutputChannel("Python"),i=a.window.createOutputChannel("Python Test Log");t.addSingletonInstance(P.IOutputChannel,r,g.STANDARD_OUTPUT_CHANNEL),t.addSingletonInstance(P.IOutputChannel,i,ie.TEST_OUTPUT_CHANNEL),c.registerTypes(t),_.registerTypes(t),m.registerTypes(t),S.registerTypes(t),I.registerTypes(t),oe.registerTypes(t),V.registerTypes(t),L.registerTypes(t),j.registerTypes(t),b.registerTypes(t),y.registerTypes(t),ne.registerTypes(t),E.registerTypes(t),D.registerTypes(t),d.registerTypes(t),J.registerTypes(t)}(e,n,w),function(e,t,n){const r=n.get(F.IInterpreterSelector);r.initialize(),e.subscriptions.push(r),n.get(M.IInterpreterService).initialize();const i=t.getAll(k.IDebugSessionEventHandlers),o=t.get(P.IDisposableRegistry);new x.DebugSessionEventDispatcher(i,p.DebugService.instance,o).registerEventHandlers(),n.get(M.InterpreterLocatorProgressHandler).register(),n.get(M.IInterpreterLocatorProgressService).register(),n.get(h.IApplicationDiagnostics).register()}(e,n,w);const C=w.get(u.IExtensionActivationManager);e.subscriptions.push(C);const N=C.activate();n.get(re.ITerminalAutoActivation).register();const ce=n.get(P.IConfigurationService),le=ce.getSettings(),de=w.get(P.IOutputChannel,g.STANDARD_OUTPUT_CHANNEL);Y.activateSimplePythonRefactorProvider(e,de,w);const he=w.get(Z.ISortImportsEditingProvider);he.registerCommands(),n.get(re.ICodeExecutionManager).registerCommands(),function(e,t){return r(this,void 0,void 0,function*(){try{yield e,i.totalActivateTime=o.elapsedTime;const n=yield ue(t);ee.sendTelemetryEvent(te.EventName.EDITOR_LOAD,i,n)}catch(e){v.traceError("sendStartupTelemetry() failed.",e)}})}(Promise.all([se.promise,N]),w).ignoreErrors();const pe=w.get(f.IWorkspaceService),fe=w.get(M.IInterpreterService);fe.refresh(pe.hasWorkspaceFolders?pe.workspaceFolders[0].uri:void 0).catch(e=>console.error("Python Extension: interpreterManager.refresh",e));const ge=a.extensions.getExtension("donjayamanne.jupyter"),me=n.get(q.ILintingEngine);me.linkJupyterExtension(ge).ignoreErrors();const ye=n.get(O.IDataScience);ye.activate().ignoreErrors(),e.subscriptions.push(new B.LinterCommands(n));const ve=new G.LinterProvider(e,n);if(e.subscriptions.push(ve),a.languages.setLanguageConfiguration(g.PYTHON_LANGUAGE,{onEnterRules:[{beforeText:/^\s*(?:def|class|for|if|elif|else|while|try|with|finally|except|async)\b.*:\s*/,action:{indentAction:a.IndentAction.Indent}},{beforeText:/^(?!\s+\\)[^#\n]+\\\s*/,action:{indentAction:a.IndentAction.Indent}},{beforeText:/^\s*#.*/,afterText:/.+$/,action:{indentAction:a.IndentAction.None,appendText:"# "}},{beforeText:/^\s+(continue|break|return)\b.*/,afterText:/\s+$/,action:{indentAction:a.IndentAction.Outdent}}]}),le&&le.formatting&&"none"!==le.formatting.provider){const t=new K.PythonFormattingEditProvider(e,w);e.subscriptions.push(a.languages.registerDocumentFormattingEditProvider(g.PYTHON,t)),e.subscriptions.push(a.languages.registerDocumentRangeFormattingEditProvider(g.PYTHON,t))}const be=w.get(P.IFeatureDeprecationManager);be.initialize(),e.subscriptions.push(be),e.subscriptions.push(Q.activateUpdateSparkLibraryProvider()),e.subscriptions.push(new z.ReplProvider(w)),e.subscriptions.push(new X.TerminalProvider(w)),e.subscriptions.push(a.languages.registerCodeActionsProvider(g.PYTHON,new $.PythonCodeActionProvider,{providedCodeActionKinds:[a.CodeActionKind.SourceOrganizeImports]})),w.getAll(A.IDebugConfigurationService).forEach(t=>{e.subscriptions.push(a.debug.registerDebugConfigurationProvider(R.DebuggerTypeName,t))}),w.get(A.IDebuggerBanner).initialize(),i.endActivateTime=o.elapsedTime,se.resolve();const Se=l.buildApi(Promise.all([se.promise,N]));return g.isTestExecution()&&(Se.serviceContainer=w,Se.serviceManager=n),Se})}(e)}catch(e){throw function(e){(function(e){try{let t=a.window;ae&&(t=ae.get(f.IApplicationShell)),t.showErrorMessage(e).ignoreErrors()}catch(e){}})("Extension activation failed, run the 'Developer: Toggle Developer Tools' command for more information."),v.traceError("extension activation failed",e),function(e){return r(this,void 0,void 0,function*(){try{let t={};if(ae)try{t=yield ue(ae)}catch(e){}ee.sendTelemetryEvent(te.EventName.EDITOR_LOAD,i,t,e)}catch(e){v.traceError("sendErrorTelemetry() failed.",e)}})}(e).ignoreErrors()}(e),e}})},t.deactivate=function(){if(ae){const e=ae.get(P.IAsyncDisposableRegistry);if(e)return e.dispose()}return Promise.resolve()}},function(e,t){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(e){!function(t){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(e);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===n.Reflect?n.Reflect=e:r=i(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return A(Object.create(null))}:s?function(){return A({__proto__:null})}:function(){return A({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}():Map,h=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,p=new(l||"function"!=typeof WeakMap?function(){var e=16,n=c.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){var n=o(e,!0);return n[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+a()}while(c.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(){var t=function(e){if("function"==typeof Uint8Array)return"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e);return s(new Array(e),e)}(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function f(e,t,n){var r=p.get(e);if(S(r)){if(!n)return;r=new d,p.set(e,r)}var i=r.get(t);if(S(i)){if(!n)return;i=new d,r.set(t,i)}return i}function g(e,t,n){var r=f(t,n,!1);return!S(r)&&function(e){return!!e}(r.has(e))}function m(e,t,n){var r=f(t,n,!1);if(!S(r))return r.get(e)}function y(e,t,n,r){var i=f(n,r,!0);i.set(e,t)}function v(e,t){var n=[],r=f(e,t,!1);if(S(r))return n;for(var o=r.keys(),s=function(e){var t=O(e,i);if(!I(t))throw new TypeError;var n=t.call(e);if(!w(n))throw new TypeError;return n}(o),a=0;;){var c=x(s);if(!c)return n.length=a,n;var u=R(c);try{n[a]=u}catch(e){try{k(s)}finally{throw e}}a++}}function b(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function S(e){return void 0===e}function _(e){return null===e}function w(e){return"object"==typeof e?null!==e:"function"==typeof e}function P(e,t){switch(b(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=O(e,r);if(void 0!==i){var o=i.call(e,n);if(w(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(I(n)){var r=n.call(e);if(!w(r))return r}var i=e.valueOf;if(I(i)){var r=i.call(e);if(!w(r))return r}}else{var i=e.valueOf;if(I(i)){var r=i.call(e);if(!w(r))return r}var o=e.toString;if(I(o)){var r=o.call(e);if(!w(r))return r}}throw new TypeError}(e,"default"===n?"number":n)}function C(e){var t=P(e,3);return function(e){return"symbol"==typeof e}(t)?t:function(e){return""+e}(t)}function T(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function I(e){return"function"==typeof e}function E(e){return"function"==typeof e}function O(e,t){var n=e[t];if(void 0!==n&&null!==n){if(!I(n))throw new TypeError;return n}}function R(e){return e.value}function x(e){var t=e.next();return!t.done&&t}function k(e){var t=e.return;t&&t.call(e)}function D(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i?t:i===e?t:i}function A(e){return e.__=void 0,delete e.__,e}e("decorate",function(e,t,n,r){if(S(n)){if(!T(e))throw new TypeError;if(!E(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=r(t);if(!S(i)&&!_(i)){if(!E(i))throw new TypeError;t=i}}return t}(e,t)}if(!T(e))throw new TypeError;if(!w(t))throw new TypeError;if(!w(r)&&!S(r)&&!_(r))throw new TypeError;return _(r)&&(r=void 0),n=C(n),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var o=e[i],s=o(t,n,r);if(!S(s)&&!_(s)){if(!w(s))throw new TypeError;r=s}}return r}(e,t,n,r)}),e("metadata",function(e,t){return function(n,r){if(!w(n))throw new TypeError;if(!S(r)&&!function(e){switch(b(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;y(e,t,n,r)}}),e("defineMetadata",function(e,t,n,r){if(!w(n))throw new TypeError;S(r)||(r=C(r));return y(e,t,n,r)}),e("hasMetadata",function(e,t,n){if(!w(t))throw new TypeError;S(n)||(n=C(n));return function e(t,n,r){var i=g(t,n,r);if(i)return!0;var o=D(n);if(!_(o))return e(t,o,r);return!1}(e,t,n)}),e("hasOwnMetadata",function(e,t,n){if(!w(t))throw new TypeError;S(n)||(n=C(n));return g(e,t,n)}),e("getMetadata",function(e,t,n){if(!w(t))throw new TypeError;S(n)||(n=C(n));return function e(t,n,r){var i=g(t,n,r);if(i)return m(t,n,r);var o=D(n);if(!_(o))return e(t,o,r);return}(e,t,n)}),e("getOwnMetadata",function(e,t,n){if(!w(t))throw new TypeError;S(n)||(n=C(n));return m(e,t,n)}),e("getMetadataKeys",function(e,t){if(!w(e))throw new TypeError;S(t)||(t=C(t));return function e(t,n){var r=v(t,n);var i=D(t);if(null===i)return r;var o=e(i,n);if(o.length<=0)return r;if(r.length<=0)return o;var s=new h;var a=[];for(var c=0,u=r;c<u.length;c++){var l=u[c],d=s.has(l);d||(s.add(l),a.push(l))}for(var p=0,f=o;p<f.length;p++){var l=f[p],d=s.has(l);d||(s.add(l),a.push(l))}return a}(e,t)}),e("getOwnMetadataKeys",function(e,t){if(!w(e))throw new TypeError;S(t)||(t=C(t));return v(e,t)}),e("deleteMetadata",function(e,t,n){if(!w(t))throw new TypeError;S(n)||(n=C(n));var r=f(t,n,!1);if(S(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=p.get(t);return i.delete(n),i.size>0||(p.delete(t),!0)})}(r)}()}(n||(n={}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(18),o=n(3),s=n(59);n(8);const a=n(45),c="sourceMapsEnabled";class u{constructor(e){this.vscode=e,this.config=this.vscode.workspace.getConfiguration("python.diagnostics",void 0)}initialize(){return r(this,void 0,void 0,function*(){if(!this.enabled)return;yield this.enableSourceMaps(!0);const e=n(13),t=e.Diagnostics.disableSourceMaps();this.vscode.window.showWarningMessage(e.Diagnostics.warnSourceMaps(),t).then(e=>{e===t&&this.disable().ignoreErrors()})})}get enabled(){return this.config.get(c,!1)}disable(){return r(this,void 0,void 0,function*(){this.enabled&&(yield this.config.update(c,!1,this.vscode.ConfigurationTarget.Global)),yield this.enableSourceMaps(!1)})}enableSourceMaps(e){return r(this,void 0,void 0,function*(){const t=o.join(a.EXTENSION_ROOT_DIR,"out","client","extension.js"),n=o.join(a.EXTENSION_ROOT_DIR,"out","client","debugger","debugAdapter","main.js");yield Promise.all([this.enableSourceMap(e,t),this.enableSourceMap(e,n)])})}enableSourceMap(e,t){return r(this,void 0,void 0,function*(){const n=`${t}.map`,r=`${t}.map.disabled`;e?yield this.rename(r,n):yield this.rename(n,r)})}rename(e,t){return r(this,void 0,void 0,function*(){const n=s.promisify(i.exists),r=s.promisify(i.rename);(yield n(t))||(yield r(e,t))})}}t.SourceMapSupport=u,t.initialize=function(e=n(2)){e.workspace.getConfiguration("python.diagnostics",void 0).get("sourceMapsEnabled",!1)?new u(e).initialize().catch(e=>{console.error("Failed to initialize source map support in extension")}):new u(e).disable().ignoreErrors()}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(231),s=n(30),a=n(46),c=n(24),u=n(149),l=n(232),d=n(239),h=n(241),p=n(60),f=n(76),g=n(244),m=n(245),y=function(){function e(e){if(void 0!==e){if("object"!=typeof e)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0!==e.defaultScope&&e.defaultScope!==a.BindingScopeEnum.Singleton&&e.defaultScope!==a.BindingScopeEnum.Transient&&e.defaultScope!==a.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0!==e.autoBindInjectable&&"boolean"!=typeof e.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope}}else this.options={autoBindInjectable:!1,defaultScope:a.BindingScopeEnum.Transient};this.guid=p.guid(),this._bindingDictionary=new m.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return e.merge=function(t,n){var r=new e,i=l.getBindingDictionary(r),o=l.getBindingDictionary(t),s=l.getBindingDictionary(n);function a(e,t){e.traverse(function(e,n){n.forEach(function(e){t.add(e.serviceIdentifier,e.clone())})})}return a(o,i),a(s,i),r},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=e;r<i.length;r++){var o=i[r],s=n(o.guid);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,function(){var t,n,r,o,s;return i(this,function(i){switch(i.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,i.label=1;case 1:return n<r.length?(o=r[n],s=t(o.guid),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(t){var n=function(e){return function(t){return t.moduleId===e}}(t.guid);e._bindingDictionary.removeByCondition(n)})},e.prototype.bind=function(e){var t=this.options.defaultScope||a.BindingScopeEnum.Transient,n=new o.Binding(e,t);return this._bindingDictionary.add(e,n),new h.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+f.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new m.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,c.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var i=this._bindingDictionary.get(e),o=l.createMockRequest(this,e,t,n);r=i.some(function(e){return e.constraint(o)})}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(){var t=new e;return t.parent=this,t},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce(function(e,t){return t(e)},n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,a.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,c.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,a.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,c.NAMED_TAG,t)},e.prototype.resolve=function(t){var n=new e;return n.bind(t).toSelf(),n.parent=this,n.get(t)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t};return function(n){return{bindFunction:function(n){return function(r){var i=e.bind.bind(e)(r);return t(i,n),i}}(n),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:function(n){return function(r){var i=e.rebind.bind(e)(r);return t(i,n),i}}(n),unbindFunction:function(t){e.unbind.bind(e)(t)}}}},e.prototype._get=function(e,t,n,r,i,o){var a=null,c={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(void 0===(a=this._middleware(c))||null===a)throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(c);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=l.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),d.resolve(n)}},e}();t.Container=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=n(60),o=function(){function e(e,t){this.guid=i.guid(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(233),i=n(30),o=n(46),s=n(24),a=n(150),c=n(76),u=n(234),l=n(41),d=n(235),h=n(236),p=n(238),f=n(152);function g(e){return e._bindingDictionary}function m(e,t,n,o,s){var a=y(n.container,s.serviceIdentifier),u=[];return a.length===r.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof s.serviceIdentifier&&e.getConstructorMetadata(s.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(s.serviceIdentifier).toSelf(),a=y(n.container,s.serviceIdentifier)),u=t?a:a.filter(function(e){var t=new p.Request(e.serviceIdentifier,n,o,e,s);return e.constraint(t)}),function(e,t,n,o){switch(t.length){case r.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var s=c.getServiceIdentifierAsString(e),a=i.NOT_REGISTERED;throw a+=c.listMetadataForTarget(s,n),a+=c.listRegisteredBindingsForServiceIdentifier(o,s,y),new Error(a);case r.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case r.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;var s=c.getServiceIdentifierAsString(e),a=i.AMBIGUOUS_MATCH+" "+s;throw a+=c.listRegisteredBindingsForServiceIdentifier(o,s,y),new Error(a)}}(s.serviceIdentifier,u,s,n.container),u}function y(e,t){var n=[],r=g(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=y(e.parent,t)),n}t.getBindingDictionary=g,t.plan=function(e,t,n,r,i,g,y,v){void 0===v&&(v=!1);var b=new u.Context(t),S=function(e,t,n,r,i,o){var a=e?s.MULTI_INJECT_TAG:s.INJECT_TAG,c=new l.Metadata(a,n),u=new f.Target(t,r,n,c);if(void 0!==i){var d=new l.Metadata(i,o);u.metadata.push(d)}return u}(n,r,i,"",g,y);try{return function e(t,n,r,i,s,a){var c,u;if(null===s){c=m(t,n,i,null,a),u=new p.Request(r,i,null,c,a);var l=new d.Plan(i,u);i.addPlan(l)}else c=m(t,n,i,s,a),u=s.addChildRequest(a.serviceIdentifier,c,a);c.forEach(function(n){var r=null;if(a.isArray())r=u.addChildRequest(n.serviceIdentifier,n,a);else{if(n.cache)return;r=u}n.type===o.BindingTypeEnum.Instance&&null!==n.implementationType&&h.getDependencies(t,n.implementationType).forEach(function(n){e(t,!1,n.serviceIdentifier,i,r,n)})})}(e,v,i,b,null,S),b}catch(e){throw a.isStackOverflowExeption(e)&&b.plan&&c.circularDependencyToException(b.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,r){var i=new f.Target(o.TargetTypeEnum.Variable,"",t,new l.Metadata(n,r)),s=new u.Context(e);return new p.Request(t,s,null,[],i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(60),i=function(){function e(e){this.guid=r.guid(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){this.parentContext=e,this.rootRequest=t}}();t.Plan=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(151),i=n(30),o=n(46),s=n(24),a=n(76),c=n(152);function u(e,t,n,r){var h=e.getConstructorMetadata(n),p=h.compilerGeneratedMetadata;if(void 0===p){var f=i.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(f)}var g=h.userGeneratedMetadata,m=Object.keys(g),y=function(e,t,n,r,i){for(var o=[],s=0;s<i;s++){var a=s,c=l(a,e,t,n,r);null!==c&&o.push(c)}return o}(r,t,p,g,0===n.length&&m.length>0?m.length:n.length),v=function e(t,n){var r=t.getPropertiesMetadata(n);var i=[];var s=Object.keys(r);for(var a=0,u=s;a<u.length;a++){var l=u[a],h=r[l],p=d(r[l]),f=p.targetName||l,g=p.inject||p.multiInject,m=new c.Target(o.TargetTypeEnum.ClassProperty,f,g);m.metadata=h,i.push(m)}var y=Object.getPrototypeOf(n.prototype).constructor;if(y!==Object){var v=e(t,y);i=i.concat(v)}return i}(e,n),b=y.concat(v),S=function e(t,n){var r=Object.getPrototypeOf(n.prototype).constructor;if(r!==Object){var i=a.getFunctionName(r),o=u(t,i,r,!0),c=o.map(function(e){return e.metadata.filter(function(e){return e.key===s.UNMANAGED_TAG})}),l=[].concat.apply([],c).length,d=o.length-l;return d>0?d:e(t,r)}return 0}(e,n);if(b.length<S){var _=i.ARGUMENTS_LENGTH_MISMATCH_1+t+i.ARGUMENTS_LENGTH_MISMATCH_2;throw new Error(_)}return b}function l(e,t,n,s,a){var u=a[e.toString()]||[],l=d(u),h=!0!==l.unmanaged,p=s[e],f=l.inject||l.multiInject;if((p=f||p)instanceof r.LazyServiceIdentifer&&(p=p.unwrap()),h){var g=p===Object,m=p===Function;if(!t&&(g||m||void 0===p)){var y=i.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(y)}var v=new c.Target(o.TargetTypeEnum.ConstructorArgument,l.targetName,p);return v.metadata=u,v}return null}function d(e){var t={};return e.forEach(function(e){t[e.key.toString()]=e.value}),{inject:t[s.INJECT_TAG],multiInject:t[s.MULTI_INJECT_TAG],targetName:t[s.NAME_TAG],unmanaged:t[s.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return u(e,a.getFunctionName(t),t,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(60),i=function(){function e(e,t,n,i,o){this.guid=r.guid(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();t.Request=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=n(46),o=n(150),s=n(76),a=n(240),c=function(e,t,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(r.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},u=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,o=t.childRequests,l=t.target&&t.target.isArray(),d=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(l&&d)return o.map(function(t){return u(e)(t)});var h=null;if(!t.target.isOptional()||0!==n.length){var p=n[0],f=p.scope===i.BindingScopeEnum.Singleton,g=p.scope===i.BindingScopeEnum.Request;if(f&&p.activated)return p.cache;if(g&&null!==e&&e.has(p.guid))return e.get(p.guid);if(p.type===i.BindingTypeEnum.ConstantValue)h=p.cache;else if(p.type===i.BindingTypeEnum.Function)h=p.cache;else if(p.type===i.BindingTypeEnum.Constructor)h=p.implementationType;else if(p.type===i.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)h=c("toDynamicValue",p.serviceIdentifier,function(){return p.dynamicValue(t.parentContext)});else if(p.type===i.BindingTypeEnum.Factory&&null!==p.factory)h=c("toFactory",p.serviceIdentifier,function(){return p.factory(t.parentContext)});else if(p.type===i.BindingTypeEnum.Provider&&null!==p.provider)h=c("toProvider",p.serviceIdentifier,function(){return p.provider(t.parentContext)});else{if(p.type!==i.BindingTypeEnum.Instance||null===p.implementationType){var m=s.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(r.INVALID_BINDING_TYPE+" "+m)}h=a.resolveInstance(p.implementationType,o,u(e))}return"function"==typeof p.onActivation&&(h=p.onActivation(t.parentContext,h)),f&&(p.cache=h,p.activated=!0),g&&null!==e&&!e.has(p.guid)&&e.set(p.guid,h),h}}};t.resolve=function(e){return u(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=n(46),o=n(24);t.resolveInstance=function(e,t,n){var s=null;return s=t.length>0?function(e,t,n){var r=t.filter(function(e){return null!==e.target&&e.target.type===i.TargetTypeEnum.ClassProperty}),o=r.map(n);return r.forEach(function(t,n){var r;r=t.target.name.value();var i=o[n];e[r]=i}),e}(s=function(e,t){return new(e.bind.apply(e,[void 0].concat(t)))}(e,t.filter(function(e){return null!==e.target&&e.target.type===i.TargetTypeEnum.ConstructorArgument}).map(n)),t,n):new e,function(e,t){if(Reflect.hasMetadata(o.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(o.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(r.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,s),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=n(46),o=n(242),s=n(153),a=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(r.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=i.BindingTypeEnum.Function,t},e.prototype.toAutoFactory=function(e){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},new s.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue(function(t){return t.container.get(e)})},e}();t.BindingToSyntax=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(243),i=n(105),o=n(106),s=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(46),i=n(153),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}();t.ContainerSnapshot=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(r.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(r.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach(function(n,r){var i=n.filter(function(t){return!e(t)});i.length>0?t._map.set(r,i):t._map.delete(r)})},e.prototype.hasKey=function(e){if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach(function(e,n){e.forEach(function(e){return t.add(n,e.clone())})}),t},e.prototype.traverse=function(e){this._map.forEach(function(t,n){e(n,t)})},e}();t.Lookup=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(60),i=function(){return function(e){this.guid=r.guid(),this.registry=e}}();t.ContainerModule=i;var o=function(){return function(e){this.guid=r.guid(),this.registry=e}}();t.AsyncContainerModule=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=n(24);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(i.PARAM_TYPES,e))throw new Error(r.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(i.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(i.PARAM_TYPES,t,e),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(41),i=n(50);t.tagged=function(e,t){return function(n,o,s){var a=new r.Metadata(e,t);"number"==typeof s?i.tagParameter(n,o,s,a):i.tagProperty(n,o,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(41),o=n(50);t.named=function(e){return function(t,n,s){var a=new i.Metadata(r.NAMED_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(41),o=n(50);t.optional=function(){return function(e,t,n){var s=new i.Metadata(r.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(e,t,n,s):o.tagProperty(e,t,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(41),o=n(50);t.unmanaged=function(){return function(e,t,n){var s=new i.Metadata(r.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(41),o=n(50);t.multiInject=function(e){return function(t,n,s){var a=new i.Metadata(r.MULTI_INJECT_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=n(41),o=n(50);t.targetName=function(e){return function(t,n,s){var a=new i.Metadata(r.NAME_TAG,e);o.tagParameter(t,n,s,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),i=n(24),o=n(41);t.postConstruct=function(){return function(e,t,n){var s=new o.Metadata(i.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(i.POST_CONSTRUCT,e.constructor))throw new Error(r.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(i.POST_CONSTRUCT,s,e.constructor)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=function(e){return function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach(function(n){return e.bind(n).toService(t)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(87),i=n(1),o=n(257),s=n(258),a=n(259),c=n(260),u=n(317),l=n(318),d=n(400),h=n(401),p=n(402),f=n(403),g=n(405),m=n(406),y=n(432),v=n(434),b=n(435),S=n(192),_=n(438),w=n(439),P=n(440),C=n(27);t.registerTypes=function(e){e.addSingleton(C.IExtensionActivationManager,c.ExtensionActivationManager),e.addSingleton(C.IExtensionActivationService,u.LanguageServerExtensionActivationService),e.add(C.ILanguageServerActivator,l.JediExtensionActivator,C.LanguageServerActivator.Jedi),e.add(C.ILanguageServerActivator,d.LanguageServerExtensionActivator,C.LanguageServerActivator.DotNet),e.addSingleton(i.IPythonExtensionBanner,s.LanguageServerSurveyBanner,i.BANNER_NAME_LS_SURVEY),e.addSingleton(i.IPythonExtensionBanner,a.ProposeLanguageServerBanner,i.BANNER_NAME_PROPOSE_LS),e.addSingleton(i.IPythonExtensionBanner,o.DataScienceSurveyBanner,i.BANNER_NAME_DS_SURVEY),e.addSingleton(C.ILanguageServerFolderService,b.LanguageServerFolderService),e.addSingleton(C.ILanguageServerPackageService,_.LanguageServerPackageService),e.addSingleton(r.INugetRepository,S.StableLanguageServerPackageRepository,S.LanguageServerDownloadChannel.stable),e.addSingleton(r.INugetRepository,S.BetaLanguageServerPackageRepository,S.LanguageServerDownloadChannel.beta),e.addSingleton(r.INugetRepository,S.DailyLanguageServerPackageRepository,S.LanguageServerDownloadChannel.daily),e.addSingleton(C.IDownloadChannelRule,p.DownloadDailyChannelRule,S.LanguageServerDownloadChannel.daily),e.addSingleton(C.IDownloadChannelRule,p.DownloadBetaChannelRule,S.LanguageServerDownloadChannel.beta),e.addSingleton(C.IDownloadChannelRule,p.DownloadStableChannelRule,S.LanguageServerDownloadChannel.stable),e.addSingleton(C.ILanguageServerCompatibilityService,v.LanguageServerCompatibilityService),e.addSingleton(C.ILanguageClientFactory,m.BaseLanguageClientFactory,C.LanguageClientFactory.base),e.addSingleton(C.ILanguageClientFactory,m.DownloadedLanguageClientFactory,C.LanguageClientFactory.downloaded),e.addSingleton(C.ILanguageClientFactory,m.SimpleLanguageClientFactory,C.LanguageClientFactory.simple),e.addSingleton(C.IInterpreterDataService,g.InterpreterDataService),e.addSingleton(C.ILanguageServerDownloader,f.LanguageServerDownloader),e.addSingleton(C.IPlatformData,P.PlatformData),e.add(C.ILanguageServerAnalysisOptions,h.LanguageServerAnalysisOptions),e.add(C.ILanguageServer,y.LanguageServer),e.add(C.ILanguageServerManager,w.LanguageServerManager)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4);n(8);const c=n(1),u=n(13);var l,d;!function(e){e.ShowBanner="ShowDSSurveyBanner",e.ShowAttemptCounter="DSSurveyShowAttempt"}(l=t.DSSurveyStateKeys||(t.DSSurveyStateKeys={})),function(e){e[e.Yes=0]="Yes",e[e.No=1]="No"}(d||(d={}));let h=class{constructor(e,t,n,r=500,i="https://aka.ms/pyaisurvey"){this.appShell=e,this.persistentState=t,this.browserService=n,this.disabledInCurrentSession=!1,this.isInitialized=!1,this.bannerMessage=u.DataScienceSurveyBanner.bannerMessage(),this.bannerLabels=[u.DataScienceSurveyBanner.bannerLabelYes(),u.DataScienceSurveyBanner.bannerLabelNo()],this.commandThreshold=r,this.surveyLink=i,this.initialize()}initialize(){this.isInitialized||(this.isInitialized=!0)}get enabled(){return this.persistentState.createGlobalPersistentState(l.ShowBanner,!0).value}showBanner(){return o(this,void 0,void 0,function*(){if(!this.enabled||this.disabledInCurrentSession)return;const e=yield this.incrementPythonDataScienceCommandCounter();if(yield this.shouldShowBanner(e))switch(yield this.appShell.showInformationMessage(this.bannerMessage,...this.bannerLabels)){case this.bannerLabels[d.Yes]:yield this.launchSurvey(),yield this.disable();break;case this.bannerLabels[d.No]:yield this.disable();break;default:this.disabledInCurrentSession=!0}})}shouldShowBanner(e){return o(this,void 0,void 0,function*(){return!(!this.enabled||this.disabledInCurrentSession)&&(e||(e=yield this.getPythonDSCommandCounter()),e>=this.commandThreshold)})}disable(){return o(this,void 0,void 0,function*(){yield this.persistentState.createGlobalPersistentState(l.ShowBanner,!1).updateValue(!1)})}launchSurvey(){return o(this,void 0,void 0,function*(){this.browserService.launch(this.surveyLink)})}getPythonDSCommandCounter(){return o(this,void 0,void 0,function*(){return this.persistentState.createGlobalPersistentState(l.ShowAttemptCounter,0).value})}incrementPythonDataScienceCommandCounter(){return o(this,void 0,void 0,function*(){const e=this.persistentState.createGlobalPersistentState(l.ShowAttemptCounter,0);return yield e.updateValue(e.value+1),e.value})}};h=r([s.injectable(),i(0,s.inject(a.IApplicationShell)),i(1,s.inject(c.IPersistentStateFactory)),i(2,s.inject(c.IBrowserService))],h),t.DataScienceSurveyBanner=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(27),c=n(4);n(8);const u=n(1),l=n(13),d=n(107);var h,p;!function(e){e.ShowBanner="ShowLSSurveyBanner",e.ShowAttemptCounter="LSSurveyShowAttempt",e.ShowAfterCompletionCount="LSSurveyShowCount"}(h=t.LSSurveyStateKeys||(t.LSSurveyStateKeys={})),function(e){e[e.Yes=0]="Yes",e[e.No=1]="No"}(p||(p={}));let f=class{constructor(e,t,n,r,i=100,o=500){this.appShell=e,this.persistentState=t,this.browserService=n,this.lsService=r,this.disabledInCurrentSession=!1,this.isInitialized=!1,this.bannerMessage=l.LanguageService.bannerMessage(),this.bannerLabels=[l.LanguageService.bannerLabelYes(),l.LanguageService.bannerLabelNo()],this.minCompletionsBeforeShow=i,this.maxCompletionsBeforeShow=o,this.initialize()}initialize(){this.isInitialized||(this.isInitialized=!0,this.minCompletionsBeforeShow>=this.maxCompletionsBeforeShow&&this.disable().ignoreErrors())}get enabled(){return this.persistentState.createGlobalPersistentState(h.ShowBanner,!0).value}showBanner(){return o(this,void 0,void 0,function*(){if(!this.enabled||this.disabledInCurrentSession)return;const e=yield this.incrementPythonLanguageServiceLaunchCounter();if(yield this.shouldShowBanner(e))switch(yield this.appShell.showInformationMessage(this.bannerMessage,...this.bannerLabels)){case this.bannerLabels[p.Yes]:yield this.launchSurvey(),yield this.disable();break;case this.bannerLabels[p.No]:yield this.disable();break;default:this.disabledInCurrentSession=!0}})}shouldShowBanner(e){return o(this,void 0,void 0,function*(){if(!this.enabled||this.disabledInCurrentSession)return!1;e||(e=yield this.getPythonLSLaunchCounter());const t=yield this.getPythonLSLaunchThresholdCounter();return e>=t})}disable(){return o(this,void 0,void 0,function*(){yield this.persistentState.createGlobalPersistentState(h.ShowBanner,!1).updateValue(!1)})}launchSurvey(){return o(this,void 0,void 0,function*(){const e=yield this.getPythonLSLaunchCounter();let t=yield this.getPythonLSVersion();t=encodeURIComponent(t),this.browserService.launch(`https://www.research.net/r/LJZV9BZ?n=${e}&v=${t}`)})}incrementPythonLanguageServiceLaunchCounter(){return o(this,void 0,void 0,function*(){const e=this.persistentState.createGlobalPersistentState(h.ShowAttemptCounter,0);return yield e.updateValue(e.value+1),e.value})}getPythonLSVersion(e="unknown"){return o(this,void 0,void 0,function*(){const t=yield this.lsService.getCurrentLanguageServerDirectory();return t?t.version.raw:e})}getPythonLSLaunchCounter(){return o(this,void 0,void 0,function*(){return this.persistentState.createGlobalPersistentState(h.ShowAttemptCounter,0).value})}getPythonLSLaunchThresholdCounter(){return o(this,void 0,void 0,function*(){const e=this.persistentState.createGlobalPersistentState(h.ShowAfterCompletionCount,void 0);return void 0===e.value&&(yield e.updateValue(d.getRandomBetween(this.minCompletionsBeforeShow,this.maxCompletionsBeforeShow))),e.value})}};f=r([s.injectable(),i(0,s.inject(c.IApplicationShell)),i(1,s.inject(u.IPersistentStateFactory)),i(2,s.inject(u.IBrowserService)),i(3,s.inject(a.ILanguageServerFolderService))],f),t.LanguageServerSurveyBanner=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4);n(8);const u=n(1),l=n(107);var d,h;!function(e){e.ShowBanner="ProposeLSBanner"}(d=t.ProposeLSStateKeys||(t.ProposeLSStateKeys={})),function(e){e[e.Yes=0]="Yes",e[e.No=1]="No",e[e.Later=2]="Later"}(h||(h={}));let p=class{constructor(e,t,n,r=10){this.appShell=e,this.persistentState=t,this.configuration=n,this.disabledInCurrentSession=!1,this.bannerMessage="Try out Preview of our new Python Language Server to get richer and faster IntelliSense completions, and syntax errors as you type.",this.bannerLabels=["Try it now","No thanks","Remind me Later"],this.sampleSizePerHundred=r,this.initialize()}initialize(){if(this.initialized)return;if(this.initialized=!0,!this.enabled)return;l.getRandomBetween(0,100)>=this.sampleSizePerHundred&&this.disable().ignoreErrors()}get enabled(){return this.persistentState.createGlobalPersistentState(d.ShowBanner,!0).value}showBanner(){return o(this,void 0,void 0,function*(){if(!this.enabled)return;if(yield this.shouldShowBanner())switch(yield this.appShell.showInformationMessage(this.bannerMessage,...this.bannerLabels)){case this.bannerLabels[h.Yes]:yield this.enableNewLanguageServer(),yield this.disable();break;case this.bannerLabels[h.No]:yield this.disable();break;case this.bannerLabels[h.Later]:this.disabledInCurrentSession=!0;break;default:this.disabledInCurrentSession=!0}})}shouldShowBanner(){return o(this,void 0,void 0,function*(){return Promise.resolve(this.enabled&&!this.disabledInCurrentSession)})}disable(){return o(this,void 0,void 0,function*(){yield this.persistentState.createGlobalPersistentState(d.ShowBanner,!1).updateValue(!1)})}enableNewLanguageServer(){return o(this,void 0,void 0,function*(){yield this.configuration.updateSetting("jediEnabled",!1,void 0,a.ConfigurationTarget.Global)})}};p=r([s.injectable(),i(0,s.inject(c.IApplicationShell)),i(1,s.inject(u.IPersistentStateFactory)),i(2,s.inject(u.IConfigurationService))],p),t.ProposeLanguageServerBanner=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(108),u=n(4),l=n(11),d=n(12),h=n(38),p=n(10),f=n(27);let g=class{constructor(e,t,n,r,i,o){this.activationServices=e,this.documentManager=t,this.interpreterService=n,this.autoSelection=r,this.appDiagnostics=i,this.workspaceService=o,this.disposables=[],this.activatedWorkspaces=new Set}dispose(){for(;this.disposables.length>0;){this.disposables.shift().dispose()}this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}activate(){return o(this,void 0,void 0,function*(){yield this.initialize(),yield this.activateWorkspace(this.getActiveResource()),yield this.autoSelection.autoSelectInterpreter(void 0)})}activateWorkspace(e){return o(this,void 0,void 0,function*(){const t=this.getWorkspaceKey(e);this.activatedWorkspaces.has(t)||(this.activatedWorkspaces.add(t),this.interpreterService.getInterpreters(e).ignoreErrors(),yield this.autoSelection.autoSelectInterpreter(e),yield Promise.all(this.activationServices.map(t=>t.activate(e))),yield this.appDiagnostics.performPreStartupHealthCheck(e))})}initialize(){return o(this,void 0,void 0,function*(){this.addHandlers(),this.addRemoveDocOpenedHandlers()})}addHandlers(){this.disposables.push(this.workspaceService.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}addRemoveDocOpenedHandlers(){this.hasMultipleWorkspaces()?this.docOpenedHandler||(this.docOpenedHandler=this.documentManager.onDidOpenTextDocument(this.onDocOpened,this)):this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}onWorkspaceFoldersChanged(){this.addRemoveDocOpenedHandlers()}hasMultipleWorkspaces(){return this.workspaceService.hasWorkspaceFolders&&this.workspaceService.workspaceFolders.length>1}onDocOpened(e){if(e.languageId!==l.PYTHON_LANGUAGE)return;const t=this.getWorkspaceKey(e.uri);if(""===t&&this.workspaceService.hasWorkspaceFolders)return;if(this.activatedWorkspaces.has(t))return;const n=this.workspaceService.getWorkspaceFolder(e.uri);this.activateWorkspace(n?n.uri:void 0).ignoreErrors()}getWorkspaceKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}getActiveResource(){return this.documentManager.activeTextEditor&&!this.documentManager.activeTextEditor.document.isUntitled?this.documentManager.activeTextEditor.document.uri:Array.isArray(this.workspaceService.workspaceFolders)&&a.workspace.workspaceFolders.length>0?a.workspace.workspaceFolders[0].uri:void 0}};r([d.traceDecorators.error("Failed to activate a workspace")],g.prototype,"activateWorkspace",null),g=r([s.injectable(),i(0,s.multiInject(f.IExtensionActivationService)),i(1,s.inject(u.IDocumentManager)),i(2,s.inject(p.IInterpreterService)),i(3,s.inject(h.IInterpreterAutoSelectionService)),i(4,s.inject(c.IApplicationDiagnostics)),i(5,s.inject(u.IWorkspaceService))],g),t.ExtensionActivationManager=g},function(e,t){function n(e){for(var t in e)this[t]=e[t]}t.get=function(e){var n=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t},Error.captureStackTrace(r,e||t.get);var o=r.stack;return Error.prepareStackTrace=i,Error.stackTraceLimit=n,o},t.parse=function(e){if(!e.stack)return[];var t=this;return e.stack.split("\n").slice(1).map(function(e){if(e.match(/^\s*[-]{4,}$/))return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var n=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(n){var r=null,i=null,o=null,s=null,a=null,c="native"===n[5];if(n[1]){var u=(o=n[1]).lastIndexOf(".");if("."==o[u-1]&&u--,u>0){r=o.substr(0,u),i=o.substr(u+1);var l=r.indexOf(".Module");l>0&&(o=o.substr(l+1),r=r.substr(0,l))}s=null}i&&(s=r,a=i),"<anonymous>"===i&&(a=null,o=null);var d={fileName:n[2]||null,lineNumber:parseInt(n[3],10)||null,functionName:o,typeName:s,methodName:a,columnNumber:parseInt(n[4],10)||null,native:c};return t._createParsedCallSite(d)}}).filter(function(e){return!!e})};["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"].forEach(function(e){n.prototype[e]=null,n.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}}),["topLevel","eval","native","constructor"].forEach(function(e){n.prototype[e]=!1,n.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}}),t._createParsedCallSite=function(e){return new n(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(77),i=n(279),o=n(300),s=n(163),a=n(110),c=n(165),u=n(37);t.TelemetryClient=n(307),t.Contracts=n(44);var l,d,h,p,f,g=!0,m=!1,y=!0,v=!0,b=!0,S=!0,_=!0,w=!0,P=void 0,C=void 0,T=!1;function I(){return t.defaultClient?(T=!0,l.enable(g,m),d.enable(y),h.enable(v),p.useAutoCorrelation(w),p.enable(b),f.enable(S)):u.warn("Start cannot be called before setup"),E}t.setup=function(e){return t.defaultClient?u.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(e),l=new i(t.defaultClient),d=new o(t.defaultClient),h=new s(t.defaultClient),p=new c(t.defaultClient),f=new a(t.defaultClient)),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(_,P,C),E},t.start=I,t.getCorrelationContext=function(){return w?r.CorrelationContextManager.getCurrentContext():null},t.wrapWithCorrelationContext=function(e){return r.CorrelationContextManager.wrapCallback(e)};var E=function(){function e(){}return e.setAutoCollectConsole=function(t,n){return void 0===n&&(n=!1),g=t,m=n,T&&l.enable(t,n),e},e.setAutoCollectExceptions=function(t){return y=t,T&&d.enable(t),e},e.setAutoCollectPerformance=function(t){return v=t,T&&h.enable(t),e},e.setAutoCollectRequests=function(t){return b=t,T&&p.enable(t),e},e.setAutoCollectDependencies=function(t){return S=t,T&&f.enable(t),e},e.setAutoDependencyCorrelation=function(t){return w=t,T&&p.useAutoCorrelation(t),e},e.setUseDiskRetryCaching=function(n,r,i){return _=n,P=r,C=i,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(n,r,i),e},e.setInternalLogging=function(t,n){return void 0===t&&(t=!1),void 0===n&&(n=!0),u.enableDebug=t,u.disableWarnings=!n,e},e.start=I,e}();t.Configuration=E,t.dispose=function(){t.defaultClient=null,T=!1,l&&l.dispose(),d&&d.dispose(),h&&h.dispose(),p&&p.dispose(),f&&f.dispose()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(264);t.bunyan=r;var i=n(266);t.console=i;var o=n(268);t.mongodbCore=o;var s=n(269);t.mongodb=s;var a=n(270);t.mysql=a;var c=n(273);t.pgPool=c;var u=n(274);t.pg=u;var l=n(275);t.redis=l;var d=n(276);t.winston=d,t.enable=function(){r.enable(),i.enable(),o.enable(),s.enable(),a.enable(),u.enable(),c.enable(),l.enable(),d.enable()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25);t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var t=e.prototype._emit;return e.prototype._emit=function(e,n){var i=t.apply(this,arguments);if(!n){var o=i;o||(o=t.call(this,e,!0)),r.channel.publish("bunyan",{level:e.level,result:o})}return i},e}},t.enable=function(){r.channel.registerMonkeyPatch("bunyan",t.bunyan)}},function(e){e.exports={name:"diagnostic-channel",version:"0.2.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^7.0.12",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"^2.2.1"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT",_resolved:"https://registry.npmjs.org/diagnostic-channel/-/diagnostic-channel-0.2.0.tgz",_integrity:"sha1-zJmvlhLCP7H/8TYSxy8sv6qNWhc=",_from:"diagnostic-channel@0.2.0"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=n(68);t.console={versionSpecifier:">= 4.0.0",patch:function(e){var t=new i.Writable,n=new i.Writable;t.write=function(e){if(!e)return!0;var t=e.toString();return r.channel.publish("console",{message:t}),!0},n.write=function(e){if(!e)return!0;var t=e.toString();return r.channel.publish("console",{message:t,stderr:!0}),!0};for(var o=new e.Console(t,n),s=function(t){var n=e[t];n&&(e[t]=function(){if(o[t])try{o[t].apply(o,arguments)}catch(e){}return n.apply(e,arguments)})},a=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];a<c.length;a++)s(c[a]);return e}},t.enable=function(){r.channel.registerMonkeyPatch("console",t.console),n(267)}},function(e,t){e.exports=require("console")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25);t.mongoCore2={versionSpecifier:">= 2.0.0 < 2.2.0",patch:function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=t.apply(this,arguments),n=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=r.channel.bindToContext(arguments[e])),n.apply(this,arguments)};var i=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=r.channel.bindToContext(arguments[1])),i.apply(this,arguments)},e},e}},t.enable=function(){r.channel.registerMonkeyPatch("mongodb-core",t.mongoCore2)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25);t.mongo2={versionSpecifier:">= 2.0.0 <= 2.2.x",patch:function(e){var t=e.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(e){return e()})}}}),n={};return t.on("started",function(e){n[e.requestId]||(n[e.requestId]=e)}),t.on("succeeded",function(e){var t=n[e.requestId];t&&delete n[e.requestId],e.operationId(function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})}),t.on("failed",function(e){var t=n[e.requestId];t&&delete n[e.requestId],e.operationId(function(){return r.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})}),e}},t.enable=function(){r.channel.registerMonkeyPatch("mongodb",t.mongo2)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=n(3);t.mysql={versionSpecifier:">= 2.0.0 <= 2.14.x",patch:function(e,t){var o=function(e,t){return function(t,n){var i=e[t];i&&(e[t]=function(){for(var e=arguments.length-1,t=arguments.length-1;t>=0;--t){if("function"==typeof arguments[t]){e=t;break}if(void 0!==arguments[t])break}var o=arguments[e],s={result:null,startTime:null};"function"==typeof o&&(n?(s.startTime=process.hrtime(),arguments[e]=r.channel.bindToContext(n(s,o))):arguments[e]=r.channel.bindToContext(o));var a=i.apply(this,arguments);return s.result=a,a})}},s=function(e,t){return o(e.prototype)},a=n(271)(i.dirname(t)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach(function(e){return s(a)(e)}),o(a)("createQuery",function(e,t){return function(n){var i=process.hrtime(e.startTime),o=1e3*i[0]+i[1]/1e6|0;r.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:n,duration:o}),t.apply(this,arguments)}});var c=n(272)(i.dirname(t)+"/lib/Pool");return["_enqueueCallback"].forEach(function(e){return s(c)(e)}),e}},t.enable=function(){r.channel.registerMonkeyPatch("mysql",t.mysql)}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=271},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=272},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25);t.postgresPool1={versionSpecifier:"1.x",patch:function(e){var t=e.prototype.connect;return e.prototype.connect=function(e){e&&(arguments[0]=r.channel.bindToContext(e)),t.apply(this,arguments)},e}},t.enable=function(){r.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=n(69);t.postgres6={versionSpecifier:"6.x",patch:function(e,t){var n=e.Client.prototype.query,o="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,t,s){var a,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0},u=process.hrtime();function l(e){e&&e[o]&&(e=e[o]);var t=r.channel.bindToContext(function(t,n){var o=process.hrtime(u);if(c.result=n&&{rowCount:n.rowCount,command:n.command},c.error=t,c.duration=Math.ceil(1e3*o[0]+o[1]/1e6),r.channel.publish("postgres",c),t){if(e)return e.apply(this,arguments);a&&a instanceof i.EventEmitter&&a.emit("error",t)}else e&&e.apply(this,arguments)});try{return Object.defineProperty(t,o,{value:e}),t}catch(t){return e}}try{"string"==typeof e?t instanceof Array?(c.query.preparable={text:e,args:t},s=l(s)):(c.query.text=e,s?s=l(s):t=l(t)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,s?s=l(s):t?t=l(t):e.callback=l(e.callback))}catch(e){return n.apply(this,arguments)}return arguments[0]=e,arguments[1]=t,arguments[2]=s,arguments.length=arguments.length>3?arguments.length:3,a=n.apply(this,arguments)},e}},t.enable=function(){r.channel.registerMonkeyPatch("pg",t.postgres6)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25);t.redis={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var n=e.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime();e.callback=r.channel.bindToContext(function(t,s){var a=process.hrtime(o),c=1e3*a[0]+a[1]/1e6|0;r.channel.publish("redis",{duration:c,address:i,commandObj:e,err:t,result:s}),"function"==typeof n&&n.apply(this,arguments)}),e.callback.pubsubBound=!0}}return t.call(this,e)},e}},t.enable=function(){r.channel.registerMonkeyPatch("redis",t.redis)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25);t.winston={versionSpecifier:"2.x",patch:function(e){var t,n=e.Logger.prototype.log,i=function(n,i,o){var s;return s=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",r.channel.publish("winston",{level:n,message:i,meta:o,levelKind:s}),i};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==i&&(this.filters=this.filters.filter(function(e){return e!==i}),this.filters.push(i)):this.filters=[i],n.apply(this,arguments)},e}},t.enable=function(){r.channel.registerMonkeyPatch("winston",t.winston)}},function(e,t,n){
/**
* @license
* Copyright Google Inc. All Rights Reserved.
*
* Use of this source code is governed by an MIT-style license that can be
* found in the LICENSE file at https://angular.io/license
*/
!function(e,t){t()}(0,function(){"use strict";
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */!function(e){if(e.Zone)throw new Error("Zone already loaded.");var t=function(){function t(e,t){this._properties=null,this._parent=e,this._name=t?t.name||"unnamed":"<root>",this._properties=t&&t.properties||{},this._zoneDelegate=new n(this,this._parent&&this._parent._zoneDelegate,t)}return t.assertZonePatched=function(){if(e.Promise!==D)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")},Object.defineProperty(t,"current",{get:function(){return u.zone},enumerable:!0,configurable:!0}),Object.defineProperty(t,"currentTask",{get:function(){return l},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var t=this.getZoneWith(e);if(t)return t._properties[e]},t.prototype.getZoneWith=function(e){for(var t=this;t;){if(t._properties.hasOwnProperty(e))return t;t=t._parent}return null},t.prototype.fork=function(e){if(!e)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,e)},t.prototype.wrap=function(e,t){if("function"!=typeof e)throw new Error("Expecting function got: "+e);var n=this._zoneDelegate.intercept(this,e,t),r=this;return function(){return r.runGuarded(n,this,arguments,t)}},t.prototype.run=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),u=new i(u,this);try{return this._zoneDelegate.invoke(this,e,t,n,r)}finally{u=u.parent}},t.prototype.runGuarded=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),u=new i(u,this);try{try{return this._zoneDelegate.invoke(this,e,t,n,r)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{u=u.parent}},t.prototype.runTask=function(e,t,n){if(e.runCount++,e.zone!=this)throw new Error("A task can only be run in the zone which created it! (Creation: "+e.zone.name+"; Execution: "+this.name+")");var r=l;l=e,u=new i(u,this);try{"macroTask"==e.type&&e.data&&!e.data.isPeriodic&&(e.cancelFn=null);try{return this._zoneDelegate.invokeTask(this,e,t,n)}catch(e){if(this._zoneDelegate.handleError(this,e))throw e}}finally{u=u.parent,l=r}},t.prototype.scheduleMicroTask=function(e,t,n,i){return this._zoneDelegate.scheduleTask(this,new r("microTask",this,e,t,n,i,null))},t.prototype.scheduleMacroTask=function(e,t,n,i,o){return this._zoneDelegate.scheduleTask(this,new r("macroTask",this,e,t,n,i,o))},t.prototype.scheduleEventTask=function(e,t,n,i,o){return this._zoneDelegate.scheduleTask(this,new r("eventTask",this,e,t,n,i,o))},t.prototype.cancelTask=function(e){var t=this._zoneDelegate.cancelTask(this,e);return e.runCount=-1,e.cancelFn=null,t},t}();t.__symbol__=o;var n=function(){function e(e,t,n){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=t,this._forkZS=n&&(n&&n.onFork?n:t._forkZS),this._forkDlgt=n&&(n.onFork?t:t._forkDlgt),this._forkCurrZone=n&&(n.onFork?this.zone:t.zone),this._interceptZS=n&&(n.onIntercept?n:t._interceptZS),this._interceptDlgt=n&&(n.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=n&&(n.onIntercept?this.zone:t.zone),this._invokeZS=n&&(n.onInvoke?n:t._invokeZS),this._invokeDlgt=n&&(n.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=n&&(n.onInvoke?this.zone:t.zone),this._handleErrorZS=n&&(n.onHandleError?n:t._handleErrorZS),this._handleErrorDlgt=n&&(n.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=n&&(n.onHandleError?this.zone:t.zone),this._scheduleTaskZS=n&&(n.onScheduleTask?n:t._scheduleTaskZS),this._scheduleTaskDlgt=n&&(n.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=n&&(n.onScheduleTask?this.zone:t.zone),this._invokeTaskZS=n&&(n.onInvokeTask?n:t._invokeTaskZS),this._invokeTaskDlgt=n&&(n.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=n&&(n.onInvokeTask?this.zone:t.zone),this._cancelTaskZS=n&&(n.onCancelTask?n:t._cancelTaskZS),this._cancelTaskDlgt=n&&(n.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=n&&(n.onCancelTask?this.zone:t.zone),this._hasTaskZS=n&&(n.onHasTask?n:t._hasTaskZS),this._hasTaskDlgt=n&&(n.onHasTask?t:t._hasTaskDlgt),this._hasTaskCurrZone=n&&(n.onHasTask?this.zone:t.zone)}return e.prototype.fork=function(e,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,e,n):new t(e,n)},e.prototype.intercept=function(e,t,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,e,t,n):t},e.prototype.invoke=function(e,t,n,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,e,t,n,r,i):t.apply(n,r)},e.prototype.handleError=function(e,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,e,t)},e.prototype.scheduleTask=function(e,t){try{if(this._scheduleTaskZS)return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,e,t);if(t.scheduleFn)t.scheduleFn(t);else{if("microTask"!=t.type)throw new Error("Task is missing scheduleFn.");!function(e){g(),d.push(e)}(t)}return t}finally{e==this.zone&&this._updateTaskCount(t.type,1)}},e.prototype.invokeTask=function(e,t,n,r){try{return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,e,t,n,r):t.callback.apply(n,r)}finally{e!=this.zone||"eventTask"==t.type||t.data&&t.data.isPeriodic||this._updateTaskCount(t.type,-1)}},e.prototype.cancelTask=function(e,t){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,e,t);else{if(!t.cancelFn)throw new Error("Task does not support cancellation, or is already canceled.");n=t.cancelFn(t)}return e==this.zone&&this._updateTaskCount(t.type,-1),n},e.prototype.hasTask=function(e,t){return this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,e,t)},e.prototype._updateTaskCount=function(e,t){var n=this._taskCounts,r=n[e],i=n[e]=r+t;if(i<0)throw new Error("More tasks executed then were scheduled.");if(0==r||0==i){var o={microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:e};try{this.hasTask(this.zone,o)}finally{this._parentDelegate&&this._parentDelegate._updateTaskCount(e,t)}}},e}(),r=function(){function e(e,t,n,r,i,o,s){this.runCount=0,this.type=e,this.zone=t,this.source=n,this.data=i,this.scheduleFn=o,this.cancelFn=s,this.callback=r;var a=this;this.invoke=function(){f++;try{return t.runTask(a,this,arguments)}finally{1==f&&y(),f--}}}return e.prototype.toString=function(){return this.data&&void 0!==this.data.handleId?this.data.handleId:Object.prototype.toString.call(this)},e.prototype.toJSON=function(){return{type:this.type,source:this.source,data:this.data,zone:this.zone.name,invoke:this.invoke,scheduleFn:this.scheduleFn,cancelFn:this.cancelFn,runCount:this.runCount,callback:this.callback}},e}(),i=function(){return function(e,t){this.parent=e,this.zone=t}}();function o(e){return"__zone_symbol__"+e}var s=o("setTimeout"),a=o("Promise"),c=o("then"),u=new i(null,new t(null,null)),l=null,d=[],h=!1,p=[],f=0;function g(){0===f&&0===d.length&&(e[a]?e[a].resolve(0)[c](y):e[s](y,0))}function m(e){var t=e&&e.rejection;t&&console.error("Unhandled Promise rejection:",t instanceof Error?t.message:t,"; Zone:",e.zone.name,"; Task:",e.task&&e.task.source,"; Value:",t,t instanceof Error?t.stack:void 0),console.error(e)}function y(){if(!h){for(h=!0;d.length;){var e=d;d=[];for(var t=0;t<e.length;t++){var n=e[t];try{n.zone.runTask(n,null,null)}catch(e){m(e)}}}for(;p.length;)for(var r=function(){var e=p.shift();try{e.zone.runGuarded(function(){throw e})}catch(e){m(e)}};p.length;)r();h=!1}}function v(e){return e&&e.then}function b(e){return e}function S(e){return D.reject(e)}var _=o("state"),w=o("value"),P="Promise.then",C=null,T=!0,I=!1,E=0;function O(e,t){return function(n){R(e,t,n)}}function R(e,n,r){if(e[_]===C)if(r instanceof D&&r.hasOwnProperty(_)&&r.hasOwnProperty(w)&&r[_]!==C)x(r),R(e,r[_],r[w]);else if(v(r))r.then(O(e,n),O(e,!1));else{e[_]=n;var i=e[w];e[w]=r;for(var o=0;o<i.length;)k(e,i[o++],i[o++],i[o++],i[o++]);if(0==i.length&&n==I){e[_]=E;try{throw new Error("Uncaught (in promise): "+r+(r&&r.stack?"\n"+r.stack:""))}catch(n){var s=n;s.rejection=r,s.promise=e,s.zone=t.current,s.task=t.currentTask,p.push(s),g()}}}return e}function x(e){if(e[_]===E){e[_]=I;for(var t=0;t<p.length;t++)if(e===p[t].promise){p.splice(t,1);break}}}function k(e,t,n,r,i){x(e);var o=e[_]?r||b:i||S;t.scheduleMicroTask(P,function(){try{R(n,!0,t.run(o,null,[e[w]]))}catch(e){R(n,!1,e)}})}var D=function(){function e(t){if(!(this instanceof e))throw new Error("Must be an instanceof Promise.");this[_]=C,this[w]=[];try{t&&t(O(this,T),O(this,I))}catch(e){R(this,!1,e)}}return e.toString=function(){return"function ZoneAwarePromise() { [native code] }"},e.resolve=function(e){return R(new this(null),T,e)},e.reject=function(e){return R(new this(null),I,e)},e.race=function(e){var t,n,r=new this(function(e,r){var i;t=(i=[e,r])[0],n=i[1]});function i(e){r&&(r=t(e))}function o(e){r&&(r=n(e))}for(var s=0,a=e;s<a.length;s++){var c=a[s];v(c)||(c=this.resolve(c)),c.then(i,o)}return r},e.all=function(e){for(var t,n,r=new this(function(e,r){t=e,n=r}),i=0,o=[],s=0,a=e;s<a.length;s++){var c=a[s];v(c)||(c=this.resolve(c)),c.then(function(e){return function(n){o[e]=n,--i||t(o)}}(i),n),i++}return i||t(o),r},e.prototype.then=function(e,n){var r=new this.constructor(null),i=t.current;return this[_]==C?this[w].push(i,r,e,n):k(this,i,r,e,n),r},e.prototype.catch=function(e){return this.then(null,e)},e}();D.resolve=D.resolve,D.reject=D.reject,D.race=D.race,D.all=D.all;var A,j=e[o("Promise")]=e.Promise;function N(e){var t=e.prototype,n=t[o("then")]=t.then;t.then=function(e,t){var r=this;return new D(function(e,t){n.call(r,e,t)}).then(e,t)}}if(e.Promise=D,j&&(N(j),void 0!==e.fetch)){var F=void 0;try{F=e.fetch()}catch(t){F=e.fetch("about:blank")}F.then(function(){return null},function(){return null}),F.constructor!=j&&F.constructor!=D&&N(F.constructor)}Promise[t.__symbol__("uncaughtPromiseErrors")]=p,function(e){e[e.blackList=0]="blackList",e[e.transition=1]="transition"}(A||(A={}));var M,L=e[o("Error")]=e.Error,W={};e.Error=$;var U="stackRewrite",H=function(e,t){if(!e[t]){var n=o(t);e[t]={configurable:!0,enumerable:!0,get:function(){if(!this[n]){var e=this[o("error")];e&&(this[n]=e[t])}return this[n]},set:function(e){this[n]=e}}}},B=function(e,t){e[t]||(e[t]={configurable:!0,enumerable:!0,writable:!0,value:function(){var e=this[o("error")],n=e&&e[t]||this[t];if(n)return n.apply(e,arguments)}})},V=function(){for(var e=Object.create(null),t=new L,n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r];Object.prototype.hasOwnProperty.call(t,i)&&H(e,i)}var o=L.prototype;if(o){var s=Object.getOwnPropertyNames(o);for(r=0;r<s.length;r++)"constructor"!==(i=s[r])&&"toString"!==i&&"toSource"!==i&&H(e,i)}return H(e,"originalStack"),H(e,"zoneAwareStack"),B(e,"toString"),B(e,"toSource"),e}(),q=function(e){if(e===$.prototype)return V;var t=Object.create(null),n=Object.getOwnPropertyNames(V),r=Object.getOwnPropertyNames(e);return n.forEach(function(e){0===r.filter(function(t){return t===e}).length&&(t[e]=V[e])}),t};function $(){if(!(this instanceof $))return $.apply(Object.create($.prototype),arguments);var e=L.apply(this,arguments);if(this[o("error")]=e,e.originalStack=e.stack,$[U]&&e.originalStack){for(var t=e.originalStack.split("\n"),n=u,r=0;t[r]!==M&&r<t.length;)r++;for(;r<t.length&&n;r++){var i=t[r];if(i.trim()){var s=W.hasOwnProperty(i)&&W[i];s===A.blackList?(t.splice(r,1),r--):s===A.transition?n.parent?(t[r]+=" ["+n.parent.zone.name+" => "+n.zone.name+"]",n=n.parent):n=null:t[r]+=" ["+n.zone.name+"]"}}e.stack=e.zoneAwareStack=t.join("\n")}return Object.defineProperties(this,q(Object.getPrototypeOf(this))),this}$.prototype=L.prototype,$[t.__symbol__("blacklistedStackFrames")]=W,$[U]=!1,L.hasOwnProperty("stackTraceLimit")&&(L.stackTraceLimit=Math.max(L.stackTraceLimit,15),Object.defineProperty($,"stackTraceLimit",{get:function(){return L.stackTraceLimit},set:function(e){return L.stackTraceLimit=e}})),L.hasOwnProperty("captureStackTrace")&&Object.defineProperty($,"captureStackTrace",{value:function(e,t){L.captureStackTrace(e,t)}}),Object.defineProperty($,"prepareStackTrace",{get:function(){return L.prepareStackTrace},set:function(e){return L.prepareStackTrace=e&&"function"==typeof e?function(t,n){if(n)for(var r=0;r<n.length;r++){if("zoneCaptureStackTrace"===n[r].getFunctionName()){n.splice(r,1);break}}return e.apply(this,[t,n])}:e}});var K=t.current.fork({name:"detect",onInvoke:function(e,t,n,r,i,o,s){return e.invoke(n,r,i,o,s)},onHandleError:function(e,t,n,r){if(r.originalStack&&Error===$)for(var i=r.originalStack.split(/\n/),o=!1,s=!1,a=!1;i.length;){var c=i.shift();if(/:\d+:\d+/.test(c)){var u=c.split("(")[0].split("@")[0],l=A.transition;if(-1!==u.indexOf("ZoneAwareError")&&(M=c),-1!==u.indexOf("runGuarded")?s=!0:-1!==u.indexOf("runTask")?a=!0:-1!==u.indexOf("run")?o=!0:l=A.blackList,W[c]=l,o&&s&&a){$[U]=!0;break}}}return!1}});K.runTask(K.scheduleMacroTask("detect",function(){K.run(function(){K.runGuarded(function(){throw new Error("blacklistStackFrames")})})},null,function(){return null},null)),e.Zone=t}("object"==typeof window&&window||"object"==typeof self&&self||global);
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */var e=function(e){return"__zone_symbol__"+e},t="object"==typeof window&&window||"object"==typeof self&&self||global;!("nw"in t)&&"undefined"!=typeof process&&{}.toString.call(process);var r=e("eventTasks");function i(e,t,n,i,o){var s=e[r];if(s)for(var a=0;a<s.length;a++){var c=s[a],u=c.data,l=u.handler;if((u.handler===t||l.listener===t)&&u.useCapturing===i&&u.eventName===n)return o&&s.splice(a,1),c}return null}var o=function(e,n){return{useCapturing:n[2],eventName:n[0],handler:n[1],target:e||t,name:n[0],invokeAddFunc:function(e,t){return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.useCapturing):this.target[e](this.eventName,t,this.useCapturing)},invokeRemoveFunc:function(e,t){return t&&t.invoke?this.target[e](this.eventName,t.invoke,this.useCapturing):this.target[e](this.eventName,t,this.useCapturing)}}};function s(t,n,s,a,c,u){void 0===s&&(s=!0),void 0===a&&(a=!1),void 0===c&&(c=!1),void 0===u&&(u=o);var l=e(t),d=e(n),h=!s&&void 0;function p(e){var t=e.data;return function(e,t,n){var i=e[r];i||(i=e[r]=[]),n?i.unshift(t):i.push(t)}(t.target,e,c),t.invokeAddFunc(l,e)}function f(e){var t=e.data;return i(t.target,e.invoke,t.eventName,t.useCapturing,!0),t.invokeRemoveFunc(d,e)}return function(e,n){var r=u(e,n);r.useCapturing=r.useCapturing||h;var o=null;"function"==typeof r.handler?o=r.handler:r.handler&&r.handler.handleEvent&&(o=function(e){return r.handler.handleEvent(e)});var s=!1;try{s=r.handler&&"[object FunctionWrapper]"===r.handler.toString()}catch(e){return}if(!o||s)return r.invokeAddFunc(l,r.handler);if(!a){var c=i(r.target,r.handler,r.eventName,r.useCapturing,!1);if(c)return r.invokeAddFunc(l,c)}var d=Zone.current,g=r.target.constructor.name+"."+t+":"+r.eventName;d.scheduleEventTask(g,o,r,p,f)}}function a(t,n,r){void 0===n&&(n=!0),void 0===r&&(r=o);var s=e(t),a=!n&&void 0;return function(e,t){var n=r(e,t);n.useCapturing=n.useCapturing||a;var o=i(n.target,n.handler,n.eventName,n.useCapturing,!0);o?o.zone.cancelTask(o):n.invokeRemoveFunc(s,n.handler)}}s("addEventListener","removeEventListener"),a("removeEventListener"),e("originalInstance");function c(t,n,r){for(var i=t;i&&-1===Object.getOwnPropertyNames(i).indexOf(n);)i=Object.getPrototypeOf(i);!i&&t[n]&&(i=t);var o,s=e(n);return i&&!(o=i[s])&&(o=i[s]=i[n],i[n]=function(e,t){try{return Function("f","return function "+e+"(){return f(this, arguments)}")(t)}catch(e){return function(){return t(this,arguments)}}}(n,r(o,s,n))),o}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var u,l,d=function(e){return function(t,n){return e(t,n),t}},h="addListener",p="prependListener",f="removeListener",g="removeAllListeners",m="listeners",y="on",v=d(s(h,f,!1,!0,!1)),b=d(s(p,f,!1,!0,!0)),S=d(a(f,!1)),_=d(function(n,i){void 0===i&&(i=!0);var o=e(n),s=!i&&void 0;return function(e,n){var i=e||t;if(0===n.length)return i[r]=[],void i[o]();var a=n[0];!function(e,t,n,i){var o=e[r];if(o){for(var s=[],a=o.length-1;a>=0;a--){var c=o[a],u=c.data;u.eventName===t&&u.useCapturing===n&&(s.push(c),i&&o.splice(a,1))}}}(i,a,n[1]||s,!0),i[o](a)}}(g,!1)),w=function(n){return e(n),function(e,n){var i=n[0],o=e||t;return o[r]?o[r].filter(function(e){return e.data.eventName===i}).map(function(e){return e.data.handler}):[]}}(m);try{u=n(69)}catch(e){}u&&u.EventEmitter&&function(e){!e||!e.addListener||(c(e,h,function(){return v}),c(e,p,function(){return b}),c(e,f,function(){return S}),c(e,g,function(){return _}),c(e,m,function(){return w}),e[y]=e[h])}(u.EventEmitter.prototype)
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */;try{l=n(18)}catch(e){}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function P(e,t,n,r){var i=null,o=null;n+=r;var s={};function a(t){var n=t.data;return n.args[0]=function(){t.invoke.apply(this,arguments),delete s[n.handleId]},n.handleId=i.apply(e,n.args),s[n.handleId]=t,t}function u(e){return delete s[e.data.handleId],o(e.data.handleId)}i=c(e,t+=r,function(n){return function(i,o){if("function"==typeof o[0]){var s=Zone.current,c={handleId:null,isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?o[1]||0:null,args:o},l=s.scheduleMacroTask(t,o[0],c,a,u);if(!l)return l;var d=l.data.handleId;return d.ref&&d.unref&&(l.ref=d.ref.bind(d),l.unref=d.unref.bind(d)),l}return n.apply(e,o)}}),o=c(e,n,function(t){return function(n,r){var i="number"==typeof r[0]?s[r[0]]:r[0];i&&"string"==typeof i.type?(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&i.zone.cancelTask(i):t.apply(e,r)}})}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */l&&["access","appendFile","chmod","chown","close","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readdir","readFile","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","write","writeFile"].filter(function(e){return!!l[e]&&"function"==typeof l[e]}).forEach(function(e){!function(e,t,n){var r=null;function i(e){var t=e.data;return t.args[t.callbackIndex]=function(){e.invoke.apply(this,arguments)},r.apply(t.target,t.args),e}r=c(e,t,function(e){return function(t,r){var o=n(t,r);return o.callbackIndex>=0&&"function"==typeof r[o.callbackIndex]?Zone.current.scheduleMacroTask(o.name,r[o.callbackIndex],o,i,null):e.apply(t,r)}})}(l,e,function(t,n){return{name:"fs."+e,args:n,callbackIndex:n.length>0?n.length-1:-1,target:t}})});var C,T,I="set",E="object"==typeof window&&window||"object"==typeof self&&self||global,O=n(158);P(O,I,"clear","Timeout"),P(O,I,"clear","Interval"),P(O,I,"clear","Immediate"),global.setTimeout!==O.setTimeout&&(P(E,I,"clear","Timeout"),P(E,I,"clear","Interval"),P(E,I,"clear","Immediate")),function(){var e=null;function t(t){var n=t.data;return n[0]=function(){t.invoke.apply(this,arguments)},e.apply(process,n),t}e=c(process,"nextTick",function(e){return function(n,r){if("function"==typeof r[0]){var i=Zone.current,o=i.scheduleMicroTask("nextTick",r[0],r,t);return o}return e.apply(process,r)}})}();try{C=n(61)}catch(e){}if(C){var R=C.randomBytes;C.randomBytes=function(e,t){if(t){var n=Zone.current,r=C.constructor.name+".randomBytes";return R(e,n.wrap(t,r))}return R(e)}.bind(C);var x=C.pbkdf2;C.pbkdf2=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];if("function"==typeof n){var r=Zone.current,i=C.constructor.name+".pbkdf2";return e[e.length-1]=r.wrap(n,i),x.apply(void 0,e)}return x.apply(void 0,e)}.bind(C)}try{T=n(278)}catch(e){}if(T&&T.ClientRequest){var k=T.ClientRequest.bind(T);T.ClientRequest=function(e,t){if(t){var n=Zone.current;return new k(e,n.wrap(t,"http.ClientRequest"))}return new k(e)}}})},function(e,t){e.exports=require("_http_client")},function(e,t,n){"use strict";var r=n(109),i=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){r.IsInitialized&&(n(280).enable(e&&t,this._client),n(298).enable(e,this._client),n(299).enable(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(44),i=n(25),o=[],s=function(e){o.forEach(function(t){var n=e.data.message;n.lastIndexOf("\n")==n.length-1&&(n=n.substring(0,n.length-1)),t.trackTrace({message:n,severity:e.data.stderr?r.SeverityLevel.Warning:r.SeverityLevel.Information})})};t.enable=function(e,t){e?(0===o.length&&i.channel.subscribe("console",s),o.push(t)):0===(o=o.filter(function(e){return e!=t})).length&&i.channel.unsubscribe("console",s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(159),i=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();t.RemoteDependencyDataConstants=i,t.domainSupportsProperties=function(e){return"properties"in e||e instanceof r.EventData||e instanceof r.ExceptionData||e instanceof r.MessageData||e instanceof r.MetricData||e instanceof r.PageViewData||e instanceof r.RemoteDependencyData||e instanceof r.RequestData}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(n(51));e.exports=i},function(e,t,n){"use strict";var r=function(){return function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}}();e.exports=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(){return e.call(this)||this}return r(t,e),t}(n(160));e.exports=i},function(e,t,n){"use strict";var r=n(161),i=function(){return function(){this.kind=r.Measurement}}();e.exports=i},function(e,t,n){"use strict";var r=function(){return function(){this.ver=1,this.sampleRate=100,this.tags={}}}();e.exports=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return r(t,e),t}(n(51));e.exports=i},function(e,t,n){"use strict";var r=function(){return function(){this.hasFullStack=!0,this.parsedStack=[]}}();e.exports=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return r(t,e),t}(n(51));e.exports=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return r(t,e),t}(n(51));e.exports=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(n(162));e.exports=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return r(t,e),t}(n(51));e.exports=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return r(t,e),t}(n(51));e.exports=i},function(e,t,n){"use strict";var r;!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(r||(r={})),e.exports=r},function(e,t,n){"use strict";var r=function(){return function(){}}();e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(297))},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryTypeToBaseType=function(e){switch(e){case r.Event:return"EventData";case r.Exception:return"ExceptionData";case r.Trace:return"MessageData";case r.Metric:return"MetricData";case r.Request:return"RequestData";case r.Dependency:return"RemoteDependencyData"}},t.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return r.Event;case"ExceptionData":return r.Exception;case"MessageData":return r.Trace;case"MetricData":return r.Metric;case"RequestData":return r.Request;case"RemoteDependencyData":return r.Dependency}},function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency"}(r=t.TelemetryType||(t.TelemetryType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(44),i=n(25),o=[],s={10:r.SeverityLevel.Verbose,20:r.SeverityLevel.Verbose,30:r.SeverityLevel.Information,40:r.SeverityLevel.Warning,50:r.SeverityLevel.Error,60:r.SeverityLevel.Critical},a=function(e){o.forEach(function(t){var n=s[e.data.level];t.trackTrace({message:e.data.result,severity:n})})};t.enable=function(e,t){e?(0===o.length&&i.channel.subscribe("bunyan",a),o.push(t)):0===(o=o.filter(function(e){return e!=t})).length&&i.channel.unsubscribe("bunyan",a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(44),i=n(25),o=[],s={syslog:function(e){var t={emerg:r.SeverityLevel.Critical,alert:r.SeverityLevel.Critical,crit:r.SeverityLevel.Critical,error:r.SeverityLevel.Error,warning:r.SeverityLevel.Warning,notice:r.SeverityLevel.Information,info:r.SeverityLevel.Information,debug:r.SeverityLevel.Verbose};return void 0===t[e]?r.SeverityLevel.Information:t[e]},npm:function(e){var t={error:r.SeverityLevel.Error,warn:r.SeverityLevel.Warning,info:r.SeverityLevel.Information,verbose:r.SeverityLevel.Verbose,debug:r.SeverityLevel.Verbose,silly:r.SeverityLevel.Verbose};return void 0===t[e]?r.SeverityLevel.Information:t[e]},unknown:function(e){return r.SeverityLevel.Information}},a=function(e){o.forEach(function(t){var n=s[e.data.levelKind](e.data.level);t.trackTrace({message:e.data.message,severity:n,properties:e.data.meta})})};t.enable=function(e,t){e?(0===o.length&&i.channel.subscribe("winston",a),o.push(t)):0===(o=o.filter(function(e){return e!=t})).length&&i.channel.unsubscribe("winston",a)}},function(e,t,n){"use strict";var r=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return Object.defineProperty(e,"UNCAUGHT_EXCEPTION_HANDLER_NAME",{get:function(){return"uncaughtException"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"UNHANDLED_REJECTION_HANDLER_NAME",{get:function(){return"unhandledRejection"},enumerable:!0,configurable:!0}),e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var n=this;if(t){this._isInitialized=!0;if(!this._exceptionListenerHandle){var r=function(e,t){if(n._client.trackException({exception:t}),n._client.flush({isAppCrashing:!0}),e)throw t};this._exceptionListenerHandle=r.bind(this,!0),this._rejectionListenerHandle=r.bind(this,!1),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)}}else this._exceptionListenerHandle&&(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e}();e.exports=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=n(62),o=n(44),s=n(52),a=n(78),c=n(164),u=n(114),l=function(e){function t(n,r){var i=e.call(this)||this;return r&&r.method&&n&&(i.method=r.method,i.url=t._getUrlFromRequestOptions(n,r),i.startTime=+new Date),i}return r(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=s.getCorrelationContextTarget(e,a.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var n=i.parse(this.url);n.search=void 0,n.hash=void 0;var r=this.method.toUpperCase()+" "+n.pathname,s=o.RemoteDependencyDataConstants.TYPE_HTTP,a=n.hostname;this.correlationId?(s=o.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==u.correlationIdPrefix&&(a=n.hostname+" | "+this.correlationId)):s=o.RemoteDependencyDataConstants.TYPE_HTTP;var c={id:t,name:r,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:a};if(e){for(var l in e)c[l]||(c[l]=e[l]);if(e.properties)for(var l in e.properties)c.properties[l]=e.properties[l]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)e=i.parse(e);else{var n=e;e={},n&&Object.keys(n).forEach(function(t){e[t]=n[t]})}if(e.path){var r=i.parse(e.path);e.pathname=r.pathname,e.search=r.search}e.host&&e.port&&(!i.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host));return e.protocol=e.protocol||t.agent&&t.agent.protocol||void 0,e.hostname=e.hostname||"localhost",i.format(e)},t}(c);e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=[];t.subscriber=function(e){i.forEach(function(t){var n=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:n,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("mongodb",t.subscriber),i.push(n)):0===(i=i.filter(function(e){return e!=n})).length&&r.channel.unsubscribe("mongodb",t.subscriber)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=[];t.subscriber=function(e){i.forEach(function(t){var n=e.data.query||{},r=n.sql||"Unknown query",i=!e.data.err,o=(n._connection||{}).config||{},s=o.socketPath?o.socketPath:(o.host||"localhost")+":"+o.port;t.trackDependency({target:s,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"mysql"})})},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("mysql",t.subscriber),i.push(n)):0===(i=i.filter(function(e){return e!=n})).length&&r.channel.unsubscribe("mysql",t.subscriber)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=[];t.subscriber=function(e){i.forEach(function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",dependencyTypeName:"redis"})})},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("redis",t.subscriber),i.push(n)):0===(i=i.filter(function(e){return e!=n})).length&&r.channel.unsubscribe("redis",t.subscriber)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),i=[];t.subscriber=function(e){i.forEach(function(t){var n=e.data.query,r=n.preparable&&n.preparable.text||n.plan||n.text||"unknown query",i=!e.data.error,o=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:o,data:r,name:r,duration:e.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"postgres"})})},t.enable=function(e,n){e?(0===i.length&&r.channel.subscribe("postgres",t.subscriber),i.push(n)):0===(i=i.filter(function(e){return e!=n})).length&&r.channel.unsubscribe("postgres",t.subscriber)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=n(62),o=n(44),s=n(52),a=n(78),c=n(164),u=n(114),l=function(e){function t(t,n){var r=e.call(this)||this;return t&&(r.method=t.method,r.url=r._getAbsoluteUrl(t),r.startTime=+new Date,r.socketRemoteAddress=t.socket&&t.socket.remoteAddress,r.parseHeaders(t,n),t.connection&&(r.connectionRemoteAddress=t.connection.remoteAddress,r.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),r}return r(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+i.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e){for(var n in e)t[n]||(t[n]=e[n]);if(e.properties)for(var n in e.properties)t.properties[n]=e.properties[n]}return t},t.prototype.getRequestTags=function(e){var n={};for(var r in e)n[r]=e[r];return n[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(e),n[t.keys.operationParentId]=this.getOperationParentId(e),n[t.keys.operationId]=this.getOperationId(e),n},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+i.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,n=i.parse(e.url),r=n.pathname,o=n.search;return i.format({protocol:t?"https":"http",host:e.headers.host,pathname:r,search:o})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var n=e.exec(t);if(n)return n[0]},n=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!n&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(n="127.0.0.1"),n},t.prototype._getId=function(e){var n=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(s.getCookie(e,n))},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=s.getCorrelationContextTarget(e,a.requestContextSourceKey),e.headers){if(this.correlationContextHeader=e.headers[a.correlationContextHeader],e.headers[a.requestIdHeader])this.parentId=e.headers[a.requestIdHeader],this.requestId=u.generateRequestId(this.parentId),this.correlationContextHeader=e.headers[a.correlationContextHeader];else{var n=e.headers[a.rootIdHeader];this.parentId=e.headers[a.parentIdHeader],this.requestId=u.generateRequestId(n||this.parentId),this.correlationContextHeader=null}t&&(this.requestId=t),this.operationId=u.getRootId(this.requestId)}},t.parseId=function(e){return e.substr(0,e.indexOf("|"))},t.keys=new o.ContextTagKeys,t}(c);e.exports=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=n(308),o=n(165),s=n(110),a=n(37),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?o.trackRequestSync(this,e):a.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&a.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?o.trackRequest(this,e):a.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?s.trackRequest(this,e):a.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(i);e.exports=c},function(e,t,n){"use strict";var r=n(62),i=n(309),o=n(310),s=n(44),a=n(311),c=n(312),u=n(77),l=n(314),d=n(52),h=n(37),p=n(316),f=function(){function e(e){this._telemetryProcessors=[];var t=new i(e);this.config=t,this.context=new o,this.commonProperties={};var n=new l(this.config);this.channel=new a(function(){return t.disableAppInsights},function(){return t.maxBatchSize},function(){return t.maxBatchIntervalMs},n)}return e.prototype.trackTrace=function(e){this.track(e,s.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,s.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!d.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,s.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,s.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,s.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=r.parse(e.data).host),this.track(e,s.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&s.telemetryTypeToBaseType(t)){var n=p.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var r=this.runTelemetryProcessors(n,e.contextObjects);(r=r&&c.samplingTelemetryProcessor(n,{correlationContext:u.CorrelationContextManager.getCurrentContext()}))&&this.channel.send(n)}else h.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var n=!0,r=this._telemetryProcessors.length;if(0===r)return n;(t=t||{}).correlationContext=u.CorrelationContextManager.getCurrentContext();for(var i=0;i<r;++i)try{var o=this._telemetryProcessors[i];if(o&&!1===o.apply(null,[e,t])){n=!1;break}}catch(t){n=!0,h.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return n},e}();e.exports=f},function(e,t,n){"use strict";var r=n(114),i=function(){function e(t){var n=this;this.endpointBase="https://dc.services.visualstudio.com",this.instrumentationKey=t||e._getInstrumentationKey(),this.endpointUrl=this.endpointBase+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net"],this.setCorrelationId=function(e){return n.correlationId=e},this.profileQueryEndpoint=process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();e.exports=i},function(e,t,n){"use strict";var r=n(17),i=n(18),o=n(3),s=n(44),a=n(37),c=function(){function e(e){this.keys=new s.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||o.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var n=JSON.parse(i.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.appVersion[t]=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},e.prototype._loadInternalContext=function(){var t=o.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var n=JSON.parse(i.readFileSync(t,"utf8"));n&&"string"==typeof n.version&&(e.sdkVersion=n.version)}catch(e){a.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();e.exports=c},function(e,t,n){"use strict";var r=n(37),i=function(){function e(e,t,n,r){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=n,this._sender=r}return e.prototype.setUseDiskRetryCaching=function(e,t,n){this._sender.setDiskRetryMode(e,t,n)},e.prototype.send=function(e){var t=this;if(!this._isDisabled())if(e){var n=this._stringify(e);"string"==typeof n&&(this._buffer.push(n),this._buffer.length>=this._getBatchSize()?this.triggerSend(!1):!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){t._timeoutHandle=null,t.triggerSend(!1)},this._getBatchIntervalMs())))}else r.warn("Cannot send null/undefined telemetry")},e.prototype.triggerSend=function(e,t){var n=this._buffer.length<1;if(!n){var r=this._buffer.join("\n");e?(this._sender.saveOnCrash(r),"function"==typeof t&&t("data saved on crash")):this._sender.send(new Buffer(r),t)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&"function"==typeof t&&t("no data to send")},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){r.warn("Failed to serialize payload",t,e)}},e}();e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(313))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(44);function i(e){var t=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var n=0;n<e.length;n++)t=((t<<5)+t|0)+e.charCodeAt(n)|0;return(t=t<=-2147483648?2147483647:Math.abs(t))/2147483647*100}t.samplingTelemetryProcessor=function(e,t){var n=e.sampleRate;return null===n||void 0===n||n>=100||!(!e.data||r.TelemetryType.Metric!==r.baseTypeToTelemetryType(e.data.baseType))||(t.correlationContext&&t.correlationContext.operation?i(t.correlationContext.operation.id)<n:100*Math.random()<n)},t.getSamplingHashCode=i},function(e,t,n){"use strict";var r=n(18),i=n(17),o=n(3),s=n(315),a=n(32),c=n(37),u=n(110),l=n(52),d=function(){function e(t,n,i){if(this._config=t,this._onSuccess=n,this._onError=i,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=r.existsSync(e.ICACLS_PATH)}catch(e){}e.OS_PROVIDES_FILE_PROTECTION||c.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,n,r){this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof n&&n>=0&&(this._resendInterval=Math.floor(n)),"number"==typeof r&&r>=0&&(this._maxBytesOnDisk=Math.floor(r)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,c.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},e.prototype.send=function(t,n){var r=this,i=this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};s.gzip(t,function(s,a){var d=a;s?(c.warn(s),d=t,o.headers["Content-Length"]=t.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=a.length),c.info(e.TAG,o),o[u.disableCollectionRequestOption]=!0;var h=l.makeRequest(r._config,i,o,function(i){i.setEncoding("utf-8");var o="";i.on("data",function(e){o+=e}),i.on("end",function(){r._numConsecutiveFailures=0,c.info(e.TAG,o),"function"==typeof r._onSuccess&&r._onSuccess(o),"function"==typeof n&&n(o),r._enableDiskRetryMode&&(200===i.statusCode?setTimeout(function(){return r._sendFirstFileOnDisk()},r._resendInterval):408!==i.statusCode&&429!==i.statusCode&&439!==i.statusCode&&500!==i.statusCode&&503!==i.statusCode||r._storeToDisk(t))})});h.on("error",function(i){if(r._numConsecutiveFailures++,!r._enableDiskRetryMode||r._numConsecutiveFailures>0&&r._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var o="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";r._enableDiskRetryMode&&(o="Ingestion endpoint could not be reached "+r._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),c.warn(e.TAG,o,i)}else{o="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";c.info(e.TAG,o,i)}if(r._onErrorHelper(i),"function"==typeof n){var s="error sending telemetry";i&&"function"==typeof i.toString&&(s=i.toString()),n(s)}r._enableDiskRetryMode&&r._storeToDisk(t)}),h.write(d),h.end()})},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},e.prototype._runICACLS=function(t,n){var r=a.spawn(e.ICACLS_PATH,t,{windowsHide:!0});r.on("error",function(e){return n(e)}),r.on("close",function(e,t){return n(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))})},e.prototype._runICACLSSync=function(t){if(!a.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var n=a.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(n.error)throw n.error;if(0!==n.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+n.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var n=a.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),r="";n.stdout.on("data",function(e){return r+=e}),n.on("error",function(e){return t(e,null)}),n.on("close",function(n,i){return e.ACL_IDENTITY=r&&r.trim(),t(0===n?null:new Error("Getting ACL identity did not succeed (PS returned code "+n+")"),e.ACL_IDENTITY)})},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(a.spawnSync){var t=a.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,n){var r=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?n(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity(function(i,o){if(i)return e.ACLED_DIRECTORIES[t]=!1,n(i);r._runICACLS(r._getACLArguments(t,o),function(r){return e.ACLED_DIRECTORIES[t]=!r,n(r)})})):n(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var n=this;r.lstat(e,function(i,o){i&&"ENOENT"===i.code?r.mkdir(e,function(r){r&&"EEXIST"!==r.code?t(r):n._applyACLRules(e,t)}):!i&&o.isDirectory()?n._applyACLRules(e,t):t(i||new Error("Path existed but was not a directory"))})},e.prototype._getShallowDirectorySize=function(e,t){r.readdir(e,function(n,i){if(n)return t(n,-1);var s=null,a=0,c=0;if(0!==i.length)for(var u=0;u<i.length;u++)r.stat(o.join(e,i[u]),function(e,n){c++,e?s=e:n.isFile()&&(a+=n.size),c===i.length&&t(s,s?-1:a)});else t(null,0)})},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=r.readdirSync(e),n=0,i=0;i<t.length;i++)n+=r.statSync(o.join(e,t[i])).size;return n},e.prototype._storeToDisk=function(t){var n=this,s=o.join(i.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);c.info(e.TAG,"Checking existance of data storage directory: "+s),this._confirmDirExists(s,function(i){if(i)return c.warn(e.TAG,"Error while checking/creating directory: "+(i&&i.message)),void n._onErrorHelper(i);n._getShallowDirectorySize(s,function(i,a){if(i||a<0)return c.warn(e.TAG,"Error while checking directory size: "+(i&&i.message)),void n._onErrorHelper(i);if(a>n._maxBytesOnDisk)c.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+a);else{var u=(new Date).getTime()+".ai.json",l=o.join(s,u);c.info(e.TAG,"saving data to disk at: "+l),r.writeFile(l,t,{mode:384},function(e){return n._onErrorHelper(e)})}})})},e.prototype._storeToDiskSync=function(t){var n=o.join(i.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);try{c.info(e.TAG,"Checking existance of data storage directory: "+n),r.existsSync(n)||r.mkdirSync(n),this._applyACLRulesSync(n);var s=this._getShallowDirectorySizeSync(n);if(s>this._maxBytesOnDisk)return void c.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+s);var a=(new Date).getTime()+".ai.json",u=o.join(n,a);c.info(e.TAG,"saving data before crash to disk at: "+u),r.writeFileSync(u,t,{mode:384})}catch(t){c.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var t=this,n=o.join(i.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);r.exists(n,function(e){e&&r.readdir(n,function(e,i){if(e)t._onErrorHelper(e);else if((i=i.filter(function(e){return o.basename(e).indexOf(".ai.json")>-1})).length>0){var s=i[0],a=o.join(n,s);r.readFile(a,function(e,n){e?t._onErrorHelper(e):r.unlink(a,function(e){e?t._onErrorHelper(e):t.send(n)})})}})})},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=5e7,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===i.type(),e}();e.exports=d},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";var r=n(44),i=n(52),o=n(77),s=function(){function e(){}return e.createEnvelope=function(t,n,o,s,a){var c=null;switch(n){case r.TelemetryType.Trace:c=e.createTraceData(t);break;case r.TelemetryType.Dependency:c=e.createDependencyData(t);break;case r.TelemetryType.Event:c=e.createEventData(t);break;case r.TelemetryType.Exception:c=e.createExceptionData(t);break;case r.TelemetryType.Request:c=e.createRequestData(t);break;case r.TelemetryType.Metric:c=e.createMetricData(t)}if(o&&r.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var u in o)c.baseData.properties[u]||(c.baseData.properties[u]=o[u]);else c.baseData.properties=o;c.baseData.properties=i.validateStringMap(c.baseData.properties)}var l=a&&a.instrumentationKey||"",d=new r.Envelope;return d.data=c,d.iKey=l,d.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),d.tags=this.getTags(s,t.tagOverrides),d.time=(new Date).toISOString(),d.ver=1,d.sampleRate=a?a.samplingPercentage:100,n===r.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(e){var t=new r.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=r.SeverityLevel.Information:t.severityLevel=e.severity;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),n.baseData=t,n},e.createDependencyData=function(e){var t=new r.RemoteDependencyData;t.name=e.name,t.data=e.data,t.target=e.target,t.duration=i.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=i.w3cTraceId();var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),n.baseData=t,n},e.createEventData=function(e){var t=new r.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),n.baseData=t,n},e.createExceptionData=function(e){var t=new r.ExceptionData;t.properties=e.properties,t.severityLevel=r.SeverityLevel.Error,t.measurements=e.measurements,t.exceptions=[];var n=e.exception.stack,o=new r.ExceptionDetails;o.message=e.exception.message,o.typeName=e.exception.name,o.parsedStack=this.parseStack(n),o.hasFullStack=i.isArray(o.parsedStack)&&o.parsedStack.length>0,t.exceptions.push(o);var s=new r.Data;return s.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),s.baseData=t,s},e.createRequestData=function(e){var t=new r.RequestData;e.id?t.id=e.id:t.id=i.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=i.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var n=new r.Data;return n.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),n.baseData=t,n},e.createMetricData=function(e){var t=new r.MetricData;t.metrics=[];var n=new r.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=r.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,t.metrics.push(n),t.properties=e.properties;var i=new r.Data;return i.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),i.baseData=t,i},e.getTags=function(e,t){var n=o.CorrelationContextManager.getCurrentContext(),r={};if(e&&e.tags)for(var i in e.tags)r[i]=e.tags[i];if(t)for(var i in t)r[i]=t[i];return n&&(r[e.keys.operationId]=r[e.keys.operationId]||n.operation.id,r[e.keys.operationName]=r[e.keys.operationName]||n.operation.name,r[e.keys.operationParentId]=r[e.keys.operationParentId]||n.operation.parentId),r},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var r=0,i=0,o=0;o<=n.length;o++){var s=n[o];if(a.regex.test(s)){var c=new a(n[o],r++);i+=c.sizeInBytes,t.push(c)}}if(i>32768)for(var u=0,l=t.length-1,d=0,h=u,p=l;u<l;){if((d+=t[u].sizeInBytes+t[l].sizeInBytes)>32768){var f=p-h+1;t.splice(h,f);break}h=u,p=l,u++,l--}}return t},e}(),a=function(){function e(t,n){this.sizeInBytes=0,this.level=n,this.method="<no_method>",this.assembly=i.trim(t);var r=t.match(e.regex);r&&r.length>=5&&(this.method=i.trim(r[2])||this.method,this.fileName=i.trim(r[4])||"<no_filename>",this.line=parseInt(r[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}();e.exports=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(166),c=n(26),u=n(4),l=n(11);n(8);const d=n(1),h=n(5),p=n(7),f=n(9),g=n(27);let m=class{constructor(e){this.serviceContainer=e,this.activatedOnce=!1,this.workspaceService=this.serviceContainer.get(u.IWorkspaceService),this.output=this.serviceContainer.get(d.IOutputChannel,l.STANDARD_OUTPUT_CHANNEL),this.appShell=this.serviceContainer.get(u.IApplicationShell),this.lsNotSupportedDiagnosticService=this.serviceContainer.get(c.IDiagnosticsService,a.LSNotSupportedDiagnosticServiceId);const t=e.get(d.IDisposableRegistry);t.push(this),t.push(this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this)))}activate(e){return o(this,void 0,void 0,function*(){if(this.currentActivator||this.activatedOnce)return;this.resource=e,this.activatedOnce=!0;let t=this.useJedi();if(!t){const e=yield this.lsNotSupportedDiagnosticService.diagnose(void 0);this.lsNotSupportedDiagnosticService.handle(e).ignoreErrors(),e.length&&(p.sendTelemetryEvent(f.EventName.PYTHON_LANGUAGE_SERVER_PLATFORM_NOT_SUPPORTED),t=!0)}yield this.logStartup(t);let n=t?g.LanguageServerActivator.Jedi:g.LanguageServerActivator.DotNet,r=this.serviceContainer.get(g.ILanguageServerActivator,n);this.currentActivator={jedi:t,activator:r};try{return void(yield r.activate())}catch(e){if(t)return;t=!0,yield this.logStartup(t),n=g.LanguageServerActivator.Jedi,r=this.serviceContainer.get(g.ILanguageServerActivator,n),this.currentActivator={jedi:t,activator:r},yield r.activate()}})}dispose(){this.currentActivator&&this.currentActivator.activator.dispose()}logStartup(e){return o(this,void 0,void 0,function*(){const t=e?"Starting Jedi Python language engine.":"Starting Microsoft Python language server.";this.output.appendLine(t)})}onDidChangeConfiguration(e){return o(this,void 0,void 0,function*(){if(-1===(this.workspaceService.hasWorkspaceFolders?this.workspaceService.workspaceFolders.map(e=>e.uri):[void 0]).findIndex(t=>e.affectsConfiguration("python.jediEnabled",t)))return;const t=this.useJedi();this.currentActivator&&this.currentActivator.jedi===t||"Reload"===(yield this.appShell.showInformationMessage("Please reload the window switching between language engines.","Reload"))&&this.serviceContainer.get(u.ICommandManager).executeCommand("workbench.action.reloadWindow")})}useJedi(){return this.serviceContainer.get(d.IConfigurationService).getSettings(this.resource).jediEnabled}};m=r([s.injectable(),i(0,s.inject(h.IServiceContainer))],m),t.LanguageServerExtensionActivationService=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(11),u=n(1),l=n(10),d=n(5),h=n(319),p=n(356),f=n(179),g=n(372),m=n(373),y=n(374),v=n(375),b=n(379),S=n(183),_=n(380),w=n(382),P=n(383),C=n(19),T=n(387);let I=class{constructor(e){this.serviceManager=e,this.context=this.serviceManager.get(u.IExtensionContext),this.documentSelector=c.PYTHON}activate(){return o(this,void 0,void 0,function*(){const e=this.context,t=this.jediFactory=new h.JediFactory(e.asAbsolutePath("."),this.serviceManager);e.subscriptions.push(t),e.subscriptions.push(...m.activateGoToObjectDefinitionProvider(t)),e.subscriptions.push(t),e.subscriptions.push(a.languages.registerRenameProvider(this.documentSelector,new v.PythonRenameProvider(this.serviceManager)));const n=new f.PythonDefinitionProvider(t);e.subscriptions.push(a.languages.registerDefinitionProvider(this.documentSelector,n)),e.subscriptions.push(a.languages.registerHoverProvider(this.documentSelector,new g.PythonHoverProvider(t))),e.subscriptions.push(a.languages.registerReferenceProvider(this.documentSelector,new y.PythonReferenceProvider(t))),e.subscriptions.push(a.languages.registerCompletionItemProvider(this.documentSelector,new p.PythonCompletionItemProvider(t,this.serviceManager),".")),e.subscriptions.push(a.languages.registerCodeLensProvider(this.documentSelector,this.serviceManager.get(l.IShebangCodeLensProvider)));const r=new w.OnTypeFormattingDispatcher({"\n":new P.OnEnterFormatter,":":new _.BlockFormatProviders}),i=r.getTriggerCharacters();i&&e.subscriptions.push(a.languages.registerOnTypeFormattingEditProvider(c.PYTHON,r,i.first,...i.more));const o=this.serviceManager.get(d.IServiceContainer);e.subscriptions.push(new T.WorkspaceSymbols(o));const s=new S.JediSymbolProvider(o,t);e.subscriptions.push(a.languages.registerDocumentSymbolProvider(this.documentSelector,s)),-1===this.serviceManager.get(u.IConfigurationService).getSettings().devOptions.indexOf("DISABLE_SIGNATURE")&&e.subscriptions.push(a.languages.registerSignatureHelpProvider(this.documentSelector,new b.PythonSignatureProvider(t),"(",",")),e.subscriptions.push(a.languages.registerRenameProvider(c.PYTHON,new v.PythonRenameProvider(o)));const I=this.serviceManager.get(C.IUnitTestManagementService);I.activate().then(()=>I.activateCodeLenses(s)).catch(e=>this.serviceManager.get(u.ILogger).logError("Failed to activate Unit Tests",e))})}dispose(){this.jediFactory&&this.jediFactory.dispose()}};I=r([s.injectable(),i(0,s.inject(d.IServiceManager))],I),t.JediExtensionActivator=I},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(65);t.JediFactory=class{constructor(e,t){this.extensionRootPath=e,this.serviceContainer=t,this.disposables=[],this.jediProxyHandlers=new Map}dispose(){this.disposables.forEach(e=>e.dispose()),this.disposables=[]}getJediProxyHandler(e){const t=e?r.workspace.getWorkspaceFolder(e):void 0;let n=t?t.uri.fsPath:void 0;if(n||(n=Array.isArray(r.workspace.workspaceFolders)&&r.workspace.workspaceFolders.length>0?r.workspace.workspaceFolders[0].uri.fsPath:__dirname),!this.jediProxyHandlers.has(n)){const e=new i.JediProxy(this.extensionRootPath,n,this.serviceContainer),t=new i.JediProxyHandler(e);this.disposables.push(e,t),this.jediProxyHandlers.set(n,t)}return this.jediProxyHandlers.get(n)}}},function(e,t,n){"use strict";e.exports=function(){const e=[].slice.call(arguments).filter(e=>e),t=e.shift();return e.forEach(e=>{Object.keys(e).forEach(n=>{t[n]=e[n]})}),t}},function(e,t,n){var r=n(168),i=n(113),o=process.cwd,s=null,a=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return s||(s=o.call(process)),s};try{process.cwd()}catch(e){}var c=process.chdir;function u(e){return e?function(t,n,i){return e.call(r,t,n,function(e){g(e)&&(e=null),i&&i.apply(this,arguments)})}:e}function l(e){return e?function(t,n){try{return e.call(r,t,n)}catch(e){if(!g(e))throw e}}:e}function d(e){return e?function(t,n,i,o){return e.call(r,t,n,i,function(e){g(e)&&(e=null),o&&o.apply(this,arguments)})}:e}function h(e){return e?function(t,n,i){try{return e.call(r,t,n,i)}catch(e){if(!g(e))throw e}}:e}function p(e){return e?function(t,n){return e.call(r,t,function(e,t){if(!t)return n.apply(this,arguments);t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296),n&&n.apply(this,arguments)})}:e}function f(e){return e?function(t){var n=e.call(r,t);return n.uid<0&&(n.uid+=4294967296),n.gid<0&&(n.gid+=4294967296),n}:e}function g(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}process.chdir=function(e){s=null,c.call(process,e)},e.exports=function(e){i.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,r){e.open(t,i.O_WRONLY|i.O_SYMLINK,n,function(t,i){t?r&&r(t):e.fchmod(i,n,function(t){e.close(i,function(e){r&&r(t||e)})})})},e.lchmodSync=function(t,n){var r,o=e.openSync(t,i.O_WRONLY|i.O_SYMLINK,n),s=!0;try{r=e.fchmodSync(o,n),s=!1}finally{if(s)try{e.closeSync(o)}catch(e){}else e.closeSync(o)}return r}}(e);e.lutimes||function(e){i.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,n,r,o){e.open(t,i.O_SYMLINK,function(t,i){t?o&&o(t):e.futimes(i,n,r,function(t){e.close(i,function(e){o&&o(t||e)})})})},e.lutimesSync=function(t,n,r){var o,s=e.openSync(t,i.O_SYMLINK),a=!0;try{o=e.futimesSync(s,n,r),a=!1}finally{if(a)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return o}):(e.lutimes=function(e,t,n,r){r&&process.nextTick(r)},e.lutimesSync=function(){})}(e);e.chown=d(e.chown),e.fchown=d(e.fchown),e.lchown=d(e.lchown),e.chmod=u(e.chmod),e.fchmod=u(e.fchmod),e.lchmod=u(e.lchmod),e.chownSync=h(e.chownSync),e.fchownSync=h(e.fchownSync),e.lchownSync=h(e.lchownSync),e.chmodSync=l(e.chmodSync),e.fchmodSync=l(e.fchmodSync),e.lchmodSync=l(e.lchmodSync),e.stat=p(e.stat),e.fstat=p(e.fstat),e.lstat=p(e.lstat),e.statSync=f(e.statSync),e.fstatSync=f(e.fstatSync),e.lstatSync=f(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,t,n,r){r&&process.nextTick(r)},e.lchownSync=function(){});"win32"===a&&(e.rename=function(t){return function(n,r,i){var o=Date.now(),s=0;t(n,r,function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-o<6e4)return setTimeout(function(){e.stat(r,function(e,o){e&&"ENOENT"===e.code?t(n,r,a):i(c)})},s),void(s<100&&(s+=10));i&&i(c)})}}(e.rename));e.read=function(t){return function(n,r,i,o,s,a){var c;if(a&&"function"==typeof a){var u=0;c=function(l,d,h){if(l&&"EAGAIN"===l.code&&u<10)return u++,t.call(e,n,r,i,o,s,c);a.apply(this,arguments)}}return t.call(e,n,r,i,o,s,c)}}(e.read),e.readSync=function(t){return function(n,r,i,o,s){for(var a=0;;)try{return t.call(e,n,r,i,o,s)}catch(e){if("EAGAIN"===e.code&&a<10){a++;continue}throw e}}}(e.readSync)}},function(e,t,n){var r=n(68).Stream;e.exports=function(e){return{ReadStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this);var o=this;this.path=n;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;i=i||{};var s=Object.keys(i);for(var a=0,c=s.length;a<c;a++){var u=s[a];this[u]=i[u]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){o._read()});e.open(this.path,this.flags,this.mode,function(e,t){if(e)return o.emit("error",e),void(o.readable=!1);o.fd=t,o.emit("open",t),o._read()})},WriteStream:function t(n,i){if(!(this instanceof t))return new t(n,i);r.call(this);this.path=n;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;i=i||{};var o=Object.keys(i);for(var s=0,a=o.length;s<a;s++){var c=o[s];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(e,t,n){const r=n(33).fromCallback;e.exports={copy:r(n(324))}},function(e,t,n){"use strict";const r=n(21),i=n(3),o=n(169),s=n(39),a=n(55).pathExists;e.exports=function(e,t,n,c){"function"!=typeof n||c?("function"==typeof n||n instanceof RegExp)&&(n={filter:n}):(c=n,n={}),c=c||function(){},(n=n||{}).preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const u=process.cwd();if(i.resolve(u,e)===i.resolve(u,t))return c(new Error("Source and destination must not be the same."));r.lstat(e,(r,u)=>{if(r)return c(r);let l=null;if(u.isDirectory()){const e=t.split(i.sep);e.pop(),l=e.join(i.sep)}else l=i.dirname(t);a(l,(r,i)=>r?c(r):i?o(e,t,n,c):void s.mkdirs(l,r=>{if(r)return c(r);o(e,t,n,c)}))})}},function(e,t,n){"use strict";const r=n(21),i=n(17),o=n(3);e.exports={hasMillisRes:function(e){let t=o.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=o.join(i.tmpdir(),t);const n=new Date(1435410243862);r.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",i=>{if(i)return e(i);r.open(t,"r+",(i,o)=>{if(i)return e(i);r.futimes(o,n,n,n=>{if(n)return e(n);r.close(o,n=>{if(n)return e(n);r.stat(t,(t,n)=>{if(t)return e(t);e(null,n.mtime>1435410243e3)})})})})})},hasMillisResSync:function(){let e=o.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=o.join(i.tmpdir(),e);const t=new Date(1435410243862);r.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const n=r.openSync(e,"r+");return r.futimesSync(n,t,t),r.closeSync(n),r.statSync(e).mtime>1435410243e3},timeRemoveMillis:function(e){if("number"==typeof e)return 1e3*Math.floor(e/1e3);if(e instanceof Date)return new Date(1e3*Math.floor(e.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function(e,t,n,i){r.open(e,"r+",(e,o)=>{if(e)return i(e);r.futimes(o,t,n,e=>{r.close(o,t=>{i&&i(e||t)})})})}}},function(e,t,n){"use strict";const r=n(21),i=n(3),o=n(170).invalidWin32Path,s=parseInt("0777",8);e.exports=function e(t,n,a,c){if("function"==typeof n?(a=n,n={}):n&&"object"==typeof n||(n={mode:n}),"win32"===process.platform&&o(t)){const e=new Error(t+" contains invalid WIN32 path characters.");return e.code="EINVAL",a(e)}let u=n.mode;const l=n.fs||r;void 0===u&&(u=s&~process.umask()),c||(c=null),a=a||function(){},t=i.resolve(t),l.mkdir(t,u,r=>{if(!r)return a(null,c=c||t);switch(r.code){case"ENOENT":if(i.dirname(t)===t)return a(r);e(i.dirname(t),n,(r,i)=>{r?a(r,i):e(t,n,a,i)});break;default:l.stat(t,(e,t)=>{e||!t.isDirectory()?a(r,c):a(null,c)})}})}},function(e,t,n){"use strict";const r=n(21),i=n(3),o=n(170).invalidWin32Path,s=parseInt("0777",8);e.exports=function e(t,n,a){n&&"object"==typeof n||(n={mode:n});let c=n.mode;const u=n.fs||r;if("win32"===process.platform&&o(t)){const e=new Error(t+" contains invalid WIN32 path characters.");throw e.code="EINVAL",e}void 0===c&&(c=s&~process.umask()),a||(a=null),t=i.resolve(t);try{u.mkdirSync(t,c),a=a||t}catch(r){switch(r.code){case"ENOENT":if(i.dirname(t)===t)throw r;e(t,n,a=e(i.dirname(t),n,a));break;default:let o;try{o=u.statSync(t)}catch(e){throw r}if(!o.isDirectory())throw r}}return a}},function(e,t,n){"use strict";const r=n(21),i=n(3),o=n(329),s=n(39);e.exports=function e(t,n,a){("function"==typeof a||a instanceof RegExp)&&(a={filter:a}),(a=a||{}).recursive=!!a.recursive,a.clobber=!("clobber"in a&&!a.clobber),a.overwrite="overwrite"in a?!!a.overwrite:a.clobber,a.dereference="dereference"in a&&!!a.dereference,a.preserveTimestamps="preserveTimestamps"in a&&!!a.preserveTimestamps,a.filter=a.filter||function(){return!0},a.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const c=a.recursive&&!a.dereference?r.lstatSync(t):r.statSync(t),u=i.dirname(n),l=r.existsSync(u);let d=!1;if(a.filter instanceof RegExp?(console.warn("Warning: fs-extra: Passing a RegExp filter is deprecated, use a function"),d=a.filter.test(t)):"function"==typeof a.filter&&(d=a.filter(t,n)),c.isFile()&&d)l||s.mkdirsSync(u),o(t,n,{overwrite:a.overwrite,errorOnExist:a.errorOnExist,preserveTimestamps:a.preserveTimestamps});else if(c.isDirectory()&&d)r.existsSync(n)||s.mkdirsSync(n),r.readdirSync(t).forEach(r=>{const o=a;o.recursive=!0,e(i.join(t,r),i.join(n,r),o)});else if(a.recursive&&c.isSymbolicLink()&&d){const e=r.readlinkSync(t);r.symlinkSync(e,n)}}},function(e,t,n){"use strict";const r=n(21),i=65536,o=n(172)(i);e.exports=function(e,t,n){const s=n.overwrite,a=n.errorOnExist,c=n.preserveTimestamps;if(r.existsSync(t)){if(!s){if(a)throw new Error(`${t} already exists`);return}r.unlinkSync(t)}const u=r.openSync(e,"r"),l=r.fstatSync(u),d=r.openSync(t,"w",l.mode);let h=1,p=0;for(;h>0;)h=r.readSync(u,o,0,i,p),r.writeSync(d,o,0,h),p+=h;c&&r.futimesSync(d,l.atime,l.mtime),r.closeSync(u),r.closeSync(d)}},function(e,t,n){"use strict";const r=n(21),i=n(3),o=n(80),s="win32"===process.platform;function a(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||r[t],e[t+="Sync"]=e[t]||r[t]}),e.maxBusyTries=e.maxBusyTries||3}function c(e,t,n){let r=0;"function"==typeof t&&(n=t,t={}),o(e,"rimraf: missing path"),o.equal(typeof e,"string","rimraf: path should be a string"),o.equal(typeof n,"function","rimraf: callback function required"),o(t,"rimraf: invalid options argument provided"),o.equal(typeof t,"object","rimraf: options should be object"),a(t),u(e,t,function i(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<t.maxBusyTries){return r++,setTimeout(()=>u(e,t,i),100*r)}"ENOENT"===o.code&&(o=null)}n(o)})}function u(e,t,n){o(e),o(t),o("function"==typeof n),t.lstat(e,(r,i)=>r&&"ENOENT"===r.code?n(null):r&&"EPERM"===r.code&&s?l(e,t,r,n):i&&i.isDirectory()?h(e,t,r,n):void t.unlink(e,r=>{if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return s?l(e,t,r,n):h(e,t,r,n);if("EISDIR"===r.code)return h(e,t,r,n)}return n(r)}))}function l(e,t,n,r){o(e),o(t),o("function"==typeof r),n&&o(n instanceof Error),t.chmod(e,438,i=>{i?r("ENOENT"===i.code?null:n):t.stat(e,(i,o)=>{i?r("ENOENT"===i.code?null:n):o.isDirectory()?h(e,t,n,r):t.unlink(e,r)})})}function d(e,t,n){let r;o(e),o(t),n&&o(n instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?f(e,t,n):t.unlinkSync(e)}function h(e,t,n,r){o(e),o(t),n&&o(n instanceof Error),o("function"==typeof r),t.rmdir(e,s=>{!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?r(n):r(s):function(e,t,n){o(e),o(t),o("function"==typeof n),t.readdir(e,(r,o)=>{if(r)return n(r);let s,a=o.length;if(0===a)return t.rmdir(e,n);o.forEach(r=>{c(i.join(e,r),t,r=>{if(!s)return r?n(s=r):void(0==--a&&t.rmdir(e,n))})})})}(e,t,r)})}function p(e,t){let n;a(t=t||{}),o(e,"rimraf: missing path"),o.equal(typeof e,"string","rimraf: path should be a string"),o(t,"rimraf: missing options"),o.equal(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&s&&d(e,t,n)}try{n&&n.isDirectory()?f(e,t,null):t.unlinkSync(e)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return s?d(e,t,n):f(e,t,n);if("EISDIR"!==n.code)throw n;f(e,t,n)}}function f(e,t,n){o(e),o(t),n&&o(n instanceof Error);try{t.rmdirSync(e)}catch(r){if("ENOTDIR"===r.code)throw n;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(e,t){o(e),o(t),t.readdirSync(e).forEach(n=>p(i.join(e,n),t));const n=s?100:1;let r=0;for(;;){let i=!0;try{const o=t.rmdirSync(e,t);return i=!1,o}finally{if(++r<n&&i)continue}}}(e,t);else if("ENOENT"!==r.code)throw r}}e.exports=c,c.sync=p},function(e,t,n){"use strict";const r=n(33).fromCallback,i=n(116);i.outputJson=r(n(333)),i.outputJsonSync=n(334),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,e.exports=i},function(e,t,n){var r;try{r=n(21)}catch(e){r=n(18)}function i(e,t){var n,r="\n";return"object"==typeof t&&null!==t&&(t.spaces&&(n=t.spaces),t.EOL&&(r=t.EOL)),JSON.stringify(e,t?t.replacer:null,n).replace(/\n/g,r)+r}function o(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,"")}var s={readFile:function(e,t,n){null==n&&(n=t,t={}),"string"==typeof t&&(t={encoding:t});var i=(t=t||{}).fs||r,s=!0;"throws"in t&&(s=t.throws),i.readFile(e,t,function(r,i){if(r)return n(r);var a;i=o(i);try{a=JSON.parse(i,t?t.reviver:null)}catch(t){return s?(t.message=e+": "+t.message,n(t)):n(null,null)}n(null,a)})},readFileSync:function(e,t){"string"==typeof(t=t||{})&&(t={encoding:t});var n=t.fs||r,i=!0;"throws"in t&&(i=t.throws);try{var s=n.readFileSync(e,t);return s=o(s),JSON.parse(s,t.reviver)}catch(t){if(i)throw t.message=e+": "+t.message,t;return null}},writeFile:function(e,t,n,o){null==o&&(o=n,n={});var s=(n=n||{}).fs||r,a="";try{a=i(t,n)}catch(e){return void(o&&o(e,null))}s.writeFile(e,a,n,o)},writeFileSync:function(e,t,n){var o=(n=n||{}).fs||r,s=i(t,n);return o.writeFileSync(e,s,n)}};e.exports=s},function(e,t,n){"use strict";const r=n(3),i=n(39),o=n(55).pathExists,s=n(116);e.exports=function(e,t,n,a){"function"==typeof n&&(a=n,n={});const c=r.dirname(e);o(c,(r,o)=>r?a(r):o?s.writeJson(e,t,n,a):void i.mkdirs(c,r=>{if(r)return a(r);s.writeJson(e,t,n,a)}))}},function(e,t,n){"use strict";const r=n(21),i=n(3),o=n(39),s=n(116);e.exports=function(e,t,n){const a=i.dirname(e);r.existsSync(a)||o.mkdirsSync(a),s.writeJsonSync(e,t,n)}},function(e,t,n){"use strict";const r=n(33).fromCallback,i=n(21),o=n(169),s=n(3),a=n(88).remove,c=n(39).mkdirs;function u(e,t,n,r){i.stat(e,(o,s)=>{if(o)return r(o);s.isDirectory()?l(e,t,n,r):function(e,t,n,r){const o=n?"w":"wx",s=i.createReadStream(e),a=i.createWriteStream(t,{flags:o});function c(){i.unlink(e,r)}s.on("error",o=>{s.destroy(),a.destroy(),a.removeListener("close",c),i.unlink(t,()=>{"EISDIR"===o.code||"EPERM"===o.code?l(e,t,n,r):r(o)})}),a.on("error",e=>{s.destroy(),a.destroy(),a.removeListener("close",c),r(e)}),a.once("close",c),s.pipe(a)}(e,t,n,r)})}function l(e,t,n,r){const i={overwrite:!1};function s(){o(e,t,i,t=>{if(t)return r(t);a(e,r)})}n?a(t,e=>{if(e)return r(e);s()}):s()}e.exports={move:r(function e(t,n,r,o){"function"==typeof r&&(o=r,r={});const l=r.overwrite||r.clobber||!1;!function(e,t,n){i.stat(e,(r,i)=>{if(r)return n(r);if(i.isDirectory()){const r=t.split(s.dirname(e)+s.sep)[1];if(r){const i=r.split(s.sep)[0];return n(null,!!i&&(e!==t&&t.indexOf(e)>-1&&i===s.basename(e)))}return n(null,!1)}return n(null,!1)})}(t,n,(d,h)=>d?o(d):h?o(new Error(`Cannot move '${t}' to a subdirectory of itself, '${n}'.`)):void c(s.dirname(n),c=>{if(c)return o(c);s.resolve(t)===s.resolve(n)?i.access(t,o):l?i.rename(t,n,i=>{if(!i)return o();if("ENOTEMPTY"!==i.code&&"EEXIST"!==i.code){if("EPERM"!==i.code)return"EXDEV"!==i.code?o(i):void u(t,n,l,o);setTimeout(()=>{a(n,i=>{if(i)return o(i);r.overwrite=!1,e(t,n,r,o)})},200)}else a(n,i=>{if(i)return o(i);r.overwrite=!1,e(t,n,r,o)})}):i.link(t,n,e=>e?"EXDEV"===e.code||"EISDIR"===e.code||"EPERM"===e.code||"ENOTSUP"===e.code?u(t,n,l,o):o(e):i.unlink(t,o))}))})}},function(e,t,n){"use strict";const r=n(21),i=n(3),o=n(171).copySync,s=n(88).removeSync,a=n(39).mkdirsSync,c=n(172);function u(e,t,n){return r.statSync(e).isDirectory()?function(e,t,n){const r={overwrite:!1};n?(s(t),i()):i();function i(){return o(e,t,r),s(e)}}(e,t,n):function(e,t,n){const i=c(65536),o=n?"w":"wx",s=r.openSync(e,"r"),a=r.fstatSync(s),u=r.openSync(t,o,a.mode);let l=1,d=0;for(;l>0;)l=r.readSync(s,i,0,65536,d),r.writeSync(u,i,0,l),d+=l;return r.closeSync(s),r.closeSync(u),r.unlinkSync(e)}(e,t,n)}e.exports={moveSync:function e(t,n,o){const c=(o=o||{}).overwrite||o.clobber||!1;if(t=i.resolve(t),n=i.resolve(n),t===n)return r.accessSync(t);if(function(e,t){try{return r.statSync(e).isDirectory()&&e!==t&&t.indexOf(e)>-1&&t.split(i.dirname(e)+i.sep)[1].split(i.sep)[0]===i.basename(e)}catch(e){return!1}}(t,n))throw new Error(`Cannot move '${t}' into itself '${n}'.`);a(i.dirname(n)),function(){if(c)try{r.renameSync(t,n)}catch(r){if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)return s(n),o.overwrite=!1,e(t,n,o);if("EXDEV"!==r.code)throw r;return u(t,n,c)}else try{r.linkSync(t,n),r.unlinkSync(t)}catch(e){if("EXDEV"===e.code||"EISDIR"===e.code||"EPERM"===e.code||"ENOTSUP"===e.code)return u(t,n,c);throw e}}()}}},function(e,t,n){"use strict";const r=n(33).fromCallback,i=n(18),o=n(3),s=n(39),a=n(88),c=r(function(e,t){t=t||function(){},i.readdir(e,(n,r)=>{if(n)return s.mkdirs(e,t);r=r.map(t=>o.join(e,t)),function e(){const n=r.pop();if(!n)return t();a.remove(n,n=>{if(n)return t(n);e()})}()})});function u(e){let t;try{t=i.readdirSync(e)}catch(t){return s.mkdirsSync(e)}t.forEach(t=>{t=o.join(e,t),a.removeSync(t)})}e.exports={emptyDirSync:u,emptydirSync:u,emptyDir:c,emptydir:c}},function(e,t,n){"use strict";const r=n(339),i=n(340),o=n(341);e.exports={createFile:r.createFile,createFileSync:r.createFileSync,ensureFile:r.createFile,ensureFileSync:r.createFileSync,createLink:i.createLink,createLinkSync:i.createLinkSync,ensureLink:i.createLink,ensureLinkSync:i.createLinkSync,createSymlink:o.createSymlink,createSymlinkSync:o.createSymlinkSync,ensureSymlink:o.createSymlink,ensureSymlinkSync:o.createSymlinkSync}},function(e,t,n){"use strict";const r=n(33).fromCallback,i=n(3),o=n(21),s=n(39),a=n(55).pathExists;e.exports={createFile:r(function(e,t){function n(){o.writeFile(e,"",e=>{if(e)return t(e);t()})}o.stat(e,(r,o)=>{if(!r&&o.isFile())return t();const c=i.dirname(e);a(c,(e,r)=>e?t(e):r?n():void s.mkdirs(c,e=>{if(e)return t(e);n()}))})}),createFileSync:function(e){let t;try{t=o.statSync(e)}catch(e){}if(t&&t.isFile())return;const n=i.dirname(e);o.existsSync(n)||s.mkdirsSync(n),o.writeFileSync(e,"")}}},function(e,t,n){"use strict";const r=n(33).fromCallback,i=n(3),o=n(21),s=n(39),a=n(55).pathExists;e.exports={createLink:r(function(e,t,n){function r(e,t){o.link(e,t,e=>{if(e)return n(e);n(null)})}a(t,(c,u)=>c?n(c):u?n(null):void o.lstat(e,(o,c)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);const u=i.dirname(t);a(u,(i,o)=>i?n(i):o?r(e,t):void s.mkdirs(u,i=>{if(i)return n(i);r(e,t)}))}))}),createLinkSync:function(e,t,n){if(o.existsSync(t))return;try{o.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const r=i.dirname(t);return o.existsSync(r)?o.linkSync(e,t):(s.mkdirsSync(r),o.linkSync(e,t))}}},function(e,t,n){"use strict";const r=n(33).fromCallback,i=n(3),o=n(21),s=n(39),a=s.mkdirs,c=s.mkdirsSync,u=n(342),l=u.symlinkPaths,d=u.symlinkPathsSync,h=n(343),p=h.symlinkType,f=h.symlinkTypeSync,g=n(55).pathExists;e.exports={createSymlink:r(function(e,t,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,g(t,(s,c)=>s?r(s):c?r(null):void l(e,t,(s,c)=>{if(s)return r(s);e=c.toDst,p(c.toCwd,n,(n,s)=>{if(n)return r(n);const c=i.dirname(t);g(c,(n,i)=>n?r(n):i?o.symlink(e,t,s,r):void a(c,n=>{if(n)return r(n);o.symlink(e,t,s,r)}))})}))}),createSymlinkSync:function(e,t,n,r){if(r="function"==typeof n?n:r,n="function"!=typeof n&&n,o.existsSync(t))return;const s=d(e,t);e=s.toDst,n=f(s.toCwd,n);const a=i.dirname(t);return o.existsSync(a)?o.symlinkSync(e,t,n):(c(a),o.symlinkSync(e,t,n))}}},function(e,t,n){"use strict";const r=n(3),i=n(21),o=n(55).pathExists;e.exports={symlinkPaths:function(e,t,n){if(r.isAbsolute(e))return i.lstat(e,(t,r)=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:e}));{const s=r.dirname(t),a=r.join(s,e);return o(a,(t,o)=>t?n(t):o?n(null,{toCwd:a,toDst:e}):i.lstat(e,(t,i)=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:r.relative(s,e)})))}},symlinkPathsSync:function(e,t){let n;if(r.isAbsolute(e)){if(!(n=i.existsSync(e)))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const o=r.dirname(t),s=r.join(o,e);if(n=i.existsSync(s))return{toCwd:s,toDst:e};if(!(n=i.existsSync(e)))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:r.relative(o,e)}}}}},function(e,t,n){"use strict";const r=n(21);e.exports={symlinkType:function(e,t,n){if(n="function"==typeof t?t:n,t="function"!=typeof t&&t)return n(null,t);r.lstat(e,(e,r)=>{if(e)return n(null,"file");t=r&&r.isDirectory()?"dir":"file",n(null,t)})},symlinkTypeSync:function(e,t){let n;if(t)return t;try{n=r.lstatSync(e)}catch(e){return"file"}return n&&n.isDirectory()?"dir":"file"}}},function(e,t,n){"use strict";const r=n(33).fromCallback,i=n(21),o=n(3),s=n(39),a=n(55).pathExists;e.exports={outputFile:r(function(e,t,n,r){"function"==typeof n&&(r=n,n="utf8");const c=o.dirname(e);a(c,(o,a)=>o?r(o):a?i.writeFile(e,t,n,r):void s.mkdirs(c,o=>{if(o)return r(o);i.writeFile(e,t,n,r)}))}),outputFileSync:function(e,t,n){const r=o.dirname(e);if(i.existsSync(r))return i.writeFileSync.apply(i,arguments);s.mkdirsSync(r),i.writeFileSync.apply(i,arguments)}}},function(e,t,n){var r=n(17),i=n(346),o=function(e){return function(t,n,r){return"function"==typeof n&&(r=n,n={}),i[e](t,n,r)}},s={darwin:o("ps"),sunos:o("ps"),freebsd:o("ps"),netbsd:o("proc"),win:o("win"),linux:o("proc"),aix:o("ps"),unsupported:function(e,t,n){(n="function"==typeof t?t:n)(new Error(r.platform()+" is not supported yet, please fire an issue (https://github.com/soyuka/pidusage)"))}},a=r.platform();a=a.match(/^win/)?"win":a,a=s[a]?a:"unsupported",t.stat=function(){s[a].apply(i,[].slice.call(arguments))},t.unmonitor=function(e){delete i.history[e]},t._history=i.history},function(e,t,n){var r=n(17),i=n(18),o=n(3),s=n(32).exec,a=n(32).spawn,c=n(347),u=n(59).format,l=r.platform(),d={history:{},cpu:null,proc:function(e,t,n){var o=this;null!==this.cpu?i.readFile("/proc/uptime","utf8",function(i,s){return i?n(i,null):(void 0===s?(console.error("[pidusage] We couldn't find uptime from /proc/uptime"),o.cpu.uptime=r.uptime()):o.cpu.uptime=s.split(" ")[0],o.proc_calc(e,t,n))}):c.cpu(function(r,i){return r?n(r,null):(o.cpu=i,o.proc_calc(e,t,n))})},proc_calc:function(e,t,n){e=parseInt(e,10);var r=this.history[e]?this.history[e]:{},s=this.cpu,a=this;i.readFile(o.join("/proc",""+e,"stat"),"utf8",function(i,o){if(i)return n(i,null);var c=o.lastIndexOf(")");o=o.substr(c+2).split(" ");var u={utime:parseFloat(o[11]),stime:parseFloat(o[12]),cutime:parseFloat(o[13]),cstime:parseFloat(o[14]),start:parseFloat(o[19])/s.clockTick,rss:parseFloat(o[21])},l=t.childrens?u.cutime+u.cstime:0,d=u.stime-(r.stime||0)+u.utime-(r.utime||0)+l;d/=s.clockTick;var h=void 0!==r.uptime?s.uptime-r.uptime:u.start-s.uptime;h=0===(h=Math.abs(h))?1:h,a.history[e]=u,a.history[e].uptime=s.uptime;var p=d/h*100,f=u.rss*s.pagesize;return t.advanced?n(null,{cpu:p,memory:f,time:u.utime+u.stime,start:u.start}):n(null,{cpu:p,memory:f})})},ps:function(e,t,n){e=parseInt(e,10);var i="ps -o pcpu,rss -p ";t.advanced?(i="ps -o pcpu,rss,time,start -p ","aix"===l&&(i="ps -o pcpu,rssize,time,start -p ")):"aix"===l&&(i="ps -o pcpu,rssize -p "),s(i+e,function(e,i,o){if(e)return n(e,null);i=(i=i.split(r.EOL)[1]).replace(/^\s+/,"").replace(/\s\s+/g," ").split(" ");var s=parseFloat(i[0].replace(",",".")),a=1024*parseFloat(i[1]);return t.advanced?n(null,{cpu:s,memory:a,time:parseFloat(i[2]),start:parseFloat(i[3])}):n(null,{cpu:s,memory:a})})},win:function(e,t,n){e=parseInt(e,10);var i=this.history[e]?this.history[e]:{},o="PROCESS "+e+" get workingsetsize,usermodetime,kernelmodetime",s=a("wmic",o.split(" "),{detached:!0}),c="",l="",d=this,h=Math.floor(r.uptime());s.stdout.on("data",function(e){c+=e.toString()}),s.stderr.on("data",function(e){l+=e.toString()}),s.on("error",function(e){console.error('[pidusage] Command "wmic '+o+'" failed with error %s',e)}),s.on("close",function(s){if(c=c.trim(),l=l.trim(),!c||0!==s){var a=u("%s Wmic errored, please open an issue on https://github.com/soyuka/pidusage with this message.%s",(new Date).toString(),r.EOL);return a+=u('Command was "wmic %s" %s System informations: %s - release: %s %s - type %s %s',o,r.EOL,r.EOL,r.release(),r.EOL,r.type(),r.EOL),l=a+(l?u("Wmic reported the following error: %s.",l):"Wmic reported no errors (stderr empty)."),l=u("%s%s%sWmic exited with code %d.",r.EOL,l,r.EOL,s),l=u("%s%sStdout was %s",l,r.EOL,c||"empty"),n(new Error(l,null))}c=c.split(r.EOL)[1].replace(/\s\s+/g," ").split(" ");var p={kernelmodetime:parseFloat(c[0]),usermodetime:parseFloat(c[1])},f=parseFloat(c[2]),g=p.kernelmodetime-(i.kernelmodetime||0)+p.usermodetime-(i.usermodetime||0);g/=1e7;var m=void 0!==i.uptime?h-i.uptime:0,y=0;return m>0&&(y=g/m*100),d.history[e]=p,d.history[e].uptime=h,t.advanced?n(null,{cpu:y,memory:f,time:p.usermodetime+p.kernelmodetime,start:m}):n(null,{cpu:y,memory:f})}),s.stdin.end()}};e.exports=d},function(e,t,n){var r=n(17),i=n(32).exec;e.exports={getconf:function(e,t,n){"function"==typeof t&&(n=t,t={default:""}),i("getconf "+e,function(r,i,o){return null!==r?(console.error("Error while getting "+e,r),n(null,t.default)):(i=parseInt(i),isNaN(i)?n(null,t.default):n(null,i))})},cpu:function(e){var t=this;t.getconf("CLK_TCK",{default:100},function(n,i){if(n)return e(n);t.getconf("PAGESIZE",{default:4096},function(t,n){if(t)return e(t);e(null,{clockTick:i,uptime:r.uptime(),pagesize:n})})})}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),n(8);const r=new Map;function i(t,i=n(2)){const o=function(t,r=n(2)){const i=r.workspace.getConfiguration("python",r.Uri.file(e));if(!i)return"python";const o=i.inspect("pythonPath").globalValue||"python";if(!t||!Array.isArray(r.workspace.workspaceFolders)||0===r.workspace.workspaceFolders.length)return o;const s=t?r.workspace.getWorkspaceFolder(t):r.workspace.workspaceFolders[0];if(!s)return o;const a=r.workspace.getConfiguration("python",t).get("pythonPath")||"python";return`${s.uri.fsPath}-${a}`}(t,i);return r.has(o)||r.set(o,new Map),r.get(o)}function o(e,t){return`KeyPrefix=${e}-Args=${t.map(e=>`${JSON.stringify(e)}`).join("-Arg-Separator-")}`}t.clearCache=function(){r.clear()};t.InMemoryInterpreterSpecificCache=class{constructor(e,t,r,i=n(2)){this.keyPrefix=e,this.expiryDurationMs=t,this.vscode=i,this.resource=r[0],this.args=r.slice(1)}get hasData(){const e=i(this.resource,this.vscode),t=o(this.keyPrefix,this.args),n=e.get(t);return!(!e.has(t)||!n||n.expiry<Date.now()&&(e.delete(t),1))}get data(){if(!this.hasData)return;const e=i(this.resource,this.vscode),t=o(this.keyPrefix,this.args),n=e.get(t);return e.has(t)&&n?n.value:void 0}set data(e){const t=i(this.resource,this.vscode),n=o(this.keyPrefix,this.args);t.set(n,{expiry:Date.now()+this.expiryDurationMs,value:e})}clear(){const e=i(this.resource,this.vscode),t=o(this.keyPrefix,this.args);e.delete(t)}}}).call(this,"/index.js")},function(e,t,n){var r=n(173),i=n(350),o=n(352),s="Expected a function",a=Math.max,c=Math.min;e.exports=function(e,t,n){var u,l,d,h,p,f,g=0,m=!1,y=!1,v=!0;if("function"!=typeof e)throw new TypeError(s);function b(t){var n=u,r=l;return u=l=void 0,g=t,h=e.apply(r,n)}function S(e){var n=e-f;return void 0===f||n>=t||n<0||y&&e-g>=d}function _(){var e=i();if(S(e))return w(e);p=setTimeout(_,function(e){var n=t-(e-f);return y?c(n,d-(e-g)):n}(e))}function w(e){return p=void 0,v&&u?b(e):(u=l=void 0,h)}function P(){var e=i(),n=S(e);if(u=arguments,l=this,f=e,n){if(void 0===p)return function(e){return g=e,p=setTimeout(_,t),m?b(e):h}(f);if(y)return p=setTimeout(_,t),b(f)}return void 0===p&&(p=setTimeout(_,t)),h}return t=o(t)||0,r(n)&&(m=!!n.leading,d=(y="maxWait"in n)?a(o(n.maxWait)||0,t):d,v="trailing"in n?!!n.trailing:v),P.cancel=function(){void 0!==p&&clearTimeout(p),g=0,u=f=l=p=void 0},P.flush=function(){return void 0===p?h:w(i())},P}},function(e,t,n){var r=n(174);e.exports=function(){return r.Date.now()}},function(e,t){var n="object"==typeof global&&global&&global.Object===Object&&global;e.exports=n},function(e,t,n){var r=n(173),i=n(353),o=NaN,s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):a.test(e)?o:+e}},function(e,t,n){var r=n(175),i=n(118),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==o}},function(e,t,n){var r=n(117),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),s=n(7),a=n(9),c=n(357),u=n(178);class l{constructor(e,t){this.completionSource=new c.CompletionSource(e,t,new u.ItemInfoSource(e)),this.configService=t.get(o.IConfigurationService)}provideCompletionItems(e,t,n){return i(this,void 0,void 0,function*(){const r=yield this.completionSource.getVsCodeCompletionItems(e,t,n);if(this.configService.isTestExecution())for(let e=0;e<Math.min(3,r.length);e+=1)r[e]=yield this.resolveCompletionItem(r[e],n);return r})}resolveCompletionItem(e,t){return i(this,void 0,void 0,function*(){if(!e.documentation){const n=yield this.completionSource.getDocumentation(e,t);n&&n.length>0&&(e.documentation=n[0].tooltip)}return e})}}r([s.captureTelemetry(a.EventName.COMPLETION)],l.prototype,"provideCompletionItems",null),t.PythonCompletionItemProvider=l},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(1),s=n(65),a=n(119);class c{constructor(e,t){this.document=e,this.position=t}static fromObject(e){return e._documentPosition}attachTo(e){e._documentPosition=this}}t.CompletionSource=class{constructor(e,t,n){this.serviceContainer=t,this.itemInfoSource=n,this.jediFactory=e}getVsCodeCompletionItems(e,t,n){return r(this,void 0,void 0,function*(){const r=yield this.getCompletionResult(e,t,n);return void 0===r?Promise.resolve([]):this.toVsCodeCompletions(new c(e,t),r,e.uri)})}getDocumentation(e,t){return r(this,void 0,void 0,function*(){const n=c.fromObject(e);if(void 0===n)return;const r=n.document,o=n.position,s=r.getWordRangeAtPosition(o),a=void 0!==s?new i.Range(new i.Position(0,0),s.start):new i.Range(new i.Position(0,0),o),u=e.label,l=`${r.getText(a)}${u}`,d=new i.Range(a.end,a.end.translate(0,u.length));return this.itemInfoSource.getItemInfoFromText(r.uri,r.fileName,d,l,t)})}getCompletionResult(e,t,n){return r(this,void 0,void 0,function*(){if(t.character<=0||a.isPositionInsideStringOrComment(e,t))return;const r=s.CommandType.Completions,i=t.character,o=e.getText(),c={command:r,fileName:e.fileName,columnIndex:i,lineIndex:t.line,source:o};return this.jediFactory.getJediProxyHandler(e.uri).sendCommand(c,n)})}toVsCodeCompletions(e,t,n){return t&&t.items.length>0?t.items.map(t=>this.toVsCodeCompletion(e,t,n)):[]}toVsCodeCompletion(e,t,n){const r=new i.CompletionItem(t.text);return r.kind=t.type,!0!==this.serviceContainer.get(o.IConfigurationService).getSettings(n).autoComplete.addBrackets||t.kind!==i.SymbolKind.Function&&t.kind!==i.SymbolKind.Method||(r.insertText=new i.SnippetString(t.text).appendText("(").appendTabstop().appendText(")")),r.sortText=(r.label.startsWith("__")?"z":r.label.startsWith("_")?"y":"__")+r.label,e.attachTo(r),r}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Unknown=0]="Unknown",e[e.UppercaseLetter=1]="UppercaseLetter",e[e.LowercaseLetter=2]="LowercaseLetter",e[e.TitlecaseLetter=3]="TitlecaseLetter",e[e.ModifierLetter=4]="ModifierLetter",e[e.OtherLetter=5]="OtherLetter",e[e.LetterNumber=6]="LetterNumber",e[e.NonSpacingMark=7]="NonSpacingMark",e[e.SpacingCombiningMark=8]="SpacingCombiningMark",e[e.DecimalDigitNumber=9]="DecimalDigitNumber",e[e.ConnectorPunctuation=10]="ConnectorPunctuation"}(r=t.UnicodeCategory||(t.UnicodeCategory={})),t.getUnicodeCategory=function(e){const t=n(359),i=n(360),o=n(361),s=n(362),a=n(363),c=n(364),u=n(365),l=n(366),d=n(367),h=n(368);return t[e]?r.UppercaseLetter:i[e]?r.LowercaseLetter:o[e]?r.TitlecaseLetter:s[e]?r.OtherLetter:a[e]?r.ModifierLetter:c[e]?r.LetterNumber:u[e]?r.NonSpacingMark:l[e]?r.SpacingCombiningMark:d[e]?r.DecimalDigitNumber:h[e]?r.ConnectorPunctuation:r.Unknown}},function(e,t){e.exports=require("./node_modules/unicode/category/Lu")},function(e,t){e.exports=require("./node_modules/unicode/category/Ll")},function(e,t){e.exports=require("./node_modules/unicode/category/Lt")},function(e,t){e.exports=require("./node_modules/unicode/category/Lo")},function(e,t){e.exports=require("./node_modules/unicode/category/Lm")},function(e,t){e.exports=require("./node_modules/unicode/category/Nl")},function(e,t){e.exports=require("./node_modules/unicode/category/Mn")},function(e,t){e.exports=require("./node_modules/unicode/category/Mc")},function(e,t){e.exports=require("./node_modules/unicode/category/Nd")},function(e,t){e.exports=require("./node_modules/unicode/category/Pc")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(89),i=n(370);t.CharacterStream=class{constructor(e){this.text="string"==typeof e?new i.TextIterator(e):e,this._position=0,this._currentChar=e.length>0?e.charCodeAt(0):0,this._isEndOfStream=0===e.length}getText(){return this.text.getText()}get position(){return this._position}set position(e){this._position=e,this.checkBounds()}get currentChar(){return this._currentChar}get nextChar(){return this.position+1<this.text.length?this.text.charCodeAt(this.position+1):0}get prevChar(){return this.position-1>=0?this.text.charCodeAt(this.position-1):0}isEndOfStream(){return this._isEndOfStream}lookAhead(e){const t=this._position+e;return t<0||t>=this.text.length?0:this.text.charCodeAt(t)}advance(e){this.position+=e}moveNext(){return this._position<this.text.length-1?(this._position+=1,this._currentChar=this.text.charCodeAt(this._position),!0):(this.advance(1),!this.isEndOfStream())}isAtWhiteSpace(){return r.isWhiteSpace(this.currentChar)}isAtLineBreak(){return r.isLineBreak(this.currentChar)}skipLineBreak(){13===this._currentChar?(this.moveNext(),10===this.currentChar&&this.moveNext()):10===this._currentChar&&this.moveNext()}skipWhitespace(){for(;!this.isEndOfStream()&&this.isAtWhiteSpace();)this.moveNext()}skipToEol(){for(;!this.isEndOfStream()&&!this.isAtLineBreak();)this.moveNext()}skipToWhitespace(){for(;!this.isEndOfStream()&&!this.isAtWhiteSpace();)this.moveNext()}isAtString(){return 39===this.currentChar||34===this.currentChar}charCodeAt(e){return this.text.charCodeAt(e)}get length(){return this.text.length}checkBounds(){this._position<0&&(this._position=0),this._isEndOfStream=this._position>=this.text.length,this._isEndOfStream&&(this._position=this.text.length),this._currentChar=this._isEndOfStream?0:this.text.charCodeAt(this._position)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.TextIterator=class{constructor(e){this.text=e}charCodeAt(e){return e>=0&&e<this.text.length?this.text.charCodeAt(e):0}get length(){return this.text.length}getText(){return this.text}};t.DocumentTextIterator=class{constructor(e){this.document=e;const t=this.document.lineCount-1,n=this.document.lineAt(t),i=new r.Position(t,n.range.end.character);this.length=this.document.offsetAt(i)}charCodeAt(e){const t=this.document.positionAt(e);return this.document.getText(new r.Range(t,t.translate(0,1))).charCodeAt(t.character)}getText(){return this.document.getText()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),i=n(89);var o;!function(e){e[e.Default=0]="Default",e[e.Preformatted=1]="Preformatted",e[e.Code=2]="Code"}(o||(o={}));t.RestTextConverter=class{constructor(){this.state=o.Default,this.md=[]}toMarkdown(e){const t=this.transformLines(e);return this.state=o.Default,this.md=[],t}escapeMarkdown(e){return e.replace(/\#/g,"\\#").replace(/\*/g,"\\*").replace(/\ _/g," \\_").replace(/^_/,"\\_")}transformLines(e){const t=e.split(/\r?\n/);for(let e=0;e<t.length;e+=1){const n=t[e];if(0!==this.md.length||0!==n.length)switch(this.state){case o.Default:e+=this.inDefaultState(t,e);break;case o.Preformatted:e+=this.inPreformattedState(t,e);break;case o.Code:this.inCodeState(n)}}return this.endCodeBlock(),this.endPreformattedBlock(),this.md.join(r.EOL).trim()}inDefaultState(e,t){let n=e[t];if(n.startsWith("```"))return this.startCodeBlock(),0;if(n.startsWith("===")||n.startsWith("---"))return 0;if(this.handleDoubleColon(n))return 0;if(this.isIgnorable(n))return 0;if(this.handleSectionHeader(e,t))return 1;const r=this.checkPreContent(e,t);return this.state!==o.Default?r:(n=(n=this.cleanup(n)).replace(/``/g,"`"),n=this.escapeMarkdown(n),this.md.push(n),0)}inPreformattedState(e,t){let n=e[t];if(this.isIgnorable(n))return 0;if(n.length>0&&!i.isWhiteSpace(n.charCodeAt(0))&&!this.isListItem(n))return this.endPreformattedBlock(),-1;const r=this.md.length>0?this.md[this.md.length-1]:void 0;return 0===n.length&&r&&(0===r.length||r.startsWith("```"))?0:(n=(n=n.replace(/</g," ").replace(/>/g," ")).replace(/``/g,"`"),this.md.push(`${n}  `),0)}inCodeState(e){const t=this.md.length>0?this.md[this.md.length-1]:void 0;0===e.length&&t&&(0===t.length||t.startsWith("```"))||(e.startsWith("```")?this.endCodeBlock():this.md.push(e))}isIgnorable(e){if(e.indexOf("generated/")>=0)return!0;const t=e.trim();return!!(t.startsWith("..")&&t.indexOf("::")>0)}checkPreContent(e,t){const n=e[t];return 0===t||0===n.trim().length?0:i.isWhiteSpace(n.charCodeAt(0))||this.isListItem(n)?(this.startPreformattedBlock(),-1):0}handleSectionHeader(e,t){const n=e[t];return t<e.length-1&&e[t+1].startsWith("===")?(this.md.push(`### ${this.cleanup(n)}`),!0):!!(t<e.length-1&&e[t+1].startsWith("---"))&&(this.md.push(`#### ${this.cleanup(n)}`),!0)}handleDoubleColon(e){return!!e.endsWith("::")&&(e.length>2&&!e.startsWith("..")&&this.md.push(e.substring(0,e.length-1)),this.startPreformattedBlock(),!0)}startPreformattedBlock(){this.tryRemovePrecedingEmptyLines(),this.md.push("```html"),this.state=o.Preformatted}endPreformattedBlock(){this.state===o.Preformatted&&(this.tryRemovePrecedingEmptyLines(),this.md.push("```"),this.state=o.Default)}startCodeBlock(){this.tryRemovePrecedingEmptyLines(),this.md.push("```python"),this.state=o.Code}endCodeBlock(){this.state===o.Code&&(this.tryRemovePrecedingEmptyLines(),this.md.push("```"),this.state=o.Default)}tryRemovePrecedingEmptyLines(){for(;this.md.length>0&&0===this.md[this.md.length-1].trim().length;)this.md.pop()}isListItem(e){const t=e.trim(),n=t.length>0?t.charCodeAt(0):0;return 42===n||45===n||i.isDecimal(n)}cleanup(e){return e.replace(/:mod:/g,"module:")}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),s=n(7),a=n(9),c=n(178);class u{constructor(e){this.itemInfoSource=new c.ItemInfoSource(e)}provideHover(e,t,n){return i(this,void 0,void 0,function*(){const r=yield this.itemInfoSource.getItemInfoFromDocument(e,t,n);if(r)return new o.Hover(r.map(e=>e.tooltip))})}}r([s.captureTelemetry(a.EventName.HOVER_DEFINITION)],u.prototype,"provideHover",null),t.PythonHoverProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),s=n(7),a=n(9),c=n(179);class u{constructor(e){this._defProvider=new c.PythonDefinitionProvider(e)}goToObjectDefinition(){return i(this,void 0,void 0,function*(){const e=yield this.getObjectDefinition();if("string"!=typeof e||0===e.length)return;const t=e.split(".");let n="",r=0;if(1===t.length)n=`import ${t[0]}`,r="import ".length;else{const e=t.shift();n=`from ${e} import ${t.join(".")}`,r=`from ${e} import `.length}const i=new o.Range(0,r,0,n.length-1),s={fileName:"test.py",lineAt:e=>({text:n}),getWordRangeAtPosition:e=>i,isDirty:!0,getText:()=>n},a=new o.CancellationTokenSource,c=yield this._defProvider.provideDefinition(s,i.start,a.token);if(null===c)return void(yield o.window.showInformationMessage(`Definition not found for '${e}'`));let u,l;if(Array.isArray(c)&&c.length>0&&(u=c[0].uri,l=c[0].range.start.line),c&&!Array.isArray(c)&&c.uri&&(u=c.uri,l=c.range.start.line),u){const e=yield o.workspace.openTextDocument(u);yield o.window.showTextDocument(e),yield o.commands.executeCommand("revealLine",{lineNumber:l,at:"top"})}else yield o.window.showInformationMessage(`Definition not found for '${e}'`)})}intputValidation(e){return"string"!=typeof e?"":0===(e=e.trim()).length?"":null}getObjectDefinition(){return i(this,void 0,void 0,function*(){return o.window.showInputBox({prompt:"Enter Object Path",validateInput:this.intputValidation})})}}r([s.captureTelemetry(a.EventName.GO_TO_OBJECT_DEFINITION)],u.prototype,"goToObjectDefinition",null),t.PythonObjectDefinitionProvider=u,t.activateGoToObjectDefinitionProvider=function(e){const t=new u(e),n=o.commands.registerCommand("python.goToPythonObject",()=>t.goToObjectDefinition());return[t,n]}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),s=n(7),a=n(9),c=n(65);class u{constructor(e){this.jediFactory=e}static parseData(e){if(e&&e.references.length>0){return e.references.filter(e=>!(!e||"number"!=typeof e.columnIndex||"number"!=typeof e.lineIndex||"string"!=typeof e.fileName||-1===e.columnIndex||-1===e.lineIndex||0===e.fileName.length)).map(e=>{const t=o.Uri.file(e.fileName),n=new o.Range(e.lineIndex,e.columnIndex,e.lineIndex,e.columnIndex);return new o.Location(t,n)})}return[]}provideReferences(e,t,n,r){return i(this,void 0,void 0,function*(){const n=e.fileName;if(e.lineAt(t.line).text.match(/^\s*\/\//))return;if(t.character<=0)return;const i=e.getWordRangeAtPosition(t);if(!i)return;const o=i.isEmpty?t.character:i.end.character,s={command:c.CommandType.Usages,fileName:n,columnIndex:o,lineIndex:t.line};e.isDirty&&(s.source=e.getText());const a=yield this.jediFactory.getJediProxyHandler(e.uri).sendCommand(s,r);return a?u.parseData(a):void 0})}}r([s.captureTelemetry(a.EventName.REFERENCE)],u.prototype,"provideReferences",null),t.PythonReferenceProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(11),s=n(90),a=n(1),c=n(181),u=n(7),l=n(9);class d{constructor(e){this.serviceContainer=e,this.outputChannel=e.get(a.IOutputChannel,o.STANDARD_OUTPUT_CHANNEL),this.configurationService=e.get(a.IConfigurationService)}provideRenameEdits(e,t,n,r){return i.workspace.saveAll(!1).then(()=>this.doRename(e,t,n,r))}doRename(e,t,n,r){if(e.lineAt(t.line).text.match(/^\s*\/\//))return;if(t.character<=0)return;const u=e.getWordRangeAtPosition(t);if(!u||u.isEmpty)return;if(e.getText(u)===n)return;let l=i.workspace.getWorkspaceFolder(e.uri);!l&&Array.isArray(i.workspace.workspaceFolders)&&i.workspace.workspaceFolders.length>0&&(l=i.workspace.workspaceFolders[0]);const d=l?l.uri.fsPath:__dirname,h=this.configurationService.getSettings(l?l.uri:void 0);return new c.RefactorProxy(o.EXTENSION_ROOT_DIR,h,d,this.serviceContainer).rename(e,n,e.uri.fsPath,u).then(e=>{const t=e.results.map(e=>e.diff);return s.getWorkspaceEditsFromPatch(t,d)}).catch(t=>{if("Not installed"===t){return this.serviceContainer.get(a.IInstaller).promptToInstall(a.Product.rope,e.uri).catch(e=>console.error("Python Extension: promptToInstall",e)),Promise.reject("")}return i.window.showErrorMessage(t),this.outputChannel.appendLine(t),Promise.reject(t)})}}r([u.captureTelemetry(l.EventName.REFACTOR_RENAME)],d.prototype,"provideRenameEdits",null),t.PythonRenameProvider=d},function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?n.push(t.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}};e.exports=n}()},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(182);function o(e){if(i.isNumber(e))return new r.Position(e,0);if(""===e)return new r.Position(0,0);const t=e.split(":");if(t.length>2)throw new Error(`invalid position ${e}`);let n=0;if(""!==t[0]){if(!/^\d+$/.test(t[0]))throw new Error(`invalid position ${e}`);n=+t[0]}let o=0;if(2===t.length&&""!==t[1]){if(!/^\d+$/.test(t[1]))throw new Error(`invalid position ${e}`);o=+t[1]}return new r.Position(n,o)}t.getWindowsLineEndingCount=function(e,t){const n=/\r\n/g;let i=0,o=t.valueOf();for(let s=0;s<t;s+=1024){const t=e.positionAt(s);let a;o>=1024?(a=e.positionAt(s+1024),o-=1024):a=e.positionAt(s+o);const c=e.getText(new r.Range(t,a)).match(n);i+=c?c.length:0}return i},t.parseRange=function(e){if(i.isNumber(e))return new r.Range(e,0,e,0);if(""===e)return new r.Range(0,0,0,0);const t=e.split("-");if(t.length>2)throw new Error(`invalid range ${e}`);const n=o(t[0]);let s=n;return 2===t.length&&(s=o(t[1])),new r.Range(n,s)},t.parsePosition=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(17),o=n(2),s=n(7),a=n(9),c=n(65),u=n(119),l=["\\s*:type\\s*PARAMNAME:\\s*([^\\n, ]+)","\\s*:param\\s*(\\w?)\\s*PARAMNAME:[^\\n]+","\\s*@type\\s*PARAMNAME:\\s*([^\\n, ]+)"];class d{constructor(e){this.jediFactory=e}static parseData(e){if(e&&Array.isArray(e.definitions)&&e.definitions.length>0){const t=new o.SignatureHelp;return t.activeSignature=0,e.definitions.forEach(e=>{let n,r;if(t.activeParameter=e.paramindex,e.params&&e.params.length>0&&e.docstring&&e.docstring.startsWith(`${e.name}(`)){const t=e.docstring.splitLines();n=t.shift().trim(),r=t.join(i.EOL).trim()}else e.params&&e.params.length>0?(n=`${e.name}(${e.params.map(e=>e.name).join(", ")})`,r=e.docstring):(n=e.description,r=e.docstring);const o={label:n,documentation:r,parameters:[]};e.params&&e.params.length&&(o.parameters=e.params.map(t=>(0===t.docstring.length&&(t.docstring=function(e,t){let n="";return e=e.replace(new RegExp("\\*","g"),"\\\\\\*"),l.forEach(r=>{if(n.length>0)return;r=r.replace("PARAMNAME",e);const i=new RegExp(r).exec(t);i&&i.length>0&&((n=i[0]).indexOf(":")>=0&&(n=n.substring(n.indexOf(":")+1)),n.indexOf(":")>=0&&(n=n.substring(n.indexOf(":")+1)))}),n.trim()}(t.name,e.docstring)),{documentation:t.docstring.length>0?t.docstring:t.description,label:t.name.trim()}))),t.signatures.push(o)}),t}return new o.SignatureHelp}provideSignatureHelp(e,t,n){if(t.character<=0||u.isPositionInsideStringOrComment(e,t))return Promise.resolve(new o.SignatureHelp);const r={command:c.CommandType.Arguments,fileName:e.fileName,columnIndex:t.character,lineIndex:t.line,source:e.getText()};return this.jediFactory.getJediProxyHandler(e.uri).sendCommand(r,n).then(e=>e?d.parseData(e):new o.SignatureHelp)}}r([s.captureTelemetry(a.EventName.SIGNATURE)],d.prototype,"provideSignatureHelp",null),t.PythonSignatureProvider=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(381),i=n(121),o=n(121),s=n(121);t.BlockFormatProviders=class{constructor(){this.providers=[];const e=[s.DEF_REGEX,s.ASYNC_DEF_REGEX,s.CLASS_REGEX],t=[i.IF_REGEX,i.ELIF_REGEX,i.FOR_IN_REGEX,i.ASYNC_FOR_IN_REGEX,i.WHILE_REGEX,o.TRY_REGEX,o.EXCEPT_REGEX];this.providers.push(new r.CodeBlockFormatProvider(i.ELSE_REGEX,t,e));const n=[i.IF_REGEX,i.ELIF_REGEX];this.providers.push(new r.CodeBlockFormatProvider(i.ELIF_REGEX,n,e));const a=[o.TRY_REGEX,o.EXCEPT_REGEX];this.providers.push(new r.CodeBlockFormatProvider(o.EXCEPT_REGEX,a,e));const c=[o.TRY_REGEX,o.EXCEPT_REGEX];this.providers.push(new r.CodeBlockFormatProvider(o.FINALLY_REGEX,c,e))}provideOnTypeFormattingEdits(e,t,n,r,i){if(0===t.line)return[];const o=e.lineAt(t.line),s=e.lineAt(t.line-1);if(o.firstNonWhitespaceCharacterIndex!==s.firstNonWhitespaceCharacterIndex)return[];const a=o.text,c=this.providers.find(e=>e.canProvideEdits(a));return c?c.provideEdits(e,t,n,r,o):[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(2);t.CodeBlockFormatProvider=class{constructor(e,t,n){this.blockRegExp=e,this.previousBlockRegExps=t,this.boundaryRegExps=n}canProvideEdits(e){return this.blockRegExp.test(e)}provideEdits(e,t,n,o,s){for(let n=t.line-1;n>=0;n-=1){const a=e.lineAt(n),c=a.text;if(this.boundaryRegExps.some(e=>e.test(c)))return[];if(!this.previousBlockRegExps.find(e=>e.test(c)))continue;const u=a.firstNonWhitespaceCharacterIndex;if(u>s.firstNonWhitespaceCharacterIndex)continue;const l=new i.Position(t.line,0),d=new i.Position(t.line,s.firstNonWhitespaceCharacterIndex-u);if(!l.isEqual(d)){if(o.insertSpaces)return[r.TextEdit.delete(new i.Range(l,d))];{const e=c.substring(0,u),n=new i.Position(t.line,0),o=new i.Position(t.line,s.firstNonWhitespaceCharacterIndex);return[r.TextEdit.delete(new i.Range(n,o)),r.TextEdit.insert(n,e)]}}}return[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OnTypeFormattingDispatcher=class{constructor(e){this.providers=e}provideOnTypeFormattingEdits(e,t,n,r,i){const o=this.providers[n];return o?o.provideOnTypeFormattingEdits(e,t,n,r,i):[]}getTriggerCharacters(){const e=Object.keys(this.providers);e.sort();const t=e.shift();if(t)return{first:t,more:e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(384),o=n(81),s=n(119);t.OnEnterFormatter=class{constructor(){this.formatter=new i.LineFormatter}provideOnTypeFormattingEdits(e,t,n,i,a){if(0===t.line)return[];const c=e.lineAt(t.line-1),u=s.getDocumentTokens(e,t,o.TokenizerMode.CommentsAndStrings),l=u.getItemContaining(e.offsetAt(c.range.start)),d=u.getItemContaining(e.offsetAt(c.range.end));if(l>=0&&l===d){const e=u.getItemAt(l);if(e.type===o.TokenType.Semicolon||e.type===o.TokenType.String)return[]}const h=this.formatter.formatLine(e,c.lineNumber);return h===c.text?[]:[new r.TextEdit(c.range,h)]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(385),o=n(386),s=n(177),a=n(176),c=n(81),u=["and","as","assert","await","del","except","elif","for","from","global","if","import","in","is","lambda","nonlocal","not","or","raise","return","while","with","yield"];t.LineFormatter=class{constructor(){this.builder=new o.TextBuilder,this.tokens=new s.TextRangeCollection([]),this.braceCounter=new i.BraceCounter,this.text="",this.lineNumber=0}formatLine(e,t){if(this.document=e,this.lineNumber=t,this.text=e.lineAt(t).text,this.tokens=(new a.Tokenizer).tokenize(this.text),this.builder=new o.TextBuilder,this.braceCounter=new i.BraceCounter,0===this.tokens.count)return this.text;const n=this.text.substr(0,this.tokens.getItemAt(0).start);n.length>0&&this.builder.append(n);for(let e=0;e<this.tokens.count;e+=1){const t=this.tokens.getItemAt(e),n=e>0?this.tokens.getItemAt(e-1):void 0,r=e<this.tokens.count-1?this.tokens.getItemAt(e+1):void 0;switch(t.type){case c.TokenType.Operator:this.handleOperator(e);break;case c.TokenType.Comma:this.builder.append(","),r&&!this.isCloseBraceType(r.type)&&r.type!==c.TokenType.Colon&&this.builder.softAppendSpace();break;case c.TokenType.Identifier:n&&!this.isOpenBraceType(n.type)&&n.type!==c.TokenType.Colon&&n.type!==c.TokenType.Operator&&this.builder.softAppendSpace();const i=this.text.substring(t.start,t.end);this.builder.append(i),this.isKeywordWithSpaceBeforeBrace(i)&&r&&this.isOpenBraceType(r.type)&&this.builder.softAppendSpace();break;case c.TokenType.Colon:this.builder.append(":"),!this.braceCounter.isOpened(c.TokenType.OpenBracket)&&r&&r.type!==c.TokenType.Colon&&this.builder.softAppendSpace();break;case c.TokenType.Comment:n&&this.builder.softAppendSpace(2),this.builder.append(this.text.substring(t.start,t.end));break;case c.TokenType.Semicolon:this.builder.append(";");break;default:this.handleOther(t,e)}}return this.builder.getText()}handleOperator(e){const t=this.tokens.getItemAt(e),n=e>0?this.tokens.getItemAt(e-1):void 0,r=this.text.charCodeAt(t.start),i=e<this.tokens.count-1?this.tokens.getItemAt(e+1):void 0;if(1===t.length)switch(r){case 61:return void this.handleEqual(t,e);case 46:return n&&this.isKeyword(n,"from")&&this.builder.softAppendSpace(),this.builder.append("."),void(i&&this.isKeyword(i,"import")&&this.builder.softAppendSpace());case 64:return void(n?(this.builder.softAppendSpace(),this.builder.append("@"),this.builder.softAppendSpace()):this.builder.append("@"));case 33:return void this.builder.append("!");case 42:if(n&&this.isKeyword(n,"lambda"))return this.builder.softAppendSpace(),void this.builder.append("*");if(this.handleStarOperator(t,n))return}else if(2===t.length&&42===this.text.charCodeAt(t.start)&&42===this.text.charCodeAt(t.start+1)&&this.handleStarOperator(t,n))return;!n||!this.isOpenBraceType(n.type)&&n.type!==c.TokenType.Comma?(this.builder.softAppendSpace(),this.builder.append(this.text.substring(t.start,t.end)),(!n||n.type!==c.TokenType.Operator||45!==r&&43!==r&&126!==r)&&this.builder.softAppendSpace()):this.builder.append(this.text.substring(t.start,t.end))}handleStarOperator(e,t){if(42===this.text.charCodeAt(e.start)&&42===this.text.charCodeAt(e.start+1)){if(!t||t.type!==c.TokenType.Identifier&&t.type!==c.TokenType.Number)return this.builder.append("**"),!0;if(t&&this.isKeyword(t,"lambda"))return this.builder.softAppendSpace(),this.builder.append("**"),!0}const n=this.getPreviousLineTokens(),r=n&&n.count>0?n.getItemAt(n.count-1):void 0;return!(!r||!this.isOpenBraceType(r.type)&&r.type!==c.TokenType.Comma||(this.builder.append(this.text.substring(e.start,e.end)),0))}handleEqual(e,t){if(this.isMultipleStatements(t)&&!this.braceCounter.isOpened(c.TokenType.OpenBrace))return this.builder.softAppendSpace(),this.builder.append("="),void this.builder.softAppendSpace();this.isEqualsInsideArguments(t)?this.builder.append("="):(this.builder.softAppendSpace(),this.builder.append("="),this.builder.softAppendSpace())}handleOther(e,t){if(this.isBraceType(e.type))return this.braceCounter.countBrace(e),void this.builder.append(this.text.substring(e.start,e.end));const n=t>0?this.tokens.getItemAt(t-1):void 0;n&&1===n.length&&61===this.text.charCodeAt(n.start)&&this.isEqualsInsideArguments(t-1)?this.builder.append(this.text.substring(e.start,e.end)):!n||!this.isOpenBraceType(n.type)&&n.type!==c.TokenType.Colon?e.type===c.TokenType.Number&&n&&n.type===c.TokenType.Operator&&1===n.length&&126===this.text.charCodeAt(n.start)?this.builder.append(this.text.substring(e.start,e.end)):e.type===c.TokenType.Unknown?this.handleUnknown(e):(this.builder.softAppendSpace(),this.builder.append(this.text.substring(e.start,e.end))):this.builder.append(this.text.substring(e.start,e.end))}handleUnknown(e){const t=e.start>0?this.text.charCodeAt(e.start-1):0;32!==t&&9!==t||this.builder.softAppendSpace(),this.builder.append(this.text.substring(e.start,e.end));const n=e.end<this.text.length-1?this.text.charCodeAt(e.end):0;32!==n&&9!==n||this.builder.softAppendSpace()}isEqualsInsideArguments(e){return!(e<1)&&(this.tokens.getItemAt(e-1).type===c.TokenType.Identifier&&!(e>1&&this.tokens.getItemAt(e-2).type===c.TokenType.Colon)&&this.isInsideFunctionArguments(this.tokens.getItemAt(e).start))}isOpenBraceType(e){return e===c.TokenType.OpenBrace||e===c.TokenType.OpenBracket||e===c.TokenType.OpenCurly}isCloseBraceType(e){return e===c.TokenType.CloseBrace||e===c.TokenType.CloseBracket||e===c.TokenType.CloseCurly}isBraceType(e){return this.isOpenBraceType(e)||this.isCloseBraceType(e)}isMultipleStatements(e){for(let t=e;t>=0;t-=1)if(this.tokens.getItemAt(t).type===c.TokenType.Semicolon)return!0;return!1}isKeywordWithSpaceBeforeBrace(e){return u.indexOf(e)>=0}isKeyword(e,t){return e.type===c.TokenType.Identifier&&e.length===t.length&&this.text.substr(e.start,e.length)===t}isInsideFunctionArguments(e){if(!this.document)return!1;let t=new r.Position(0,0);for(let e=this.lineNumber;e>=0;e-=1){const n=this.document.lineAt(e),r=(new a.Tokenizer).tokenize(n.text);if(0===r.count)continue;const i=r.getItemAt(0);if(r.count>=3&&3===i.length&&"def"===n.text.substr(i.start,i.length)&&r.getItemAt(1).type===c.TokenType.Identifier&&r.getItemAt(2).type===c.TokenType.OpenBrace){t=n.range.start;break}if(r.count>0&&e<this.lineNumber){const n=r.getItemAt(r.count-1);if(n.type===c.TokenType.Colon){t=this.document.lineAt(e+1).range.start;break}if(r.count>1&&r.getItemAt(r.count-2).type===c.TokenType.Colon&&n.type===c.TokenType.Comment){t=this.document.lineAt(e+1).range.start;break}}}const n=this.document.lineAt(this.lineNumber),i=this.document.getText(new r.Range(t,n.range.end)),o=(new a.Tokenizer).tokenize(i);e=this.document.offsetAt(n.range.start)+e-this.document.offsetAt(t);let s=-1,u=-1;for(let t=0;t<o.count-1;t+=1){const n=o.getItemAt(t);if(n.type===c.TokenType.Identifier){const r=o.getItemAt(t+1);if(r.type===c.TokenType.OpenBrace&&!this.isKeywordWithSpaceBeforeBrace(i.substr(n.start,n.length))){let n=this.findClosingBrace(o,t+1);n=n>0?n:o.count-1,e>r.start&&e<o.getItemAt(n).start&&(s=t,u=n)}}}if(s<0)for(let t=0;t<o.count;t+=1){const n=o.getItemAt(t);if(n.type===c.TokenType.Identifier&&"lambda"===i.substr(n.start,n.length)){if(e<n.start)break;let r=this.findNearestColon(o,t+1);r=r>0?r:o.count-1,e>n.start&&e<o.getItemAt(r).start&&(s=t,u=r)}}return s>=0&&u>0}findNearestColon(e,t){for(let n=t;n<e.count;n+=1)if(e.getItemAt(n).type===c.TokenType.Colon)return n;return-1}findClosingBrace(e,t){const n=new i.BraceCounter;for(let r=t;r<e.count;r+=1){const t=e.getItemAt(r);if(t.type!==c.TokenType.OpenBrace&&t.type!==c.TokenType.CloseBrace||n.countBrace(t),0===n.count)return r}return-1}getPreviousLineTokens(){if(!this.document||0===this.lineNumber)return;const e=this.document.lineAt(this.lineNumber-1);return(new a.Tokenizer).tokenize(e.text)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(81);class i{constructor(e,t){this.openBrace=e,this.closeBrace=t}}class o{constructor(){this.store=[]}push(e){this.store.push(e)}pop(){return this.store.pop()}get length(){return this.store.length}}t.BraceCounter=class{constructor(){this.bracePairs=[new i(r.TokenType.OpenBrace,r.TokenType.CloseBrace),new i(r.TokenType.OpenBracket,r.TokenType.CloseBracket),new i(r.TokenType.OpenCurly,r.TokenType.CloseCurly)],this.braceStacks=[new o,new o,new o]}get count(){let e=0;for(const t of this.braceStacks)e+=t.length;return e}isOpened(e){for(let t=0;t<this.bracePairs.length;t+=1){const n=this.bracePairs[t];if(n.openBrace===e||n.closeBrace===e)return this.braceStacks[t].length>0}return!1}countBrace(e){for(let t=0;t<this.bracePairs.length;t+=1){const n=this.bracePairs[t];if(n.openBrace===e.type)return this.braceStacks[t].push(e),!0;if(n.closeBrace===e.type)return this.braceStacks[t].length>0&&this.braceStacks[t].pop(),!0}return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(89);t.TextBuilder=class{constructor(){this.segments=[]}getText(){return this.isLastWhiteSpace()&&this.segments.pop(),this.segments.join("")}softAppendSpace(e=1){if(0!==this.segments.length){this.isLastWhiteSpace()&&(e-=1);for(let t=0;t<e;t+=1)this.segments.push(" ")}}append(e){this.segments.push(e)}isLastWhiteSpace(){return this.segments.length>0&&this.isWhitespace(this.segments[this.segments.length-1])}isWhitespace(e){for(let t=0;t<e.length;t+=1)if(!r.isWhiteSpace(e.charCodeAt(t)))return!1;return!0}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(4),s=n(11),a=n(79),c=n(6),u=n(14),l=n(1),d=n(388),h=n(389),p=2;t.WorkspaceSymbols=class{constructor(e){this.serviceContainer=e,this.generators=[],this.outputChannel=this.serviceContainer.get(l.IOutputChannel,s.STANDARD_OUTPUT_CHANNEL),this.commandMgr=this.serviceContainer.get(o.ICommandManager),this.fs=this.serviceContainer.get(c.IFileSystem),this.workspace=this.serviceContainer.get(o.IWorkspaceService),this.processFactory=this.serviceContainer.get(u.IProcessServiceFactory),this.appShell=this.serviceContainer.get(o.IApplicationShell),this.configurationService=this.serviceContainer.get(l.IConfigurationService),this.disposables=[],this.disposables.push(this.outputChannel),this.registerCommands(),this.initializeGenerators(),i.languages.registerWorkspaceSymbolProvider(new h.WorkspaceSymbolProvider(this.fs,this.commandMgr,this.generators)),this.disposables.push(this.workspace.onDidChangeWorkspaceFolders(()=>this.initializeGenerators()))}dispose(){this.disposables.forEach(e=>e.dispose())}initializeGenerators(){for(;this.generators.length>0;)this.generators.shift().dispose();Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.forEach(e=>{this.generators.push(new d.Generator(e.uri,this.outputChannel,this.appShell,this.fs,this.processFactory,this.configurationService))})}registerCommands(){this.disposables.push(this.commandMgr.registerCommand(s.Commands.Build_Workspace_Symbols,(e=!0,t)=>r(this,void 0,void 0,function*(){const n=this.buildWorkspaceSymbols(e,t);return Promise.all(n)})))}buildWorkspaceSymbols(e=!0,t){if(t&&t.isCancellationRequested)return[];if(0===this.generators.length)return[];let n,i;return this.generators.map(o=>r(this,void 0,void 0,function*(){if(!o.enabled)return;const r=yield this.fs.fileExists(o.tagFilePath);if(e||!r)for(let e=0;e<p;e+=1){try{return void(yield o.generateWorkspaceTags())}catch(e){if(!a.isNotInstalledError(e))return void this.outputChannel.show()}if(!t||t.isCancellationRequested)return;if(n)i=yield n;else{{const e=this.serviceContainer.get(l.IInstaller);n=e.promptToInstall(l.Product.ctags,this.workspace.workspaceFolders[0].uri),i=yield n}if(i!==l.InstallerResponse.Installed||!t||t.isCancellationRequested)return}}}))}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),s=n(45),a=n(7),c=n(9);class u{constructor(e,t,n,r,i,a){this.workspaceFolder=e,this.output=t,this.appShell=n,this.fs=r,this.processServiceFactory=i,this.disposables=[],this.optionsFile=o.join(s.EXTENSION_ROOT_DIR,"resources","ctagOptions"),this.pythonSettings=a.getSettings(e)}get tagFilePath(){return this.pythonSettings.workspaceSymbols.tagFilePath}get enabled(){return this.pythonSettings.workspaceSymbols.enabled}dispose(){this.disposables.forEach(e=>e.dispose())}generateWorkspaceTags(){return i(this,void 0,void 0,function*(){if(this.pythonSettings.workspaceSymbols.enabled)return this.generateTags({directory:this.workspaceFolder.fsPath})})}buildCmdArgs(){const e=this.pythonSettings.workspaceSymbols.exclusionPatterns,t=0===e.length?[]:e.map(e=>`--exclude=${e}`);return[`--options=${this.optionsFile}`,"--languages=Python"].concat(t)}generateTags(e){return i(this,void 0,void 0,function*(){const t=o.normalize(this.pythonSettings.workspaceSymbols.tagFilePath),n=this.pythonSettings.workspaceSymbols.ctagsPath,r=this.buildCmdArgs();let s=t;e.file&&e.file.length>0&&(e.directory=o.dirname(e.file)),o.dirname(s)===e.directory&&(s=o.basename(s));const a=o.dirname(s);(yield this.fs.directoryExists(a))||(yield this.fs.createDirectory(a)),r.push("-o",s,"."),this.output.appendLine(`${"-".repeat(10)}Generating Tags${"-".repeat(10)}`),this.output.appendLine(`${n} ${r.join(" ")}`);const c=new Promise((t,o)=>i(this,void 0,void 0,function*(){try{const i=(yield this.processServiceFactory.create()).execObservable(n,r,{cwd:e.directory});let s="";i.out.subscribe(e=>{"stderr"===e.source&&(s+=e.out),this.output.append(e.out)},o,()=>{s.length>0?o(new Error(s)):t()})}catch(e){o(e)}}));this.appShell.setStatusBarMessage("Generating Tags",c),yield c})}}r([a.captureTelemetry(c.EventName.WORKSPACE_SYMBOLS_BUILD)],u.prototype,"generateTags",null),t.Generator=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(82),s=n(2),a=n(11),c=n(7),u=n(9),l=n(396);class d{constructor(e,t,n){this.fs=e,this.commands=t,this.tagGenerators=n}provideWorkspaceSymbols(e,t){return i(this,void 0,void 0,function*(){if(0===this.tagGenerators.length)return[];(yield Promise.all(this.tagGenerators.map(e=>this.fs.fileExists(e.tagFilePath)))).filter(e=>e).length!==this.tagGenerators.length&&(yield this.commands.executeCommand(a.Commands.Build_Workspace_Symbols,!0,t));const n=[];yield Promise.all(this.tagGenerators.map(e=>i(this,void 0,void 0,function*(){(yield this.fs.fileExists(e.tagFilePath))&&n.push(e)})));const r=n.filter(e=>void 0!==e&&e.enabled).map(n=>i(this,void 0,void 0,function*(){const r=yield l.parseTags(n.workspaceFolder.fsPath,n.tagFilePath,e,t);return Array.isArray(r)?r.map(e=>new s.SymbolInformation(e.symbolName,e.symbolKind,"",new s.Location(s.Uri.file(e.fileName),e.position))):[]})),c=yield Promise.all(r);return o(c)})}}r([c.captureTelemetry(u.EventName.WORKSPACE_SYMBOLS_GO_TO)],d.prototype,"provideWorkspaceSymbols",null),t.WorkspaceSymbolProvider=d},function(e,t,n){var r=n(391),i=n(392);e.exports=function e(t,n,o,s,a){var c=-1,u=t.length;for(o||(o=i),a||(a=[]);++c<u;){var l=t[c];n>0&&o(l)?n>1?e(l,n-1,o,s,a):r(a,l):s||(a[a.length]=l)}return a}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(117),i=n(393),o=n(395),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(s&&e&&e[s])}},function(e,t,n){var r=n(394),i=n(118),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=c},function(e,t,n){var r=n(175),i=n(118),o="[object Arguments]";e.exports=function(e){return i(e)&&r(e)==o}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(2),o=n(91),s=n(398),a=n(186),c=n(399),u=/\tkind:file\tline:\d+$/g,l='(?<name>\\w+)\\t(?<file>.*)\\t\\/\\^(?<code>.*)\\$\\/;"\\tkind:(?<type>\\w+)\\tline:(?<line>\\d+)$';function d(e,t){const n=a(t,"g").exec(e);return null!==n?n.groups():null}t.matchNamedRegEx=d;const h=new Map;h.set("_array",i.SymbolKind.Array),h.set("_boolean",i.SymbolKind.Boolean),h.set("_class",i.SymbolKind.Class),h.set("_classes",i.SymbolKind.Class),h.set("_constant",i.SymbolKind.Constant),h.set("_constants",i.SymbolKind.Constant),h.set("_constructor",i.SymbolKind.Constructor),h.set("_enum",i.SymbolKind.Enum),h.set("_enums",i.SymbolKind.Enum),h.set("_enumeration",i.SymbolKind.Enum),h.set("_enumerations",i.SymbolKind.Enum),h.set("_field",i.SymbolKind.Field),h.set("_fields",i.SymbolKind.Field),h.set("_file",i.SymbolKind.File),h.set("_files",i.SymbolKind.File),h.set("_function",i.SymbolKind.Function),h.set("_functions",i.SymbolKind.Function),h.set("_member",i.SymbolKind.Function),h.set("_interface",i.SymbolKind.Interface),h.set("_interfaces",i.SymbolKind.Interface),h.set("_key",i.SymbolKind.Key),h.set("_keys",i.SymbolKind.Key),h.set("_method",i.SymbolKind.Method),h.set("_methods",i.SymbolKind.Method),h.set("_module",i.SymbolKind.Module),h.set("_modules",i.SymbolKind.Module),h.set("_namespace",i.SymbolKind.Namespace),h.set("_namespaces",i.SymbolKind.Namespace),h.set("_number",i.SymbolKind.Number),h.set("_numbers",i.SymbolKind.Number),h.set("_null",i.SymbolKind.Null),h.set("_object",i.SymbolKind.Object),h.set("_package",i.SymbolKind.Package),h.set("_packages",i.SymbolKind.Package),h.set("_property",i.SymbolKind.Property),h.set("_properties",i.SymbolKind.Property),h.set("_objects",i.SymbolKind.Object),h.set("_string",i.SymbolKind.String),h.set("_variable",i.SymbolKind.Variable),h.set("_variables",i.SymbolKind.Variable),h.set("_projects",i.SymbolKind.Package),h.set("_defines",i.SymbolKind.Module),h.set("_labels",i.SymbolKind.Interface),h.set("_macros",i.SymbolKind.Function),h.set("_types (structs and records)",i.SymbolKind.Class),h.set("_subroutine",i.SymbolKind.Method),h.set("_subroutines",i.SymbolKind.Method),h.set("_types",i.SymbolKind.Class),h.set("_programs",i.SymbolKind.Class),h.set("_Object's method",i.SymbolKind.Method),h.set("_Module or functor",i.SymbolKind.Module),h.set("_Global variable",i.SymbolKind.Variable),h.set("_Type name",i.SymbolKind.Class),h.set("_A function",i.SymbolKind.Function),h.set("_A constructor",i.SymbolKind.Constructor),h.set("_An exception",i.SymbolKind.Class),h.set("_A 'structure' field",i.SymbolKind.Field),h.set("_procedure",i.SymbolKind.Function),h.set("_procedures",i.SymbolKind.Function),h.set("_constant definitions",i.SymbolKind.Constant),h.set("_javascript functions",i.SymbolKind.Function),h.set("_singleton methods",i.SymbolKind.Method);const p={};h.forEach((e,t)=>{p[t.substring(1)]=e}),Object.keys(p).forEach(e=>{h.set(e,p[e])}),t.parseTags=function(e,t,n,a,p=200){return o.fsExistsAsync(t).then(o=>o?new Promise((o,p)=>{const f=new s(t);let g=0;const m=[];f.on("error",e=>{p(e)}),f.on("line",t=>{if(g+=1,a.isCancellationRequested)return void f.close();const o=function(e,t,n){if(u.test(t))return;const o=d(t,l);if(!o)return;if(!c.test(n,o.name))return;let s=o.file;r.isAbsolute(s)||(s=r.resolve(e,".vscode",s));const a=h.get(o.type)||i.SymbolKind.Null;return{fileName:s,code:o.code,position:new i.Position(Number(o.line)-1,0),symbolName:o.name,symbolKind:a}}(e,t,n);o&&m.push(o),m.length>=100&&f.close()}),f.on("end",()=>{o(m)})}):Promise.resolve([]))}},function(e,t,n){"use strict";var r="win32"===process.platform,i=r?/[^:]\\$/:/.\/$/;e.exports=function(){var e;return e=r?process.env.TEMP||process.env.TMP||(process.env.SystemRoot||process.env.windir)+"\\temp":process.env.TMPDIR||process.env.TMP||process.env.TEMP||"/tmp",i.test(e)&&(e=e.slice(0,-1)),e}},function(e,t,n){var r=n(68),i=n(185).StringDecoder,o=n(3),s=n(18),a=n(69);void 0===global.setImmediate&&(setImmediate=process.nextTick);var c=function(e,t){var n=this;this._encoding=t&&t.encoding||"utf8",e instanceof r.Readable?this._readStream=e:(this._readStream=null,this._filepath=o.normalize(e),this._streamOptions={encoding:this._encoding},t&&t.start&&(this._streamOptions.start=t.start),t&&t.end&&(this._streamOptions.end=t.end)),this._skipEmptyLines=t&&t.skipEmptyLines||!1,this._lines=[],this._lineFragment="",this._paused=!1,this._end=!1,this._ended=!1,this.decoder=new i(this._encoding),a.EventEmitter.call(this),setImmediate(function(){n._initStream()})};(c.prototype=Object.create(a.EventEmitter.prototype,{constructor:{value:c,enumerable:!1}}))._initStream=function(){var e=this,t=this._readStream?this._readStream:s.createReadStream(this._filepath,this._streamOptions);t.on("error",function(t){e.emit("error",t)}),t.on("open",function(){e.emit("open")}),t.on("data",function(t){e._readStream.pause();var n=t;t instanceof Buffer&&(n=e.decoder.write(t)),e._lines=e._lines.concat(n.split(/(?:\n|\r\n|\r)/g)),e._lines[0]=e._lineFragment+e._lines[0],e._lineFragment=e._lines.pop()||"",setImmediate(function(){e._nextLine()})}),t.on("end",function(){e._end=!0,setImmediate(function(){e._nextLine()})}),this._readStream=t},c.prototype._nextLine=function(){var e,t=this;this._paused||(0!==this._lines.length?(e=this._lines.shift(),(!this._skipEmptyLines||e.length>0)&&this.emit("line",e),setImmediate(function(){this._paused||t._nextLine()})):this._end?(this._lineFragment&&(this.emit("line",this._lineFragment),this._lineFragment=""),this._paused||this.end()):this._readStream.resume())},c.prototype.pause=function(){this._paused=!0},c.prototype.resume=function(){var e=this;this._paused=!1,setImmediate(function(){e._nextLine()})},c.prototype.end=function(){this._ended||(this._ended=!0,this.emit("end"))},c.prototype.close=function(){var e=this;this._readStream.destroy(),this._end=!0,this._lines=[],setImmediate(function(){e._nextLine()})},e.exports=c},function(e,t,n){!function(){var t={};e.exports=t,t.simpleFilter=function(e,n){return n.filter(function(n){return t.test(e,n)})},t.test=function(e,n){return null!==t.match(e,n)},t.match=function(e,t,n){n=n||{};var r,i=0,o=[],s=t.length,a=0,c=0,u=n.pre||"",l=n.post||"",d=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var h=0;h<s;h++)r=t[h],d[h]===e[i]?(r=u+r+l,i+=1,c+=1+c):c=0,a+=c,o[o.length]=r;return i===e.length?(a=d===e?1/0:a,{rendered:o.join(""),score:a}):null},t.filter=function(e,n,r){return n&&0!==n.length?"string"!=typeof e?n:(r=r||{},n.reduce(function(n,i,o,s){var a=i;r.extract&&(a=r.extract(i));var c=t.match(e,a,r);return null!=c&&(n[n.length]={string:c.rendered,score:c.score,index:o,original:i}),n},[]).sort(function(e,t){var n=t.score-e.score;return n||e.index-t.index})):[]}}()},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(4),u=n(12),l=n(6),d=n(1),h=n(45),p=n(27);let f=class{constructor(e,t,n,r,i,o){this.manager=e,this.workspace=t,this.fs=n,this.lsDownloader=r,this.languageServerFolderService=i,this.configurationService=o}activate(){return o(this,void 0,void 0,function*(){const e=this.workspace.hasWorkspaceFolders?this.workspace.workspaceFolders[0].uri:void 0;yield this.ensureLanguageServerIsAvailable(e),yield this.manager.start(e)})}dispose(){this.manager.dispose()}ensureLanguageServerIsAvailable(e){return o(this,void 0,void 0,function*(){if(!this.configurationService.getSettings(e).downloadLanguageServer)return;const t=yield this.languageServerFolderService.getLanguageServerFolderName(),n=a.join(h.EXTENSION_ROOT_DIR,t),r=a.join(n,"mscorlib.dll");(yield this.fs.fileExists(r))||(yield this.lsDownloader.downloadLanguageServer(n))})}};r([u.traceDecorators.error("Failed to activate language server")],f.prototype,"activate",null),r([u.traceDecorators.error("Failed to ensure language server is available")],f.prototype,"ensureLanguageServerIsAvailable",null),f=r([s.injectable(),i(0,s.inject(p.ILanguageServerManager)),i(1,s.inject(c.IWorkspaceService)),i(2,s.inject(l.IFileSystem)),i(3,s.inject(p.ILanguageServerDownloader)),i(4,s.inject(p.ILanguageServerFolderService)),i(5,s.inject(d.IConfigurationService))],f),t.LanguageServerExtensionActivator=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(4),l=n(11),d=n(12),h=n(1),p=n(56),f=n(70),g=n(10),m=n(27);let y=class{constructor(e,t,n,r,i,o,s,a,u,l){this.context=e,this.envVarsProvider=t,this.configuration=n,this.workspace=r,this.surveyBanner=i,this.interpreterService=o,this.interpreterDataService=s,this.output=a,this.pathUtils=u,this.languageServerFolderService=l,this.excludedFiles=[],this.typeshedPaths=[],this.disposables=[],this.interpreterHash="",this.languageServerFolder="",this.didChange=new c.EventEmitter}initialize(e){return o(this,void 0,void 0,function*(){this.resource=e,this.languageServerFolder=yield this.languageServerFolderService.getLanguageServerFolderName();let t=this.workspace.onDidChangeConfiguration(this.onSettingsChangedHandler,this);this.disposables.push(t),t=this.interpreterService.onDidChangeInterpreter(()=>this.onSettingsChangedHandler(),this),this.disposables.push(t)})}get onDidChange(){return this.didChange.event}dispose(){this.disposables.forEach(e=>e.dispose()),this.didChange.dispose()}getAnalysisOptions(){return o(this,void 0,void 0,function*(){const e={};let t,n="";try{t=yield this.interpreterDataService.getInterpreterData(this.resource)}catch(e){d.traceError("Unable to determine path to the Python interpreter. IntelliSense will be limited.",e)}this.interpreterHash=t?t.hash:"",t&&(n=a.dirname(t.path),e.InterpreterPath=t.path,e.Version=t.version),e.DatabasePath=a.join(this.context.extensionPath,this.languageServerFolder);let r=t?t.searchPaths.split(a.delimiter):[];const i=this.configuration.getSettings();if(i.autoComplete){const e=i.autoComplete.extraPaths;e&&e.length>0&&r.push(...e)}const o=yield this.envVarsProvider.getEnvironmentVariables();if(o.PYTHONPATH&&o.PYTHONPATH.length>0){const e=o.PYTHONPATH.split(this.pathUtils.delimiter).filter(e=>e.trim().length>0);r.push(...e)}return r.push(n),r=r.map(e=>a.normalize(e)),this.excludedFiles=this.getExcludedFiles(),this.typeshedPaths=this.getTypeshedPaths(),{documentSelector:l.PYTHON,synchronize:{configurationSection:l.PYTHON_LANGUAGE},outputChannel:this.output,initializationOptions:{interpreter:{properties:e},displayOptions:{preferredFormat:"markdown",trimDocumentationLines:!1,maxDocumentationLineLength:0,trimDocumentationText:!1,maxDocumentationTextLength:0},searchPaths:r,typeStubSearchPaths:this.typeshedPaths,excludeFiles:this.excludedFiles,testEnvironment:l.isTestExecution(),analysisUpdates:!0,traceLogging:!0,asyncStartup:!0},middleware:{provideCompletionItem:(e,t,n,r,i)=>(this.surveyBanner.showBanner().ignoreErrors(),i(e,t,n,r))}}})}getExcludedFiles(){const e=["**/Lib/**","**/site-packages/**"];return this.getVsCodeExcludeSection("search.exclude",e),this.getVsCodeExcludeSection("files.exclude",e),this.getVsCodeExcludeSection("files.watcherExclude",e),this.getPythonExcludeSection(e),e}getVsCodeExcludeSection(e,t){const n=this.workspace.getConfiguration(e);n&&Object.keys(n).filter(e=>(e.indexOf("*")>=0||e.indexOf("/")>=0)&&n[e]).forEach(e=>t.push(e))}getPythonExcludeSection(e){const t=this.configuration.getSettings(this.resource),n=t&&t.linting?t.linting.ignorePatterns:void 0;n&&Array.isArray(n)&&n.filter(e=>e&&e.length>0).forEach(t=>e.push(t))}getTypeshedPaths(){const e=this.configuration.getSettings(this.resource);return e.analysis.typeshedPaths&&e.analysis.typeshedPaths.length>0?e.analysis.typeshedPaths:[a.join(this.context.extensionPath,this.languageServerFolder,"Typeshed")]}onSettingsChangedHandler(e){return o(this,void 0,void 0,function*(){e&&!e.affectsConfiguration("python",this.resource)||this.onSettingsChanged()})}onSettingsChanged(){this.notifyIfSettingsChanged().ignoreErrors()}notifyIfSettingsChanged(){return o(this,void 0,void 0,function*(){const e=yield this.interpreterDataService.getInterpreterData(this.resource);if(!e||e.hash!==this.interpreterHash)return this.interpreterHash=e?e.hash:"",void this.didChange.fire();const t=this.getExcludedFiles();yield this.notifyIfValuesHaveChanged(this.excludedFiles,t);const n=this.getTypeshedPaths();yield this.notifyIfValuesHaveChanged(this.typeshedPaths,n)})}notifyIfValuesHaveChanged(e,t){return o(this,void 0,void 0,function*(){if(t.length===e.length){for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return void this.didChange.fire()}else this.didChange.fire()})}};r([d.traceDecorators.error("Failed to get analysis options")],y.prototype,"getAnalysisOptions",null),r([p.debounce(1e3)],y.prototype,"onSettingsChanged",null),r([d.traceDecorators.verbose("Changes in python settings detected in analysis options")],y.prototype,"notifyIfSettingsChanged",null),y=r([s.injectable(),i(0,s.inject(h.IExtensionContext)),i(1,s.inject(f.IEnvironmentVariablesProvider)),i(2,s.inject(h.IConfigurationService)),i(3,s.inject(u.IWorkspaceService)),i(4,s.inject(h.IPythonExtensionBanner)),i(4,s.named(h.BANNER_NAME_PROPOSE_LS)),i(5,s.inject(g.IInterpreterService)),i(6,s.inject(m.IInterpreterDataService)),i(7,s.inject(h.IOutputChannel)),i(7,s.named(l.STANDARD_OUTPUT_CHANNEL)),i(8,s.inject(h.IPathUtils)),i(9,s.inject(m.ILanguageServerFolderService))],y),t.LanguageServerAnalysisOptions=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(1),c=n(5);let u=class{shouldLookForNewLanguageServer(e){return o(this,void 0,void 0,function*(){return!0})}};u=r([s.injectable()],u),t.DownloadDailyChannelRule=u;let l=class{shouldLookForNewLanguageServer(e){return o(this,void 0,void 0,function*(){return!e})}};l=r([s.injectable()],l),t.DownloadStableChannelRule=l;let d=class{constructor(e){this.serviceContainer=e}shouldLookForNewLanguageServer(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.get(a.IPersistentStateFactory).createGlobalPersistentState("LS.LAST.CHECK.TIME",!0,864e5);return t.value?(yield t.updateValue(!1),!0):!e||t.value})}};d=r([s.injectable(),i(0,s.inject(c.IServiceContainer))],d),t.DownloadBetaChannelRule=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(4),l=n(11);n(8);const d=n(6),h=n(1),p=n(16),f=n(13),g=n(36),m=n(7),y=n(9),v=n(27);let b=class{constructor(e,t,n,r,i,o){this.platformData=e,this.output=t,this.httpClient=n,this.lsFolderService=r,this.appShell=i,this.fs=o}getDownloadInfo(){return o(this,void 0,void 0,function*(){return this.lsFolderService.getLatestLanguageServerVersion().then(e=>e)})}downloadLanguageServer(e){return o(this,void 0,void 0,function*(){const t=yield this.getDownloadInfo(),n=t.uri,r=t.version.raw,i=new g.StopWatch;let o=!0,s="";try{s=yield this.downloadFile(n,"Downloading Microsoft Python Language Server... ")}catch(e){throw this.output.appendLine(f.LanguageService.downloadFailedOutputMessage()),this.output.appendLine(e),o=!1,this.showMessageAndOptionallyShowOutput(f.LanguageService.lsFailedToDownload()).ignoreErrors(),m.sendTelemetryEvent(y.EventName.PYTHON_LANGUAGE_SERVER_ERROR,void 0,{error:"Failed to download (platform)"},e),new Error(e)}finally{m.sendTelemetryEvent(y.EventName.PYTHON_LANGUAGE_SERVER_DOWNLOADED,i.elapsedTime,{success:o,lsVersion:r})}i.reset();try{yield this.unpackArchive(e,s)}catch(e){throw this.output.appendLine(f.LanguageService.extractionFailedOutputMessage()),this.output.appendLine(e),o=!1,this.showMessageAndOptionallyShowOutput(f.LanguageService.lsFailedToExtract()).ignoreErrors(),m.sendTelemetryEvent(y.EventName.PYTHON_LANGUAGE_SERVER_ERROR,void 0,{error:"Failed to extract (platform)"},e),new Error(e)}finally{m.sendTelemetryEvent(y.EventName.PYTHON_LANGUAGE_SERVER_EXTRACTED,i.elapsedTime,{success:o,lsVersion:r}),yield this.fs.deleteFile(s)}})}showMessageAndOptionallyShowOutput(e){return o(this,void 0,void 0,function*(){(yield this.appShell.showErrorMessage(e,f.Common.openOutputPanel()))===f.Common.openOutputPanel()&&this.output.show(!0)})}downloadFile(e,t){return o(this,void 0,void 0,function*(){this.output.append(`Downloading ${e}... `);const r=yield this.fs.createTemporaryFile(".nupkg"),i=p.createDeferred(),s=this.fs.createWriteStream(r.filePath);return s.on("finish",()=>{s.close()}).on("error",e=>{r.dispose(),i.reject(e)}),yield c.window.withProgress({location:c.ProgressLocation.Window},r=>o(this,void 0,void 0,function*(){const o=yield this.httpClient.downloadFile(e);return o.on("response",t=>{if(200!==t.statusCode){const n=new Error(`Failed with status ${t.statusCode}, ${t.statusMessage}, Uri ${e}`);throw i.reject(n),n}}),n(404)(o).on("progress",e=>{const n=Math.round(e.size.transferred/1024),i=Math.round(e.size.total/1024),o=Math.round(100*e.percent);r.report({message:`${t}${n} of ${i} KB (${o}%)`})}).on("error",e=>{i.reject(e)}).on("end",()=>{this.output.appendLine(f.LanguageService.extractionCompletedOutputMessage()),i.resolve()}).pipe(s),i.promise})),r.filePath})}unpackArchive(e,t){return o(this,void 0,void 0,function*(){this.output.append("Unpacking archive... ");const r=p.createDeferred();yield c.window.withProgress({location:c.ProgressLocation.Window},i=>{const s=new(n(187))({file:t,storeEntries:!0});let a=0,c=0;return s.on("ready",()=>o(this,void 0,void 0,function*(){a=s.entriesCount,(yield this.fs.directoryExists(e))||(yield this.fs.createDirectory(e)),s.extract(null,e,e=>{e?r.reject(e):r.resolve(),s.close()})})).on("extract",()=>{c+=1,i.report({message:`Extracting files... ${Math.round(100*c/a)}%`})}).on("error",e=>{r.reject(e)}),r.promise});const i=a.join(e,this.platformData.engineExecutableName);yield this.fs.chmod(i,"0764"),this.output.appendLine(f.LanguageService.extractionDoneOutputMessage())})}};b=r([s.injectable(),i(0,s.inject(v.IPlatformData)),i(1,s.inject(h.IOutputChannel)),i(1,s.named(l.STANDARD_OUTPUT_CHANNEL)),i(2,s.inject(v.IHttpClient)),i(3,s.inject(v.ILanguageServerFolderService)),i(4,s.inject(u.IApplicationShell)),i(5,s.inject(d.IFileSystem))],b),t.LanguageServerDownloader=b},function(e,t){e.exports=require("./node_modules/request-progress")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(61),a=n(18),c=n(0),u=n(3),l=n(4);n(8);const d=n(6),h=n(14),p=n(1),f=n(16),g=n(13),m=n(5);let y=class{constructor(e,t){this.context=e,this.serviceContainer=t}getInterpreterData(e){return o(this,void 0,void 0,function*(){const t=yield this.serviceContainer.get(h.IPythonExecutionFactory).create({resource:e}),n=yield t.getExecutablePath();if(0===n.length)return;const r=`InterpreterData-${n}`;let i=this.context.globalState.get(r),o=!1;if(i)if(1!==i.dataVersion)o=!0;else{o=(yield this.getInterpreterHash(n))!==i.hash}return o||!i?(i=yield this.getInterpreterDataFromPython(t,n),this.context.globalState.update(n,i)):this.verifySearchPaths(i.searchPaths,n,t),i})}getInterpreterHash(e){const t=this.serviceContainer.get(d.IPlatformService),n=u.join(u.dirname(e),t.isWindows?"python.exe":"python"),r=f.createDeferred();return a.lstat(n,(e,t)=>{if(e)r.resolve("");else{const e=s.createHash("sha512").update(`${t.ctime}-${t.mtime}`).digest("hex");r.resolve(e)}}),r.promise}getInterpreterDataFromPython(e,t){return o(this,void 0,void 0,function*(){const n=yield e.exec(["-c","import sys; print(sys.version_info)"],{});if(!n.stdout)throw Error("Unable to determine Python interpreter version and system prefix.");const r=n.stdout.splitLines({removeEmptyEntries:!0,trim:!0});if(!r||r.length<1)throw Error("Unable to parse version and and system prefix from the Python interpreter output.");const i=r[0].match(/major=(\d*?),/),o=r[0].match(/minor=(\d*?),/);if(!i||i.length<2||!o||o.length<2)throw Error("Unable to parse interpreter version.");const s=yield this.getInterpreterHash(t),a=yield this.getSearchPaths(e);return new class{constructor(e,t,n,r,i){this.dataVersion=e,this.path=t,this.version=n,this.searchPaths=r,this.hash=i}}(1,t,`${i[1]}.${o[1]}`,a,s)})}getSearchPaths(e){return o(this,void 0,void 0,function*(){const t=yield e.exec(["-c",'import sys; import os; print(sys.path + os.getenv("PYTHONPATH", "").split(os.pathsep));'],{});if(!t.stdout)throw Error("Unable to determine Python interpreter search paths.");return t.stdout.split(",").filter(e=>this.isValidPath(e)).map(e=>this.pathCleanup(e)).join(";")})}pathCleanup(e){return"'"===(e=e.trim())[0]&&(e=e.substr(1)),"]"===e[e.length-1]&&(e=e.substr(0,e.length-1)),"'"===e[e.length-1]&&(e=e.substr(0,e.length-1)),e}isValidPath(e){return e.length>0&&"["!==e[0]}verifySearchPaths(e,t,n){this.getSearchPaths(n).then(n=>o(this,void 0,void 0,function*(){if(n!==e){this.context.globalState.update(t,void 0),yield this.serviceContainer.get(l.IApplicationShell).showWarningMessage(g.LanguageService.reloadVSCodeIfSeachPathHasChanged())}})).ignoreErrors()}};y=r([c.injectable(),i(0,c.inject(p.IExtensionContext)),i(1,c.inject(m.IServiceContainer))],y),t.InterpreterDataService=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(11),u=n(1),l=n(27);let d=class{constructor(e,t,n){this.downloadedFactory=e,this.simpleFactory=t,this.configurationService=n}createLanguageClient(e,t){return o(this,void 0,void 0,function*(){return(this.configurationService.getSettings(e).downloadLanguageServer?this.downloadedFactory:this.simpleFactory).createLanguageClient(e,t)})}};d=r([s.injectable(),i(0,s.inject(l.ILanguageClientFactory)),i(0,s.named(l.LanguageClientFactory.downloaded)),i(1,s.inject(l.ILanguageClientFactory)),i(1,s.named(l.LanguageClientFactory.simple)),i(2,s.inject(u.IConfigurationService))],d),t.BaseLanguageClientFactory=d;let h=class{constructor(e,t){this.platformData=e,this.languageServerFolderService=t}createLanguageClient(e,t){return o(this,void 0,void 0,function*(){const e=yield this.languageServerFolderService.getLanguageServerFolderName(),r=a.join(c.EXTENSION_ROOT_DIR,e,this.platformData.engineExecutableName),i={stdio:"pipe"},o={run:{command:r,rgs:[],options:i},debug:{command:r,args:["--debug"],options:i}};return new(n(188).LanguageClient)(c.PYTHON_LANGUAGE,"Python Tools",o,t)})}};h=r([s.injectable(),i(0,s.inject(l.IPlatformData)),i(1,s.inject(l.ILanguageServerFolderService))],h),t.DownloadedLanguageClientFactory=h;let p=class{constructor(e,t){this.platformData=e,this.languageServerFolderService=t}createLanguageClient(e,t){return o(this,void 0,void 0,function*(){const e=yield this.languageServerFolderService.getLanguageServerFolderName(),r={stdio:"pipe"},i=a.join(c.EXTENSION_ROOT_DIR,e,this.platformData.engineDllName),o={run:{command:"dotnet",args:[i],options:r},debug:{command:"dotnet",args:[i,"--debug"],options:r}};return new(n(188).LanguageClient)(c.PYTHON_LANGUAGE,"Python Tools",o,t)})}};p=r([s.injectable(),i(0,s.inject(l.IPlatformData)),i(1,s.inject(l.ILanguageServerFolderService))],p),t.SimpleLanguageClientFactory=p},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(83);!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(i=t.ErrorCodes||(t.ErrorCodes={}));var s=function(e){function t(n,r,s){var a=e.call(this,r)||this;return a.code=o.number(n)?n:i.UnknownErrorCode,a.data=s,Object.setPrototypeOf(a,t.prototype),a}return r(t,e),t.prototype.toJson=function(){return{code:this.code,message:this.message,data:this.data}},t}(Error);t.ResponseError=s;var a=function(){function e(e,t){this._method=e,this._numberOfParams=t}return Object.defineProperty(e.prototype,"method",{get:function(){return this._method},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfParams",{get:function(){return this._numberOfParams},enumerable:!0,configurable:!0}),e}();t.AbstractMessageType=a;var c=function(e){function t(t){var n=e.call(this,t,0)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType0=c;var u=function(e){function t(t){var n=e.call(this,t,1)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType=u;var l=function(e){function t(t){var n=e.call(this,t,1)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType1=l;var d=function(e){function t(t){var n=e.call(this,t,2)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType2=d;var h=function(e){function t(t){var n=e.call(this,t,3)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType3=h;var p=function(e){function t(t){var n=e.call(this,t,4)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType4=p;var f=function(e){function t(t){var n=e.call(this,t,5)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType5=f;var g=function(e){function t(t){var n=e.call(this,t,6)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType6=g;var m=function(e){function t(t){var n=e.call(this,t,7)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType7=m;var y=function(e){function t(t){var n=e.call(this,t,8)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType8=y;var v=function(e){function t(t){var n=e.call(this,t,9)||this;return n._=void 0,n}return r(t,e),t}(a);t.RequestType9=v;var b=function(e){function t(t){var n=e.call(this,t,1)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType=b;var S=function(e){function t(t){var n=e.call(this,t,0)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType0=S;var _=function(e){function t(t){var n=e.call(this,t,1)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType1=_;var w=function(e){function t(t){var n=e.call(this,t,2)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType2=w;var P=function(e){function t(t){var n=e.call(this,t,3)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType3=P;var C=function(e){function t(t){var n=e.call(this,t,4)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType4=C;var T=function(e){function t(t){var n=e.call(this,t,5)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType5=T;var I=function(e){function t(t){var n=e.call(this,t,6)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType6=I;var E=function(e){function t(t){var n=e.call(this,t,7)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType7=E;var O=function(e){function t(t){var n=e.call(this,t,8)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType8=O;var R=function(e){function t(t){var n=e.call(this,t,9)||this;return n._=void 0,n}return r(t,e),t}(a);t.NotificationType9=R,t.isRequestMessage=function(e){var t=e;return t&&o.string(t.method)&&(o.string(t.id)||o.number(t.id))},t.isNotificationMessage=function(e){var t=e;return t&&o.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){var t=e;return t&&(void 0!==t.result||!!t.error)&&(o.string(t.id)||o.number(t.id)||null===t.id)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(92),o=n(83);!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None}),e.is=function(t){var n=t;return n&&(n===e.None||n===e.Cancelled||o.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(r=t.CancellationToken||(t.CancellationToken={}));var s=Object.freeze(function(e,t){var n=setTimeout(e.bind(t),0);return{dispose:function(){clearTimeout(n)}}}),a=function(){function e(){this._isCancelled=!1}return e.prototype.cancel=function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))},Object.defineProperty(e.prototype,"isCancellationRequested",{get:function(){return this._isCancelled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onCancellationRequested",{get:function(){return this._isCancelled?s:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)},enumerable:!0,configurable:!0}),e}(),c=function(){function e(){}return Object.defineProperty(e.prototype,"token",{get:function(){return this._token||(this._token=new a),this._token},enumerable:!0,configurable:!0}),e.prototype.cancel=function(){this._token?this._token.cancel():this._token=r.Cancelled},e.prototype.dispose=function(){this.cancel()},e}();t.CancellationTokenSource=c},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.None=0,e.First=1,e.Last=2}(r=t.Touch||(t.Touch={}));var i=function(){function e(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}return e.prototype.clear=function(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0},e.prototype.isEmpty=function(){return!this._head&&!this._tail},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.get=function(e){var t=this._map.get(e);if(t)return t.value},e.prototype.set=function(e,t,n){void 0===n&&(n=r.None);var i=this._map.get(e);if(i)i.value=t,n!==r.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}},e.prototype.delete=function(e){var t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)},e.prototype.shift=function(){if(this._head||this._tail){if(!this._head||!this._tail)throw new Error("Invalid list");var e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}},e.prototype.forEach=function(e,t){for(var n=this._head;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next},e.prototype.forEachReverse=function(e,t){for(var n=this._tail;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous},e.prototype.values=function(){for(var e=[],t=this._head;t;)e.push(t.value),t=t.next;return e},e.prototype.keys=function(){for(var e=[],t=this._head;t;)e.push(t.key),t=t.next;return e},e.prototype.addItemFirst=function(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e},e.prototype.addItemLast=function(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e},e.prototype.removeItem=function(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{var t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}},e.prototype.touch=function(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===r.First||t===r.Last)if(t===r.First){if(e===this._head)return;var n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===r.Last){if(e===this._tail)return;n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}},e}();t.LinkedMap=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n(17),o=n(61),s=n(93),a=n(122),c=n(123);t.generateRandomPipeName=function(){var e=o.randomBytes(21).toString("hex");return"win32"===process.platform?"\\\\.\\pipe\\vscode-jsonrpc-"+e+"-sock":r.join(i.tmpdir(),"vscode-"+e+".sock")},t.createClientPipeTransport=function(e,t){var n;void 0===t&&(t="utf-8");var r=new Promise(function(e,t){n=e});return new Promise(function(i,o){var u=s.createServer(function(e){u.close(),n([new a.SocketMessageReader(e,t),new c.SocketMessageWriter(e,t)])});u.on("error",o),u.listen(e,function(){u.removeListener("error",o),i({onConnected:function(){return r}})})})},t.createServerPipeTransport=function(e,t){void 0===t&&(t="utf-8");var n=s.createConnection(e);return[new a.SocketMessageReader(n,t),new c.SocketMessageWriter(n,t)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(93),i=n(122),o=n(123);t.createClientSocketTransport=function(e,t){var n;void 0===t&&(t="utf-8");var s=new Promise(function(e,t){n=e});return new Promise(function(a,c){var u=r.createServer(function(e){u.close(),n([new i.SocketMessageReader(e,t),new o.SocketMessageWriter(e,t)])});u.on("error",c),u.listen(e,"127.0.0.1",function(){u.removeListener("error",c),a({onConnected:function(){return s}})})})},t.createServerSocketTransport=function(e,t){void 0===t&&(t="utf-8");var n=r.createConnection(e,"127.0.0.1");return[new i.SocketMessageReader(n,t),new o.SocketMessageWriter(n,t)]}},function(e,t,n){"use strict";var r,i,o,s,a,c,u,l,d,h,p,f,g,m,y;n.r(t),n.d(t,"Position",function(){return r}),n.d(t,"Range",function(){return i}),n.d(t,"Location",function(){return o}),n.d(t,"Color",function(){return s}),n.d(t,"ColorInformation",function(){return a}),n.d(t,"ColorPresentation",function(){return c}),n.d(t,"FoldingRangeKind",function(){return u}),n.d(t,"FoldingRange",function(){return l}),n.d(t,"DiagnosticRelatedInformation",function(){return d}),n.d(t,"DiagnosticSeverity",function(){return h}),n.d(t,"Diagnostic",function(){return p}),n.d(t,"Command",function(){return f}),n.d(t,"TextEdit",function(){return g}),n.d(t,"TextDocumentEdit",function(){return m}),n.d(t,"WorkspaceEdit",function(){return y}),n.d(t,"WorkspaceChange",function(){return F}),n.d(t,"TextDocumentIdentifier",function(){return v}),n.d(t,"VersionedTextDocumentIdentifier",function(){return b}),n.d(t,"TextDocumentItem",function(){return S}),n.d(t,"MarkupKind",function(){return _}),n.d(t,"MarkupContent",function(){return w}),n.d(t,"CompletionItemKind",function(){return P}),n.d(t,"InsertTextFormat",function(){return C}),n.d(t,"CompletionItem",function(){return T}),n.d(t,"CompletionList",function(){return I}),n.d(t,"MarkedString",function(){return E}),n.d(t,"Hover",function(){return O}),n.d(t,"ParameterInformation",function(){return R}),n.d(t,"SignatureInformation",function(){return x}),n.d(t,"DocumentHighlightKind",function(){return k}),n.d(t,"DocumentHighlight",function(){return D}),n.d(t,"SymbolKind",function(){return A}),n.d(t,"SymbolInformation",function(){return j}),n.d(t,"DocumentSymbol",function(){return B}),n.d(t,"CodeActionKind",function(){return M}),n.d(t,"CodeActionContext",function(){return L}),n.d(t,"CodeAction",function(){return W}),n.d(t,"CodeLens",function(){return U}),n.d(t,"FormattingOptions",function(){return H}),n.d(t,"DocumentLink",function(){return V}),n.d(t,"EOL",function(){return K}),n.d(t,"TextDocument",function(){return q}),n.d(t,"TextDocumentSaveReason",function(){return $}),function(e){e.create=function(e,t){return{line:e,character:t}},e.is=function(e){var t=e;return G.objectLiteral(t)&&G.number(t.line)&&G.number(t.character)}}(r||(r={})),function(e){e.create=function(e,t,n,i){if(G.number(e)&&G.number(t)&&G.number(n)&&G.number(i))return{start:r.create(e,t),end:r.create(n,i)};if(r.is(e)&&r.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+i+"]")},e.is=function(e){var t=e;return G.objectLiteral(t)&&r.is(t.start)&&r.is(t.end)}}(i||(i={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return G.defined(t)&&i.is(t.range)&&(G.string(t.uri)||G.undefined(t.uri))}}(o||(o={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return G.number(t.red)&&G.number(t.green)&&G.number(t.blue)&&G.number(t.alpha)}}(s||(s={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return i.is(t.range)&&s.is(t.color)}}(a||(a={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return G.string(t.label)&&(G.undefined(t.textEdit)||g.is(t))&&(G.undefined(t.additionalTextEdits)||G.typedArray(t.additionalTextEdits,g.is))}}(c||(c={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(u||(u={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return G.defined(n)&&(o.startCharacter=n),G.defined(r)&&(o.endCharacter=r),G.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return G.number(t.startLine)&&G.number(t.startLine)&&(G.undefined(t.startCharacter)||G.number(t.startCharacter))&&(G.undefined(t.endCharacter)||G.number(t.endCharacter))&&(G.undefined(t.kind)||G.string(t.kind))}}(l||(l={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return G.defined(t)&&o.is(t.location)&&G.string(t.message)}}(d||(d={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(h||(h={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return G.defined(n)&&(s.severity=n),G.defined(r)&&(s.code=r),G.defined(i)&&(s.source=i),G.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t=e;return G.defined(t)&&i.is(t.range)&&G.string(t.message)&&(G.number(t.severity)||G.undefined(t.severity))&&(G.number(t.code)||G.string(t.code)||G.undefined(t.code))&&(G.string(t.source)||G.undefined(t.source))&&(G.undefined(t.relatedInformation)||G.typedArray(t.relatedInformation,d.is))}}(p||(p={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return G.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return G.defined(t)&&G.string(t.title)&&G.string(t.command)}}(f||(f={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return G.objectLiteral(t)&&G.string(t.newText)&&i.is(t.range)}}(g||(g={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return G.defined(t)&&b.is(t.textDocument)&&Array.isArray(t.edits)}}(m||(m={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||G.typedArray(t.documentChanges,m.is))}}(y||(y={}));var v,b,S,_,w,P,C,T,I,E,O,R,x,k,D,A,j,N=function(){function e(e){this.edits=e}return e.prototype.insert=function(e,t){this.edits.push(g.insert(e,t))},e.prototype.replace=function(e,t){this.edits.push(g.replace(e,t))},e.prototype.delete=function(e){this.edits.push(g.del(e))},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e}(),F=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),e&&(this._workspaceEdit=e,e.documentChanges?e.documentChanges.forEach(function(e){var n=new N(e.edits);t._textEditChanges[e.textDocument.uri]=n}):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new N(e.changes[n]);t._textEditChanges[n]=r}))}return Object.defineProperty(e.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),e.prototype.getTextEditChange=function(e){if(b.is(e)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for versioned document changes.");var t=e;if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new N(i),this._textEditChanges[t.uri]=r}return r}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new N(i),this._textEditChanges[e]=r}return r},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return G.defined(t)&&G.string(t.uri)}}(v||(v={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return G.defined(t)&&G.string(t.uri)&&G.number(t.version)}}(b||(b={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return G.defined(t)&&G.string(t.uri)&&G.string(t.languageId)&&G.number(t.version)&&G.string(t.text)}}(S||(S={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(_||(_={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(_||(_={})),function(e){e.is=function(e){var t=e;return G.objectLiteral(e)&&_.is(t.kind)&&G.string(t.value)}}(w||(w={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(P||(P={})),function(e){e.PlainText=1,e.Snippet=2}(C||(C={})),function(e){e.create=function(e){return{label:e}}}(T||(T={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(I||(I={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return G.string(t)||G.objectLiteral(t)&&G.string(t.language)&&G.string(t.value)}}(E||(E={})),function(e){e.is=function(e){var t=e;return G.objectLiteral(t)&&(w.is(t.contents)||E.is(t.contents)||G.typedArray(t.contents,E.is))&&(void 0===e.range||i.is(e.range))}}(O||(O={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(R||(R={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return G.defined(t)&&(i.documentation=t),G.defined(n)?i.parameters=n:i.parameters=[],i}}(x||(x={})),function(e){e.Text=1,e.Read=2,e.Write=3}(k||(k={})),function(e){e.create=function(e,t){var n={range:e};return G.number(t)&&(n.kind=t),n}}(D||(D={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(A||(A={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(j||(j={}));var M,L,W,U,H,B=function(){return function(){}}();!function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&G.string(t.name)&&G.number(t.kind)&&i.is(t.range)&&i.is(t.selectionRange)&&(void 0===t.detail||G.string(t.detail))&&(void 0===t.deprecated||G.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))}}(B||(B={})),function(e){e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports"}(M||(M={})),function(e){e.create=function(e,t){var n={diagnostics:e};return void 0!==t&&null!==t&&(n.only=t),n},e.is=function(e){var t=e;return G.defined(t)&&G.typedArray(t.diagnostics,p.is)&&(void 0===t.only||G.typedArray(t.only,G.string))}}(L||(L={})),function(e){e.create=function(e,t,n){var r={title:e};return f.is(t)?r.command=t:r.edit=t,void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&G.string(t.title)&&(void 0===t.diagnostics||G.typedArray(t.diagnostics,p.is))&&(void 0===t.kind||G.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||f.is(t.command))&&(void 0===t.edit||y.is(t.edit))}}(W||(W={})),function(e){e.create=function(e,t){var n={range:e};return G.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return G.defined(t)&&i.is(t.range)&&(G.undefined(t.command)||f.is(t.command))}}(U||(U={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return G.defined(t)&&G.number(t.tabSize)&&G.boolean(t.insertSpaces)}}(H||(H={}));var V=function(){return function(){}}();!function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return G.defined(t)&&i.is(t.range)&&(G.undefined(t.target)||G.string(t.target))}}(V||(V={}));var q,$,K=["\n","\r\n","\r"];!function(e){e.create=function(e,t,n,r){return new z(e,t,n,r)},e.is=function(e){var t=e;return!!(G.defined(t)&&G.string(t.uri)&&(G.undefined(t.languageId)||G.string(t.languageId))&&G.number(t.lineCount)&&G.func(t.getText)&&G.func(t.positionAt)&&G.func(t.offsetAt))},e.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),o=t.slice(r);e(i,n),e(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var u=n(i[s],o[a]);t[c++]=u<=0?i[s++]:o[a++]}for(;s<i.length;)t[c++]=i[s++];for(;a<o.length;)t[c++]=o[a++];return t}(t,function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),i=n.length,o=r.length-1;o>=0;o--){var s=r[o],a=e.offsetAt(s.range.start),c=e.offsetAt(s.range.end);if(!(c<=i))throw new Error("Ovelapping edit");n=n.substring(0,a)+s.newText+n.substring(c,n.length),i=a}return n}}(q||(q={})),function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3}($||($={}));var G,z=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=null},e.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,i=t.length;if(0===i)return r.create(0,e);for(;n<i;){var o=Math.floor((n+i)/2);t[o]>e?i=o:n=o+1}var s=n-1;return r.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(G||(G={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(414),i=n(48),o=n(415);t.ImplementationRequest=o.ImplementationRequest;const s=n(416);t.TypeDefinitionRequest=s.TypeDefinitionRequest;const a=n(417);t.WorkspaceFoldersRequest=a.WorkspaceFoldersRequest,t.DidChangeWorkspaceFoldersNotification=a.DidChangeWorkspaceFoldersNotification;const c=n(418);t.ConfigurationRequest=c.ConfigurationRequest;const u=n(419);t.DocumentColorRequest=u.DocumentColorRequest,t.ColorPresentationRequest=u.ColorPresentationRequest;const l=n(420);t.FoldingRangeRequest=l.FoldingRangeRequest,function(e){e.is=function(e){let t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(t.DocumentFilter||(t.DocumentFilter={})),function(e){e.type=new i.RequestType("client/registerCapability")}(t.RegistrationRequest||(t.RegistrationRequest={})),function(e){e.type=new i.RequestType("client/unregisterCapability")}(t.UnregistrationRequest||(t.UnregistrationRequest={})),function(e){e.None=0,e.Full=1,e.Incremental=2}(t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})),function(e){e.type=new i.RequestType("initialize")}(t.InitializeRequest||(t.InitializeRequest={})),function(e){e.unknownProtocolVersion=1}(t.InitializeError||(t.InitializeError={})),function(e){e.type=new i.NotificationType("initialized")}(t.InitializedNotification||(t.InitializedNotification={})),function(e){e.type=new i.RequestType0("shutdown")}(t.ShutdownRequest||(t.ShutdownRequest={})),function(e){e.type=new i.NotificationType0("exit")}(t.ExitNotification||(t.ExitNotification={})),function(e){e.type=new i.NotificationType("workspace/didChangeConfiguration")}(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})),function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4}(t.MessageType||(t.MessageType={})),function(e){e.type=new i.NotificationType("window/showMessage")}(t.ShowMessageNotification||(t.ShowMessageNotification={})),function(e){e.type=new i.RequestType("window/showMessageRequest")}(t.ShowMessageRequest||(t.ShowMessageRequest={})),function(e){e.type=new i.NotificationType("window/logMessage")}(t.LogMessageNotification||(t.LogMessageNotification={})),function(e){e.type=new i.NotificationType("telemetry/event")}(t.TelemetryEventNotification||(t.TelemetryEventNotification={})),function(e){e.type=new i.NotificationType("textDocument/didOpen")}(t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didChange")}(t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didClose")}(t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/didSave")}(t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})),function(e){e.type=new i.NotificationType("textDocument/willSave")}(t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})),function(e){e.type=new i.RequestType("textDocument/willSaveWaitUntil")}(t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})),function(e){e.type=new i.NotificationType("workspace/didChangeWatchedFiles")}(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})),function(e){e.Created=1,e.Changed=2,e.Deleted=3}(t.FileChangeType||(t.FileChangeType={})),function(e){e.Create=1,e.Change=2,e.Delete=4}(t.WatchKind||(t.WatchKind={})),function(e){e.type=new i.NotificationType("textDocument/publishDiagnostics")}(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})),function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3}(t.CompletionTriggerKind||(t.CompletionTriggerKind={})),function(e){e.type=new i.RequestType("textDocument/completion")}(t.CompletionRequest||(t.CompletionRequest={})),function(e){e.type=new i.RequestType("completionItem/resolve")}(t.CompletionResolveRequest||(t.CompletionResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/hover")}(t.HoverRequest||(t.HoverRequest={})),function(e){e.type=new i.RequestType("textDocument/signatureHelp")}(t.SignatureHelpRequest||(t.SignatureHelpRequest={})),function(e){e.type=new i.RequestType("textDocument/definition")}(t.DefinitionRequest||(t.DefinitionRequest={})),function(e){e.type=new i.RequestType("textDocument/references")}(t.ReferencesRequest||(t.ReferencesRequest={})),function(e){e.type=new i.RequestType("textDocument/documentHighlight")}(t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})),function(e){e.type=new i.RequestType("textDocument/documentSymbol")}(t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})),function(e){e.type=new i.RequestType("workspace/symbol")}(t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})),function(e){e.type=new i.RequestType("textDocument/codeAction")}(t.CodeActionRequest||(t.CodeActionRequest={})),function(e){e.type=new i.RequestType("textDocument/codeLens")}(t.CodeLensRequest||(t.CodeLensRequest={})),function(e){e.type=new i.RequestType("codeLens/resolve")}(t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})),function(e){e.type=new i.RequestType("textDocument/formatting")}(t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rangeFormatting")}(t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/onTypeFormatting")}(t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})),function(e){e.type=new i.RequestType("textDocument/rename")}(t.RenameRequest||(t.RenameRequest={})),function(e){e.type=new i.RequestType("textDocument/documentLink")}(t.DocumentLinkRequest||(t.DocumentLinkRequest={})),function(e){e.type=new i.RequestType("documentLink/resolve")}(t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})),function(e){e.type=new i.RequestType("workspace/executeCommand")}(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})),function(e){e.type=new i.RequestType("workspace/applyEdit")}(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=Object.prototype.toString;function i(e){return"[object String]"===r.call(e)}function o(e){return"[object Function]"===r.call(e)}function s(e){return Array.isArray(e)}t.boolean=function(e){return!0===e||!1===e},t.string=i,t.number=function(e){return"[object Number]"===r.call(e)},t.error=function(e){return"[object Error]"===r.call(e)},t.func=o,t.array=s,t.stringArray=function(e){return s(e)&&e.every(e=>i(e))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&o(e.then)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.type=new r.RequestType("textDocument/implementation")}(t.ImplementationRequest||(t.ImplementationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.type=new r.RequestType("textDocument/typeDefinition")}(t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.type=new r.RequestType0("workspace/workspaceFolders")}(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})),function(e){e.type=new r.NotificationType("workspace/didChangeWorkspaceFolders")}(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.type=new r.RequestType("workspace/configuration")}(t.ConfigurationRequest||(t.ConfigurationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.type=new r.RequestType("textDocument/documentColor")}(t.DocumentColorRequest||(t.DocumentColorRequest={})),function(e){e.type=new r.RequestType("textDocument/colorPresentation")}(t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48);!function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(t.FoldingRangeKind||(t.FoldingRangeKind={})),function(e){e.type=new r.RequestType("textDocument/foldingRange")}(t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(43),o=n(57),s=n(189),a=n(190),c=n(191);t.createConverter=function(e){const t=e||(e=>e.toString());function n(e){return t(e)}function u(e){return{uri:t(e.uri)}}function l(e){return{line:e.line,character:e.character}}function d(e){if(void 0!==e)return null===e?null:{line:e.line,character:e.character}}function h(e){return void 0===e||null===e?e:{start:d(e.start),end:d(e.end)}}function p(e){switch(e){case r.DiagnosticSeverity.Error:return i.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return i.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return i.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return i.DiagnosticSeverity.Hint}}function f(e){let t=i.Diagnostic.create(h(e.range),e.message);return o.number(e.severity)&&(t.severity=p(e.severity)),(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),t}function g(e){return void 0===e||null===e?e:e.map(f)}function m(e){return{range:h(e.range),newText:e.newText}}function y(e){let t=i.Command.create(e.title,e.command);return e.arguments&&(t.arguments=e.arguments),t}return{asUri:n,asTextDocumentIdentifier:u,asOpenTextDocumentParams:function(e){return{textDocument:{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}},asChangeTextDocumentParams:function(e){if(function(e){let t=e;return!!t.uri&&!!t.version}(e))return{textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};if(function(e){let t=e;return!!t.document&&!!t.contentChanges}(e)){let n=e.document;return{textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map(e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}})}}throw Error("Unsupported text document change parameter")},asCloseTextDocumentParams:function(e){return{textDocument:u(e)}},asSaveTextDocumentParams:function(e,n=!1){let r={textDocument:function(e){return{uri:t(e.uri),version:e.version}}(e)};return n&&(r.text=e.getText()),r},asWillSaveTextDocumentParams:function(e){return{textDocument:u(e.document),reason:function(e){switch(e){case r.TextDocumentSaveReason.Manual:return i.TextDocumentSaveReason.Manual;case r.TextDocumentSaveReason.AfterDelay:return i.TextDocumentSaveReason.AfterDelay;case r.TextDocumentSaveReason.FocusOut:return i.TextDocumentSaveReason.FocusOut}return i.TextDocumentSaveReason.Manual}(e.reason)}},asTextDocumentPositionParams:function(e,t){return{textDocument:u(e),position:l(t)}},asCompletionParams:function(e,t,n){return{textDocument:u(e),position:l(t),context:{triggerKind:function(e){switch(e){case r.CompletionTriggerKind.TriggerCharacter:return i.CompletionTriggerKind.TriggerCharacter;case r.CompletionTriggerKind.TriggerForIncompleteCompletions:return i.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return i.CompletionTriggerKind.Invoked}}(n.triggerKind),triggerCharacter:n.triggerCharacter}}},asWorkerPosition:l,asRange:h,asPosition:d,asDiagnosticSeverity:p,asDiagnostic:f,asDiagnostics:g,asCompletionItem:function(e){let t={label:e.label},n=e instanceof s.default?e:void 0;return e.detail&&(t.detail=e.detail),e.documentation&&(n&&"$string"!==n.documentationFormat?t.documentation=function(e,t){switch(e){case"$string":return t;case i.MarkupKind.PlainText:return{kind:e,value:t};case i.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}(n.documentationFormat,e.documentation):t.documentation=e.documentation),e.filterText&&(t.filterText=e.filterText),function(e,t){let n,o=i.InsertTextFormat.PlainText,s=void 0;t.textEdit?(n=t.textEdit.newText,s=h(t.textEdit.range)):t.insertText instanceof r.SnippetString?(o=i.InsertTextFormat.Snippet,n=t.insertText.value):n=t.insertText,t.range&&(s=h(t.range)),e.insertTextFormat=o,t.fromEdit&&n&&s?e.textEdit={newText:n,range:s}:e.insertText=n}(t,e),o.number(e.kind)&&(t.kind=function(e,t){return void 0!==t?t:e+1}(e.kind,n&&n.originalItemKind)),e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=function(e){return void 0===e||null===e?e:e.map(m)}(e.additionalTextEdits)),e.commitCharacters&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=y(e.command)),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),n&&(void 0!==n.data&&(t.data=n.data),!0!==n.deprecated&&!1!==n.deprecated||(t.deprecated=n.deprecated)),t},asTextEdit:m,asReferenceParams:function(e,t,n){return{textDocument:u(e),position:l(t),context:{includeDeclaration:n.includeDeclaration}}},asCodeActionContext:function(e){return void 0===e||null===e?e:i.CodeActionContext.create(g(e.diagnostics),o.string(e.only)?[e.only]:void 0)},asCommand:y,asCodeLens:function(e){let t=i.CodeLens.create(h(e.range));return e.command&&(t.command=y(e.command)),e instanceof a.default&&e.data&&(t.data=e.data),t},asFormattingOptions:function(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces}},asDocumentSymbolParams:function(e){return{textDocument:u(e)}},asCodeLensParams:function(e){return{textDocument:u(e)}},asDocumentLink:function(e){let t=i.DocumentLink.create(h(e.range));e.target&&(t.target=n(e.target));let r=e instanceof c.default?e:void 0;return r&&r.data&&(t.data=r.data),t},asDocumentLinkParams:function(e){return{textDocument:u(e)}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(43),o=n(57),s=n(189),a=n(190),c=n(191);var u;!function(e){e.is=function(e){let t=e;return t&&o.string(t.language)&&o.string(t.value)}}(u||(u={})),t.createConverter=function(e){const t=e||(e=>r.Uri.parse(e));function n(e){return t(e)}function l(e){return e.map(d)}function d(e){let t=new r.Diagnostic(f(e.range),e.message,g(e.severity));return(o.number(e.code)||o.string(e.code))&&(t.code=e.code),e.source&&(t.source=e.source),e.relatedInformation&&(t.relatedInformation=function(e){return e.map(h)}(e.relatedInformation)),t}function h(e){return new r.DiagnosticRelatedInformation(C(e.location),e.message)}function p(e){if(e)return new r.Position(e.line,e.character)}function f(e){if(e)return new r.Range(p(e.start),p(e.end))}function g(e){if(void 0===e||null===e)return r.DiagnosticSeverity.Error;switch(e){case i.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case i.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case i.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case i.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}return r.DiagnosticSeverity.Error}function m(e){if(o.string(e))return e;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}function y(e){let t=new s.default(e.label);e.detail&&(t.detail=e.detail),e.documentation&&(t.documentation=m(e.documentation),t.documentationFormat=o.string(e.documentation)?"$string":e.documentation.kind),e.filterText&&(t.filterText=e.filterText);let n=function(e){return e.textEdit?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.textEdit.newText),range:f(e.textEdit.range),fromEdit:!0}:{text:e.textEdit.newText,range:f(e.textEdit.range),fromEdit:!0}:e.insertText?e.insertTextFormat===i.InsertTextFormat.Snippet?{text:new r.SnippetString(e.insertText),fromEdit:!1}:{text:e.insertText,fromEdit:!1}:void 0}(e);if(n&&(t.insertText=n.text,t.range=n.range,t.fromEdit=n.fromEdit),o.number(e.kind)){let[n,o]=function(e){return i.CompletionItemKind.Text<=e&&e<=i.CompletionItemKind.TypeParameter?[e-1,void 0]:[r.CompletionItemKind.Text,e]}(e.kind);t.kind=n,o&&(t.originalItemKind=o)}return e.sortText&&(t.sortText=e.sortText),e.additionalTextEdits&&(t.additionalTextEdits=b(e.additionalTextEdits)),o.stringArray(e.commitCharacters)&&(t.commitCharacters=e.commitCharacters.slice()),e.command&&(t.command=x(e.command)),!0!==e.deprecated&&!1!==e.deprecated||(t.deprecated=e.deprecated),!0!==e.preselect&&!1!==e.preselect||(t.preselect=e.preselect),void 0!==e.data&&(t.data=e.data),t}function v(e){if(e)return new r.TextEdit(f(e.range),e.newText)}function b(e){if(e)return e.map(v)}function S(e){return e.map(_)}function _(e){let t=new r.SignatureInformation(e.label);return e.documentation&&(t.documentation=m(e.documentation)),e.parameters&&(t.parameters=w(e.parameters)),t}function w(e){return e.map(P)}function P(e){let t=new r.ParameterInformation(e.label);return e.documentation&&(t.documentation=m(e.documentation)),t}function C(e){if(e)return new r.Location(t(e.uri),f(e.range))}function T(e){let t=new r.DocumentHighlight(f(e.range));return o.number(e.kind)&&(t.kind=I(e.kind)),t}function I(e){switch(e){case i.DocumentHighlightKind.Text:return r.DocumentHighlightKind.Text;case i.DocumentHighlightKind.Read:return r.DocumentHighlightKind.Read;case i.DocumentHighlightKind.Write:return r.DocumentHighlightKind.Write}return r.DocumentHighlightKind.Text}function E(e){return e<=i.SymbolKind.TypeParameter?e-1:r.SymbolKind.Property}function O(e,n){let i=new r.SymbolInformation(e.name,E(e.kind),f(e.location.range),e.location.uri?t(e.location.uri):n);return e.containerName&&(i.containerName=e.containerName),i}function R(e){let t=new r.DocumentSymbol(e.name,void 0!==e.detail?e.detail:e.name,E(e.kind),f(e.range),f(e.selectionRange));if(void 0!==e.children&&e.children.length>0){let n=[];for(let t of e.children)n.push(R(t));t.children=n}return t}function x(e){let t={title:e.title,command:e.command};return e.arguments&&(t.arguments=e.arguments),t}const k=new Map;function D(e){if(!e)return;let t=new a.default(f(e.range));return e.command&&(t.command=x(e.command)),void 0!==e.data&&null!==e.data&&(t.data=e.data),t}function A(e){if(!e)return;let n=new r.WorkspaceEdit;return e.documentChanges?e.documentChanges.forEach(e=>{n.set(t(e.textDocument.uri),b(e.edits))}):e.changes&&Object.keys(e.changes).forEach(r=>{n.set(t(r),b(e.changes[r]))}),n}function j(e){let t=f(e.range),r=e.target?n(e.target):void 0,i=new c.default(t,r);return void 0!==e.data&&null!==e.data&&(i.data=e.data),i}function N(e){return new r.Color(e.red,e.green,e.blue,e.alpha)}function F(e){return new r.ColorInformation(f(e.range),N(e.color))}function M(e){let t=new r.ColorPresentation(e.label);return t.additionalTextEdits=b(e.additionalTextEdits),e.textEdit&&(t.textEdit=v(e.textEdit)),t}function L(e){if(e)switch(e){case i.FoldingRangeKind.Comment:return r.FoldingRangeKind.Comment;case i.FoldingRangeKind.Imports:return r.FoldingRangeKind.Imports;case i.FoldingRangeKind.Region:return r.FoldingRangeKind.Region}}function W(e){return new r.FoldingRange(e.startLine,e.endLine,L(e.kind))}return k.set("",r.CodeActionKind.Empty),k.set(i.CodeActionKind.QuickFix,r.CodeActionKind.QuickFix),k.set(i.CodeActionKind.Refactor,r.CodeActionKind.Refactor),k.set(i.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorExtract),k.set(i.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorInline),k.set(i.CodeActionKind.RefactorRewrite,r.CodeActionKind.RefactorRewrite),k.set(i.CodeActionKind.Source,r.CodeActionKind.Source),k.set(i.CodeActionKind.SourceOrganizeImports,r.CodeActionKind.SourceOrganizeImports),{asUri:n,asDiagnostics:l,asDiagnostic:d,asRange:f,asPosition:p,asDiagnosticSeverity:g,asHover:function(e){if(e)return new r.Hover(function(e){if(o.string(e))return new r.MarkdownString(e);if(u.is(e))return(new r.MarkdownString).appendCodeblock(e.value,e.language);if(Array.isArray(e)){let t=[];for(let n of e){let e=new r.MarkdownString;u.is(n)?e.appendCodeblock(n.value,n.language):e.appendMarkdown(n),t.push(e)}return t}{let t;switch(e.kind){case i.MarkupKind.Markdown:return new r.MarkdownString(e.value);case i.MarkupKind.PlainText:return(t=new r.MarkdownString).appendText(e.value),t;default:return(t=new r.MarkdownString).appendText(`Unsupported Markup content received. Kind is: ${e.kind}`),t}}}(e.contents),f(e.range))},asCompletionResult:function(e){if(!e)return;if(Array.isArray(e))return e.map(y);let t=e;return new r.CompletionList(t.items.map(y),t.isIncomplete)},asCompletionItem:y,asTextEdit:v,asTextEdits:b,asSignatureHelp:function(e){if(!e)return;let t=new r.SignatureHelp;return o.number(e.activeSignature)?t.activeSignature=e.activeSignature:t.activeSignature=0,o.number(e.activeParameter)?t.activeParameter=e.activeParameter:t.activeParameter=0,e.signatures&&(t.signatures=S(e.signatures)),t},asSignatureInformations:S,asSignatureInformation:_,asParameterInformations:w,asParameterInformation:P,asDefinitionResult:function(e){if(e)return o.array(e)?e.map(e=>C(e)):C(e)},asLocation:C,asReferences:function(e){if(e)return e.map(e=>C(e))},asDocumentHighlights:function(e){if(e)return e.map(T)},asDocumentHighlight:T,asDocumentHighlightKind:I,asSymbolInformations:function(e,t){if(e)return e.map(e=>O(e,t))},asSymbolInformation:O,asDocumentSymbols:function(e){if(void 0!==e&&null!==e)return e.map(R)},asDocumentSymbol:R,asCommand:x,asCommands:function(e){if(e)return e.map(x)},asCodeAction:function(e){if(void 0===e||null===e)return;let t=new r.CodeAction(e.title);return void 0!==e.kind&&(t.kind=function(e){if(void 0===e||null===e)return;let t=k.get(e);if(t)return t;let n=e.split(".");t=r.CodeActionKind.Empty;for(let e of n)t=t.append(e);return t}(e.kind)),e.diagnostics&&(t.diagnostics=l(e.diagnostics)),e.edit&&(t.edit=A(e.edit)),e.command&&(t.command=x(e.command)),t},asCodeLens:D,asCodeLenses:function(e){if(e)return e.map(e=>D(e))},asWorkspaceEdit:A,asDocumentLink:j,asDocumentLinks:function(e){if(e)return e.map(j)},asFoldingRangeKind:L,asFoldingRange:W,asFoldingRanges:function(e){if(Array.isArray(e))return e.map(W)},asColor:N,asColorInformation:F,asColorInformations:function(e){if(Array.isArray(e))return e.map(F)},asColorPresentation:M,asColorPresentations:function(e){if(Array.isArray(e))return e.map(M)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(e=>{this.onSuccess=e}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var e=this.task();return this.task=void 0,e})),(t>=0||void 0===this.timeout)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return void 0!==this.timeout}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){void 0!==this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(72),i=n(57),o=n(2),s=n(43),a=n(71);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.ColorProviderFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.DocumentColorRequest.type)}fillClientCapabilities(e){c(c(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){if(!e.colorProvider)return;const n=e.colorProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={color:e,textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(n.document),range:t.code2ProtocolConverter.asRange(n.range)};return t.sendRequest(s.ColorPresentationRequest.type,i,r).then(this.asColorPresentations.bind(this),e=>(t.logFailedRequest(s.ColorPresentationRequest.type,e),Promise.resolve(null)))},r=(e,n)=>{const r={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(s.DocumentColorRequest.type,r,n).then(this.asColorInformations.bind(this),e=>(t.logFailedRequest(s.ColorPresentationRequest.type,e),Promise.resolve(null)))},i=t.clientOptions.middleware;return o.languages.registerColorProvider(e.documentSelector,{provideColorPresentations:(e,t,r)=>i.provideColorPresentations?i.provideColorPresentations(e,t,r,n):n(e,t,r),provideDocumentColors:(e,t)=>i.provideDocumentColors?i.provideDocumentColors(e,t,r):r(e,t)})}asColor(e){return new o.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(e=>new o.ColorInformation(this._client.protocol2CodeConverter.asRange(e.range),this.asColor(e.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(e=>{let t=new o.ColorPresentation(e.label);return t.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(e.additionalTextEdits),t.textEdit=this._client.protocol2CodeConverter.asTextEdit(e.textEdit),t}):[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(43);t.ConfigurationFeature=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(i.ConfigurationRequest.type,(t,n)=>{let r=e=>{let t=[];for(let n of e.items){let e=void 0!==n.scopeUri&&null!==n.scopeUri?this._client.protocol2CodeConverter.asUri(n.scopeUri):void 0;t.push(this.getConfiguration(e,null!==n.section?n.section:void 0))}return t},i=e.clientOptions.middleware.workspace;return i&&i.configuration?i.configuration(t,n,r):r(t)})}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(-1===i)n=r.workspace.getConfiguration(void 0,e).get(t);else{let e=r.workspace.getConfiguration(t.substr(0,i));e&&(n=e.get(t.substr(i+1)))}}else{let t=r.workspace.getConfiguration(void 0,e);n={};for(let e of Object.keys(t))t.has(e)&&(n[e]=t.get(e))}return n||null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(72),i=n(57),o=n(2),s=n(43),a=n(71);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.ImplementationFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.ImplementationRequest.type)}fillClientCapabilities(e){c(c(e,"textDocument"),"implementation").dynamicRegistration=!0}initialize(e,t){if(e.implementationProvider)if(!0===e.implementationProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.implementationProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.ImplementationRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(s.ImplementationRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return o.languages.registerImplementationProvider(e.documentSelector,{provideImplementation:(e,t,i)=>r.provideImplementation?r.provideImplementation(e,t,i,n):n(e,t,i)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(72),i=n(57),o=n(2),s=n(43),a=n(71);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.TypeDefinitionFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.TypeDefinitionRequest.type)}fillClientCapabilities(e){c(c(e,"textDocument"),"typeDefinition").dynamicRegistration=!0}initialize(e,t){if(e.typeDefinitionProvider)if(!0===e.typeDefinitionProvider){if(!t)return;this.register(this.messages,{id:r.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}else{const n=e.typeDefinitionProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>t.sendRequest(s.TypeDefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(e,n),r).then(t.protocol2CodeConverter.asDefinitionResult,e=>(t.logFailedRequest(s.TypeDefinitionRequest.type,e),Promise.resolve(null))),r=t.clientOptions.middleware;return o.languages.registerTypeDefinitionProvider(e.documentSelector,{provideTypeDefinition:(e,t,i)=>r.provideTypeDefinition?r.provideTypeDefinition(e,t,i,n):n(e,t,i)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(72),i=n(2),o=n(43);function s(e,t){if(void 0!==e)return e[t]}t.WorkspaceFoldersFeature=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return o.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=i.workspace.workspaceFolders;e.workspaceFolders=void 0===t?null:t.map(e=>this.asProtocol(e))}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(o.WorkspaceFoldersRequest.type,e=>{let n=()=>{let e=i.workspace.workspaceFolders;return void 0===e?null:e.map(e=>this.asProtocol(e))},r=t.clientOptions.middleware.workspace;return r&&r.workspaceFolders?r.workspaceFolders(e,n):n()});let n,a=s(s(s(e,"workspace"),"workspaceFolders"),"changeNotifications");"string"==typeof a?n=a:!0===a&&(n=r.generateUuid()),n&&this.register(this.messages,{id:n,registerOptions:void 0})}register(e,t){let n=t.id,r=this._client,s=i.workspace.onDidChangeWorkspaceFolders(e=>{let t=e=>{let t={event:{added:e.added.map(e=>this.asProtocol(e)),removed:e.removed.map(e=>this.asProtocol(e))}};this._client.sendNotification(o.DidChangeWorkspaceFoldersNotification.type,t)},n=r.clientOptions.middleware.workspace;n&&n.didChangeWorkspaceFolders?n.didChangeWorkspaceFolders(e,t):t(e)});this._listeners.set(n,s)}unregister(e){let t=this._listeners.get(e);void 0!==t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return void 0===e?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(72),i=n(57),o=n(2),s=n(43),a=n(71);function c(e,t){return void 0===e[t]&&(e[t]={}),e[t]}t.FoldingRangeFeature=class extends a.TextDocumentFeature{constructor(e){super(e,s.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=c(c(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){if(!e.foldingRangeProvider)return;const n=e.foldingRangeProvider,o=i.string(n.id)&&n.id.length>0?n.id:r.generateUuid(),s=n.documentSelector||t;s&&this.register(this.messages,{id:o,registerOptions:Object.assign({},{documentSelector:s})})}registerLanguageProvider(e){let t=this._client,n=(e,n,r)=>{const i={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(e)};return t.sendRequest(s.FoldingRangeRequest.type,i,r).then(this.asFoldingRanges.bind(this),e=>(t.logFailedRequest(s.FoldingRangeRequest.type,e),Promise.resolve(null)))},r=t.clientOptions.middleware;return o.languages.registerFoldingRangeProvider(e.documentSelector,{provideFoldingRanges:(e,t,i)=>r.provideFoldingRanges?r.provideFoldingRanges(e,t,i,n):n(e,0,i)})}asFoldingRangeKind(e){if(e)switch(e){case s.FoldingRangeKind.Comment:return o.FoldingRangeKind.Comment;case s.FoldingRangeKind.Imports:return o.FoldingRangeKind.Imports;case s.FoldingRangeKind.Region:return o.FoldingRangeKind.Region}}asFoldingRanges(e){return Array.isArray(e)?e.map(e=>new o.FoldingRange(e.startLine,e.endLine,this.asFoldingRangeKind(e.kind))):[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(17),o=n(93),s=n(32);function a(){let e="vscode-lang-"+function(e){let t=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],n="";for(let r=0;r<e;r++)n+=t[Math.floor(t.length*Math.random())];return n}(40);return"win32"===process.platform?"\\\\.\\pipe\\"+e+"-sock":r.join(i.tmpdir(),e+".sock")}t.fork=function(e,t,n,i){let c,u=!1,l=e=>{u||(u=!0,i(e,void 0))},d=a(),h=a(),p=function(e,t,n){let r={};for(let t in e)r[t]=e[t];return r.STDIN_PIPE_NAME=t,r.STDOUT_PIPE_NAME=n,r.ATOM_SHELL_INTERNAL_RUN_AS_NODE="1",r.ELECTRON_RUN_AS_NODE="1",r}(n.env||process.env,d,h),f=o.createServer(e=>{e.once("data",t=>{c.stdin=o.connect(d),c.stdout=e,(e=>{u||(u=!0,i(void 0,e))})(c)})});f.listen(h);let g=!1,m=()=>{g||(g=!0,process.removeListener("exit",m),f.close())},y=r.join(__dirname,"electronForkStart");(c=s.fork(y,[e].concat(t),{silent:!0,cwd:n.cwd,env:p,execArgv:n.execArgv})).once("error",e=>{m(),l(e)}),c.once("exit",e=>{m(),l(e)}),process.once("exit",m)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),i=n(3),o="win32"===process.platform,s="darwin"===process.platform,a="linux"===process.platform;t.terminate=function(e,t){if(o)try{let n={stdio:["pipe","pipe","ignore"]};return t&&(n.cwd=t),r.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],n),!0}catch(e){return!1}else{if(!a&&!s)return e.kill("SIGKILL"),!0;try{var n=i.join(__dirname,"terminateProcess.sh");return!r.spawnSync(n,[e.pid.toString()]).error}catch(e){return!1}}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0);n(8);const a=n(12),c=n(16),u=n(56),l=n(22),d=n(183),h=n(7),p=n(9),f=n(19),g=n(27),m=n(433);let y=class{constructor(e,t){this.factory=e,this.testManager=t,this.disposables=[],this.extensionLoadedArgs=new Set,this.startupCompleted=c.createDeferred()}dispose(){for(this.languageClient&&(this.languageClient.stop().then(l.noop,e=>a.traceError("Stopping language client failed",e)),this.languageClient=void 0);this.disposables.length>0;){this.disposables.shift().dispose()}this.startupCompleted.completed&&this.startupCompleted.reject(new Error("Disposed Language Server"))}start(e,t){return o(this,void 0,void 0,function*(){this.languageClient=yield this.factory.createLanguageClient(e,t),this.disposables.push(this.languageClient.start()),yield this.serverReady();const n=new m.ProgressReporting(this.languageClient);this.disposables.push(n),this.languageClient.onTelemetry(e=>{const t=e.EventName||p.EventName.PYTHON_LANGUAGE_SERVER_TELEMETRY;h.sendTelemetryEvent(t,e.Measurements,e.Properties)}),yield this.registerTestServices()})}loadExtension(e){this.extensionLoadedArgs.has(e||"")||(this.extensionLoadedArgs.add(e||""),this.startupCompleted.promise.then(()=>this.languageClient.sendRequest("python/loadExtension",e).then(l.noop,e=>a.traceError("Request python/loadExtension failed",e))).ignoreErrors())}serverReady(){return o(this,void 0,void 0,function*(){for(;this.languageClient&&!this.languageClient.initializeResult;)yield c.sleep(100);this.startupCompleted.resolve()})}registerTestServices(){return o(this,void 0,void 0,function*(){if(!this.languageClient)throw new Error("languageClient not initialized");yield this.testManager.activate(),yield this.testManager.activateCodeLenses(new d.LanguageServerSymbolProvider(this.languageClient))})}};r([a.traceDecorators.verbose("Stopping Language Server")],y.prototype,"dispose",null),r([a.traceDecorators.error("Failed to start language server"),h.captureTelemetry(p.EventName.PYTHON_LANGUAGE_SERVER_ENABLED,void 0,!0)],y.prototype,"start",null),r([a.traceDecorators.error("Failed to load Language Server extension")],y.prototype,"loadExtension",null),r([h.captureTelemetry(p.EventName.PYTHON_LANGUAGE_SERVER_READY,void 0,!0)],y.prototype,"serverReady",null),r([u.swallowExceptions("Activating Unit Tests Manager for Language Server")],y.prototype,"registerTestServices",null),y=r([s.injectable(),i(0,s.inject(g.ILanguageClientFactory)),i(0,s.named(g.LanguageClientFactory.base)),i(1,s.inject(f.IUnitTestManagementService))],y),t.LanguageServer=y},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(16),s=n(36),a=n(7),c=n(9),u=6e4;t.ProgressReporting=class{constructor(e){this.languageClient=e,this.languageClient.onNotification("python/setStatusBarMessage",e=>{this.statusBarMessage&&this.statusBarMessage.dispose(),this.statusBarMessage=i.window.setStatusBarMessage(e)}),this.languageClient.onNotification("python/beginProgress",e=>r(this,void 0,void 0,function*(){this.progressDeferred||(this.progressDeferred=o.createDeferred(),this.progressTimer=new s.StopWatch,setTimeout(this.handleTimeout.bind(this),u),i.window.withProgress({location:i.ProgressLocation.Window,title:""},e=>(this.progress=e,this.progressDeferred.promise)))})),this.languageClient.onNotification("python/reportProgress",e=>{this.progress&&this.progress.report({message:e})}),this.languageClient.onNotification("python/endProgress",e=>{this.progressDeferred&&(this.progressDeferred.resolve(),this.progressDeferred=void 0,this.progress=void 0,this.completeAnalysisTracking(!0))})}dispose(){this.statusBarMessage&&this.statusBarMessage.dispose()}completeAnalysisTracking(e){this.progressTimer&&a.sendTelemetryEvent(c.EventName.PYTHON_LANGUAGE_SERVER_ANALYSISTIME,this.progressTimer.elapsedTime,{success:e}),this.progressTimer=void 0}handleTimeout(e){this.completeAnalysisTracking(!1)}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(124),c=n(12),u=n(7),l=n(9);let d=class{constructor(e){this.dotnetCompatibility=e}isSupported(){return o(this,void 0,void 0,function*(){try{const e=yield this.dotnetCompatibility.isSupported();return u.sendTelemetryEvent(l.EventName.PYTHON_LANGUAGE_SERVER_PLATFORM_SUPPORTED,void 0,{supported:e}),e}catch(e){return c.traceError("Unable to determine whether LS is supported",e),u.sendTelemetryEvent(l.EventName.PYTHON_LANGUAGE_SERVER_PLATFORM_SUPPORTED,void 0,{supported:!1,failureType:"UnknownError"}),!1}})}};d=r([s.injectable(),i(0,s.inject(a.IDotNetCompatibilityService))],d),t.LanguageServerCompatibilityService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(42),u=n(11),l=n(12),d=n(6),h=n(1),p=n(5),f=n(27);let g=class{constructor(e){this.serviceContainer=e}getLanguageServerFolderName(){return o(this,void 0,void 0,function*(){const e=yield this.getCurrentLanguageServerDirectory();let t;const n=yield this.shouldLookForNewLanguageServer(e);return e&&!n?a.basename(e.path):(t=yield this.getLatestLanguageServerVersion().catch(()=>void 0),e&&(!t||t.version.compare(e.version)<=0)?a.basename(e.path):`languageServer.${t.version.raw}`)})}getLatestLanguageServerVersion(){return this.serviceContainer.get(f.ILanguageServerPackageService).getLatestNugetPackageVersion()}shouldLookForNewLanguageServer(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.get(h.IConfigurationService),n=t.getSettings().autoUpdateLanguageServer,r=t.getSettings().downloadLanguageServer;if(e&&(!n||!r))return!1;const i=this.getDownloadChannel();return this.serviceContainer.get(f.IDownloadChannelRule,i).shouldLookForNewLanguageServer(e)})}getCurrentLanguageServerDirectory(){return o(this,void 0,void 0,function*(){if(!this.serviceContainer.get(h.IConfigurationService).getSettings().downloadLanguageServer)return{path:"languageServer",version:new c.SemVer("0.0.0")};const e=yield this.getExistingLanguageServerDirectories();return 0!==e.length?(e.sort((e,t)=>e.version.compare(t.version)),e[e.length-1]):void 0})}getExistingLanguageServerDirectories(){return o(this,void 0,void 0,function*(){return(yield this.serviceContainer.get(d.IFileSystem).getSubDirectories(u.EXTENSION_ROOT_DIR)).filter(e=>a.basename(e).startsWith("languageServer")).map(e=>({path:e,version:this.getFolderVersion(a.basename(e))}))})}getFolderVersion(e){const t=e.substring("languageServer".length+1);return 0===t.length?new c.SemVer("0.0.0"):c.parse(t,!0)||new c.SemVer("0.0.0")}getDownloadChannel(){return this.serviceContainer.get(f.ILanguageServerPackageService).getLanguageServerDownloadChannel()}};r([l.traceDecorators.verbose("Get language server folder name")],g.prototype,"getLanguageServerFolderName",null),r([l.traceDecorators.verbose("Get latest version of Language Server")],g.prototype,"getLatestLanguageServerVersion",null),g=r([s.injectable(),i(0,s.inject(p.IServiceContainer))],g),t.LanguageServerFolderService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(5),c=n(7),u=n(9),l=n(12),d=n(87);let h=class{constructor(e,t,n,r){this.serviceContainer=e,this.azureBlobStorageAccount=t,this.azureBlobStorageContainer=n,this.azureCDNBlobStorageAccount=r}getPackages(e){return o(this,void 0,void 0,function*(){return this.listPackages(this.azureBlobStorageAccount,this.azureBlobStorageContainer,e,this.azureCDNBlobStorageAccount)})}listPackages(e,t,r,i){return o(this,void 0,void 0,function*(){const o=(yield Promise.resolve().then(()=>n(437))).createBlobServiceAnonymous(e),s=this.serviceContainer.get(d.INugetService);return new Promise((e,n)=>{o.listBlobsSegmentedWithPrefix(t,r,void 0,(r,o)=>{if(r)return n(r);e(o.entries.map(e=>({package:e.name,uri:`${i}/${t}/${e.name}`,version:s.getVersionFromPackageFileName(e.name)})))})})})}};r([c.captureTelemetry(u.EventName.PYTHON_LANGUAGE_SERVER_LIST_BLOB_STORE_PACKAGES),l.traceDecorators.verbose("Listing Nuget Packages")],h.prototype,"listPackages",null),h=r([s.injectable(),i(0,s.inject(a.IServiceContainer)),i(1,s.unmanaged()),i(2,s.unmanaged()),i(3,s.unmanaged())],h),t.AzureBlobStoreNugetRepository=h},function(e,t){e.exports=require("./node_modules/azure-storage")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(42),c=n(4),u=n(11),l=n(12),d=n(87),h=n(6),p=n(1),f=n(34),g=n(5),m=n(27),y=n(192);t.maxMajorVersion=0,t.PackageNames={[m.PlatformName.Windows32Bit]:`Python-Language-Server-${m.PlatformName.Windows32Bit}`,[m.PlatformName.Windows64Bit]:`Python-Language-Server-${m.PlatformName.Windows64Bit}`,[m.PlatformName.Linux64Bit]:`Python-Language-Server-${m.PlatformName.Linux64Bit}`,[m.PlatformName.Mac64Bit]:`Python-Language-Server-${m.PlatformName.Mac64Bit}`};let v=class{constructor(e,n,r){this.serviceContainer=e,this.appEnv=n,this.platform=r,this.maxMajorVersion=t.maxMajorVersion}getNugetPackageName(){switch(this.platform.osType){case f.OSType.Windows:return t.PackageNames[this.platform.is64bit?m.PlatformName.Windows64Bit:m.PlatformName.Windows32Bit];case f.OSType.OSX:return t.PackageNames[m.PlatformName.Mac64Bit];default:return t.PackageNames[m.PlatformName.Linux64Bit]}}getLatestNugetPackageVersion(){return o(this,void 0,void 0,function*(){const e=this.getLanguageServerDownloadChannel(),t=this.serviceContainer.get(d.INugetRepository,e),n=this.getNugetPackageName();l.traceVerbose(`Listing packages for ${e} for ${n}`);const r=yield t.getPackages(n);return this.getValidPackage(r)})}getLanguageServerDownloadChannel(){const e=this.serviceContainer.get(p.IConfigurationService).getSettings();return e.analysis.downloadChannel?e.analysis.downloadChannel:this.isAlphaVersionOfExtension()?"beta":"stable"}getValidPackage(e){const t=this.serviceContainer.get(d.INugetService),n=e.filter(e=>e.version.major===this.maxMajorVersion).filter(e=>t.isReleaseVersion(e.version)).sort((e,t)=>e.version.compare(t.version)),r=n[n.length-1],i=this.appEnv.packageJson.languageServerVersion;return r.version.compare(i)>=0?n[n.length-1]:{version:new a.SemVer(i),package:y.LanguageServerPackageStorageContainers.stable,uri:`${y.azureCDNBlobStorageAccount}/${y.LanguageServerPackageStorageContainers.stable}/${this.getNugetPackageName()}.${i}.nupkg`}}isAlphaVersionOfExtension(){const e=this.serviceContainer.get(p.IExtensions).getExtension(u.PVSC_EXTENSION_ID),t=a.parse(e.packageJSON.version);return t.prerelease.length>0&&"alpha"===t.prerelease[0]}};r([l.traceDecorators.verbose("Get latest language server nuget package version")],v.prototype,"getLatestNugetPackageVersion",null),v=r([s.injectable(),i(0,s.inject(g.IServiceContainer)),i(1,s.inject(c.IApplicationEnvironment)),i(2,s.inject(h.IPlatformService))],v),t.LanguageServerPackageService=v},function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const a=n(0),c=n(4);n(8);const u=n(12),l=n(56),d=n(5),h=n(7),p=n(9),f=n(27);let g=r=class{constructor(e,t,n){this.serviceContainer=e,this.commandManager=t,this.analysisOptions=n,this.disposables=[]}dispose(){this.languageServer&&this.languageServer.dispose(),this.disposables.forEach(e=>e.dispose())}start(e){return s(this,void 0,void 0,function*(){if(this.languageServer)throw new Error("Language Server already started");this.registerCommandHandler(),this.resource=e,this.analysisOptions.onDidChange(this.restartLanguageServerDebounced,this,this.disposables),yield this.analysisOptions.initialize(e),yield this.startLanguageServer()})}registerCommandHandler(){const e=this.commandManager.registerCommand("python._loadLanguageServerExtension",e=>{r.loadExtensionArgs=e,this.loadExtensionIfNecessary()});this.disposables.push(e)}loadExtensionIfNecessary(){this.languageServer&&r.loadExtensionArgs&&this.languageServer.loadExtension(r.loadExtensionArgs)}restartLanguageServerDebounced(){this.restartLanguageServer().ignoreErrors()}restartLanguageServer(){return s(this,void 0,void 0,function*(){this.languageServer&&this.languageServer.dispose(),yield this.startLanguageServer()})}startLanguageServer(){return s(this,void 0,void 0,function*(){this.languageServer=this.serviceContainer.get(f.ILanguageServer);const e=yield this.analysisOptions.getAnalysisOptions();yield this.languageServer.start(this.resource,e),this.loadExtensionIfNecessary()})}};i([u.traceDecorators.error("Failed to start Language Server")],g.prototype,"start",null),i([l.debounce(1e3)],g.prototype,"restartLanguageServerDebounced",null),i([u.traceDecorators.error("Failed to restart Language Server"),u.traceDecorators.verbose("Restarting Language Server")],g.prototype,"restartLanguageServer",null),i([h.captureTelemetry(p.EventName.PYTHON_LANGUAGE_SERVER_STARTUP,void 0,!0),u.traceDecorators.verbose("Starting Language Server")],g.prototype,"startLanguageServer",null),g=r=i([a.injectable(),o(0,a.inject(d.IServiceContainer)),o(1,a.inject(c.ICommandManager)),o(2,a.inject(f.ILanguageServerAnalysisOptions))],g),t.LanguageServerManager=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(6);var a,c;!function(e){e.Windows32Bit="win-x86",e.Windows64Bit="win-x64",e.Mac64Bit="osx-x64",e.Linux64Bit="linux-x64"}(a=t.PlatformName||(t.PlatformName={})),function(e){e.Windows="Microsoft.Python.LanguageServer.exe",e.MacOS="Microsoft.Python.LanguageServer",e.Linux="Microsoft.Python.LanguageServer"}(c=t.PlatformLSExecutables||(t.PlatformLSExecutables={}));let u=class{constructor(e){this.platform=e}get platformName(){if(this.platform.isWindows)return this.platform.is64bit?a.Windows64Bit:a.Windows32Bit;if(this.platform.isMac)return a.Mac64Bit;if(this.platform.isLinux){if(!this.platform.is64bit)throw new Error("Microsoft Python Language Server does not support 32-bit Linux.");return a.Linux64Bit}throw new Error("Unknown OS platform.")}get engineDllName(){return"Microsoft.Python.LanguageServer.dll"}get engineExecutableName(){return this.platform.isWindows?c.Windows:this.platform.isLinux?c.Linux:this.platform.isMac?c.MacOS:"unknown-platform"}};u=r([o.injectable(),i(0,o.inject(s.IPlatformService))],u),t.PlatformData=u},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(12),o=n(442);t.buildApi=function(e){return{ready:e.catch(e=>(i.traceError("Failure during activation.",e),Promise.reject(e))),debug:{getRemoteLauncherCommand(e,t,n=!0){return r(this,void 0,void 0,function*(){return(new o.RemoteDebuggerLauncherScriptProvider).getLauncherArgs({host:e,port:t,waitUntilDebuggerAttaches:n})})}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(11),o=r.join(i.EXTENSION_ROOT_DIR,"pythonFiles","ptvsd_launcher.py");t.NoDebugLauncherScriptProvider=class{getLauncherArgs(e){const t=e.customDebugger?"--custom":"--default";return[o,t,"--nodebug","--client","--host",e.host,"--port",e.port.toString()]}};t.DebuggerLauncherScriptProvider=class{getLauncherArgs(e){const t=e.customDebugger?"--custom":"--default";return[o,t,"--client","--host",e.host,"--port",e.port.toString()]}};t.RemoteDebuggerLauncherScriptProvider=class{getLauncherArgs(e){const t=e.waitUntilDebuggerAttaches?["--wait"]:[];return[o,"--default","--host",e.host,"--port",e.port.toString()].concat(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(444),i=n(495),o=n(26);t.registerTypes=function(e){e.addSingleton(o.ISourceMapSupportService,i.SourceMapSupportService),r.registerTypes(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(108),i=n(445),o=n(446),s=n(447),a=n(193),c=n(166),u=n(487),l=n(211),d=n(489),h=n(490),p=n(53),f=n(494),g=n(54),m=n(26);t.registerTypes=function(e){e.addSingleton(m.IDiagnosticFilterService,f.DiagnosticFilterService),e.addSingleton(m.IDiagnosticHandlerService,g.DiagnosticCommandPromptHandlerService,g.DiagnosticCommandPromptHandlerServiceId),e.addSingleton(m.IDiagnosticsService,o.EnvironmentPathVariableDiagnosticsService,o.EnvironmentPathVariableDiagnosticsServiceId),e.addSingleton(m.IDiagnosticsService,s.InvalidDebuggerTypeDiagnosticsService,s.InvalidDebuggerTypeDiagnosticsServiceId),e.addSingleton(m.IDiagnosticsService,d.InvalidPythonInterpreterService,d.InvalidPythonInterpreterServiceId),e.addSingleton(m.IDiagnosticsService,a.InvalidPythonPathInDebuggerService,a.InvalidPythonPathInDebuggerServiceId),e.addSingleton(m.IDiagnosticsService,c.LSNotSupportedDiagnosticService,c.LSNotSupportedDiagnosticServiceId),e.addSingleton(m.IDiagnosticsService,l.PowerShellActivationHackDiagnosticsService,l.PowerShellActivationHackDiagnosticsServiceId),e.addSingleton(m.IDiagnosticsService,u.InvalidMacPythonInterpreterService,u.InvalidMacPythonInterpreterServiceId),e.addSingleton(p.IDiagnosticsCommandFactory,h.DiagnosticsCommandFactory),e.addSingleton(r.IApplicationDiagnostics,i.ApplicationDiagnostics)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(11),u=n(1),l=n(5),d=n(26);let h=class{constructor(e,t){this.serviceContainer=e,this.outputChannel=t}register(){this.serviceContainer.get(d.ISourceMapSupportService).register()}performPreStartupHealthCheck(e){return o(this,void 0,void 0,function*(){if(c.isTestExecution())return;const t=this.serviceContainer.getAll(d.IDiagnosticsService);yield this.runDiagnostics(t.filter(e=>!e.runInBackground),e),this.runDiagnostics(t.filter(e=>e.runInBackground),e).ignoreErrors()})}runDiagnostics(e,t){return o(this,void 0,void 0,function*(){yield Promise.all(e.map(e=>o(this,void 0,void 0,function*(){const n=yield e.diagnose(t);n.length>0&&(this.log(n),yield e.handle(n))})))})}log(e){const t=this.serviceContainer.get(u.ILogger);e.forEach(e=>{const n=`Diagnostic Code: ${e.code}, Message: ${e.message}`;switch(e.severity){case a.DiagnosticSeverity.Error:t.logError(n),this.outputChannel.appendLine(n);break;case a.DiagnosticSeverity.Warning:t.logWarning(n),this.outputChannel.appendLine(n);break;default:t.logInformation(n)}})}};h=r([s.injectable(),i(0,s.inject(l.IServiceContainer)),i(1,s.inject(u.IOutputChannel)),i(1,s.named(c.STANDARD_OUTPUT_CHANNEL))],h),t.ApplicationDiagnostics=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4);n(8);const u=n(6),l=n(1),d=n(5),h=n(63),p=n(53),f=n(64),g=n(54),m=n(26),y="The environment variable '{0}' seems to have some paths containing the '\"' character. The existence of such a character is known to have caused the {1} extension to not load. If the extension fails to load please modify your paths to remove this '\"' character.";class v extends h.BaseDiagnostic{constructor(e,t){super(f.DiagnosticCodes.InvalidEnvironmentPathVariableDiagnostic,e,a.DiagnosticSeverity.Warning,m.DiagnosticScope.Global,t)}}t.InvalidEnvironmentPathVariableDiagnostic=v,t.EnvironmentPathVariableDiagnosticsServiceId="EnvironmentPathVariableDiagnosticsServiceId";let b=class extends h.BaseDiagnosticsService{constructor(e){super([f.DiagnosticCodes.InvalidEnvironmentPathVariableDiagnostic],e,!0),this.platform=this.serviceContainer.get(u.IPlatformService),this.messageService=e.get(m.IDiagnosticHandlerService,g.DiagnosticCommandPromptHandlerServiceId)}diagnose(e){return o(this,void 0,void 0,function*(){if(this.platform.isWindows&&this.doesPathVariableHaveInvalidEntries()){const t=this.serviceContainer.get(c.IApplicationEnvironment),n=y.format(this.platform.pathVariableName,t.extensionName);return[new v(n,e)]}return[]})}onHandle(e){return o(this,void 0,void 0,function*(){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(yield this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(p.IDiagnosticsCommandFactory),r=[{prompt:"Ignore"},{prompt:"Always Ignore",command:n.createCommand(t,{type:"ignore",options:m.DiagnosticScope.Global})},{prompt:"More Info",command:n.createCommand(t,{type:"launch",options:"https://aka.ms/Niq35h"})}];yield this.messageService.handle(t,{commandPrompts:r})})}doesPathVariableHaveInvalidEntries(){const e=this.serviceContainer.get(l.ICurrentProcess).env[this.platform.pathVariableName],t=this.serviceContainer.get(l.IPathUtils).delimiter;return(e||"").split(t).filter(e=>e.indexOf('"')>=0).length>0}};b=r([s.injectable(),i(0,s.inject(d.IServiceContainer))],b),t.EnvironmentPathVariableDiagnosticsService=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(4);n(8);const l=n(6),d=n(5),h=n(63),p=n(53),f=n(64),g=n(54),m=n(26);class y extends h.BaseDiagnostic{constructor(e,t){super(f.DiagnosticCodes.InvalidDebuggerTypeDiagnostic,e,c.DiagnosticSeverity.Error,m.DiagnosticScope.WorkspaceFolder,t,"always")}}t.InvalidDebuggerTypeDiagnostic=y,t.InvalidDebuggerTypeDiagnosticsServiceId="InvalidDebuggerTypeDiagnosticsServiceId";let v=class extends h.BaseDiagnosticsService{constructor(e){super([f.DiagnosticCodes.InvalidEnvironmentPathVariableDiagnostic],e,!0),this.messageService=e.get(m.IDiagnosticHandlerService,g.DiagnosticCommandPromptHandlerServiceId);const t=e.get(u.ICommandManager);this.fs=this.serviceContainer.get(l.IFileSystem),t.registerCommand("python.debugger.replaceExperimental",this.fixLaunchJson,this)}diagnose(e){return o(this,void 0,void 0,function*(){return(yield this.isExperimentalDebuggerUsed())?[new y('Your launch.json file needs to be updated to change the "pythonExperimental" debug configurations to use the "python" debugger type, otherwise Python debugging may not work. Would you like to automatically update your launch.json file now?',e)]:[]})}onHandle(e){return o(this,void 0,void 0,function*(){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0],n=[{prompt:"Yes, update launch.json",command:this.serviceContainer.get(p.IDiagnosticsCommandFactory).createCommand(t,{type:"executeVSCCommand",options:"python.debugger.replaceExperimental"})},{prompt:"No, I will do it later"}];yield this.messageService.handle(t,{commandPrompts:n})})}isExperimentalDebuggerUsed(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(u.IWorkspaceService);return!!e.hasWorkspaceFolders&&(yield Promise.all(e.workspaceFolders.map(e=>this.isExperimentalDebuggerUsedInWorkspace(e)))).filter(e=>!0===e).length>0})}getLaunchJsonFile(e){return a.join(e.uri.fsPath,".vscode","launch.json")}isExperimentalDebuggerUsedInWorkspace(e){return o(this,void 0,void 0,function*(){const t=this.getLaunchJsonFile(e);return!!(yield this.fs.fileExists(t))&&(yield this.fs.readFile(t)).indexOf('"pythonExperimental"')>0})}fixLaunchJson(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(u.IWorkspaceService);if(!e.hasWorkspaceFolders)return!1;yield Promise.all(e.workspaceFolders.map(e=>this.fixLaunchJsonInWorkspace(e)))})}fixLaunchJsonInWorkspace(e){return o(this,void 0,void 0,function*(){if(!(yield this.isExperimentalDebuggerUsedInWorkspace(e)))return;const t=this.getLaunchJsonFile(e);let n=yield this.fs.readFile(t);const r=new RegExp('"pythonExperimental"',"g"),i=new RegExp('"Python Experimental:',"g");n=(n=n.replace(r,'"python"')).replace(i,'"Python:'),yield this.fs.writeFile(t,n)})}};v=r([s.injectable(),i(0,s.inject(d.IServiceContainer))],v),t.InvalidDebuggerTypeDiagnosticsService=v},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(194),o=n(80),s=n(28),a=n(125),c=n(3),u=n(42),l=n(457),d=n(199),h=n(187);var p=n(199);t.sleep=p.sleep;const f=c.join(l.EXTENSION_ROOT_DIR_FOR_TESTS,"src","test","pythonFiles","dummy.py");var g;function m(){return r(this,void 0,void 0,function*(){if(!l.IS_SMOKE_TEST){(yield Promise.resolve().then(()=>n(127))).PythonSettings.dispose()}})}function y(e,t=2){return(...n)=>r(this,void 0,void 0,function*(){return new Promise((r,i)=>{const o=[],s=()=>{e.call(this,...n).then(r,e=>{o.push(e),o.length>=t?i(o):setTimeout(s,500)})};s()})})}function v(e,t,i){return r(this,void 0,void 0,function*(){const r=n(2);if(t===r.ConfigurationTarget.WorkspaceFolder&&!l.IS_MULTI_ROOT_TEST)return;const o="string"==typeof e?r.Uri.file(e):e,s=r.workspace.getConfiguration("python",o),a=s.inspect("pythonPath"),c=t===r.ConfigurationTarget.Workspace?"workspaceValue":"workspaceFolderValue";a&&a[c]!==i&&(yield s.update("pythonPath",i,t),yield m())})}function b(){return r(this,void 0,void 0,function*(){yield n(2).workspace.getConfiguration("python",null).update("pythonPath",void 0,!0),yield m()})}function S(e=process.platform){return/^win/.test(e)?g.Windows:/^darwin/.test(e)?g.OSX:/^linux/.test(e)?g.Linux:g.Unknown}function _(e){return r(this,void 0,void 0,function*(){const r=yield Promise.resolve().then(()=>n(201)),i=yield Promise.resolve().then(()=>n(129));return(e||new i.ProcessService(new r.BufferDecoder)).exec(t.PYTHON_PATH,["-c",'import sys;print("{0}.{1}.{2}".format(*sys.version_info[:3]))']).then(e=>new u.SemVer(e.stdout.trim())).catch(e=>{console.error("Failed to get Python Version in getPythonSemVer",e)})})}function w(e,...t){return t.findIndex(t=>{const n=u.coerce(t);if(n){if(0===n.compare(e))return!0;{const n=t.split(".");let r=parseInt(n[0],10)===e.major;return r&&n.length>=2&&(r=parseInt(n[1],10)===e.minor),r&&n.length>=3&&(r=parseInt(n[2],10)===e.patch),r}}return!1})>=0}t.rootWorkspaceUri=function(){if(l.IS_SMOKE_TEST||l.IS_PERF_TEST)return;const e=n(2);if(!Array.isArray(e.workspace.workspaceFolders)||0===e.workspace.workspaceFolders.length)return e.Uri.file(c.join(l.EXTENSION_ROOT_DIR_FOR_TESTS,"src","test"));if(1===e.workspace.workspaceFolders.length)return e.workspace.workspaceFolders[0].uri;const t=e.workspace.getWorkspaceFolder(e.Uri.file(f));return t?t.uri:e.workspace.workspaceFolders[0].uri}(),t.PYTHON_PATH=function(){if(process.env.CI_PYTHON_PATH&&s.existsSync(process.env.CI_PYTHON_PATH))return process.env.CI_PYTHON_PATH;return"python"}(),t.IS_64_BIT="x64"===i(),function(e){e.Unknown="Unknown",e.Windows="Windows",e.OSX="OSX",e.Linux="Linux"}(g=t.OSType||(t.OSType={})),t.updateSetting=function(e,t,i,o){return r(this,void 0,void 0,function*(){const r=n(2),s=r.workspace.getConfiguration("python",i),a=s.inspect(e);void 0!==a&&(o===r.ConfigurationTarget.Global&&a.globalValue===t||o===r.ConfigurationTarget.Workspace&&a.workspaceValue===t||o===r.ConfigurationTarget.WorkspaceFolder&&a.workspaceFolderValue===t)?yield m():(yield s.update(e,t,o),yield m())})},t.clearPythonPathInWorkspaceFolder=function(e){return r(this,void 0,void 0,function*(){const t=n(2);return y(v)(e,t.ConfigurationTarget.WorkspaceFolder)})},t.setPythonPathInWorkspaceRoot=function(e){return r(this,void 0,void 0,function*(){const t=n(2);return y(v)(void 0,t.ConfigurationTarget.Workspace,e)})},t.restorePythonPathInWorkspaceRoot=function(){return r(this,void 0,void 0,function*(){const e=n(2);return y(v)(void 0,e.ConfigurationTarget.Workspace,t.PYTHON_PATH)})},t.resetGlobalPythonPathSetting=(()=>r(this,void 0,void 0,function*(){return y(b)()})),t.getExtensionSettings=function(e){const t=n(2);return n(127).PythonSettings.getInstance(e,new class{get onDidChangeAutoSelectedInterpreter(){return(new t.EventEmitter).event}autoSelectInterpreter(e){return Promise.resolve()}getAutoSelectedInterpreter(e){}setWorkspaceInterpreter(e,t){return r(this,void 0,void 0,function*(){})}})},t.retryAsync=y,t.deleteDirectory=function(e){return r(this,void 0,void 0,function*(){(yield s.pathExists(e))&&(yield s.remove(e))})},t.deleteFile=function(e){return r(this,void 0,void 0,function*(){(yield s.pathExists(e))&&(yield s.remove(e))})},t.deleteFiles=function(e){return r(this,void 0,void 0,function*(){const t=yield new Promise((t,n)=>{a(e,(e,r)=>e?n(e):t(r))});return Promise.all(t.map(e=>s.remove(e).catch(d.noop)))})},t.isOs=function(...e){const t=S();return-1!==e.indexOf(t)},t.getOSType=S,t.correctPathForOsType=function(e,t){void 0===t&&(t=S());const n=t===g.Windows?"\\":"/",r=t===g.Windows?/\//g:/\\/g;return e.replace(r,n)},t.getPythonSemVer=_,t.isVersionInList=w,t.isPythonVersionInProcess=function(e,...t){return r(this,void 0,void 0,function*(){const n=yield _(e);return n?w(n,...t):(console.error(`Failed to determine the current Python version when comparing against list [${t.join(", ")}].`),!1)})},t.isPythonVersion=function(...e){return r(this,void 0,void 0,function*(){const t=yield _();return t?w(t,...e):(console.error(`Failed to determine the current Python version when comparing against list [${e.join(", ")}].`),!1)})},t.unzip=function(e,t){return r(this,void 0,void 0,function*(){return yield s.ensureDir(t),new Promise((n,i)=>{const o=new h({file:e,storeEntries:!0});o.on("ready",()=>r(this,void 0,void 0,function*(){o.extract("extension",t,e=>{e?i(e):n(),o.close()})}))})})},t.waitForCondition=function(e,t,n){return r(this,void 0,void 0,function*(){return new Promise((i,o)=>r(this,void 0,void 0,function*(){let r=!1;const s=setTimeout(()=>{r||o(new Error(n)),r=!0},t);for(let n=0;n<t/1e3;n+=1){if(yield e())return clearTimeout(s),void i();if(yield d.sleep(500),r)return}}))})},t.openFile=function(e){return r(this,void 0,void 0,function*(){const t=n(2),r=yield t.workspace.openTextDocument(e);return yield t.window.showTextDocument(r),o(t.window.activeTextEditor,"No active editor"),r})}},function(e,t,n){var r=n(3),i="win32"===process.platform,o=n(18),s=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(s){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}r.normalize;if(i)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(i)var u=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else u=/^[\/]*/;t.realpathSync=function(e,t){if(e=r.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,s,a,l,d=e,h={},p={};function f(){var t=u.exec(e);n=t[0].length,s=t[0],a=t[0],l="",i&&!p[a]&&(o.lstatSync(a),p[a]=!0)}for(f();n<e.length;){c.lastIndex=n;var g=c.exec(e);if(l=s,s+=g[0],a=l+g[1],n=c.lastIndex,!(p[a]||t&&t[a]===a)){var m;if(t&&Object.prototype.hasOwnProperty.call(t,a))m=t[a];else{var y=o.lstatSync(a);if(!y.isSymbolicLink()){p[a]=!0,t&&(t[a]=a);continue}var v=null;if(!i){var b=y.dev.toString(32)+":"+y.ino.toString(32);h.hasOwnProperty(b)&&(v=h[b])}null===v&&(o.statSync(a),v=o.readlinkSync(a)),m=r.resolve(l,v),t&&(t[a]=m),i||(h[b]=v)}e=r.resolve(m,e.slice(n)),f()}}return t&&(t[d]=e),e},t.realpath=function(e,t,n){if("function"!=typeof n&&(n=a(t),t=null),e=r.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var s,l,d,h,p=e,f={},g={};function m(){var t=u.exec(e);s=t[0].length,l=t[0],d=t[0],h="",i&&!g[d]?o.lstat(d,function(e){if(e)return n(e);g[d]=!0,y()}):process.nextTick(y)}function y(){if(s>=e.length)return t&&(t[p]=e),n(null,e);c.lastIndex=s;var r=c.exec(e);return h=l,l+=r[0],d=h+r[1],s=c.lastIndex,g[d]||t&&t[d]===d?process.nextTick(y):t&&Object.prototype.hasOwnProperty.call(t,d)?S(t[d]):o.lstat(d,v)}function v(e,r){if(e)return n(e);if(!r.isSymbolicLink())return g[d]=!0,t&&(t[d]=d),process.nextTick(y);if(!i){var s=r.dev.toString(32)+":"+r.ino.toString(32);if(f.hasOwnProperty(s))return b(null,f[s],d)}o.stat(d,function(e){if(e)return n(e);o.readlink(d,function(e,t){i||(f[s]=t),b(e,t)})})}function b(e,i,o){if(e)return n(e);var s=r.resolve(h,i);t&&(t[o]=s),S(s)}function S(t){e=r.resolve(t,e.slice(s)),m()}m()}},function(e,t,n){var r=n(451),i=n(452);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var o=[];var s=i("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body);var u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body);var d=c||u;var m=s.body.indexOf(",")>=0;if(!d&&!m)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];var y;if(d)y=s.body.split(/\.\./);else if(1===(y=function e(t){if(!t)return[""];var n=[];var r=i("{","}",t);if(!r)return t.split(",");var o=r.pre;var s=r.body;var a=r.post;var c=o.split(",");c[c.length-1]+="{"+s+"}";var u=e(a);a.length&&(c[c.length-1]+=u.shift(),c.push.apply(c,u));n.push.apply(n,c);return n}(s.body)).length&&1===(y=e(y[0],!1).map(h)).length){var v=s.post.length?e(s.post,!1):[""];return v.map(function(e){return s.pre+y[0]+e})}var b=s.pre;var v=s.post.length?e(s.post,!1):[""];var S;if(d){var _=l(y[0]),w=l(y[1]),P=Math.max(y[0].length,y[1].length),C=3==y.length?Math.abs(l(y[2])):1,T=f,I=w<_;I&&(C*=-1,T=g);var E=y.some(p);S=[];for(var O=_;T(O,w);O+=C){var R;if(u)"\\"===(R=String.fromCharCode(O))&&(R="");else if(R=String(O),E){var x=P-R.length;if(x>0){var k=new Array(x+1).join("0");R=O<0?"-"+k+R.slice(1):k+R}}S.push(R)}}else S=r(y,function(t){return e(t,!1)});for(var D=0;D<S.length;D++)for(var A=0;A<v.length;A++){var j=b+S[D]+v[A];(!n||d||j)&&o.push(j)}return o}(function(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(e),!0).map(d)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function l(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function d(e){return e.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function h(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function g(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var r=[],i=0;i<e.length;i++){var o=t(e[i],i);n(o)?r.push.apply(r,o):r.push(o)}return r};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function r(e,t,n){e instanceof RegExp&&(e=i(e,n)),t instanceof RegExp&&(t=i(t,n));var r=o(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function i(e,t){var n=t.match(e);return n?n[0]:null}function o(e,t,n){var r,i,o,s,a,c=n.indexOf(e),u=n.indexOf(t,c+1),l=c;if(c>=0&&u>0){for(r=[],o=n.length;l>=0&&!a;)l==c?(r.push(l),c=n.indexOf(e,l+1)):1==r.length?a=[r.pop(),u]:((i=r.pop())<o&&(o=i,s=u),u=n.indexOf(t,l+1)),l=c<u&&c>=0?c:u;r.length&&(a=[o,s])}return a}e.exports=r,r.range=o},function(e,t,n){try{var r=n(59);if("function"!=typeof r.inherits)throw"";e.exports=r.inherits}catch(t){e.exports=n(454)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){e.exports=f,f.GlobSync=g;var r=n(18),i=n(195),o=n(94),s=(o.Minimatch,n(125).Glob,n(59),n(3)),a=n(80),c=n(126),u=n(196),l=(u.alphasort,u.alphasorti,u.setopts),d=u.ownProp,h=u.childrenIgnored,p=u.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new g(e,t).found}function g(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof g))return new g(e,t);if(l(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var r=0;r<n;r++)this._process(this.minimatch.set[r],r,!1);this._finish()}g.prototype._finish=function(){if(a(this instanceof g),this.realpath){var e=this;this.matches.forEach(function(t,n){var r=e.matches[n]=Object.create(null);for(var o in t)try{o=e._makeAbs(o),r[i.realpathSync(o,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;r[e._makeAbs(o)]=!0}})}u.finish(this)},g.prototype._process=function(e,t,n){a(this instanceof g);for(var r,i=0;"string"==typeof e[i];)i++;switch(i){case e.length:return void this._processSimple(e.join("/"),t);case 0:r=null;break;default:r=e.slice(0,i).join("/")}var s,u=e.slice(i);null===r?s=".":c(r)||c(e.join("/"))?(r&&c(r)||(r="/"+r),s=r):s=r;var l=this._makeAbs(s);h(this,s)||(u[0]===o.GLOBSTAR?this._processGlobStar(r,s,l,u,t,n):this._processReaddir(r,s,l,u,t,n))},g.prototype._processReaddir=function(e,t,n,r,i,o){var a=this._readdir(n,o);if(a){for(var c=r[0],u=!!this.minimatch.negate,l=c._glob,d=this.dot||"."===l.charAt(0),h=[],p=0;p<a.length;p++){if("."!==(m=a[p]).charAt(0)||d)(u&&!e?!m.match(c):m.match(c))&&h.push(m)}var f=h.length;if(0!==f)if(1!==r.length||this.mark||this.stat){r.shift();for(p=0;p<f;p++){var g;m=h[p];g=e?[e,m]:[m],this._process(g.concat(r),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<f;p++){var m=h[p];e&&(m="/"!==e.slice(-1)?e+"/"+m:e+m),"/"!==m.charAt(0)||this.nomount||(m=s.join(this.root,m)),this._emitMatch(i,m)}}}},g.prototype._emitMatch=function(e,t){if(!p(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var r=this.cache[n];if("DIR"===r||Array.isArray(r))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},g.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=r.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var i=n&&n.isSymbolicLink();return this.symlinks[e]=i,i||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},g.prototype._readdir=function(e,t){if(t&&!d(this.symlinks,e))return this._readdirInGlobStar(e);if(d(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,r.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},g.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var r=t[n];r="/"===e?e+r:e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,t},g.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);throw r.path=this.cwd,r.code=t.code,r}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},g.prototype._processGlobStar=function(e,t,n,r,i,o){var s=this._readdir(n,o);if(s){var a=r.slice(1),c=e?[e]:[],u=c.concat(a);this._process(u,i,!1);var l=s.length;if(!this.symlinks[n]||!o)for(var d=0;d<l;d++){if("."!==s[d].charAt(0)||this.dot){var h=c.concat(s[d],a);this._process(h,i,!0);var p=c.concat(s[d],r);this._process(p,i,!0)}}}},g.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var r=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),r&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},g.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&d(this.cache,t)){var i=this.cache[t];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return i;if(n&&"FILE"===i)return!1}var o=this.statCache[t];if(!o){var s;try{s=r.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{o=r.statSync(t)}catch(e){o=s}else o=s}this.statCache[t]=o;i=!0;return o&&(i=o.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||i,(!n||"FILE"!==i)&&i},g.prototype._mark=function(e){return u.mark(this,e)},g.prototype._makeAbs=function(e){return u.makeAbs(this,e)}},function(e,t,n){var r=n(197),i=Object.create(null),o=n(198);e.exports=r(function(e,t){return i[e]?(i[e].push(t),null):(i[e]=[t],function(e){return o(function t(){var n=i[e],r=n.length,o=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r]=e[r];return n}(arguments);try{for(var s=0;s<r;s++)n[s].apply(null,o)}finally{n.length>r?(n.splice(0,r),process.nextTick(function(){t.apply(null,o)})):delete i[e]}})}(e))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(458);t.TEST_TIMEOUT=25e3,t.IS_SMOKE_TEST="1"===process.env.VSC_PYTHON_SMOKE_TEST,t.IS_PERF_TEST="1"===process.env.VSC_PYTHON_PERF_TEST,t.IS_MULTI_ROOT_TEST=function(){if(t.IS_SMOKE_TEST||t.IS_PERF_TEST)return!1;const e=n(2).workspace;return Array.isArray(e.workspaceFolders)&&e.workspaceFolders.length>1}(),t.TEST_DEBUGGER=!i.IS_CI_SERVER||i.IS_CI_SERVER_TEST_DEBUGGER,t.EXTENSION_ROOT_DIR_FOR_TESTS=r.join(__dirname,"..",".."),t.PVSC_EXTENSION_ID_FOR_TESTS="ms-python.python",t.SMOKE_TEST_EXTENSIONS_DIR=r.join(t.EXTENSION_ROOT_DIR_FOR_TESTS,"tmp","ext","smokeTestExtensionsFolder")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PYTHON_VIRTUAL_ENVS_LOCATION=process.env.PYTHON_VIRTUAL_ENVS_LOCATION,t.IS_APPVEYOR="true"===process.env.APPVEYOR,t.IS_TRAVIS="true"===process.env.TRAVIS,t.IS_VSTS=void 0!==process.env.TF_BUILD,t.IS_CI_SERVER=t.IS_TRAVIS||t.IS_APPVEYOR||t.IS_VSTS;let r=!1;t.IS_CI_SERVER&&void 0!==process.env.MOCHA_REPORTER_JUNIT&&(r="true"===process.env.MOCHA_REPORTER_JUNIT.toLowerCase()),t.MOCHA_REPORTER_JUNIT=r,t.MOCHA_CI_REPORTFILE=t.MOCHA_REPORTER_JUNIT&&void 0!==process.env.MOCHA_CI_REPORTFILE?process.env.MOCHA_CI_REPORTFILE:"./junit-out.xml",t.MOCHA_CI_PROPERTIES=t.MOCHA_REPORTER_JUNIT&&void 0!==process.env.MOCHA_CI_PROPERTIES?process.env.MOCHA_CI_PROPERTIES:"",t.MOCHA_CI_REPORTER_ID=t.MOCHA_REPORTER_JUNIT&&void 0!==process.env.MOCHA_CI_REPORTER_ID?process.env.MOCHA_CI_REPORTER_ID:"mocha-junit-reporter",t.IS_CI_SERVER_TEST_DEBUGGER="1"===process.env.IS_CI_SERVER_TEST_DEBUGGER},function(e,t,n){"use strict";var r=n(73).Buffer,i=n(460),o=e.exports;o.encodings=null,o.defaultCharUnicode="",o.defaultCharSingleByte="?",o.encode=function(e,t,n){e=""+(e||"");var i=o.getEncoder(t,n),s=i.write(e),a=i.end();return a&&a.length>0?r.concat([s,a]):s},o.decode=function(e,t,n){"string"==typeof e&&(o.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),o.skipDecodeWarning=!0),e=r.from(""+(e||""),"binary"));var i=o.getDecoder(t,n),s=i.write(e),a=i.end();return a?s+a:s},o.encodingExists=function(e){try{return o.getCodec(e),!0}catch(e){return!1}},o.toEncoding=o.encode,o.fromEncoding=o.decode,o._codecDataCache={},o.getCodec=function(e){o.encodings||(o.encodings=n(461));for(var t=o._canonicalizeEncoding(e),r={};;){var i=o._codecDataCache[t];if(i)return i;var s=o.encodings[t];switch(typeof s){case"string":t=s;break;case"object":for(var a in s)r[a]=s[a];r.encodingName||(r.encodingName=t),t=s.type;break;case"function":return r.encodingName||(r.encodingName=t),i=new s(r,o),o._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},o._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},o.getEncoder=function(e,t){var n=o.getCodec(e),r=new n.encoder(t,n);return n.bomAware&&t&&t.addBOM&&(r=new i.PrependBOM(r,t)),r},o.getDecoder=function(e,t){var n=o.getCodec(e),r=new n.decoder(t,n);return!n.bomAware||t&&!1===t.stripBOM||(r=new i.StripBOM(r,t)),r};var s="undefined"!=typeof process&&process.versions&&process.versions.node;if(s){var a=s.split(".").map(Number);(a[0]>0||a[1]>=10)&&n(475)(o),n(476)(o)}},function(e,t,n){"use strict";function r(e,t){this.encoder=e,this.addBOM=!0}function i(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}t.PrependBOM=r,r.prototype.write=function(e){return this.addBOM&&(e="\ufeff"+e,this.addBOM=!1),this.encoder.write(e)},r.prototype.end=function(){return this.encoder.end()},t.StripBOM=i,i.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t?t:("\ufeff"===t[0]&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0,t)},i.prototype.end=function(){return this.decoder.end()}},function(e,t,n){"use strict";for(var r=[n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469)],i=0;i<r.length;i++){e=r[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}},function(e,t,n){"use strict";var r=n(73).Buffer;function i(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=c:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=u,""!==r.from("eda0bdedb2a9","hex").toString()&&(this.decoder=l,this.defaultCharUnicode=t.defaultCharUnicode))}e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:i},i.prototype.encoder=a,i.prototype.decoder=s;var o=n(185).StringDecoder;function s(e,t){o.call(this,t.enc)}function a(e,t){this.enc=t.enc}function c(e,t){this.prevStr=""}function u(e,t){}function l(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),s.prototype=o.prototype,a.prototype.write=function(e){return r.from(e,this.enc)},a.prototype.end=function(){},c.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),r.from(e,"base64")},c.prototype.end=function(){return r.from(this.prevStr,"base64")},u.prototype.write=function(e){for(var t=r.alloc(3*e.length),n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=192+(o>>>6),t[n++]=128+(63&o)):(t[n++]=224+(o>>>12),t[n++]=128+(o>>>6&63),t[n++]=128+(63&o))}return t.slice(0,n)},u.prototype.end=function(){},l.prototype.write=function(e){for(var t=this.acc,n=this.contBytes,r=this.accBytes,i="",o=0;o<e.length;o++){var s=e[o];128!=(192&s)?(n>0&&(i+=this.defaultCharUnicode,n=0),s<128?i+=String.fromCharCode(s):s<224?(t=31&s,n=1,r=1):s<240?(t=15&s,n=2,r=1):i+=this.defaultCharUnicode):n>0?(t=t<<6|63&s,r++,0===--n&&(i+=2===r&&t<128&&t>0?this.defaultCharUnicode:3===r&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):i+=this.defaultCharUnicode}return this.acc=t,this.contBytes=n,this.accBytes=r,i},l.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,t,n){"use strict";var r=n(73).Buffer;function i(){}function o(){}function s(){this.overflowByte=-1}function a(e,t){this.iconv=t}function c(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function u(e,t){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=t.iconv}function l(e,t){var n=t||"utf-16le";if(e.length>=2)if(254==e[0]&&255==e[1])n="utf-16be";else if(255==e[0]&&254==e[1])n="utf-16le";else{for(var r=0,i=0,o=Math.min(e.length-e.length%2,64),s=0;s<o;s+=2)0===e[s]&&0!==e[s+1]&&i++,0!==e[s]&&0===e[s+1]&&r++;i>r?n="utf-16be":i<r&&(n="utf-16le")}return n}t.utf16be=i,i.prototype.encoder=o,i.prototype.decoder=s,i.prototype.bomAware=!0,o.prototype.write=function(e){for(var t=r.from(e,"ucs2"),n=0;n<t.length;n+=2){var i=t[n];t[n]=t[n+1],t[n+1]=i}return t},o.prototype.end=function(){},s.prototype.write=function(e){if(0==e.length)return"";var t=r.alloc(e.length+1),n=0,i=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,n=1,i=2);n<e.length-1;n+=2,i+=2)t[i]=e[n+1],t[i+1]=e[n];return this.overflowByte=n==e.length-1?e[e.length-1]:-1,t.slice(0,i).toString("ucs2")},s.prototype.end=function(){},t.utf16=a,a.prototype.encoder=c,a.prototype.decoder=u,c.prototype.write=function(e){return this.encoder.write(e)},c.prototype.end=function(){return this.encoder.end()},u.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return"";var t=l(e=r.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},u.prototype.end=function(){if(!this.decoder){var e=r.concat(this.initialBytes),t=l(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var n=this.decoder.write(e),i=this.decoder.end();return i?n+i:n}return this.decoder.end()}},function(e,t,n){"use strict";var r=n(73).Buffer;function i(e,t){this.iconv=t}t.utf7=i,t.unicode11utf7="utf7",i.prototype.encoder=s,i.prototype.decoder=a,i.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function s(e,t){this.iconv=t.iconv}function a(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(e){return r.from(e.replace(o,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},s.prototype.end=function(){};for(var c=/[A-Za-z0-9\/+]/,u=[],l=0;l<256;l++)u[l]=c.test(String.fromCharCode(l));var d="+".charCodeAt(0),h="-".charCodeAt(0),p="&".charCodeAt(0);function f(e,t){this.iconv=t}function g(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=r.alloc(6),this.base64AccumIdx=0}function m(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}a.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(i){if(!u[e[s]]){if(s==n&&e[s]==h)t+="+";else{var a=o+e.slice(n,s).toString();t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}e[s]!=h&&s--,n=s+1,i=!1,o=""}}else e[s]==d&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,i=!0);if(i){var c=(a=o+e.slice(n).toString()).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},a.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=f,f.prototype.encoder=g,f.prototype.decoder=m,f.prototype.bomAware=!0,g.prototype.write=function(e){for(var t=this.inBase64,n=this.base64Accum,i=this.base64AccumIdx,o=r.alloc(5*e.length+10),s=0,a=0;a<e.length;a++){var c=e.charCodeAt(a);32<=c&&c<=126?(t&&(i>0&&(s+=o.write(n.slice(0,i).toString("base64").replace(/\//g,",").replace(/=+$/,""),s),i=0),o[s++]=h,t=!1),t||(o[s++]=c,c===p&&(o[s++]=h))):(t||(o[s++]=p,t=!0),t&&(n[i++]=c>>8,n[i++]=255&c,i==n.length&&(s+=o.write(n.toString("base64").replace(/\//g,","),s),i=0)))}return this.inBase64=t,this.base64AccumIdx=i,o.slice(0,s)},g.prototype.end=function(){var e=r.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=h,this.inBase64=!1),e.slice(0,t)};var y=u.slice();y[",".charCodeAt(0)]=!0,m.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,s=0;s<e.length;s++)if(i){if(!y[e[s]]){if(s==n&&e[s]==h)t+="&";else{var a=o+e.slice(n,s).toString().replace(/,/g,"/");t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}e[s]!=h&&s--,n=s+1,i=!1,o=""}}else e[s]==p&&(t+=this.iconv.decode(e.slice(n,s),"ascii"),n=s+1,i=!0);if(i){var c=(a=o+e.slice(n).toString().replace(/,/g,"/")).length-a.length%8;o=a.slice(c),a=a.slice(0,c),t+=this.iconv.decode(r.from(a,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},m.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},function(e,t,n){"use strict";var r=n(73).Buffer;function i(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var n="",i=0;i<128;i++)n+=String.fromCharCode(i);e.chars=n+e.chars}this.decodeBuf=new r.from(e.chars,"ucs2");var o=new r.alloc(65536,t.defaultCharSingleByte.charCodeAt(0));for(i=0;i<e.chars.length;i++)o[e.chars.charCodeAt(i)]=i;this.encodeBuf=o}function o(e,t){this.encodeBuf=t.encodeBuf}function s(e,t){this.decodeBuf=t.decodeBuf}t._sbcs=i,i.prototype.encoder=o,i.prototype.decoder=s,o.prototype.write=function(e){for(var t=r.alloc(e.length),n=0;n<e.length;n++)t[n]=this.encodeBuf[e.charCodeAt(n)];return t},o.prototype.end=function(){},s.prototype.write=function(e){for(var t=this.decodeBuf,n=r.alloc(2*e.length),i=0,o=0,s=0;s<e.length;s++)i=2*e[s],n[o=2*s]=t[i],n[o+1]=t[i+1];return n.toString("ucs2")},s.prototype.end=function(){}},function(e,t,n){"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",10000:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(e,t,n){"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(e,t,n){"use strict";var r=n(73).Buffer;t._dbcs=u;for(var i=-1,o=-2,s=-1e3,a=new Array(256),c=0;c<256;c++)a[c]=i;function u(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=e.table();this.decodeTables=[],this.decodeTables[0]=a.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var c={};if(e.encodeSkipVals)for(r=0;r<e.encodeSkipVals.length;r++){var u=e.encodeSkipVals[r];if("number"==typeof u)c[u]=!0;else for(var l=u.from;l<=u.to;l++)c[l]=!0}if(this._fillEncodeTable(0,0,c),e.encodeAdd)for(var d in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,d)&&this._setEncodeChar(d.charCodeAt(0),e.encodeAdd[d]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===i&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===i&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();var h=this.decodeTables.length,p=this.decodeTables[h]=a.slice(0),f=this.decodeTables.length,g=this.decodeTables[f]=a.slice(0);for(r=129;r<=254;r++){var m=s-this.decodeTables[0][r],y=this.decodeTables[m];for(l=48;l<=57;l++)y[l]=s-h}for(r=129;r<=254;r++)p[r]=s-f;for(r=48;r<=57;r++)g[r]=o}}function l(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function d(e,t){this.nodeIdx=0,this.prevBuf=r.alloc(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function h(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length;n<r-1;){var i=n+Math.floor((r-n+1)/2);e[i]<=t?n=i:r=i}return n}u.prototype.encoder=l,u.prototype.decoder=d,u.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var n=this.decodeTables[0],r=t.length-1;r>0;r--){var o=n[t[r]];if(o==i)n[t[r]]=s-this.decodeTables.length,this.decodeTables.push(n=a.slice(0));else{if(!(o<=s))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));n=this.decodeTables[s-o]}}return n},u.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),n=this._getDecodeTrieNode(t);t&=255;for(var r=1;r<e.length;r++){var i=e[r];if("string"==typeof i)for(var o=0;o<i.length;){var s=i.charCodeAt(o++);if(55296<=s&&s<56320){var a=i.charCodeAt(o++);if(!(56320<=a&&a<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);n[t++]=65536+1024*(s-55296)+(a-56320)}else if(4080<s&&s<=4095){for(var c=4095-s+2,u=[],l=0;l<c;l++)u.push(i.charCodeAt(o++));n[t++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(u)}else n[t++]=s}else{if("number"!=typeof i)throw new Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+e[0]);var d=n[t-1]+1;for(o=0;o<i;o++)n[t++]=d++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},u.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=a.slice(0)),this.encodeTable[t]},u.prototype._setEncodeChar=function(e,t){var n=this._getEncodeBucket(e),r=255&e;n[r]<=-10?this.encodeTableSeq[-10-n[r]][-1]=t:n[r]==i&&(n[r]=t)},u.prototype._setEncodeSequence=function(e,t){var n,r=e[0],o=this._getEncodeBucket(r),s=255&r;o[s]<=-10?n=this.encodeTableSeq[-10-o[s]]:(n={},o[s]!==i&&(n[-1]=o[s]),o[s]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var a=1;a<e.length-1;a++){var c=n[r];"object"==typeof c?n=c:(n=n[r]={},void 0!==c&&(n[-1]=c))}n[r=e[e.length-1]]=t},u.prototype._fillEncodeTable=function(e,t,n){for(var r=this.decodeTables[e],i=0;i<256;i++){var o=r[i],a=t+i;n[a]||(o>=0?this._setEncodeChar(o,a):o<=s?this._fillEncodeTable(s-o,a<<8,n):o<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-o],a))}},l.prototype.write=function(e){for(var t=r.alloc(e.length*(this.gb18030?4:3)),n=this.leadSurrogate,o=this.seqObj,s=-1,a=0,c=0;;){if(-1===s){if(a==e.length)break;var u=e.charCodeAt(a++)}else{u=s;s=-1}if(55296<=u&&u<57344)if(u<56320){if(-1===n){n=u;continue}n=u,u=i}else-1!==n?(u=65536+1024*(n-55296)+(u-56320),n=-1):u=i;else-1!==n&&(s=u,u=i,n=-1);var l=i;if(void 0!==o&&u!=i){var d=o[u];if("object"==typeof d){o=d;continue}"number"==typeof d?l=d:void 0==d&&void 0!==(d=o[-1])&&(l=d,s=u),o=void 0}else if(u>=0){var p=this.encodeTable[u>>8];if(void 0!==p&&(l=p[255&u]),l<=-10){o=this.encodeTableSeq[-10-l];continue}if(l==i&&this.gb18030){var f=h(this.gb18030.uChars,u);if(-1!=f){l=this.gb18030.gbChars[f]+(u-this.gb18030.uChars[f]);t[c++]=129+Math.floor(l/12600),l%=12600,t[c++]=48+Math.floor(l/1260),l%=1260,t[c++]=129+Math.floor(l/10),l%=10,t[c++]=48+l;continue}}}l===i&&(l=this.defaultCharSingleByte),l<256?t[c++]=l:l<65536?(t[c++]=l>>8,t[c++]=255&l):(t[c++]=l>>16,t[c++]=l>>8&255,t[c++]=255&l)}return this.seqObj=o,this.leadSurrogate=n,t.slice(0,c)},l.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=r.alloc(10),t=0;if(this.seqObj){var n=this.seqObj[-1];void 0!==n&&(n<256?e[t++]=n:(e[t++]=n>>8,e[t++]=255&n)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},l.prototype.findIdx=h,d.prototype.write=function(e){var t=r.alloc(2*e.length),n=this.nodeIdx,a=this.prevBuf,c=this.prevBuf.length,u=-this.prevBuf.length;c>0&&(a=r.concat([a,e.slice(0,10)]));for(var l=0,d=0;l<e.length;l++){var p,f=l>=0?e[l]:a[l+c];if((p=this.decodeTables[n][f])>=0);else if(p===i)l=u,p=this.defaultCharUnicode.charCodeAt(0);else if(p===o){var g=u>=0?e.slice(u,l+1):a.slice(u+c,l+1+c),m=12600*(g[0]-129)+1260*(g[1]-48)+10*(g[2]-129)+(g[3]-48),y=h(this.gb18030.gbChars,m);p=this.gb18030.uChars[y]+m-this.gb18030.gbChars[y]}else{if(p<=s){n=s-p;continue}if(!(p<=-10))throw new Error("iconv-lite internal error: invalid decoding table value "+p+" at "+n+"/"+f);for(var v=this.decodeTableSeq[-10-p],b=0;b<v.length-1;b++)p=v[b],t[d++]=255&p,t[d++]=p>>8;p=v[v.length-1]}if(p>65535){p-=65536;var S=55296+Math.floor(p/1024);t[d++]=255&S,t[d++]=S>>8,p=56320+p%1024}t[d++]=255&p,t[d++]=p>>8,n=0,u=l+1}return this.nodeIdx=n,this.prevBuf=u>=0?e.slice(u):a.slice(u+c),t.slice(0,d).toString("ucs2")},d.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=r.alloc(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}},function(e,t,n){"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return n(470)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(471)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(128)}},gbk:{type:"_dbcs",table:function(){return n(128).concat(n(202))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(128).concat(n(202))},gb18030:function(){return n(472)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(473)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(203)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(203).concat(n(474))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(e){e.exports=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]},function(e){e.exports=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]},function(e){e.exports={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]}},function(e){e.exports=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]},function(e){e.exports=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]},function(e,t,n){"use strict";var r=n(84).Buffer,i=n(68).Transform;function o(e,t){this.conv=e,(t=t||{}).decodeStrings=!1,i.call(this,t)}function s(e,t){this.conv=e,(t=t||{}).encoding=this.encoding="utf8",i.call(this,t)}e.exports=function(e){e.encodeStream=function(t,n){return new o(e.getEncoder(t,n),n)},e.decodeStream=function(t,n){return new s(e.getDecoder(t,n),n)},e.supportsStreams=!0,e.IconvLiteEncoderStream=o,e.IconvLiteDecoderStream=s,e._collect=s.prototype.collect},o.prototype=Object.create(i.prototype,{constructor:{value:o}}),o.prototype._transform=function(e,t,n){if("string"!=typeof e)return n(new Error("Iconv encoding stream needs strings as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r),n()}catch(e){n(e)}},o.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},o.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",function(e){t.push(e)}),this.on("end",function(){e(null,r.concat(t))}),this},s.prototype=Object.create(i.prototype,{constructor:{value:s}}),s.prototype._transform=function(e,t,n){if(!r.isBuffer(e))return n(new Error("Iconv decoding stream needs buffers as its input."));try{var i=this.conv.write(e);i&&i.length&&this.push(i,this.encoding),n()}catch(e){n(e)}},s.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},s.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",function(e){t+=e}),this.on("end",function(){e(null,t)}),this}},function(e,t,n){"use strict";var r=n(84).Buffer;e.exports=function(e){var t=void 0;e.supportsNodeEncodingsExtension=!(new r(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!t){if(t={},!e.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var i={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};r.isNativeEncoding=function(e){return e&&i[e.toLowerCase()]};var o=n(84).SlowBuffer;if(t.SlowBufferToString=o.prototype.toString,o.prototype.toString=function(n,i,o){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.SlowBufferToString.call(this,n,i,o):(void 0===i&&(i=0),void 0===o&&(o=this.length),e.decode(this.slice(i,o),n))},t.SlowBufferWrite=o.prototype.write,o.prototype.write=function(n,i,o,s){if(isFinite(i))isFinite(o)||(s=o,o=void 0);else{var a=s;s=i,i=o,o=a}i=+i||0;var c=this.length-i;if(o?(o=+o)>c&&(o=c):o=c,s=String(s||"utf8").toLowerCase(),r.isNativeEncoding(s))return t.SlowBufferWrite.call(this,n,i,o,s);if(n.length>0&&(o<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var u=e.encode(n,s);return u.length<o&&(o=u.length),u.copy(this,i,0,o),o},t.BufferIsEncoding=r.isEncoding,r.isEncoding=function(t){return r.isNativeEncoding(t)||e.encodingExists(t)},t.BufferByteLength=r.byteLength,r.byteLength=o.byteLength=function(n,i){return i=String(i||"utf8").toLowerCase(),r.isNativeEncoding(i)?t.BufferByteLength.call(this,n,i):e.encode(n,i).length},t.BufferToString=r.prototype.toString,r.prototype.toString=function(n,i,o){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.BufferToString.call(this,n,i,o):(void 0===i&&(i=0),void 0===o&&(o=this.length),e.decode(this.slice(i,o),n))},t.BufferWrite=r.prototype.write,r.prototype.write=function(n,i,o,s){var a=i,c=o,u=s;if(isFinite(i))isFinite(o)||(s=o,o=void 0);else{var l=s;s=i,i=o,o=l}if(s=String(s||"utf8").toLowerCase(),r.isNativeEncoding(s))return t.BufferWrite.call(this,n,a,c,u);i=+i||0;var d=this.length-i;if(o?(o=+o)>d&&(o=d):o=d,n.length>0&&(o<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var h=e.encode(n,s);return h.length<o&&(o=h.length),h.copy(this,i,0,o),o},e.supportsStreams){var s=n(68).Readable;t.ReadableSetEncoding=s.prototype.setEncoding,s.prototype.setEncoding=function(t,n){this._readableState.decoder=e.getDecoder(t,n),this._readableState.encoding=t},s.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!t)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete r.isNativeEncoding;var i=n(84).SlowBuffer;if(i.prototype.toString=t.SlowBufferToString,i.prototype.write=t.SlowBufferWrite,r.isEncoding=t.BufferIsEncoding,r.byteLength=t.BufferByteLength,r.prototype.toString=t.BufferToString,r.prototype.write=t.BufferWrite,e.supportsStreams){var o=n(68).Readable;o.prototype.setEncoding=t.ReadableSetEncoding,delete o.prototype.collect}t=void 0}}}},function(e,t,n){"use strict";var r=n(478),i=n(209),o=n(208);t.toSubscriber=function(e,t,n){if(e){if(e instanceof r.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||n?new r.Subscriber(e,t,n):new r.Subscriber(o.empty)}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=n(206),o=n(479),s=n(208),a=n(209),c=function(e){function t(t,n,r){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!t){this.destination=s.empty;break}if("object"==typeof t){if(l(t)){var i=t[a.rxSubscriber]();this.syncErrorThrowable=i.syncErrorThrowable,this.destination=i,i.add(this)}else this.syncErrorThrowable=!0,this.destination=new u(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new u(this,t,n,r)}}return r(t,e),t.prototype[a.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(o.Subscription);t.Subscriber=c;var u=function(e){function t(t,n,r,o){var a;e.call(this),this._parentSubscriber=t;var c=this;i.isFunction(n)?a=n:n&&(a=n.next,r=n.error,o=n.complete,n!==s.empty&&(c=Object.create(n),i.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this))),this._context=c,this._next=a,this._error=r,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(c);function l(e){return e instanceof c||"syncErrorThrowable"in e&&e[a.rxSubscriber]}},function(e,t,n){"use strict";var r=n(480),i=n(481),o=n(206),s=n(482),a=n(207),c=n(483),u=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,u=this._parents,d=this._unsubscribe,h=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,f=u?u.length:0;n;)n.remove(this),n=++p<f&&u[p]||null;if(o.isFunction(d))s.tryCatch(d).call(this)===a.errorObject&&(t=!0,e=e||(a.errorObject.e instanceof c.UnsubscriptionError?l(a.errorObject.e.errors):[a.errorObject.e]));if(r.isArray(h))for(p=-1,f=h.length;++p<f;){var g=h[p];if(i.isObject(g))if(s.tryCatch(g.unsubscribe).call(g)===a.errorObject){t=!0,e=e||[];var m=a.errorObject.e;m instanceof c.UnsubscriptionError?e=e.concat(l(m.errors)):e.push(m)}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;t&&t!==e?n?-1===n.indexOf(e)&&n.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function l(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}t.Subscription=u},function(e,t,n){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t,n){"use strict";t.isObject=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";var r,i=n(207);function o(){try{return r.apply(this,arguments)}catch(e){return i.errorObject.e=e,i.errorObject}}t.tryCatch=function(e){return r=e,o}},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},i=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return r(t,e),t}(Error);t.UnsubscriptionError=i},function(e,t,n){"use strict";var r=n(130);function i(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}t.getSymbolObservable=i,t.observable=i(r.root),t.$$observable=t.observable},function(e,t,n){"use strict";var r=n(486);function i(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:r.noop}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return i(e)},t.pipeFromArray=i},function(e,t,n){"use strict";t.noop=function(){}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4);n(8);const u=n(6),l=n(1),d=n(10),h=n(5),p=n(63),f=n(53),g=n(64),m=n(54),y=n(26),v={[g.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic]:"You have selected the macOS system install of Python, which is not recommended for use with the Python extension. Some functionality will be limited, please select a different interpreter.",[g.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic]:"The macOS system install of Python is not recommended, some functionality in the extension will be limited. Install another version of Python for the best experience."};class b extends p.BaseDiagnostic{constructor(e,t){super(e,v[e],a.DiagnosticSeverity.Error,y.DiagnosticScope.WorkspaceFolder,t)}}t.InvalidMacPythonInterpreterDiagnostic=b,t.InvalidMacPythonInterpreterServiceId="InvalidMacPythonInterpreterServiceId";let S=class extends p.BaseDiagnosticsService{constructor(e,t,n,r){super([g.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic,g.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic],e,!0),this.interpreterService=t,this.platform=n,this.helper=r,this.changeThrottleTimeout=1e3,this.addPythonPathChangedHandler()}diagnose(e){return o(this,void 0,void 0,function*(){if(!this.platform.isMac)return[];const t=this.serviceContainer.get(l.IConfigurationService).getSettings(e);if(!0===t.disableInstallationChecks)return[];if(!(yield this.interpreterService.hasInterpreters))return[];const n=yield this.interpreterService.getActiveInterpreter(e);return n&&this.helper.isMacDefaultPythonPath(t.pythonPath)&&n&&n.type===d.InterpreterType.Unknown?0===(yield this.interpreterService.getInterpreters(e)).filter(e=>!this.helper.isMacDefaultPythonPath(e.path)).length?[new b(g.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic,e)]:[new b(g.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic,e)]:[]})}onHandle(e){return o(this,void 0,void 0,function*(){if(0===e.length)return;const t=this.serviceContainer.get(y.IDiagnosticHandlerService,m.DiagnosticCommandPromptHandlerServiceId);yield Promise.all(e.map(e=>o(this,void 0,void 0,function*(){if(!this.canHandle(e))return;const n=this.getCommandPrompts(e);return t.handle(e,{commandPrompts:n,message:e.message})})))})}addPythonPathChangedHandler(){const e=this.serviceContainer.get(c.IWorkspaceService);this.serviceContainer.get(l.IDisposableRegistry).push(e.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this)))}onDidChangeConfiguration(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.get(c.IWorkspaceService),n=t.hasWorkspaceFolders?t.workspaceFolders.map(e=>e.uri):[void 0],r=n.findIndex(t=>e.affectsConfiguration("python.pythonPath",t));-1!==r&&(this.timeOut&&(clearTimeout(this.timeOut),this.timeOut=void 0),this.timeOut=setTimeout(()=>{this.timeOut=void 0,this.diagnose(n[r]).then(e=>this.handle(e)).ignoreErrors()},this.changeThrottleTimeout))})}getCommandPrompts(e){const t=this.serviceContainer.get(f.IDiagnosticsCommandFactory);switch(e.code){case g.DiagnosticCodes.MacInterpreterSelectedAndHaveOtherInterpretersDiagnostic:return[{prompt:"Select Python Interpreter",command:t.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})}];case g.DiagnosticCodes.MacInterpreterSelectedAndNoOtherInterpretersDiagnostic:return[{prompt:"Learn more",command:t.createCommand(e,{type:"launch",options:"https://code.visualstudio.com/docs/python/python-tutorial#_prerequisites"})},{prompt:"Download",command:t.createCommand(e,{type:"launch",options:"https://www.python.org/downloads"})}];default:throw new Error("Invalid diagnostic for 'InvalidMacPythonInterpreterService'")}}};S=r([s.injectable(),i(0,s.inject(h.IServiceContainer)),i(1,s.inject(d.IInterpreterService)),i(2,s.inject(u.IPlatformService)),i(3,s.inject(d.IInterpreterHelper))],S),t.InvalidMacPythonInterpreterService=S},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(2);function s(e){const t=e.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),n=i.join(e.env.windir,t?"Sysnative":"System32");return i.join(n,"cmd.exe")}t.getCommandPromptLocation=s,t.useCommandPromptAsDefaultShell=function(e,t){return r(this,void 0,void 0,function*(){const n=s(e);yield t.updateSectionSetting("terminal","integrated.shell.windows",n,void 0,o.ConfigurationTarget.Global)})}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2);n(8);const c=n(1),u=n(10),l=n(5),d=n(63),h=n(53),p=n(64),f=n(54),g=n(26),m={[p.DiagnosticCodes.NoPythonInterpretersDiagnostic]:"Python is not installed. Please download and install Python before using the extension.",[p.DiagnosticCodes.NoCurrentlySelectedPythonInterpreterDiagnostic]:"No Python interpreter is selected. You need to select a Python interpreter to enable features such as IntelliSense, linting, and debugging."};class y extends d.BaseDiagnostic{constructor(e,t){super(e,m[e],a.DiagnosticSeverity.Error,g.DiagnosticScope.WorkspaceFolder,t)}}t.InvalidPythonInterpreterDiagnostic=y,t.InvalidPythonInterpreterServiceId="InvalidPythonInterpreterServiceId";let v=class extends d.BaseDiagnosticsService{constructor(e){super([p.DiagnosticCodes.NoPythonInterpretersDiagnostic,p.DiagnosticCodes.NoCurrentlySelectedPythonInterpreterDiagnostic],e,!1)}diagnose(e){return o(this,void 0,void 0,function*(){if(!0===this.serviceContainer.get(c.IConfigurationService).getSettings(e).disableInstallationChecks)return[];const t=this.serviceContainer.get(u.IInterpreterService);return(yield t.hasInterpreters)?(yield t.getActiveInterpreter(e))?[]:[new y(p.DiagnosticCodes.NoCurrentlySelectedPythonInterpreterDiagnostic,e)]:[new y(p.DiagnosticCodes.NoPythonInterpretersDiagnostic,e)]})}onHandle(e){return o(this,void 0,void 0,function*(){if(0===e.length)return;const t=this.serviceContainer.get(g.IDiagnosticHandlerService,f.DiagnosticCommandPromptHandlerServiceId);yield Promise.all(e.map(e=>o(this,void 0,void 0,function*(){if(!this.canHandle(e))return;const n=this.getCommandPrompts(e);return t.handle(e,{commandPrompts:n,message:e.message})})))})}getCommandPrompts(e){const t=this.serviceContainer.get(h.IDiagnosticsCommandFactory);switch(e.code){case p.DiagnosticCodes.NoPythonInterpretersDiagnostic:return[{prompt:"Download",command:t.createCommand(e,{type:"launch",options:"https://www.python.org/downloads"})}];case p.DiagnosticCodes.NoCurrentlySelectedPythonInterpreterDiagnostic:return[{prompt:"Select Python Interpreter",command:t.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})}];default:throw new Error("Invalid diagnostic for 'InvalidPythonInterpreterService'")}}};v=r([s.injectable(),i(0,s.inject(l.IServiceContainer))],v),t.InvalidPythonInterpreterService=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(5),a=n(491),c=n(492),u=n(493);let l=class{constructor(e){this.serviceContainer=e}createCommand(e,t){const n=t.type;switch(t.type){case"ignore":return new c.IgnoreDiagnosticCommand(e,this.serviceContainer,t.options);case"launch":return new u.LaunchBrowserCommand(e,this.serviceContainer,t.options);case"executeVSCCommand":return new a.ExecuteVSCCommand(e,this.serviceContainer,t.options);default:throw new Error(`Unknown Diagnostic command commandType '${n}'`)}}};l=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],l),t.DiagnosticsCommandFactory=l},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(7),s=n(9),a=n(131);t.ExecuteVSCCommand=class extends a.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.commandName=n}invoke(){return r(this,void 0,void 0,function*(){return o.sendTelemetryEvent(s.EventName.DIAGNOSTICS_ACTION,void 0,{commandName:this.commandName}),this.serviceContainer.get(i.ICommandManager).executeCommand(this.commandName).then(()=>void 0)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),i=n(9),o=n(26),s=n(131);t.IgnoreDiagnosticCommand=class extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.scope=n}invoke(){return r.sendTelemetryEvent(i.EventName.DIAGNOSTICS_ACTION,void 0,{ignoreCode:this.diagnostic.code}),this.serviceContainer.get(o.IDiagnosticFilterService).ignoreDiagnostic(this.diagnostic.code,this.scope)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(7),s=n(9),a=n(131);t.LaunchBrowserCommand=class extends a.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.url=n}invoke(){return r(this,void 0,void 0,function*(){return o.sendTelemetryEvent(s.EventName.DIAGNOSTICS_ACTION,void 0,{url:this.url}),this.serviceContainer.get(i.IBrowserService).launch(this.url)})}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(1),c=n(5),u=n(26);var l;!function(e){e.GlobalDiagnosticFilter="GLOBAL_DIAGNOSTICS_FILTER",e.WorkspaceDiagnosticFilter="WORKSPACE_DIAGNOSTICS_FILTER"}(l=t.FilterKeys||(t.FilterKeys={}));let d=class{constructor(e){this.serviceContainer=e}shouldIgnoreDiagnostic(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.get(a.IPersistentStateFactory),n=t.createGlobalPersistentState(l.GlobalDiagnosticFilter,[]),r=t.createWorkspacePersistentState(l.WorkspaceDiagnosticFilter,[]);return n.value.indexOf(e)>=0||r.value.indexOf(e)>=0})}ignoreDiagnostic(e,t){return o(this,void 0,void 0,function*(){const n=this.serviceContainer.get(a.IPersistentStateFactory),r=t===u.DiagnosticScope.Global?n.createGlobalPersistentState(l.GlobalDiagnosticFilter,[]):n.createWorkspacePersistentState(l.WorkspaceDiagnosticFilter,[]),i=r.value.slice();yield r.updateValue(i.concat(e))})}};d=r([s.injectable(),i(0,s.inject(c.IServiceContainer))],d),t.DiagnosticFilterService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(11),l=n(1),d=n(13);let h=class{constructor(e,t,n,r){this.commandManager=e,this.disposables=t,this.configurationService=n,this.shell=r}register(){this.disposables.push(this.commandManager.registerCommand(u.Commands.Enable_SourceMap_Support,this.onEnable,this))}enable(){return o(this,void 0,void 0,function*(){yield this.configurationService.updateSetting("diagnostics.sourceMapsEnabled",!0,void 0,a.ConfigurationTarget.Global),yield this.commandManager.executeCommand("workbench.action.reloadWindow")})}onEnable(){return o(this,void 0,void 0,function*(){const e=d.Diagnostics.enableSourceMapsAndReloadVSC();(yield this.shell.showWarningMessage(d.Diagnostics.warnBeforeEnablingSourceMaps(),e))===e&&(yield this.enable())})}};h=r([s.injectable(),i(0,s.inject(c.ICommandManager)),i(1,s.inject(l.IDisposableRegistry)),i(2,s.inject(l.IConfigurationService)),i(3,s.inject(c.IApplicationShell))],h),t.SourceMapSupportService=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),i=n(497),o=n(498),s=n(499),a=n(500),c=n(501),u=n(124);t.registerTypes=function(e){e.addSingleton(u.IDotNetCompatibilityService,i.DotNetCompatibilityService),e.addSingleton(u.IOSDotNetCompatibilityService,s.MacDotNetCompatibilityService,r.OSType.OSX),e.addSingleton(u.IOSDotNetCompatibilityService,c.WindowsDotNetCompatibilityService,r.OSType.Windows),e.addSingleton(u.IOSDotNetCompatibilityService,o.LinuxDotNetCompatibilityService,r.OSType.Linux),e.addSingleton(u.IOSDotNetCompatibilityService,a.UnknownOSDotNetCompatibilityService,r.OSType.Unknown)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(6),a=n(34),c=n(124);let u=class{constructor(e,t,n,r,i){this.platformService=i,this.mappedServices=new Map,this.mappedServices.set(a.OSType.Unknown,e),this.mappedServices.set(a.OSType.OSX,t),this.mappedServices.set(a.OSType.Windows,n),this.mappedServices.set(a.OSType.Linux,r)}isSupported(){return this.mappedServices.get(this.platformService.osType).isSupported()}};u=r([o.injectable(),i(0,o.inject(c.IOSDotNetCompatibilityService)),i(0,o.named(a.OSType.Unknown)),i(1,o.inject(c.IOSDotNetCompatibilityService)),i(1,o.named(a.OSType.OSX)),i(2,o.inject(c.IOSDotNetCompatibilityService)),i(2,o.named(a.OSType.Windows)),i(3,o.inject(c.IOSDotNetCompatibilityService)),i(3,o.named(a.OSType.Linux)),i(4,o.inject(s.IPlatformService))],u),t.DotNetCompatibilityService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(12),c=n(6);let u=class{constructor(e){this.platformService=e}isSupported(){return o(this,void 0,void 0,function*(){return!!this.platformService.is64bit||(a.traceError(".NET is not supported on 32 Bit Linux"),!1)})}};r([a.traceDecorators.verbose("Checking support of .NET")],u.prototype,"isSupported",null),u=r([s.injectable(),i(0,s.inject(c.IPlatformService))],u),t.LinuxDotNetCompatibilityService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(6);let c=class{constructor(e){this.platformService=e}isSupported(){return o(this,void 0,void 0,function*(){return(yield this.platformService.getVersion()).compare("16.0.0")>=0})}};c=r([s.injectable(),i(0,s.inject(a.IPlatformService))],c),t.MacDotNetCompatibilityService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);let s=class{isSupported(){return i(this,void 0,void 0,function*(){return!1})}};r([n(12).traceDecorators.info("Unable to determine compatiblity of DOT.NET with an unknown OS")],s.prototype,"isSupported",null),s=r([o.injectable()],s),t.UnknownOSDotNetCompatibilityService=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let o=class{isSupported(){return i(this,void 0,void 0,function*(){return!0})}};o=r([n(0).injectable()],o),t.WindowsDotNetCompatibilityService=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),i=n(503),o=n(1),s=n(505),a=n(506),c=n(508),u=n(509),l=n(510),d=n(511),h=n(133);t.registerTypes=function(e){e.addSingleton(h.IModuleInstaller,a.CondaInstaller),e.addSingleton(h.IModuleInstaller,u.PipInstaller),e.addSingleton(h.IModuleInstaller,c.PipEnvInstaller),e.addSingleton(h.IInstallationChannelManager,s.InstallationChannelManager),e.addSingleton(h.IProductService,d.ProductService),e.addSingleton(h.IProductPathService,l.CTagsProductPathService,o.ProductType.WorkspaceSymbols),e.addSingleton(h.IProductPathService,l.FormatterProductPathService,o.ProductType.Formatter),e.addSingleton(h.IProductPathService,l.LinterProductPathService,o.ProductType.Linter),e.addSingleton(h.IProductPathService,l.TestFrameworkProductPathService,o.ProductType.TestFramework),e.addSingleton(h.IProductPathService,l.RefactoringLibraryProductPathService,o.ProductType.RefactoringLibrary),e.addSingleton(r.IWebPanelProvider,i.WebPanelProvider)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(5),a=n(504);let c=class{constructor(e){this.serviceContainer=e}create(e,t,n,r,i){return new a.WebPanel(this.serviceContainer,e,t,n,r,i)}};c=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],c),t.WebPanelProvider=c},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const i=n(28),o=n(3),s=n(2),a=n(13),c=n(31),u=n(1);t.WebPanel=class{constructor(e,t,n,r,i,a){this.disposableRegistry=e.get(u.IDisposableRegistry),this.listener=t,this.rootPath=o.dirname(r),this.panel=s.window.createWebviewPanel(n.toLowerCase().replace(" ",""),n,{viewColumn:s.ViewColumn.Two,preserveFocus:!0},{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[s.Uri.file(this.rootPath)]}),this.loadPromise=this.load(r,i,a)}show(){return r(this,void 0,void 0,function*(){yield this.loadPromise,this.panel&&this.panel.reveal(s.ViewColumn.Two,!0)})}isVisible(){return!!this.panel&&this.panel.visible}postMessage(e){this.panel&&this.panel.webview&&this.panel.webview.postMessage(e)}load(e,t,n){return r(this,void 0,void 0,function*(){if(this.panel)if(yield i.pathExists(e))this.panel.webview.html=this.generateReactHtml(e,t,n),this.disposableRegistry.push(this.panel.onDidDispose(()=>{this.panel=void 0,this.listener.dispose()})),this.disposableRegistry.push(this.panel.webview.onDidReceiveMessage(e=>{this.listener.onMessage(e.type,e.payload)}));else{const t=a.DataScience.badWebPanelFormatString();this.panel.webview.html=t.format(e)}})}generateReactHtml(e,t,n){const r=s.Uri.file(`${o.dirname(e)}/`),i=s.Uri.file(e),u=r.with({scheme:"vscode-resource"}),l=i.with({scheme:"vscode-resource"}),d=JSON.stringify(a.getCollection()),h=t||"",p=n?JSON.stringify(n):"{}";return`<!doctype html>\n        <html lang="en">\n            <head>\n                <meta charset="utf-8">\n                <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">\n                <meta name="theme-color" content="#000000">\n                <meta name="theme" content="${c.Identifiers.GeneratedThemeName}"/>\n                <title>React App</title>\n                <base href="${u}"/>\n                <style type="text/css">\n                ${h}\n                </style>\n            </head>\n            <body>\n                <noscript>You need to enable JavaScript to run this app.</noscript>\n                <div id="root"></div>\n                <script type="text/javascript">\n                    function resolvePath(relativePath) {\n                        if (relativePath && relativePath[0] == '.' && relativePath[1] != '.') {\n                            return "${u}" + relativePath.substring(1);\n                        }\n\n                        return "${u}" + relativePath;\n                    }\n                    function getLocStrings() {\n                        return ${d};\n                    }\n                    function getInitialSettings() {\n                        return ${p};\n                    }\n                <\/script>\n            <script type="text/javascript" src="${l}"><\/script></body>\n        </html>`}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(10),c=n(5),u=n(4),l=n(6),d=n(132),h=n(133);let p=class{constructor(e){this.serviceContainer=e}getInstallationChannel(e,t){return o(this,void 0,void 0,function*(){const n=yield this.getInstallationChannels(t);if(1===n.length)return n[0];const r=d.ProductNames.get(e),i=this.serviceContainer.get(u.IApplicationShell);if(0===n.length)return void(yield this.showNoInstallersMessage(t));const o=`Select an option to install ${r}`,s=n.map(e=>({label:`Install using ${e.displayName}`,description:"",installer:e})),a=yield i.showQuickPick(s,{matchOnDescription:!0,matchOnDetail:!0,placeHolder:o});return a?a.installer:void 0})}getInstallationChannels(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.getAll(h.IModuleInstaller),n=[];if(0===t.length)return[];t.sort((e,t)=>t.priority-e.priority);let r=t[0].priority;for(const i of t){if(i.priority!==r){if(n.length>0)break;r=i.priority}(yield i.isSupported(e))&&n.push(i)}return n})}showNoInstallersMessage(e){return o(this,void 0,void 0,function*(){const t=yield this.serviceContainer.get(a.IInterpreterService).getActiveInterpreter(e);if(!t)return;const n=this.serviceContainer.get(u.IApplicationShell),r="Search for help";let i;if((i=t.type===a.InterpreterType.Conda?yield n.showErrorMessage("There is no Conda or Pip installer available in the selected environment.",r):yield n.showErrorMessage("There is no Pip installer available in the selected environment.",r))===r){const e=this.serviceContainer.get(l.IPlatformService),r=e.isWindows?"Windows":e.isMac?"MacOS":"Linux";n.openUrl(`https://www.bing.com/search?q=Install Pip ${r} ${t.type===a.InterpreterType.Conda?"Conda":""}`)}})}};p=r([s.injectable(),i(0,s.inject(c.IServiceContainer))],p),t.InstallationChannelManager=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(10),c=n(5),u=n(1),l=n(134);let d=class extends l.ModuleInstaller{constructor(e){super(e)}get displayName(){return"Conda"}get priority(){return 0}isSupported(e){return o(this,void 0,void 0,function*(){if(!1===this.isCondaAvailable)return!1;const t=this.serviceContainer.get(a.ICondaService);return this.isCondaAvailable=yield t.isCondaAvailable(),!!this.isCondaAvailable&&this.isCurrentEnvironmentACondaEnvironment(e)})}getExecutionInfo(e,t){return o(this,void 0,void 0,function*(){const n=this.serviceContainer.get(a.ICondaService),r=yield n.getCondaFile(),i=this.serviceContainer.get(u.IConfigurationService).getSettings(t).pythonPath,o=yield n.getCondaEnvironment(i),s=["install"];return o&&o.name?(s.push("--name"),s.push(o.name.toCommandArgument())):o&&o.path&&(s.push("--prefix"),s.push(o.path.fileToCommandArgument())),s.push(e),{args:s,execPath:r}})}isCurrentEnvironmentACondaEnvironment(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.get(a.ICondaService),n=this.serviceContainer.get(u.IConfigurationService).getSettings(e).pythonPath;return t.isCondaEnvironment(n)})}};d=r([s.injectable(),i(0,s.inject(c.IServiceContainer))],d),t.CondaInstaller=d},function(e,t){e.exports=require("./node_modules/sudo-prompt")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(10),c=n(5),u=n(134);t.pipenvName="pipenv";let l=class extends u.ModuleInstaller{constructor(e){super(e),this.pipenv=this.serviceContainer.get(a.IInterpreterLocatorService,a.PIPENV_SERVICE)}get displayName(){return t.pipenvName}get priority(){return 10}isSupported(e){return o(this,void 0,void 0,function*(){const t=yield this.pipenv.getInterpreters(e);return t&&t.length>0})}getExecutionInfo(e,n){return o(this,void 0,void 0,function*(){return{args:["install",e,"--dev"],execPath:t.pipenvName}})}};l=r([s.injectable(),i(0,s.inject(c.IServiceContainer))],l),t.PipEnvInstaller=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(5),c=n(4),u=n(14),l=n(134);let d=class extends l.ModuleInstaller{constructor(e){super(e)}get displayName(){return"Pip"}get priority(){return 0}isSupported(e){return this.isPipAvailable(e)}getExecutionInfo(e,t){return o(this,void 0,void 0,function*(){const t=[],n=this.serviceContainer.get(c.IWorkspaceService).getConfiguration("http").get("proxy","");return n.length>0&&(t.push("--proxy"),t.push(n)),{args:[...t,"install","-U",e],moduleName:"pip"}})}isPipAvailable(e){return this.serviceContainer.get(u.IPythonExecutionFactory).create({resource:e}).then(e=>e.isModuleInstalled("pip")).catch(()=>!1)}};d=r([s.injectable(),i(0,s.inject(a.IServiceContainer))],d),t.PipInstaller=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(3),a=n(135),c=n(5),u=n(35),l=n(15),d=n(1);let h=class{constructor(e){this.serviceContainer=e,this.configService=e.get(d.IConfigurationService),this.productInstaller=e.get(d.IInstaller)}isExecutableAModule(e,t){let n;try{n=this.productInstaller.translateProductToModuleName(e,d.ModuleNamePurpose.run)}catch(e){}const r=this.getExecutableNameFromSettings(e,t);return"string"==typeof n&&n.length>0&&s.basename(r)===r}};h=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],h);let p=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.configService.getSettings(t).workspaceSymbols.ctagsPath}};p=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],p),t.CTagsProductPathService=p;let f=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){const n=this.configService.getSettings(t),r=this.serviceContainer.get(a.IFormatterHelper).getSettingsPropertyNames(e);return n.formatting[r.pathName]}};f=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],f),t.FormatterProductPathService=f;let g=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.serviceContainer.get(u.ILinterManager).getLinterInfo(e).pathName(t)}};g=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],g),t.LinterProductPathService=g;let m=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){const n=this.serviceContainer.get(l.ITestsHelper).getSettingsPropertyNames(e);return n.pathName?this.configService.getSettings(t).unitTest[n.pathName]:this.productInstaller.translateProductToModuleName(e,d.ModuleNamePurpose.run)}};m=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],m),t.TestFrameworkProductPathService=m;let y=class extends h{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.productInstaller.translateProductToModuleName(e,d.ModuleNamePurpose.run)}};y=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],y),t.RefactoringLibraryProductPathService=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(1);let s=class{constructor(){this.ProductTypes=new Map,this.ProductTypes.set(o.Product.bandit,o.ProductType.Linter),this.ProductTypes.set(o.Product.flake8,o.ProductType.Linter),this.ProductTypes.set(o.Product.mypy,o.ProductType.Linter),this.ProductTypes.set(o.Product.pep8,o.ProductType.Linter),this.ProductTypes.set(o.Product.prospector,o.ProductType.Linter),this.ProductTypes.set(o.Product.pydocstyle,o.ProductType.Linter),this.ProductTypes.set(o.Product.pylama,o.ProductType.Linter),this.ProductTypes.set(o.Product.pylint,o.ProductType.Linter),this.ProductTypes.set(o.Product.ctags,o.ProductType.WorkspaceSymbols),this.ProductTypes.set(o.Product.nosetest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.pytest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.unittest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.autopep8,o.ProductType.Formatter),this.ProductTypes.set(o.Product.black,o.ProductType.Formatter),this.ProductTypes.set(o.Product.yapf,o.ProductType.Formatter),this.ProductTypes.set(o.Product.rope,o.ProductType.RefactoringLibrary)}getProductType(e){return this.ProductTypes.get(e)}};s=r([i.injectable()],s),t.ProductService=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(513),i=n(514),o=n(137),s=n(6);t.registerTypes=function(e){e.addSingleton(s.IPlatformService,i.PlatformService),e.addSingleton(s.IFileSystem,r.FileSystem),e.addSingleton(s.IRegistry,o.RegistryImplementation)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(61),a=n(18),c=n(28),u=n(125),l=n(0),d=n(3),h=n(184),p=n(16),f=n(6);let g=class{constructor(e){this.platformService=e}get directorySeparatorChar(){return d.sep}objectExists(e,t){return new Promise(n=>{c.stat(e,(e,r)=>n(!e&&t(r)))})}fileExists(e){return this.objectExists(e,e=>e.isFile())}fileExistsSync(e){return c.existsSync(e)}readFile(e){return c.readFile(e).then(e=>e.toString())}writeFile(e,t,n={encoding:"utf8"}){return o(this,void 0,void 0,function*(){yield c.writeFile(e,t,n)})}directoryExists(e){return this.objectExists(e,e=>e.isDirectory())}createDirectory(e){return c.mkdirp(e)}deleteDirectory(e){const t=p.createDeferred();return c.rmdir(e,e=>e?t.reject(e):t.resolve()),t.promise}getSubDirectories(e){return new Promise(t=>{c.readdir(e,(n,r)=>{if(n)return t([]);const i=[];r.forEach(t=>{const n=d.join(e,t);try{c.statSync(n).isDirectory()&&i.push(n)}catch(e){}}),t(i)})})}getFiles(e){return o(this,void 0,void 0,function*(){return(yield c.readdir(e)).filter(t=>o(this,void 0,void 0,function*(){const n=d.join(e,t);return!!(yield c.stat(n)).isFile()}))})}arePathsSame(e,t){return e=d.normalize(e),t=d.normalize(t),this.platformService.isWindows?e.toUpperCase()===t.toUpperCase():e===t}appendFileSync(e,t,n){return c.appendFileSync(e,t,n)}getRealPath(e){return new Promise(t=>{c.realpath(e,(n,r)=>{t(n?e:r)})})}copyFile(e,t){const n=p.createDeferred(),r=c.createReadStream(e).on("error",e=>{n.reject(e)}),i=c.createWriteStream(t).on("error",e=>{n.reject(e)}).on("close",()=>{n.resolve()});return r.pipe(i),n.promise}deleteFile(e){const t=p.createDeferred();return c.unlink(e,e=>e?t.reject(e):t.resolve()),t.promise}getFileHash(e){return new Promise(t=>{c.lstat(e,(e,n)=>{if(e)t();else{const e=s.createHash("sha512").update(`${n.ctimeMs}-${n.mtimeMs}`).digest("hex");t(e)}})})}search(e){return new Promise((t,n)=>{u(e,(e,r)=>{if(e)return n(e);t(Array.isArray(r)?r:[])})})}createTemporaryFile(e){return new Promise((t,n)=>{h.file({postfix:e},(e,r,i,o)=>{if(e)return n(e);t({filePath:r,dispose:o})})})}createWriteStream(e){return a.createWriteStream(e)}chmod(e,t){return new Promise((n,r)=>{a.chmod(e,t,e=>{if(e)return r(e);n()})})}};g=r([l.injectable(),i(0,l.inject(f.IPlatformService))],g),t.FileSystem=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(17),a=n(42),c=n(7),u=n(9),l=n(34),d=n(136),h=n(47);let p=class{constructor(){this.osType=function(e=process.platform){return/^win/.test(e)?l.OSType.Windows:/^darwin/.test(e)?l.OSType.OSX:/^linux/.test(e)?l.OSType.Linux:(c.sendTelemetryEvent(u.EventName.PLATFORM_INFO,void 0,{failureType:u.PlatformErrors.FailedToDetermineOS}),l.OSType.Unknown)}()}get pathVariableName(){return this.isWindows?h.WINDOWS_PATH_VARIABLE_NAME:h.NON_WINDOWS_PATH_VARIABLE_NAME}get virtualEnvBinName(){return this.isWindows?"Scripts":"bin"}getVersion(){return i(this,void 0,void 0,function*(){if(this.version)return this.version;switch(this.osType){case l.OSType.Windows:case l.OSType.OSX:try{const e=a.coerce(s.release());if(e)return c.sendTelemetryEvent(u.EventName.PLATFORM_INFO,void 0,{osVersion:`${e.major}.${e.minor}.${e.patch}`}),this.version=e;throw new Error("Unable to parse version")}catch(e){return c.sendTelemetryEvent(u.EventName.PLATFORM_INFO,void 0,{failureType:u.PlatformErrors.FailedToParseVersion}),d.parseVersion(s.release())}default:throw new Error("Not Supported")}})}get isWindows(){return this.osType===l.OSType.Windows}get isMac(){return this.osType===l.OSType.OSX}get isLinux(){return this.osType===l.OSType.Linux}get is64bit(){return"x64"===n(194)()}};p=r([o.injectable()],p),t.PlatformService=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(201),i=n(516),o=n(517),s=n(519),a=n(14);t.registerTypes=function(e){e.addSingleton(a.IBufferDecoder,r.BufferDecoder),e.addSingleton(a.IProcessServiceFactory,i.ProcessServiceFactory),e.addSingleton(a.IPythonExecutionFactory,o.PythonExecutionFactory),e.addSingleton(a.IPythonToolExecutionService,s.PythonToolExecutionService)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(5),c=n(70),u=n(129),l=n(14);let d=class{constructor(e){this.serviceContainer=e,this.envVarsService=e.get(c.IEnvironmentVariablesProvider)}create(e){return o(this,void 0,void 0,function*(){const t=yield this.envVarsService.getEnvironmentVariables(e),n=this.serviceContainer.get(l.IBufferDecoder);return new u.ProcessService(n,t)})}};d=r([s.injectable(),i(0,s.inject(a.IServiceContainer))],d),t.ProcessServiceFactory=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(139),c=n(5),u=n(7),l=n(9),d=n(1),h=n(129),p=n(518),f=n(14);let g=class{constructor(e,t,n,r,i){this.serviceContainer=e,this.activationHelper=t,this.processServiceFactory=n,this.configService=r,this.decoder=i}create(e){return o(this,void 0,void 0,function*(){const t=e.pythonPath?e.pythonPath:this.configService.getSettings(e.resource).pythonPath,n=yield this.processServiceFactory.create(e.resource);return new p.PythonExecutionService(this.serviceContainer,n,t)})}createActivatedEnvironment(e){return o(this,void 0,void 0,function*(){const t=yield this.activationHelper.getActivatedEnvironmentVariables(e.resource,e.interpreter),n=t&&Object.keys(t).length>0;if(u.sendTelemetryEvent(l.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,void 0,{hasEnvVars:n}),!n)return this.create({resource:e.resource,pythonPath:e.interpreter?e.interpreter.path:void 0});const r=e.interpreter?e.interpreter.path:this.configService.getSettings(e.resource).pythonPath,i=new h.ProcessService(this.decoder,Object.assign({},t));return new p.PythonExecutionService(this.serviceContainer,i,r)})}};g=r([s.injectable(),i(0,s.inject(c.IServiceContainer)),i(1,s.inject(a.IEnvironmentActivationService)),i(2,s.inject(f.IProcessServiceFactory)),i(3,s.inject(d.IConfigurationService)),i(4,s.inject(f.IBufferDecoder))],g),t.PythonExecutionFactory=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(3),a=n(11),c=n(213),u=n(115),l=n(12),d=n(6),h=n(34),p=n(136);let f=class{constructor(e,t,n){this.procService=t,this.pythonPath=n,this.fileSystem=e.get(d.IFileSystem)}getInterpreterInformation(){return i(this,void 0,void 0,function*(){const e=s.join(a.EXTENSION_ROOT_DIR,"pythonFiles","interpreterInfo.py");try{const t=yield this.procService.exec(this.pythonPath,[e],{mergeStdOutErr:!0}).then(e=>e.stdout.trim());let n;try{n=JSON.parse(t)}catch(e){return void l.traceError(`Failed to parse interpreter information for '${this.pythonPath}' with JSON ${t}`,e)}const r=4===n.versionInfo.length?`${n.versionInfo.slice(0,3).join(".")}-${n.versionInfo[3]}`:n.versionInfo.join(".");return{architecture:n.is64Bit?h.Architecture.x64:h.Architecture.x86,path:this.pythonPath,version:p.parsePythonVersion(r),sysVersion:n.sysVersion,sysPrefix:n.sysPrefix}}catch(e){l.traceError(`Failed to get interpreter information for '${this.pythonPath}'`,e)}})}getExecutablePath(){return i(this,void 0,void 0,function*(){return(yield this.fileSystem.fileExists(this.pythonPath))?this.pythonPath:this.procService.exec(this.pythonPath,["-c","import sys;print(sys.executable)"],{throwOnStdErr:!0}).then(e=>e.stdout.trim())})}isModuleInstalled(e){return i(this,void 0,void 0,function*(){return this.procService.exec(this.pythonPath,["-c",`import ${e}`],{throwOnStdErr:!0}).then(()=>!0).catch(()=>!1)})}execObservable(e,t){const n=Object.assign({},t);return this.procService.execObservable(this.pythonPath,e,n)}execModuleObservable(e,t,n){const r=Object.assign({},n);return this.procService.execObservable(this.pythonPath,["-m",e,...t],r)}exec(e,t){return i(this,void 0,void 0,function*(){const n=Object.assign({},t);return this.procService.exec(this.pythonPath,e,n)})}execModule(e,t,n){return i(this,void 0,void 0,function*(){const r=Object.assign({},n),i=yield this.procService.exec(this.pythonPath,["-m",e,...t],r);if(e&&c.ErrorUtils.outputHasModuleNotInstalledError(e,i.stderr)){if(!(yield this.isModuleInstalled(e)))throw new u.ModuleNotInstalledError(e)}return i})}};f=r([o.injectable()],f),t.PythonExecutionService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(5),c=n(14);let u=class{constructor(e){this.serviceContainer=e}execObservable(e,t,n){return o(this,void 0,void 0,function*(){if(t.env)throw new Error("Environment variables are not supported");if(e.moduleName&&e.moduleName.length>0){return(yield this.serviceContainer.get(c.IPythonExecutionFactory).create({resource:n})).execModuleObservable(e.moduleName,e.args,t)}return(yield this.serviceContainer.get(c.IProcessServiceFactory).create(n)).execObservable(e.execPath,e.args,Object.assign({},t))})}exec(e,t,n){return o(this,void 0,void 0,function*(){if(t.env)throw new Error("Environment variables are not supported");if(e.moduleName&&e.moduleName.length>0){return(yield this.serviceContainer.get(c.IPythonExecutionFactory).create({resource:n})).execModule(e.moduleName,e.args,t)}return(yield this.serviceContainer.get(c.IProcessServiceFactory).create(n)).exec(e.execPath,e.args,Object.assign({},t))})}};u=r([s.injectable(),i(0,s.inject(a.IServiceContainer))],u),t.PythonToolExecutionService=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(27),i=n(521),o=n(523),s=n(525),a=n(212),c=n(526),u=n(527),l=n(528),d=n(4),h=n(200),p=n(529),f=n(530),g=n(90),m=n(531),y=n(140),v=n(12),b=n(215),S=n(532),_=n(533),w=n(87),P=n(534),C=n(47),T=n(535),I=n(536),E=n(537),O=n(539),R=n(540),x=n(541),k=n(542),D=n(543),A=n(544),j=n(545),N=n(547),F=n(23),M=n(1),L=n(548),W=n(107);t.registerTypes=function(e){e.addSingletonInstance(M.IsWindows,C.IS_WINDOWS),e.addSingleton(M.IExtensions,u.Extensions),e.addSingleton(M.IRandom,W.Random),e.addSingleton(M.IPersistentStateFactory,P.PersistentStateFactory),e.addSingleton(M.ILogger,v.Logger),e.addSingleton(F.ITerminalServiceFactory,j.TerminalServiceFactory),e.addSingleton(M.IPathUtils,T.PathUtils),e.addSingleton(d.IApplicationShell,o.ApplicationShell),e.addSingleton(M.ICurrentProcess,I.CurrentProcess),e.addSingleton(M.IInstaller,y.ProductInstaller),e.addSingleton(d.ICommandManager,s.CommandManager),e.addSingleton(M.IConfigurationService,f.ConfigurationService),e.addSingleton(d.IWorkspaceService,h.WorkspaceService),e.addSingleton(d.IDocumentManager,c.DocumentManager),e.addSingleton(d.ITerminalManager,l.TerminalManager),e.addSingleton(d.IDebugService,a.DebugService),e.addSingleton(d.IApplicationEnvironment,i.ApplicationEnvironment),e.addSingleton(M.IBrowserService,b.BrowserService),e.addSingleton(r.IHttpClient,S.HttpClient),e.addSingleton(M.IEditorUtils,g.EditorUtils),e.addSingleton(w.INugetService,_.NugetService),e.addSingleton(F.ITerminalActivator,E.TerminalActivator),e.addSingleton(F.ITerminalActivationHandler,O.PowershellTerminalActivationFailedHandler),e.addSingleton(F.ITerminalHelper,N.TerminalHelper),e.addSingleton(F.ITerminalActivationCommandProvider,R.Bash,F.TerminalActivationProviders.bashCShellFish),e.addSingleton(F.ITerminalActivationCommandProvider,x.CommandPromptAndPowerShell,F.TerminalActivationProviders.commandPromptAndPowerShell),e.addSingleton(F.ITerminalActivationCommandProvider,A.PyEnvActivationCommandProvider,F.TerminalActivationProviders.pyenv),e.addSingleton(F.ITerminalActivationCommandProvider,k.CondaActivationCommandProvider,F.TerminalActivationProviders.conda),e.addSingleton(F.ITerminalActivationCommandProvider,D.PipEnvActivationCommandProvider,F.TerminalActivationProviders.pipenv),e.addSingleton(M.IFeatureDeprecationManager,m.FeatureDeprecationManager),e.addSingleton(M.IAsyncDisposableRegistry,p.AsyncDisposableRegistry),e.addSingleton(L.IMultiStepInputFactory,L.MultiStepInputFactory)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2);let s=class{get appName(){return o.env.appName}get appRoot(){return o.env.appRoot}get language(){return o.env.language}get sessionId(){return o.env.sessionId}get machineId(){return o.env.machineId}get extensionName(){return this.packageJson.displayName}get packageJson(){return n(522)}};s=r([i.injectable()],s),t.ApplicationEnvironment=s},function(e){e.exports={name:"python",displayName:"Python",description:"Linting, Debugging (multi-threaded, remote), Intellisense, code formatting, refactoring, unit tests, snippets, and more.",version:"2019.1.0",languageServerVersion:"0.1.78",publisher:"ms-python",author:{name:"Microsoft Corporation"},license:"MIT",homepage:"https://github.com/Microsoft/vscode-python",repository:{type:"git",url:"https://github.com/Microsoft/vscode-python"},bugs:{url:"https://github.com/Microsoft/vscode-python/issues"},qna:"https://stackoverflow.com/questions/tagged/visual-studio-code+python",badges:[{url:"https://vscode-python.visualstudio.com/VSCode-Python/_apis/build/status/VSCode-Python-Rolling-CI?branchName=master",href:"https://vscode-python.visualstudio.com/VSCode-Python/VSCode-Python%20Team/_build/index?context=allDefinitions&path=&definitionId=9",description:"Continuous integration (VSTS)"},{url:"https://travis-ci.org/Microsoft/vscode-python.svg?branch=master",href:"https://travis-ci.org/Microsoft/vscode-python",description:"Continuous integration (Travis)"},{url:"https://codecov.io/gh/Microsoft/vscode-python/branch/master/graph/badge.svg",href:"https://codecov.io/gh/Microsoft/vscode-python",description:"Test coverage"}],icon:"icon.png",galleryBanner:{color:"#1e415e",theme:"dark"},engines:{vscode:"^1.26.0"},keywords:["python","django","unittest","multi-root ready"],categories:["Programming Languages","Debuggers","Linters","Snippets","Formatters","Other"],activationEvents:["onLanguage:python","onLanguage:jupyter","onDebugResolve:python","onCommand:python.execInTerminal","onCommand:python.sortImports","onCommand:python.runtests","onCommand:python.debugtests","onCommand:python.setInterpreter","onCommand:python.setShebangInterpreter","onCommand:python.viewTestUI","onCommand:python.viewTestOutput","onCommand:python.selectAndRunTestMethod","onCommand:python.selectAndDebugTestMethod","onCommand:python.selectAndRunTestFile","onCommand:python.runCurrentTestFile","onCommand:python.runFailedTests","onCommand:python.execSelectionInTerminal","onCommand:python.execSelectionInDjangoShell","onCommand:python.buildWorkspaceSymbols","onCommand:python.updateSparkLibrary","onCommand:python.startREPL","onCommand:python.goToPythonObject","onCommand:python.setLinter","onCommand:python.enableLinting","onCommand:python.createTerminal","onCommand:python.discoverTests","onCommand:python.datascience.showhistorypane","onCommand:python.datascience.importnotebook","onCommand:python.datascience.selectjupyteruri","onCommand:python.datascience.exportfileasnotebook","onCommand:python.datascience.exportfileandoutputasnotebook","onCommand:python.python.enableSourceMapSupport"],main:"./out/client/extension",contributes:{snippets:[{language:"python",path:"./snippets/python.json"}],keybindings:[{command:"python.execSelectionInTerminal",key:"shift+enter",when:"editorFocus && editorLangId == python && !findInputFocussed && !replaceInputFocussed && !python.datascience.hascodecells"},{command:"python.datascience.runcurrentcelladvance",key:"shift+enter",when:"editorFocus && python.datascience.hascodecells && python.datascience.featureenabled"}],commands:[{command:"python.enableSourceMapSupport",title:"%python.command.python.enableSourceMapSupport.title%",category:"Python"},{command:"python.sortImports",title:"%python.command.python.sortImports.title%",category:"Python Refactor"},{command:"python.startREPL",title:"%python.command.python.startREPL.title%",category:"Python"},{command:"python.createTerminal",title:"%python.command.python.createTerminal.title%",category:"Python"},{command:"python.buildWorkspaceSymbols",title:"%python.command.python.buildWorkspaceSymbols.title%",category:"Python"},{command:"python.runtests",title:"%python.command.python.runtests.title%",category:"Python"},{command:"python.debugtests",title:"%python.command.python.debugtests.title%",category:"Python"},{command:"python.execInTerminal",title:"%python.command.python.execInTerminal.title%",category:"Python"},{command:"python.setInterpreter",title:"%python.command.python.setInterpreter.title%",category:"Python"},{command:"python.updateSparkLibrary",title:"%python.command.python.updateSparkLibrary.title%",category:"Python"},{command:"python.refactorExtractVariable",title:"%python.command.python.refactorExtractVariable.title%",category:"Python Refactor"},{command:"python.refactorExtractMethod",title:"%python.command.python.refactorExtractMethod.title%",category:"Python Refactor"},{command:"python.viewTestOutput",title:"%python.command.python.viewTestOutput.title%",category:"Python"},{command:"python.selectAndRunTestMethod",title:"%python.command.python.selectAndRunTestMethod.title%",category:"Python"},{command:"python.selectAndDebugTestMethod",title:"%python.command.python.selectAndDebugTestMethod.title%",category:"Python"},{command:"python.selectAndRunTestFile",title:"%python.command.python.selectAndRunTestFile.title%",category:"Python"},{command:"python.runCurrentTestFile",title:"%python.command.python.runCurrentTestFile.title%",category:"Python"},{command:"python.runFailedTests",title:"%python.command.python.runFailedTests.title%",category:"Python"},{command:"python.discoverTests",title:"%python.command.python.discoverTests.title%",category:"Python"},{command:"python.execSelectionInTerminal",title:"%python.command.python.execSelectionInTerminal.title%",category:"Python"},{command:"python.execSelectionInDjangoShell",title:"%python.command.python.execSelectionInDjangoShell.title%",category:"Python"},{command:"python.goToPythonObject",title:"%python.command.python.goToPythonObject.title%",category:"Python"},{command:"python.setLinter",title:"%python.command.python.setLinter.title%",category:"Python"},{command:"python.enableLinting",title:"%python.command.python.enableLinting.title%",category:"Python"},{command:"python.runLinting",title:"%python.command.python.runLinting.title%",category:"Python"},{command:"python.datascience.runcurrentcell",title:"%python.command.python.datascience.runcurrentcell.title%",category:"Python"},{command:"python.datascience.runcurrentcelladvance",title:"%python.command.python.datascience.runcurrentcelladvance.title%",category:"Python"},{command:"python.datascience.showhistorypane",title:"%python.command.python.datascience.showhistorypane.title%",category:"Python"},{command:"python.datascience.runallcells",title:"%python.command.python.datascience.runallcells.command.title%",category:"Python"},{command:"python.datascience.runcell",title:"%python.command.python.datascience.runcell.title%",category:"Python"},{command:"python.datascience.selectjupyteruri",title:"%python.command.python.datascience.selectjupyteruri.title%",category:"Python",when:"python.datascience.featureenabled"},{command:"python.datascience.importnotebook",title:"%python.command.python.datascience.importnotebook.title%",category:"Python"},{command:"python.datascience.exportoutputasnotebook",title:"%python.command.python.datascience.exportoutputasnotebook.title%",category:"Python"},{command:"python.datascience.exportfileasnotebook",title:"%python.command.python.datascience.exportfileasnotebook.title%",category:"Python"},{command:"python.datascience.exportfileandoutputasnotebook",title:"%python.command.python.datascience.exportfileandoutputasnotebook.title%",category:"Python"},{command:"python.datascience.undocells",title:"%python.command.python.datascience.undocells.title%",category:"Python"},{command:"python.datascience.redocells",title:"%python.command.python.datascience.redocells.title%",category:"Python"},{command:"python.datascience.removeallcells",title:"%python.command.python.datascience.removeallcells.title%",category:"Python"},{command:"python.datascience.interruptkernel",title:"%python.command.python.datascience.interruptkernel.title%",category:"Python"},{command:"python.datascience.restartkernel",title:"%python.command.python.datascience.restartkernel.title%",category:"Python"},{command:"python.datascience.expandallcells",title:"%python.command.python.datascience.expandallcells.title%",category:"Python"},{command:"python.datascience.collapseallcells",title:"%python.command.python.datascience.collapseallcells.title%",category:"Python"}],menus:{"editor/context":[{command:"python.refactorExtractVariable",title:"Refactor: Extract Variable",group:"Refactor",when:"editorHasSelection && editorLangId == python"},{command:"python.refactorExtractMethod",title:"Refactor: Extract Method",group:"Refactor",when:"editorHasSelection && editorLangId == python"},{command:"python.sortImports",title:"Refactor: Sort Imports",group:"Refactor",when:"editorLangId == python"},{command:"python.execSelectionInTerminal",group:"Python",when:"editorFocus && editorLangId == python"},{command:"python.execSelectionInDjangoShell",group:"Python",when:"editorHasSelection && editorLangId == python && python.isDjangoProject"},{when:"resourceLangId == python",command:"python.execInTerminal",group:"Python"},{when:"resourceLangId == python",command:"python.runCurrentTestFile",group:"Python"},{when:"editorFocus && editorLangId == python && python.datascience.hascodecells && python.datascience.featureenabled",command:"python.datascience.runcurrentcell",group:"Python"},{when:"editorFocus && editorLangId == python && python.datascience.hascodecells && python.datascience.featureenabled",command:"python.datascience.runcurrentcelladvance",group:"Python"},{when:"editorFocus && editorLangId == python && resourceLangId == jupyter && python.datascience.featureenabled",command:"python.datascience.importnotebook",group:"Python"},{when:"editorFocus && editorLangId == python && python.datascience.hascodecells && python.datascience.featureenabled",command:"python.datascience.exportfileasnotebook",group:"Python2"},{when:"editorFocus && editorLangId == python && python.datascience.hascodecells && python.datascience.featureenabled",command:"python.datascience.exportfileandoutputasnotebook",group:"Python2@2"}],"explorer/context":[{when:"resourceLangId == python",command:"python.runtests",group:"Python"},{when:"resourceLangId == python",command:"python.debugtests",group:"Python"},{when:"resourceLangId == python",command:"python.execInTerminal",group:"Python"},{when:"resourceLangId == jupyter",command:"python.datascience.importnotebook",group:"Python"}],commandPalette:[{command:"python.datascience.runcurrentcell",title:"%python.command.python.datascience.runcurrentcell.title%",category:"Python",when:"python.datascience.hascodecells && python.datascience.featureenabled"},{command:"python.datascience.runcurrentcelladvance",title:"%python.command.python.datascience.runcurrentcelladvance.title%",category:"Python",when:"python.datascience.hascodecells && python.datascience.featureenabled"},{command:"python.datascience.showhistorypane",title:"%python.command.python.datascience.showhistorypane.title%",category:"Python",when:"python.datascience.featureenabled"},{command:"python.datascience.runallcells",title:"%python.command.python.datascience.runallcells.command.title%",category:"Python",when:"python.datascience.featureenabled"},{command:"python.datascience.runcell",title:"%python.command.python.datascience.runcell.title%",category:"Python",when:"python.datascience.featureenabled"},{command:"python.datascience.importnotebook",title:"%python.command.python.datascience.importnotebook.title%",category:"Python"},{command:"python.datascience.exportfileasnotebook",title:"%python.command.python.datascience.exportfilesasnotebook.title%",category:"Python",when:"python.datascience.hascodecells && python.datascience.featureenabled"},{command:"python.datascience.exportfileandoutputasnotebook",title:"%python.command.python.datascience.exportfileandoutputasnotebook.title%",category:"Python",when:"python.datascience.hascodecells && python.datascience.featureenabled"},{command:"python.datascience.undocells",title:"%python.command.python.datascience.undocells.title%",category:"Python",when:"python.datascience.haveinteractivecells && python.datascience.featureenabled"},{command:"python.datascience.redocells",title:"%python.command.python.datascience.redocells.title%",category:"Python",when:"python.datascience.haveredoablecells && python.datascience.featureenabled"},{command:"python.datascience.removeallcells",title:"%python.command.python.datascience.removeallcells.title%",category:"Python",when:"python.datascience.haveinteractivecells && python.datascience.featureenabled"},{command:"python.datascience.interruptkernel",title:"%python.command.python.datascience.interruptkernel.title%",category:"Python",when:"python.datascience.haveinteractive && python.datascience.featureenabled"},{command:"python.datascience.restartkernel",title:"%python.command.python.datascience.restartkernel.title%",category:"Python",when:"python.datascience.haveinteractive && python.datascience.featureenabled"},{command:"python.datascience.expandallcells",title:"%python.command.python.datascience.expandallcells.title%",category:"Python",when:"python.datascience.haveinteractive && python.datascience.featureenabled"},{command:"python.datascience.collapseallcells",title:"%python.command.python.datascience.collapseallcells.title%",category:"Python",when:"python.datascience.haveinteractive && python.datascience.featureenabled"},{command:"python.datascience.exportoutputasnotebook",title:"%python.command.python.datascience.exportoutputasnotebook.title%",category:"Python",when:"python.datascience.haveinteractive && python.datascience.featureenabled"}]},debuggers:[{type:"python",label:"Python",languages:["python"],enableBreakpointsFor:{languageIds:["python","html","jinja"]},aiKey:"AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",program:"./out/client/debugger/debugAdapter/main.js",runtime:"node",configurationSnippets:[{label:"Python: Terminal (integrated)",description:"%python.snippet.launch.terminal.description%",body:{name:"Python: Terminal (integrated)",type:"python",request:"launch",program:'^"\\${file}"',console:"integratedTerminal"}},{label:"Python: Terminal (external)",description:"%python.snippet.launch.externalTerminal.description%",body:{name:"Python: Terminal (external)",type:"python",request:"launch",program:'^"\\${file}"',console:"externalTerminal"}},{label:"Python: Module",description:"%python.snippet.launch.module.description%",body:{name:"Python: Module",type:"python",request:"launch",module:"enter-your-module-name-here",console:"integratedTerminal"}},{label:"Python: Django",description:"%python.snippet.launch.django.description%",body:{name:"Django",type:"python",request:"launch",program:'^"\\${workspaceFolder}/manage.py"',args:["runserver","--noreload","--nothreading"],django:!0}},{label:"Python: Flask",description:"%python.snippet.launch.flask.description%",body:{name:"Flask",type:"python",request:"launch",module:"flask",env:{FLASK_APP:"app.py",FLASK_ENV:"development",FLASK_DEBUG:"0"},args:["run","--no-debugger","--no-reload"],jinja:!0}},{label:"Python: Gevent",description:"%python.snippet.launch.gevent.description%",body:{name:"Gevent",type:"python",request:"launch",program:'^"\\${file}"',gevent:!0}},{label:"Python: PySpark",description:"%python.snippet.launch.pyspark.description%",body:{name:"PySpark",type:"python",request:"launch",osx:{pythonPath:'^"\\${env:SPARK_HOME}/bin/spark-submit"'},windows:{pythonPath:'^"\\${env:SPARK_HOME}/bin/spark-submit.cmd"'},linux:{pythonPath:'^"\\${env:SPARK_HOME}/bin/spark-submit"'},program:'^"\\${file}"'}},{label:"Python: Watson",description:"%python.snippet.launch.watson.description%",body:{name:"Watson",type:"python",request:"launch",program:'^"\\${workspaceFolder}/console.py"',args:["dev","runserver","--noreload=True"],jinja:!0}},{label:"Python: Scrapy",description:"%python.snippet.launch.scrapy.description%",body:{name:"Scrapy",type:"python",request:"launch",module:"scrapy",args:["crawl","specs","-o","bikes.json"]}},{label:"Python: Pyramid",description:"%python.snippet.launch.pyramid.description%",body:{name:"Pyramid",type:"python",request:"launch",args:['^"\\${workspaceFolder}/development.ini"'],pyramid:!0,jinja:!0}},{label:"Python: Remote Attach",description:"%python.snippet.launch.attach.description%",body:{name:"Attach (Remote Debug)",type:"python",request:"attach",port:5678,host:"localhost",pathMappings:[{localRoot:"${workspaceFolder}",remoteRoot:"."}]}}],configurationAttributes:{launch:{properties:{module:{type:"string",description:"Name of the module to be debugged.",default:""},program:{type:"string",description:"Absolute path to the program.",default:"${file}"},pythonPath:{type:"string",description:"Path (fully qualified) to python executable. Defaults to the value in settings.json",default:"${config:python.pythonPath}"},args:{type:"array",description:"Command line arguments passed to the program",default:[],items:{type:"string"}},stopOnEntry:{type:"boolean",description:"Automatically stop after launch.",default:!1},showReturnValue:{type:"boolean",description:"Show return value of functions when stepping.",default:!1},console:{enum:["none","integratedTerminal","externalTerminal"],description:"Where to launch the debug target: internal console, integrated terminal, or external terminal.",default:"integratedTerminal"},cwd:{type:"string",description:"Absolute path to the working directory of the program being debugged. Default is the root directory of the file (leave empty).",default:"${workspaceFolder}"},env:{type:"object",description:"Environment variables defined as a key value pair. Property ends up being the Environment Variable and the value of the property ends up being the value of the Env Variable.",default:{}},envFile:{type:"string",description:"Absolute path to a file containing environment variable definitions.",default:"${workspaceFolder}/.env"},port:{type:"number",description:"Debug port (default is 0, resulting in the use of a dynamic port).",default:0},host:{type:"string",description:"IP address of the of the local debug server (default is localhost).",default:"localhost"},logToFile:{type:"boolean",description:"Enable logging of debugger events to a log file.",default:!1},redirectOutput:{type:"boolean",description:"Redirect output.",default:!0},debugStdLib:{type:"boolean",description:"Debug standard library code.",default:!1},gevent:{type:"boolean",description:"Enable debugging of gevent monkey-patched code.",default:!1},django:{type:"boolean",description:"Django debugging.",default:!1},jinja:{enum:[!0,!1,null],description:"Jinja template debugging (e.g. Flask).",default:null},sudo:{type:"boolean",description:"Running debug program under elevated permissions (on Unix).",default:!1},pyramid:{type:"boolean",description:"Whether debugging Pyramid applications",default:!1},subProcess:{type:"boolean",description:"Whether to enable Sub Process debugging",default:!1}}},attach:{required:["port"],properties:{port:{type:"number",description:"Debug port to attach",default:0},host:{type:"string",description:"IP Address of the of remote server (default is localhost or use 127.0.0.1).",default:"localhost"},pathMappings:{type:"array",label:"Path mappings.",items:{type:"object",label:"Path mapping",required:["localRoot","remoteRoot"],properties:{localRoot:{type:"string",label:"Local source root.",default:"${workspaceFolder}"},remoteRoot:{type:"string",label:"Remote source root.",default:""}}},default:[]},logToFile:{type:"boolean",description:"Enable logging of debugger events to a log file.",default:!1},redirectOutput:{type:"boolean",description:"Redirect output.",default:!0},debugStdLib:{type:"boolean",description:"Debug standard library code.",default:!1},django:{type:"boolean",description:"Django debugging.",default:!1},jinja:{enum:[!0,!1,null],description:"Jinja template debugging (e.g. Flask).",default:null},subProcess:{type:"boolean",description:"Whether to enable Sub Process debugging",default:!1}}}}}],configuration:{type:"object",title:"Python",properties:{"python.diagnostics.sourceMapsEnabled":{type:"boolean",default:!1,description:"Enable source map support for meaningful strack traces in error logs.",scope:"application"},"python.autoComplete.addBrackets":{type:"boolean",default:!1,description:"Automatically add brackets for functions.",scope:"resource"},"python.autoComplete.extraPaths":{type:"array",default:[],description:"List of paths to libraries and the like that need to be imported by auto complete engine. E.g. when using Google App SDK, the paths are not in system path, hence need to be added into this list.",scope:"resource"},"python.autoComplete.showAdvancedMembers":{type:"boolean",default:!0,description:"Controls appearance of methods with double underscores in the completion list.",scope:"resource"},"python.autoComplete.typeshedPaths":{type:"array",items:{type:"string"},default:[],description:"Specifies paths to local typeshed repository clone(s) for the Python language server.",scope:"resource"},"python.autoUpdateLanguageServer":{type:"boolean",default:!0,description:"Automatically update the language server.",scope:"application"},"python.dataScience.allowImportFromNotebook":{type:"boolean",default:!0,description:"Allows a user to import a jupyter notebook into a python file anytime one is opened.",scope:"resource"},"python.dataScience.enabled":{type:"boolean",default:!0,description:"Enable the experimental data science features in the python extension.",scope:"resource"},"python.dataScience.exportWithOutputEnabled":{type:"boolean",default:!1,description:"Enable exporting a python file into a jupyter notebook and run all cells when doing so.",scope:"resource"},"python.dataScience.jupyterLaunchTimeout":{type:"number",default:6e4,description:"Amount of time (in ms) to wait for the Jupyter Notebook server to start.",scope:"resource"},"python.dataScience.jupyterServerURI":{type:"string",default:"local",description:"Select the Jupyter server URI to connect to. Select 'local' to launch a new Juypter server on the local machine.",scope:"resource"},"python.dataScience.notebookFileRoot":{type:"string",default:"${workspaceFolder}",description:"Set the root directory for loading files for the Python Interactive window.",scope:"resource"},"python.dataScience.searchForJupyter":{type:"boolean",default:!0,description:"Search all installed Python interpreters for a Jupyter installation when starting the Python Interactive window",scope:"resource"},"python.dataScience.changeDirOnImportExport":{type:"boolean",default:!0,description:"When importing or exporting a Jupyter Notebook add a directory change command to allow relative path loading to work.",scope:"resource"},"python.dataScience.useDefaultConfigForJupyter":{type:"boolean",default:!0,description:"When running Jupyter locally, create a default empty Jupyter config for the Python Interactive window",scope:"resource"},"python.dataScience.jupyterInterruptTimeout":{type:"number",default:1e4,description:"Amount of time (in ms) to wait for an interrupt before asking to restart the Jupyter kernel.",scope:"resource"},"python.dataScience.allowInput":{type:"boolean",default:!0,description:"Allow the inputting of python code directly into the Python Interactive window"},"python.dataScience.showCellInputCode":{type:"boolean",default:!0,description:"Show cell input code.",scope:"resource"},"python.dataScience.collapseCellInputCodeByDefault":{type:"boolean",default:!0,description:"Collapse cell input code by default.",scope:"resource"},"python.dataScience.maxOutputSize":{type:"number",default:400,description:"Maximum size (in pixels) of text output in the Python Interactive window before a scrollbar appears. Set to -1 for infinity.",scope:"resource"},"python.dataScience.codeRegularExpression":{type:"string",default:"^(#\\s*%%|#\\s*\\<codecell\\>|#\\s*In\\[\\d*?\\]|#\\s*In\\[ \\])",description:"Regular expression used to identify code cells. All code until the next match is considered part of this cell. \nDefaults to '^(#\\s*%%|#\\s*\\<codecell\\>|#\\s*In\\[\\d*?\\]|#\\s*In\\[ \\])' if left blank",scope:"resource"},"python.dataScience.markdownRegularExpression":{type:"string",default:"^(#\\s*%%\\s*\\[markdown\\]|#\\s*\\<markdowncell\\>)",description:"Regular expression used to identify markdown cells. All comments after this expression are considered part of the markdown. \nDefaults to '^(#\\s*%%\\s*\\[markdown\\]|#\\s*\\<markdowncell\\>)' if left blank",scope:"resource"},"python.disableInstallationCheck":{type:"boolean",default:!1,description:"Whether to check if Python is installed (also warn when using the macOS-installed Python).",scope:"resource"},"python.envFile":{type:"string",description:"Absolute path to a file containing environment variable definitions.",default:"${workspaceFolder}/.env",scope:"resource"},"python.formatting.autopep8Args":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.formatting.autopep8Path":{type:"string",default:"autopep8",description:"Path to autopep8, you can use a custom version of autopep8 by modifying this setting to include the full path.",scope:"resource"},"python.formatting.provider":{type:"string",default:"autopep8",description:"Provider for formatting. Possible options include 'autopep8', 'black', and 'yapf'.",enum:["autopep8","black","yapf","none"],scope:"resource"},"python.formatting.blackArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.formatting.blackPath":{type:"string",default:"black",description:"Path to Black, you can use a custom version of Black by modifying this setting to include the full path.",scope:"resource"},"python.formatting.yapfArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.formatting.yapfPath":{type:"string",default:"yapf",description:"Path to yapf, you can use a custom version of yapf by modifying this setting to include the full path.",scope:"resource"},"python.globalModuleInstallation":{type:"boolean",default:!1,description:"Whether to install Python modules globally when not using an environment.",scope:"resource"},"python.jediEnabled":{type:"boolean",default:!0,description:"Enables Jedi as IntelliSense engine instead of Microsoft Python Analysis Engine.",scope:"resource"},"python.jediMemoryLimit":{type:"number",default:0,description:"Memory limit for the Jedi completion engine in megabytes. Zero (default) means 1024 MB. -1 means unlimited (disable memory limit check)",scope:"resource"},"python.jediPath":{type:"string",default:"",description:"Path to directory containing the Jedi library (this path will contain the 'Jedi' sub directory).",scope:"resource"},"python.analysis.openFilesOnly":{type:"boolean",default:!0,description:"Only show errors and warnings for open files rather than for the entire workspace.",scope:"resource"},"python.analysis.diagnosticPublishDelay":{type:"integer",default:1e3,description:"Delay before diagnostic messages are transferred to the problems list (in milliseconds).",scope:"resource"},"python.analysis.typeshedPaths":{type:"array",default:[],items:{type:"string"},description:"Paths to look for typeshed modules.",scope:"resource"},"python.analysis.errors":{type:"array",default:[],items:{type:"string"},description:"List of diagnostics messages to be shown as errors.",scope:"resource"},"python.analysis.warnings":{type:"array",default:[],items:{type:"string"},description:"List of diagnostics messages to be shown as warnings.",scope:"resource"},"python.analysis.information":{type:"array",default:[],items:{type:"string"},description:"List of diagnostics messages to be shown as information.",scope:"resource"},"python.analysis.disabled":{type:"array",default:[],items:{type:"string"},description:"List of suppressed diagnostic messages.",scope:"resource"},"python.analysis.logLevel":{type:"string",enum:["Error","Warning","Information","Trace"],default:"Error",description:"Defines type of log messages language server writes into the output window.",scope:"resource"},"python.analysis.symbolsHierarchyDepthLimit":{type:"integer",default:10,description:"Limits depth of the symbol tree in the document outline.",scope:"resource"},"python.linting.enabled":{type:"boolean",default:!0,description:"Whether to lint Python files.",scope:"resource"},"python.linting.flake8Args":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.linting.flake8CategorySeverity.E":{type:"string",default:"Error",description:"Severity of Flake8 message type 'E'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.flake8CategorySeverity.F":{type:"string",default:"Error",description:"Severity of Flake8 message type 'F'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.flake8CategorySeverity.W":{type:"string",default:"Warning",description:"Severity of Flake8 message type 'W'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.flake8Enabled":{type:"boolean",default:!1,description:"Whether to lint Python files using flake8",scope:"resource"},"python.linting.flake8Path":{type:"string",default:"flake8",description:"Path to flake8, you can use a custom version of flake8 by modifying this setting to include the full path.",scope:"resource"},"python.linting.ignorePatterns":{type:"array",description:"Patterns used to exclude files or folders from being linted.",default:[".vscode/*.py","**/site-packages/**/*.py"],items:{type:"string"},scope:"resource"},"python.linting.lintOnSave":{type:"boolean",default:!0,description:"Whether to lint Python files when saved.",scope:"resource"},"python.linting.maxNumberOfProblems":{type:"number",default:100,description:"Controls the maximum number of problems produced by the server.",scope:"resource"},"python.linting.banditArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.linting.banditEnabled":{type:"boolean",default:!1,description:"Whether to lint Python files using bandit.",scope:"resource"},"python.linting.banditPath":{type:"string",default:"bandit",description:"Path to bandit, you can use a custom version of bandit by modifying this setting to include the full path.",scope:"resource"},"python.linting.mypyArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:["--ignore-missing-imports","--follow-imports=silent","--show-column-numbers"],items:{type:"string"},scope:"resource"},"python.linting.mypyCategorySeverity.error":{type:"string",default:"Error",description:"Severity of Mypy message type 'Error'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.mypyCategorySeverity.note":{type:"string",default:"Information",description:"Severity of Mypy message type 'Note'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.mypyEnabled":{type:"boolean",default:!1,description:"Whether to lint Python files using mypy.",scope:"resource"},"python.linting.mypyPath":{type:"string",default:"mypy",description:"Path to mypy, you can use a custom version of mypy by modifying this setting to include the full path.",scope:"resource"},"python.linting.pep8Args":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.linting.pep8CategorySeverity.E":{type:"string",default:"Error",description:"Severity of Pep8 message type 'E'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.pep8CategorySeverity.W":{type:"string",default:"Warning",description:"Severity of Pep8 message type 'W'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.pep8Enabled":{type:"boolean",default:!1,description:"Whether to lint Python files using pep8",scope:"resource"},"python.linting.pep8Path":{type:"string",default:"pep8",description:"Path to pep8, you can use a custom version of pep8 by modifying this setting to include the full path.",scope:"resource"},"python.linting.prospectorArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.linting.prospectorEnabled":{type:"boolean",default:!1,description:"Whether to lint Python files using prospector.",scope:"resource"},"python.linting.prospectorPath":{type:"string",default:"prospector",description:"Path to Prospector, you can use a custom version of prospector by modifying this setting to include the full path.",scope:"resource"},"python.linting.pydocstyleArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.linting.pydocstyleEnabled":{type:"boolean",default:!1,description:"Whether to lint Python files using pydocstyle",scope:"resource"},"python.linting.pydocstylePath":{type:"string",default:"pydocstyle",description:"Path to pydocstyle, you can use a custom version of pydocstyle by modifying this setting to include the full path.",scope:"resource"},"python.linting.pylamaArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.linting.pylamaEnabled":{type:"boolean",default:!1,description:"Whether to lint Python files using pylama.",scope:"resource"},"python.linting.pylamaPath":{type:"string",default:"pylama",description:"Path to pylama, you can use a custom version of pylama by modifying this setting to include the full path.",scope:"resource"},"python.linting.pylintArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.linting.pylintCategorySeverity.convention":{type:"string",default:"Information",description:"Severity of Pylint message type 'Convention/C'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.pylintCategorySeverity.error":{type:"string",default:"Error",description:"Severity of Pylint message type 'Error/E'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.pylintCategorySeverity.fatal":{type:"string",default:"Error",description:"Severity of Pylint message type 'Fatal/F'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.pylintCategorySeverity.refactor":{type:"string",default:"Hint",description:"Severity of Pylint message type 'Refactor/R'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.pylintCategorySeverity.warning":{type:"string",default:"Warning",description:"Severity of Pylint message type 'Warning/W'.",enum:["Hint","Error","Information","Warning"],scope:"resource"},"python.linting.pylintEnabled":{type:"boolean",default:!0,description:"Whether to lint Python files using pylint.",scope:"resource"},"python.linting.pylintPath":{type:"string",default:"pylint",description:"Path to Pylint, you can use a custom version of pylint by modifying this setting to include the full path.",scope:"resource"},"python.linting.pylintUseMinimalCheckers":{type:"boolean",default:!0,description:"Whether to run Pylint with minimal set of rules.",scope:"resource"},"python.pythonPath":{type:"string",default:"python",description:"Path to Python, you can use a custom version of Python by modifying this setting to include the full path.",scope:"resource"},"python.condaPath":{type:"string",default:"",description:"Path to the conda executable to use for activation (version 4.4+).",scope:"resource"},"python.pipenvPath":{type:"string",default:"pipenv",description:"Path to the pipenv executable to use for activation.",scope:"resource"},"python.sortImports.args":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.sortImports.path":{type:"string",description:"Path to isort script, default using inner version",default:"",scope:"resource"},"python.terminal.activateEnvironment":{type:"boolean",default:!0,description:"Activate Python Environment in Terminal created using the Extension.",scope:"resource"},"python.terminal.executeInFileDir":{type:"boolean",default:!1,description:"When executing a file in the terminal, whether to use execute in the file's directory, instead of the current open folder.",scope:"resource"},"python.terminal.launchArgs":{type:"array",default:[],description:"Python launch arguments to use when executing a file in the terminal.",scope:"resource"},"python.unitTest.cwd":{type:"string",default:null,description:"Optional working directory for unit tests.",scope:"resource"},"python.unitTest.debugPort":{type:"number",default:3e3,description:"Port number used for debugging of unittests.",scope:"resource"},"python.unitTest.nosetestArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.unitTest.nosetestsEnabled":{type:"boolean",default:!1,description:"Enable unit testing using nosetests.",scope:"resource"},"python.unitTest.nosetestPath":{type:"string",default:"nosetests",description:"Path to nosetests, you can use a custom version of nosetests by modifying this setting to include the full path.",scope:"resource"},"python.unitTest.promptToConfigure":{type:"boolean",default:!0,description:"Prompt to configure a test framework if potential tests directories are discovered.",scope:"resource"},"python.unitTest.pyTestArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:[],items:{type:"string"},scope:"resource"},"python.unitTest.pyTestEnabled":{type:"boolean",default:!1,description:"Enable unit testing using pytest.",scope:"resource"},"python.unitTest.pyTestPath":{type:"string",default:"pytest",description:"Path to pytest (pytest), you can use a custom version of pytest by modifying this setting to include the full path.",scope:"resource"},"python.unitTest.unittestArgs":{type:"array",description:"Arguments passed in. Each argument is a separate item in the array.",default:["-v","-s",".","-p","*test*.py"],items:{type:"string"},scope:"resource"},"python.unitTest.unittestEnabled":{type:"boolean",default:!1,description:"Enable unit testing using unittest.",scope:"resource"},"python.unitTest.autoTestDiscoverOnSaveEnabled":{type:"boolean",default:!0,description:"Enable auto run test discovery when saving a unit test file.",scope:"resource"},"python.venvFolders":{type:"array",default:["envs",".pyenv",".direnv"],description:"Folders in your home directory to look into for virtual environments.",scope:"resource",items:{type:"string"}},"python.venvPath":{type:"string",default:"",description:"Path to folder with a list of Virtual Environments (e.g. ~/.pyenv, ~/Envs, ~/.virtualenvs).",scope:"resource"},"python.workspaceSymbols.ctagsPath":{type:"string",default:"ctags",description:"Fully qualified path to the ctags executable (else leave as ctags, assuming it is in current path).",scope:"resource"},"python.workspaceSymbols.enabled":{type:"boolean",default:!0,description:"Set to 'false' to disable Workspace Symbol provider using ctags.",scope:"resource"},"python.workspaceSymbols.exclusionPatterns":{type:"array",default:["**/site-packages/**"],items:{type:"string"},description:"Pattern used to exclude files and folders from ctags See http://ctags.sourceforge.net/ctags.html.",scope:"resource"},"python.workspaceSymbols.rebuildOnFileSave":{type:"boolean",default:!0,description:"Whether to re-build the tags file on when changes made to python files are saved.",scope:"resource"},"python.workspaceSymbols.rebuildOnStart":{type:"boolean",default:!0,description:"Whether to re-build the tags file on start (defaults to true).",scope:"resource"},"python.workspaceSymbols.tagFilePath":{type:"string",default:"${workspaceFolder}/.vscode/tags",description:"Fully qualified path to tag file (exuberant ctag file), used to provide workspace symbols.",scope:"resource"}}},languages:[{id:"pip-requirements",aliases:["pip requirements","requirements.txt"],filenames:["requirements.txt","constraints.txt","requirements.in"],filenamePatterns:["*-requirements.txt","requirements-*.txt","constraints-*.txt","*-constraints.txt","*-requirements.in","requirements-*.in"],configuration:"./languages/pip-requirements.json"},{id:"yaml",filenames:[".condarc"]},{id:"toml",filenames:["Pipfile"]},{id:"json",filenames:["Pipfile.lock"]},{id:"jinja",extensions:[".jinja2",".j2"],aliases:["Jinja"]},{id:"jupyter",extensions:[".ipynb"]}],grammars:[{language:"pip-requirements",scopeName:"source.pip-requirements",path:"./syntaxes/pip-requirements.tmLanguage.json"}],jsonValidation:[{fileMatch:".condarc",url:"./schemas/condarc.json"},{fileMatch:"environment.yml",url:"./schemas/conda-environment.json"},{fileMatch:"meta.yaml",url:"./schemas/conda-meta.json"}],yamlValidation:[{fileMatch:".condarc",url:"./schemas/condarc.json"},{fileMatch:"environment.yml",url:"./schemas/conda-environment.json"},{fileMatch:"meta.yaml",url:"./schemas/conda-meta.json"}]},scripts:{package:"gulp clean && gulp prePublishBundle && vsce package",compile:"tsc -watch -p ./","compile-webviews-watch":"npx webpack --config webpack.datascience-ui.config.js --watch","dump-datascience-webpack-stats":"webpack --config webpack.datascience-ui.config.js --profile --json > tmp/ds-stats.json","compile-webviews":"gulp compile-webviews","compile-webviews-verbose":"npx webpack --config webpack.datascience-ui.config.js",postinstall:"node ./node_modules/vscode/bin/install && node ./build/ci/postInstall.js",test:"node ./out/test/standardTest.js && node ./out/test/multiRootTest.js","test:unittests":"mocha --require source-map-support/register --opts ./build/.mocha.unittests.opts","test:unittests:cover":"nyc --nycrc-path ./build/.nycrc npm run test:unittests","test:functional":"mocha --require source-map-support/register --opts ./build/.mocha.functional.opts","test:functional:cover":"nyc --nycrc-path ./build/.nycrc npm run test:functional",testDebugger:"node ./out/test/debuggerTest.js",testSingleWorkspace:"node ./out/test/standardTest.js",testMultiWorkspace:"node ./out/test/multiRootTest.js",testPerformance:"node ./out/test/performanceTest.js",testSmoke:"node ./out/test/smokeTest.js","lint-staged":"node gulpfile.js",lint:"tslint src/**/*.ts -t verbose",clean:"gulp clean","cover:enable":"gulp cover:enable","debugger-coverage":"gulp debugger-coverage","cover:inlinesource":"gulp inlinesource"},dependencies:{"@jupyterlab/services":"^3.1.4",arch:"^2.1.0","azure-storage":"^2.10.1","diff-match-patch":"^1.0.0",dotenv:"^5.0.1","file-matcher":"^1.3.0","fs-extra":"^4.0.3",fuzzy:"^0.1.3","get-port":"^3.2.0",glob:"^7.1.2","iconv-lite":"^0.4.21",inversify:"^4.11.1","line-by-line":"^0.1.6",lodash:"^4.17.11",md5:"^2.2.1",minimatch:"^3.0.4","named-js-regexp":"^1.3.3","node-stream-zip":"^1.6.0",opn:"^5.3.0",pidusage:"^1.2.0","reflect-metadata":"^0.1.12",request:"^2.87.0","request-progress":"^3.0.0",rxjs:"^5.5.9",semver:"^5.5.0","stack-trace":"0.0.10","strip-json-comments":"^2.0.1","sudo-prompt":"^8.2.0",tmp:"^0.0.29","tree-kill":"^1.2.0","typescript-char":"^0.0.0",uint64be:"^1.0.1",unicode:"^10.0.0",untildify:"^3.0.2","vscode-debugadapter":"^1.28.0","vscode-debugprotocol":"^1.28.0","vscode-extension-telemetry":"^0.1.0","vscode-languageclient":"^4.4.0","vscode-languageserver":"^4.4.0","vscode-languageserver-protocol":"^3.10.3",winreg:"^1.2.4",xml2js:"^0.4.19"},devDependencies:{"@babel/core":"^7.1.0","@babel/preset-env":"^7.1.0","@babel/preset-react":"^7.0.0","@nteract/transform-dataresource":"^4.3.5","@nteract/transform-geojson":"^3.2.3","@nteract/transform-model-debug":"^3.2.3","@nteract/transform-plotly":"^3.2.3","@nteract/transforms":"^4.4.4","@types/chai":"^4.1.2","@types/chai-arrays":"^1.0.2","@types/chai-as-promised":"^7.1.0","@types/copy-webpack-plugin":"^4.4.2","@types/del":"^3.0.0","@types/diff-match-patch":"^1.0.32","@types/dotenv":"^4.0.3","@types/download":"^6.2.2","@types/enzyme":"^3.1.14","@types/enzyme-adapter-react-16":"^1.0.3","@types/event-stream":"^3.3.33","@types/fs-extra":"^5.0.1","@types/get-port":"^3.2.0","@types/glob":"^5.0.35","@types/html-webpack-plugin":"^3.2.0","@types/iconv-lite":"^0.0.1","@types/istanbul":"^0.4.29","@types/jsdom":"^11.12.0","@types/loader-utils":"^1.1.3","@types/lodash":"^4.14.104","@types/md5":"^2.1.32","@types/mocha":"^2.2.48","@types/node":"9.4.7","@types/promisify-node":"^0.4.0","@types/react":"^16.4.14","@types/react-codemirror":"^1.0.2","@types/react-dom":"^16.0.8","@types/react-json-tree":"^0.6.8","@types/request":"^2.47.0","@types/semver":"^5.5.0","@types/shortid":"^0.0.29","@types/sinon":"^4.3.0","@types/stack-trace":"0.0.29","@types/strip-json-comments":"0.0.30","@types/temp":"^0.8.32","@types/tmp":"0.0.33","@types/untildify":"^3.0.0","@types/uuid":"^3.4.3","@types/webpack-bundle-analyzer":"^2.13.0","@types/winreg":"^1.2.30","@types/xml2js":"^0.4.2",JSONStream:"^1.3.2","ansi-to-html":"^0.6.7","awesome-typescript-loader":"^5.2.1","babel-loader":"^8.0.3","babel-plugin-inline-json-import":"^0.3.1","babel-plugin-transform-runtime":"^6.23.0","babel-polyfill":"^6.26.0",chai:"^4.1.2","chai-arrays":"^2.0.0","chai-as-promised":"^7.1.1",codecov:"^3.0.0",colors:"^1.2.1","copy-webpack-plugin":"^4.6.0","cross-spawn":"^6.0.5","css-loader":"^1.0.1",decache:"^4.4.0",del:"^3.0.0",download:"^7.0.0",enzyme:"^3.7.0","enzyme-adapter-react-16":"^1.6.0","event-stream":"3.3.4","file-loader":"^2.0.0",flat:"^4.0.0",gulp:"^4.0.0","gulp-debounced-watch":"^1.0.4","gulp-filter":"^5.1.0","gulp-inline-source":"^3.2.0","gulp-json-editor":"^2.2.2","gulp-sourcemaps":"^2.6.4","gulp-typescript":"^4.0.1","gulp-watch":"^5.0.0","html-webpack-plugin":"^3.2.0",husky:"^1.1.2","is-running":"^2.1.0",istanbul:"^0.4.5",jsdom:"^12.2.0","json-loader":"^0.5.7","loader-utils":"^1.1.0",mocha:"^5.0.4","mocha-junit-reporter":"^1.17.0","node-has-native-dependencies":"^1.0.2",nyc:"^13.1.0","raw-loader":"^0.5.1",react:"^16.5.2","react-codemirror":"^1.0.0","react-dev-utils":"^5.0.2","react-dom":"^16.5.2","react-json-tree":"^0.11.0",relative:"^3.0.2","remap-istanbul":"^0.10.1","retyped-diff-match-patch-tsd-ambient":"^1.0.0-0",rewiremock:"^3.13.0",shortid:"^2.2.8","style-loader":"^0.23.1","styled-jsx":"^3.1.0","svg-inline-loader":"^0.8.0","svg-inline-react":"^3.1.0","ts-loader":"^5.3.0","ts-mockito":"^2.3.1","tsconfig-paths-webpack-plugin":"^3.2.0",tslint:"^5.9.1","tslint-eslint-rules":"^5.1.0","tslint-microsoft-contrib":"^5.0.3","typed-react-markdown":"^0.1.0",typemoq:"^2.1.0",typescript:"^3.2.2","typescript-formatter":"^7.1.0","url-loader":"^1.1.1",uuid:"^3.3.2",vscode:"^1.1.22","vscode-debugadapter-testsupport":"^1.27.0",webpack:"^4.20.2","webpack-bundle-analyzer":"^3.0.3","webpack-cli":"^3.1.2","webpack-fix-default-import-plugin":"^1.0.3","webpack-merge":"^4.1.4","webpack-node-externals":"^1.7.2",yargs:"^12.0.2"},__metadata:{id:"f1f59ae4-9318-4f3c-a9b5-81b2eaa5f8a5",publisherDisplayName:"Microsoft",publisherId:"998b010b-e2af-44a5-a6cd-0b5fd3b9b6f8"}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(214),o=n(0),s=n(2);let a=class{showInformationMessage(e,t,...n){return s.window.showInformationMessage(e,t,...n)}showWarningMessage(e,t,...n){return s.window.showWarningMessage(e,t,...n)}showErrorMessage(e,t,...n){return s.window.showErrorMessage(e,t,...n)}showQuickPick(e,t,n){return s.window.showQuickPick(e,t,n)}showOpenDialog(e){return s.window.showOpenDialog(e)}showSaveDialog(e){return s.window.showSaveDialog(e)}showInputBox(e,t){return s.window.showInputBox(e,t)}openUrl(e){i(e)}setStatusBarMessage(e,t){return s.window.setStatusBarMessage(e,t)}createStatusBarItem(e,t){return s.window.createStatusBarItem(e,t)}showWorkspaceFolderPick(e){return s.window.showWorkspaceFolderPick(e)}withProgress(e,t){return s.window.withProgress(e,t)}createQuickPick(){return s.window.createQuickPick()}createInputBox(){return s.window.createInputBox()}};a=r([o.injectable()],a),t.ApplicationShell=a},function(e,t,n){"use strict";const r=n(17),i=n(18),o=()=>{if("linux"!==process.platform)return!1;if(r.release().includes("Microsoft"))return!0;try{return i.readFileSync("/proc/version","utf8").includes("Microsoft")}catch(e){return!1}};process.env.__IS_WSL_TEST__?e.exports=o:e.exports=o()},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2);let s=class{registerCommand(e,t,n){return o.commands.registerCommand(e,t,n)}registerTextEditorCommand(e,t,n){return o.commands.registerTextEditorCommand(e,t,n)}executeCommand(e,...t){return o.commands.executeCommand(e,...t)}getCommands(e){return o.commands.getCommands(e)}};s=r([i.injectable()],s),t.CommandManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2);let s=class{get textDocuments(){return o.workspace.textDocuments}get activeTextEditor(){return o.window.activeTextEditor}get visibleTextEditors(){return o.window.visibleTextEditors}get onDidChangeActiveTextEditor(){return o.window.onDidChangeActiveTextEditor}get onDidChangeVisibleTextEditors(){return o.window.onDidChangeVisibleTextEditors}get onDidChangeTextEditorSelection(){return o.window.onDidChangeTextEditorSelection}get onDidChangeTextEditorOptions(){return o.window.onDidChangeTextEditorOptions}get onDidChangeTextEditorViewColumn(){return o.window.onDidChangeTextEditorViewColumn}get onDidOpenTextDocument(){return o.workspace.onDidOpenTextDocument}get onDidCloseTextDocument(){return o.workspace.onDidCloseTextDocument}get onDidSaveTextDocument(){return o.workspace.onDidSaveTextDocument}showTextDocument(e,t,n){return o.window.showTextDocument(e,t,n)}openTextDocument(e){return o.workspace.openTextDocument(e)}applyEdit(e){return o.workspace.applyEdit(e)}};s=r([i.injectable()],s),t.DocumentManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2);let s=class{get all(){return o.extensions.all}getExtension(e){return o.extensions.getExtension(e)}};s=r([i.injectable()],s),t.Extensions=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2);let s=class{get onDidCloseTerminal(){return o.window.onDidCloseTerminal}get onDidOpenTerminal(){return o.window.onDidOpenTerminal}createTerminal(e){return o.window.createTerminal(e)}};s=r([i.injectable()],s),t.TerminalManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let o=class{constructor(){this.list=[]}dispose(){return i(this,void 0,void 0,function*(){const e=this.list.map(e=>e.dispose());yield Promise.all(e)})}push(e){e&&this.list.push(e)}};o=r([n(0).injectable()],o),t.AsyncDisposableRegistry=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(38),u=n(5),l=n(4),d=n(127);let h=class{constructor(e){this.serviceContainer=e,this.workspaceService=this.serviceContainer.get(l.IWorkspaceService)}getSettings(e){const t=this.serviceContainer.get(c.IInterpreterAutoSeletionProxyService);return d.PythonSettings.getInstance(e,t,this.workspaceService)}updateSectionSetting(e,t,n,r,i){return o(this,void 0,void 0,function*(){let o={uri:r,target:i||a.ConfigurationTarget.WorkspaceFolder};"python"===e&&i!==a.ConfigurationTarget.Global&&(o=d.PythonSettings.getSettingsUriAndTarget(r,this.workspaceService));const s=a.workspace.getConfiguration(e,o.uri),c=s.inspect(t);void 0!==c&&(o.target===a.ConfigurationTarget.Global&&c.globalValue===n||o.target===a.ConfigurationTarget.Workspace&&c.workspaceValue===n||o.target===a.ConfigurationTarget.WorkspaceFolder&&c.workspaceFolderValue===n)||(yield s.update(t,n,o.target),yield this.verifySetting(s,o.target,t,n))})}updateSetting(e,t,n,r){return o(this,void 0,void 0,function*(){return this.updateSectionSetting("python",e,t,n,r)})}isTestExecution(){return"1"===process.env.VSC_PYTHON_CI_TEST}verifySetting(e,t,n,r){return o(this,void 0,void 0,function*(){if(this.isTestExecution()){let i=0;do{const o=e.inspect(n);if(!o&&void 0===r)break;if(o&&void 0!==r){if((t===a.ConfigurationTarget.Global?o.globalValue:t===a.ConfigurationTarget.Workspace?o.workspaceValue:o.workspaceFolderValue)===r)break}yield new Promise(e=>setTimeout(e,250)),i+=1}while(i<20)}})}};h=r([s.injectable(),i(0,s.inject(u.IServiceContainer))],h),t.ConfigurationService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4),c=n(215),u=n(1),l=[{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FORMAT_ON_SAVE",message:"The setting 'python.formatting.formatOnSave' is deprecated, please use 'editor.formatOnSave'.",moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/309",setting:{setting:"formatting.formatOnSave",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_LINT_ON_TEXT_CHANGE",message:"The setting 'python.linting.lintOnTextChange' is deprecated, please enable 'python.linting.lintOnSave' and 'files.autoSave'.",moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/313",setting:{setting:"linting.lintOnTextChange",values:["true",!0]}},{doNotDisplayPromptStateKey:"SHOW_DEPRECATED_FEATURE_PROMPT_FOR_AUTO_COMPLETE_PRELOAD_MODULES",message:"The setting 'python.autoComplete.preloadModules' is deprecated, please consider using the new Language Server ('python.jediEnabled = false').",moreInfoUrl:"https://github.com/Microsoft/vscode-python/issues/1704",setting:{setting:"autoComplete.preloadModules"}}];let d=class{constructor(e,t,n,r){this.persistentStateFactory=e,this.cmdMgr=t,this.workspace=n,this.appShell=r,this.disposables=[]}dispose(){this.disposables.forEach(e=>e.dispose())}initialize(){l.forEach(this.registerDeprecation.bind(this))}registerDeprecation(e){Array.isArray(e.commands)&&e.commands.forEach(t=>{this.disposables.push(this.cmdMgr.registerCommand(t,()=>this.notifyDeprecation(e),this))}),e.setting&&this.checkAndNotifyDeprecatedSetting(e)}notifyDeprecation(e){return o(this,void 0,void 0,function*(){const t=this.persistentStateFactory.createGlobalPersistentState(e.doNotDisplayPromptStateKey,!0);if(!t.value)return;const n=yield this.appShell.showInformationMessage(e.message,"Learn more","Never show again");if(n)switch(n){case"Learn more":c.launch(e.moreInfoUrl);break;case"Never show again":yield t.updateValue(!1);break;default:throw new Error("Selected option not supported.")}})}checkAndNotifyDeprecatedSetting(e){let t=!1;Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>0?this.workspace.workspaceFolders.forEach(n=>{t||(t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("python",n.uri),e.setting))}):t=this.isDeprecatedSettingAndValueUsed(this.workspace.getConfiguration("python"),e.setting),t&&this.notifyDeprecation(e).catch(e=>console.error("Python Extension: notifyDeprecation",e))}isDeprecatedSettingAndValueUsed(e,t){if(!e.has(t.setting))return!1;const n=e.get(t.setting);return Array.isArray(t.values)&&0!==t.values.length?Array.isArray(t.values)&&0!==t.values.length?t.values.indexOf(e.get(t.setting))>=0:void 0!==n&&(!Array.isArray(n)||n.length>0):!Array.isArray(n)||n.length>0}};d=r([s.injectable(),i(0,s.inject(u.IPersistentStateFactory)),i(1,s.inject(a.ICommandManager)),i(2,s.inject(a.IWorkspaceService)),i(3,s.inject(a.IApplicationShell))],d),t.FeatureDeprecationManager=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(5),c=n(4);let u=class{constructor(e){const t=e.get(c.IWorkspaceService);this.requestOptions={proxy:t.getConfiguration("http").get("proxy","")}}downloadFile(e){return o(this,void 0,void 0,function*(){return(yield Promise.resolve().then(()=>n(216)))(e,this.requestOptions)})}getJSON(e){return o(this,void 0,void 0,function*(){const t=n(216);return new Promise((n,r)=>{t(e,this.requestOptions,(t,i,o)=>t?r(t):200!==i.statusCode?r(new Error(`Failed with status ${i.statusCode}, ${i.statusMessage}, Uri ${e}`)):void n(JSON.parse(o)))})})}};u=r([s.injectable(),i(0,s.inject(a.IServiceContainer))],u),t.HttpClient=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3),s=n(42);let a=class{isReleaseVersion(e){return 0===e.prerelease.length}getVersionFromPackageFileName(e){const t=o.extname(e),n=e.substring(e.indexOf(".")+1),r=n.substring(0,n.length-t.length).split("."),i=r.filter((e,t)=>t<=2).join("."),a=r.filter((e,t)=>3===t).join("."),c=`${i}${0===a.length?"":`-${a}`}`;return s.parse(c,!0)||new s.SemVer("0.0.0")}};a=r([i.injectable()],a),t.NugetService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(1);class c{constructor(e,t,n,r){this.storage=e,this.key=t,this.defaultValue=n,this.expiryDurationMs=r}get value(){if(this.expiryDurationMs){const e=this.storage.get(this.key,{data:this.defaultValue});return!e||!e.expiry||e.expiry<Date.now()?this.defaultValue:e.data}return this.storage.get(this.key,this.defaultValue)}updateValue(e){return o(this,void 0,void 0,function*(){this.expiryDurationMs?yield this.storage.update(this.key,{data:e,expiry:Date.now()+this.expiryDurationMs}):yield this.storage.update(this.key,e)})}}t.PersistentState=c;let u=class{constructor(e,t){this.globalState=e,this.workspaceState=t}createGlobalPersistentState(e,t,n){return new c(this.globalState,e,t,n)}createWorkspacePersistentState(e,t,n){return new c(this.workspaceState,e,t,n)}};u=r([s.injectable(),i(0,s.inject(a.IMemento)),i(0,s.named(a.GLOBAL_MEMENTO)),i(1,s.inject(a.IMemento)),i(1,s.named(a.WORKSPACE_MEMENTO))],u),t.PersistentStateFactory=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(3),a=n(1),c=n(47),u=n(96);let l=class{constructor(e){this.isWindows=e,this.home="",this.home=u("~")}get delimiter(){return s.delimiter}get separator(){return s.sep}getPathVariableName(){return this.isWindows?c.WINDOWS_PATH_VARIABLE_NAME:c.NON_WINDOWS_PATH_VARIABLE_NAME}basename(e,t){return s.basename(e,t)}getDisplayName(e,t){return t&&e.startsWith(t)?`.${s.sep}${s.relative(t,e)}`:e.startsWith(this.home)?`~${s.sep}${s.relative(this.home,e)}`:e}};l=r([o.injectable(),i(0,o.inject(a.IsWindows))],l),t.PathUtils=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});let i=class{constructor(){this.on=((e,t)=>(process.on(e,t),process))}get env(){return process.env}get argv(){return process.argv}get stdout(){return process.stdout}get stdin(){return process.stdin}get execPath(){return process.execPath}};i=r([n(0).injectable()],i),t.CurrentProcess=i},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(23),c=n(538);let u=class{constructor(e,t){this.helper=e,this.handlers=t,this.initialize()}activateEnvironmentInTerminal(e,t,n=!0){return o(this,void 0,void 0,function*(){const r=yield this.baseActivator.activateEnvironmentInTerminal(e,t,n);return this.handlers.forEach(i=>i.handleActivation(e,t,n,r).ignoreErrors()),r})}initialize(){this.baseActivator=new c.BaseTerminalActivator(this.helper)}};u=r([s.injectable(),i(0,s.inject(a.ITerminalHelper)),i(1,s.multiInject(a.ITerminalActivationHandler))],u),t.TerminalActivator=u},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(16),o=n(23);t.BaseTerminalActivator=class{constructor(e){this.helper=e,this.activatedTerminals=new Map}activateEnvironmentInTerminal(e,t,n=!0){return r(this,void 0,void 0,function*(){if(this.activatedTerminals.has(e))return this.activatedTerminals.get(e);const r=i.createDeferred();this.activatedTerminals.set(e,r.promise);const s=this.helper.getTerminalShellPath(),a=s&&0!==s.length?this.helper.identifyTerminalShell(s):o.TerminalShellType.other,c=yield this.helper.getEnvironmentActivationCommands(a,t);let u=!1;if(c)for(const t of c)e.show(n),e.sendText(t),yield this.waitForCommandToProcess(a),u=!0;return r.resolve(u),u})}waitForCommandToProcess(e){return r(this,void 0,void 0,function*(){yield i.sleep(500)})}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(211),c=n(26),u=n(6),l=n(23);let d=class{constructor(e,t,n){this.helper=e,this.platformService=t,this.diagnosticService=n}handleActivation(e,t,n,r){return o(this,void 0,void 0,function*(){if(r||!this.platformService.isWindows)return;const e=this.helper.identifyTerminalShell(this.helper.getTerminalShellPath());if(e!==l.TerminalShellType.powershell&&e!==l.TerminalShellType.powershellCore)return;const n=yield this.helper.getEnvironmentActivationCommands(l.TerminalShellType.commandPrompt,t);n&&Array.isArray(n)&&0!==n.length&&this.diagnosticService.handle([new a.PowershellActivationNotAvailableDiagnostic(t)]).ignoreErrors()})}};d=r([s.injectable(),i(0,s.inject(l.ITerminalHelper)),i(1,s.inject(u.IPlatformService)),i(2,s.inject(c.IDiagnosticsService)),i(2,s.named(a.PowerShellActivationHackDiagnosticsServiceId))],d),t.PowershellTerminalActivationFailedHandler=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(5);n(8);const c=n(23),u=n(217);let l=class extends u.BaseActivationCommandProvider{constructor(e){super(e)}isShellSupported(e){return e===c.TerminalShellType.bash||e===c.TerminalShellType.gitbash||e===c.TerminalShellType.wsl||e===c.TerminalShellType.ksh||e===c.TerminalShellType.zsh||e===c.TerminalShellType.cshell||e===c.TerminalShellType.tcshell||e===c.TerminalShellType.fish}getActivationCommandsForInterpreter(e,t){return o(this,void 0,void 0,function*(){const n=yield this.findScriptFile(e,this.getScriptsInOrderOfPreference(t));if(n)return[`source ${n.fileToCommandArgument()}`]})}getScriptsInOrderOfPreference(e){switch(e){case c.TerminalShellType.wsl:case c.TerminalShellType.ksh:case c.TerminalShellType.zsh:case c.TerminalShellType.gitbash:case c.TerminalShellType.bash:return["activate.sh","activate"];case c.TerminalShellType.tcshell:case c.TerminalShellType.cshell:return["activate.csh"];case c.TerminalShellType.fish:return["activate.fish"];default:return[]}}};l=r([s.injectable(),i(0,s.inject(a.IServiceContainer))],l),t.Bash=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(5);n(8);const u=n(23),l=n(217);let d=class extends l.BaseActivationCommandProvider{constructor(e){super(e)}isShellSupported(e){return e===u.TerminalShellType.commandPrompt||e===u.TerminalShellType.powershell||e===u.TerminalShellType.powershellCore}getActivationCommandsForInterpreter(e,t){return o(this,void 0,void 0,function*(){const n=yield this.findScriptFile(e,this.getScriptsInOrderOfPreference(t));if(n)return t===u.TerminalShellType.commandPrompt&&n.endsWith("activate.bat")?[n.fileToCommandArgument()]:t!==u.TerminalShellType.powershell&&t!==u.TerminalShellType.powershellCore||!n.endsWith("activate.ps1")?t===u.TerminalShellType.commandPrompt&&n.endsWith("activate.ps1")?[]:void 0:[`& ${n.fileToCommandArgument()}`]})}getScriptsInOrderOfPreference(e){const t=["activate.bat",a.join("Scripts","activate.bat"),a.join("scripts","activate.bat")],n=["activate.ps1",a.join("Scripts","activate.ps1"),a.join("scripts","activate.ps1")];return e===u.TerminalShellType.commandPrompt?t.concat(n):n.concat(t)}};d=r([s.injectable(),i(0,s.inject(c.IServiceContainer))],d),t.CommandPromptAndPowerShell=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const s=n(0),a=n(3),c=n(10),u=n(6),l=n(1),d=n(23);let h=class{constructor(e,t,n){this.condaService=e,this.platform=t,this.configService=n}isShellSupported(e){return!0}getActivationCommands(e,t){const n=this.configService.getSettings(e).pythonPath;return this.getActivationCommandsForInterpreter(n,t)}getActivationCommandsForInterpreter(e,t){return o(this,void 0,void 0,function*(){const n=yield this.condaService.getCondaEnvironment(e);if(!n)return;const r=yield this.condaService.getCondaVersion();if(r&&(r.major>4||4===r.major&&r.minor>=4)){const t=yield this.condaService.getCondaFileFromInterpreter(e,n.name);if(t){const e=a.join(a.dirname(t),"activate").fileToCommandArgument();return[this.platform.isWindows?e:`source ${e}`,`conda activate ${n.name}`]}}if(this.platform.isWindows)switch(t){case d.TerminalShellType.powershell:case d.TerminalShellType.powershellCore:return this.getPowershellCommands(n.name,t);case d.TerminalShellType.fish:return this.getFishCommands(n.name,yield this.condaService.getCondaFile());default:return this.getWindowsCommands(n.name)}else switch(t){case d.TerminalShellType.powershell:case d.TerminalShellType.powershellCore:return;case d.TerminalShellType.fish:return this.getFishCommands(n.name,yield this.condaService.getCondaFile());default:return this.getUnixCommands(n.name,yield this.condaService.getCondaFile())}})}getWindowsActivateCommand(){return o(this,void 0,void 0,function*(){let e="activate";const t=yield this.condaService.getCondaFile();if(t&&a.basename(t)!==t){const n=a.dirname(t);e=(e=a.join(n,e)).toCommandArgument()}return e})}getWindowsCommands(e){return o(this,void 0,void 0,function*(){return[`${yield this.getWindowsActivateCommand()} ${e.toCommandArgument()}`]})}getPowershellCommands(e,t){return o(this,void 0,void 0,function*(){})}getFishCommands(e,t){return o(this,void 0,void 0,function*(){return[`${t.fileToCommandArgument()} activate ${e.toCommandArgument()}`]})}getUnixCommands(e,t){return o(this,void 0,void 0,function*(){const n=a.dirname(t);return[`source ${a.join(n,"activate").fileToCommandArgument()} ${e.toCommandArgument()}`]})}};h=r([s.injectable(),i(0,s.inject(c.ICondaService)),i(1,s.inject(u.IPlatformService)),i(2,s.inject(l.IConfigurationService))],h),t.CondaActivationCommandProvider=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(10),c=n(4),u=n(6);let l=class{constructor(e,t,n,r){this.interpreterService=e,this.pipenvService=t,this.workspaceService=n,this.fs=r}isShellSupported(e){return!0}getActivationCommands(e,t){return o(this,void 0,void 0,function*(){const t=yield this.interpreterService.getActiveInterpreter(e);if(!t||t.type!==a.InterpreterType.Pipenv)return;const n=e?this.workspaceService.getWorkspaceFolder(e):void 0;return n&&t.pipEnvWorkspaceFolder&&!this.fs.arePathsSame(n.uri.fsPath,t.pipEnvWorkspaceFolder)?void 0:[`${this.pipenvService.executable.fileToCommandArgument()} shell`]})}getActivationCommandsForInterpreter(e,t){return o(this,void 0,void 0,function*(){const t=yield this.interpreterService.getInterpreterDetails(e);if(t&&t.type===a.InterpreterType.Pipenv)return[`${this.pipenvService.executable.fileToCommandArgument()} shell`]})}};l=r([s.injectable(),i(0,s.inject(a.IInterpreterService)),i(1,s.inject(a.IPipEnvService)),i(2,s.inject(c.IWorkspaceService)),i(3,s.inject(u.IFileSystem))],l),t.PipEnvActivationCommandProvider=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(10),c=n(5);let u=class{constructor(e){this.serviceContainer=e}isShellSupported(e){return!0}getActivationCommands(e,t){return o(this,void 0,void 0,function*(){const t=yield this.serviceContainer.get(a.IInterpreterService).getActiveInterpreter(e);if(t&&t.type===a.InterpreterType.Pyenv&&t.envName)return[`pyenv shell ${t.envName.toCommandArgument()}`]})}getActivationCommandsForInterpreter(e,t){return o(this,void 0,void 0,function*(){const t=yield this.serviceContainer.get(a.IInterpreterService).getInterpreterDetails(e);if(t&&t.type===a.InterpreterType.Pyenv&&t.envName)return[`pyenv shell ${t.envName.toCommandArgument()}`]})}};u=r([s.injectable(),i(0,s.inject(c.IServiceContainer))],u),t.PyEnvActivationCommandProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(5),a=n(4),c=n(546);let u=class{constructor(e){this.serviceContainer=e,this.terminalServices=new Map}getTerminalService(e,t){const n="string"==typeof t&&t.trim().length>0?t.trim():"Python",r=this.getTerminalId(n,e);if(!this.terminalServices.has(r)){const t=new c.TerminalService(this.serviceContainer,e,n);this.terminalServices.set(r,t)}return this.terminalServices.get(r)}createTerminalService(e,t){const n="string"==typeof t&&t.trim().length>0?t.trim():"Python";return new c.TerminalService(this.serviceContainer,e,n)}getTerminalId(e,t){if(!t)return e;const n=this.serviceContainer.get(a.IWorkspaceService).getWorkspaceFolder(t);return n?`${e}:${n.uri.fsPath}`:e}};u=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],u),t.TerminalServiceFactory=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2);n(8);const c=n(10),u=n(5),l=n(7),d=n(9),h=n(4),p=n(1),f=n(23);let g=class{constructor(e,t,n="Python"){this.serviceContainer=e,this.resource=t,this.title=n,this.terminalClosed=new a.EventEmitter;const r=this.serviceContainer.get(p.IDisposableRegistry);r.push(this),this.terminalHelper=this.serviceContainer.get(f.ITerminalHelper),this.terminalManager=this.serviceContainer.get(h.ITerminalManager),this.terminalManager.onDidCloseTerminal(this.terminalCloseHandler,this,r),this.terminalActivator=this.serviceContainer.get(f.ITerminalActivator)}get onDidCloseTerminal(){return this.terminalClosed.event.bind(this.terminalClosed)}dispose(){this.terminal&&this.terminal.dispose()}sendCommand(e,t){return o(this,void 0,void 0,function*(){yield this.ensureTerminal();const n=this.terminalHelper.buildCommandForTerminal(this.terminalShellType,e,t);this.terminal.show(!0),this.terminal.sendText(n,!0)})}sendText(e){return o(this,void 0,void 0,function*(){yield this.ensureTerminal(),this.terminal.show(!0),this.terminal.sendText(e)})}show(e=!0){return o(this,void 0,void 0,function*(){yield this.ensureTerminal(e),this.terminal.show(e)})}ensureTerminal(e=!0){return o(this,void 0,void 0,function*(){if(this.terminal)return;const t=this.terminalHelper.getTerminalShellPath();this.terminalShellType=t&&0!==t.length?this.terminalHelper.identifyTerminalShell(t):f.TerminalShellType.other,this.terminal=this.terminalManager.createTerminal({name:this.title}),yield new Promise(e=>setTimeout(e,100)),yield this.terminalActivator.activateEnvironmentInTerminal(this.terminal,this.resource,e),this.terminal.show(e),this.sendTelemetry().ignoreErrors()})}terminalCloseHandler(e){e===this.terminal&&(this.terminalClosed.fire(),this.terminal=void 0)}sendTelemetry(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(p.IConfigurationService).getSettings(this.resource).pythonPath,t=yield this.serviceContainer.get(c.IInterpreterService).getInterpreterDetails(e),n=t&&t.version?t.version.raw:void 0,r=t?t.type:void 0;l.captureTelemetry(d.EventName.TERMINAL_CREATE,{terminal:this.terminalShellType,pythonVersion:n,interpreterType:r})})}};g=r([s.injectable(),i(0,s.inject(u.IServiceContainer))],g),t.TerminalService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(10),c=n(7),u=n(9),l=n(4);n(8);const d=n(12),h=n(6),p=n(1),f=n(34),g=n(23),m=/(gitbash.exe$)/i,y=/(bash.exe$|bash$)/i,v=/(wsl.exe$)/i,b=/(zsh$)/i,S=/(ksh$)/i,_=/cmd.exe$/i,w=/(powershell.exe$|powershell$)/i,P=/(pwsh.exe$|pwsh$)/i,C=/(fish$)/i,T=/(csh$)/i,I=/(tcsh$)/i,E=/(xonsh$)/i,O={[f.OSType.Linux]:g.TerminalShellType.bash,[f.OSType.OSX]:g.TerminalShellType.bash,[f.OSType.Windows]:g.TerminalShellType.commandPrompt,[f.OSType.Unknown]:void 0};let R=class{constructor(e,t,n,r,i,o,s,a,c,u,l){this.platform=e,this.terminalManager=t,this.workspace=n,this.condaService=r,this.interpreterService=i,this.configurationService=o,this.conda=s,this.bashCShellFish=a,this.commandPromptAndPowerShell=c,this.pyenv=u,this.pipenv=l,this.detectableShells=new Map,this.detectableShells.set(g.TerminalShellType.powershell,w),this.detectableShells.set(g.TerminalShellType.gitbash,m),this.detectableShells.set(g.TerminalShellType.bash,y),this.detectableShells.set(g.TerminalShellType.wsl,v),this.detectableShells.set(g.TerminalShellType.zsh,b),this.detectableShells.set(g.TerminalShellType.ksh,S),this.detectableShells.set(g.TerminalShellType.commandPrompt,_),this.detectableShells.set(g.TerminalShellType.fish,C),this.detectableShells.set(g.TerminalShellType.tcshell,I),this.detectableShells.set(g.TerminalShellType.cshell,T),this.detectableShells.set(g.TerminalShellType.powershellCore,P),this.detectableShells.set(g.TerminalShellType.xonsh,E)}createTerminal(e){return this.terminalManager.createTerminal({name:e})}identifyTerminalShell(e){return Array.from(this.detectableShells.keys()).reduce((t,n)=>t===g.TerminalShellType.other&&this.detectableShells.get(n).test(e)?n:t,g.TerminalShellType.other)}getTerminalShellPath(){const e=this.workspace.getConfiguration("terminal.integrated.shell");let t="";switch(this.platform.osType){case f.OSType.Windows:t="windows";break;case f.OSType.OSX:t="osx";break;case f.OSType.Linux:t="linux";break;default:return""}return e.get(t)}buildCommandForTerminal(e,t,n){return`${e===g.TerminalShellType.powershell||e===g.TerminalShellType.powershellCore?"& ":""}${t.fileToCommandArgument()} ${n.join(" ")}`.trim()}getEnvironmentActivationCommands(e,t){return o(this,void 0,void 0,function*(){const n=[this.pipenv,this.pyenv,this.bashCShellFish,this.commandPromptAndPowerShell],r=this.getActivationCommands(t||void 0,void 0,e,n);return this.sendTelemetry(t,e,u.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL,r).ignoreErrors(),r})}getEnvironmentActivationShellCommands(e,t){return o(this,void 0,void 0,function*(){const n=O[this.platform.osType];if(!n)return;const r=[this.bashCShellFish,this.commandPromptAndPowerShell],i=this.getActivationCommands(e,t,n,r);return this.sendTelemetry(e,n,u.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE,i).ignoreErrors(),i})}sendTelemetry(e,t,n,r){return o(this,void 0,void 0,function*(){let i=!1;const o=yield this.interpreterService.getActiveInterpreter(e);let s=!1;try{const e=yield r;i=Array.isArray(e)&&e.length>0}catch(e){s=!0,d.traceError("Failed to get activation commands",e)}const u=o&&o.version?o.version.raw:void 0,l={failed:s,hasCommands:i,interpreterType:o?o.type:a.InterpreterType.Unknown,terminal:t,pythonVersion:u};c.sendTelemetryEvent(n,void 0,l)})}getActivationCommands(e,t,n,r){return o(this,void 0,void 0,function*(){const i=this.configurationService.getSettings(e);if(!i.terminal.activateEnvironment)return;if(yield this.condaService.isCondaEnvironment(i.pythonPath)){const r=t?yield this.conda.getActivationCommandsForInterpreter(t.path,n):yield this.conda.getActivationCommands(e,n);if(Array.isArray(r))return r}const o=r.filter(e=>e.isShellSupported(n));for(const r of o){const i=t?yield r.getActivationCommandsForInterpreter(t.path,n):yield r.getActivationCommands(e,n);if(Array.isArray(i)&&i.length>0)return i}})}};r([d.traceDecorators.error("Failed to capture telemetry")],R.prototype,"sendTelemetry",null),R=r([s.injectable(),i(0,s.inject(h.IPlatformService)),i(1,s.inject(l.ITerminalManager)),i(2,s.inject(l.IWorkspaceService)),i(3,s.inject(a.ICondaService)),i(4,s.inject(a.IInterpreterService)),i(5,s.inject(p.IConfigurationService)),i(6,s.inject(g.ITerminalActivationCommandProvider)),i(6,s.named(g.TerminalActivationProviders.conda)),i(7,s.inject(g.ITerminalActivationCommandProvider)),i(7,s.named(g.TerminalActivationProviders.bashCShellFish)),i(8,s.inject(g.ITerminalActivationCommandProvider)),i(8,s.named(g.TerminalActivationProviders.commandPromptAndPowerShell)),i(9,s.inject(g.ITerminalActivationCommandProvider)),i(9,s.named(g.TerminalActivationProviders.pyenv)),i(10,s.inject(g.ITerminalActivationCommandProvider)),i(10,s.named(g.TerminalActivationProviders.pipenv))],R),t.TerminalHelper=R},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4);class u{constructor(){}}u.back=new u,u.cancel=new u,u.resume=new u,t.InputFlowAction=u;class l{constructor(e){this.shell=e,this.steps=[]}run(e,t){return this.stepThrough(e,t)}showQuickPick({title:e,step:t,totalSteps:n,items:r,activeItem:i,placeholder:s,buttons:c,shouldResume:l}){return o(this,void 0,void 0,function*(){const d=[];try{return yield new Promise((h,p)=>{const f=this.shell.createQuickPick();f.title=e,f.step=t,f.totalSteps=n,f.placeholder=s,f.ignoreFocusOut=!0,f.items=r,i&&(f.activeItems=[i]),f.buttons=[...this.steps.length>1?[a.QuickInputButtons.Back]:[],...c||[]],d.push(f.onDidTriggerButton(e=>{e===a.QuickInputButtons.Back?p(u.back):h(e)}),f.onDidChangeSelection(e=>h(e[0])),f.onDidHide(()=>{(()=>o(this,void 0,void 0,function*(){p(l&&(yield l())?u.resume:u.cancel)}))().catch(p)})),this.current&&this.current.dispose(),this.current=f,this.current.show()})}finally{d.forEach(e=>e.dispose())}})}showInputBox({title:e,step:t,totalSteps:n,value:r,prompt:i,validate:s,buttons:c,shouldResume:l}){return o(this,void 0,void 0,function*(){const d=[];try{return yield new Promise((h,p)=>{const f=this.shell.createInputBox();f.title=e,f.step=t,f.totalSteps=n,f.value=r||"",f.prompt=i,f.ignoreFocusOut=!0,f.buttons=[...this.steps.length>1?[a.QuickInputButtons.Back]:[],...c||[]];let g=s("");d.push(f.onDidTriggerButton(e=>{e===a.QuickInputButtons.Back?p(u.back):h(e)}),f.onDidAccept(()=>o(this,void 0,void 0,function*(){const e=f.value;f.enabled=!1,f.busy=!0,(yield s(e))||h(e),f.enabled=!0,f.busy=!1})),f.onDidChangeValue(e=>o(this,void 0,void 0,function*(){const t=s(e),n=yield t;t===(g=t)&&(f.validationMessage=n)})),f.onDidHide(()=>{(()=>o(this,void 0,void 0,function*(){p(l&&(yield l())?u.resume:u.cancel)}))().catch(p)})),this.current&&this.current.dispose(),this.current=f,this.current.show()})}finally{d.forEach(e=>e.dispose())}})}stepThrough(e,t){return o(this,void 0,void 0,function*(){let n=e;for(;n;){this.steps.push(n),this.current&&(this.current.enabled=!1,this.current.busy=!0);try{n=yield n(this,t)}catch(e){if(e===u.back)this.steps.pop(),n=this.steps.pop();else if(e===u.resume)n=this.steps.pop();else{if(e!==u.cancel)throw e;n=void 0}}}this.current&&this.current.dispose()})}}t.MultiStepInput=l,t.IMultiStepInputFactory=Symbol("IMultiStepInputFactory");let d=class{constructor(e){this.shell=e}create(){return new l(this.shell)}};d=r([s.injectable(),i(0,s.inject(c.IApplicationShell))],d),t.MultiStepInputFactory=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(550),i=n(552),o=n(70);t.registerTypes=function(e){e.addSingleton(o.IEnvironmentVariablesService,r.EnvironmentVariablesService),e.addSingleton(o.IEnvironmentVariablesProvider,i.EnvironmentVariablesProvider)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(551),a=n(28),c=n(0),u=n(3),l=n(1);let d=class{constructor(e){this.pathVariable=e.getPathVariableName()}parseFile(e){return o(this,void 0,void 0,function*(){if(e&&(yield a.pathExists(e))&&a.lstatSync(e).isFile())return s.parse(yield a.readFile(e))})}mergeVariables(e,t){if(!t)return;const n=["PYTHONPATH",this.pathVariable];Object.keys(e).forEach(r=>{n.indexOf(r)>=0||void 0===t[r]&&(t[r]=e[r])})}appendPythonPath(e,...t){return this.appendPaths(e,"PYTHONPATH",...t)}appendPath(e,...t){return this.appendPaths(e,this.pathVariable,...t)}appendPaths(e,t,...n){const r=n.filter(e=>"string"==typeof e&&e.trim().length>0).map(e=>e.trim()).join(u.delimiter);if(0===r.length)return e;const i=e?e[t]:void 0;return i&&"string"==typeof i&&i.length>0?e[t]=i+u.delimiter+r:e[t]=r,e}};d=r([c.injectable(),i(0,c.inject(l.IPathUtils))],d),t.EnvironmentVariablesService=d},function(e,t,n){"use strict";const r=n(18),i=n(3);function o(e){const t={};return e.toString().split("\n").forEach(function(e){const n=e.match(/^\s*([\w\.\-]+)\s*=\s*(.*)?\s*$/);if(null!=n){const e=n[1];let r=n[2]||"";const i=r?r.length:0;i>0&&'"'===r.charAt(0)&&'"'===r.charAt(i-1)&&(r=r.replace(/\\n/gm,"\n")),r=r.replace(/(^['"]|['"]$)/g,"").trim(),t[e]=r}}),t}function s(e){let t=i.resolve(process.cwd(),".env"),n="utf8";e&&(e.path&&(t=e.path),e.encoding&&(n=e.encoding));try{const e=o(r.readFileSync(t,{encoding:n}));return Object.keys(e).forEach(function(t){process.env.hasOwnProperty(t)||(process.env[t]=e[t])}),{parsed:e}}catch(e){return{error:e}}}e.exports.config=s,e.exports.load=s,e.exports.parse=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(6),l=n(1),d=n(56),h=n(70);let p=class{constructor(e,t,n,r,i,o){this.envVarsService=e,this.platformService=n,this.workspaceService=r,this.configurationService=i,this.process=o,this.fileWatchers=new Map,this.disposables=[],this.trackedWorkspaceFolders=new Set,t.push(this),this.changeEventEmitter=new a.EventEmitter;const s=this.workspaceService.onDidChangeConfiguration(this.configurationChanged,this);this.disposables.push(s)}get onDidEnvironmentVariablesChange(){return this.changeEventEmitter.event}dispose(){this.changeEventEmitter.dispose(),this.fileWatchers.forEach(e=>{e.dispose()})}getEnvironmentVariables(e){return o(this,void 0,void 0,function*(){const t=this.configurationService.getSettings(e),n=this.getWorkspaceFolderUri(e);this.trackedWorkspaceFolders.add(n?n.fsPath:""),this.createFileWatcher(t.envFile,n);let r=yield this.envVarsService.parseFile(t.envFile);r||(r={}),this.envVarsService.mergeVariables(this.process.env,r);const i=this.platformService.pathVariableName,o=this.process.env[i];return o&&this.envVarsService.appendPath(r,o),this.process.env.PYTHONPATH&&this.envVarsService.appendPythonPath(r,this.process.env.PYTHONPATH),r})}configurationChanged(e){this.trackedWorkspaceFolders.forEach(t=>{const n=t&&t.length>0?a.Uri.file(t):void 0;e.affectsConfiguration("python.envFile",n)&&this.onEnvironmentFileChanged(n)})}getWorkspaceFolderUri(e){if(!e)return;const t=a.workspace.getWorkspaceFolder(e);return t?t.uri:void 0}createFileWatcher(e,t){if(this.fileWatchers.has(e))return;const n=a.workspace.createFileSystemWatcher(e);this.fileWatchers.set(e,n),n&&(this.disposables.push(n.onDidChange(()=>this.onEnvironmentFileChanged(t))),this.disposables.push(n.onDidCreate(()=>this.onEnvironmentFileChanged(t))),this.disposables.push(n.onDidDelete(()=>this.onEnvironmentFileChanged(t))))}onEnvironmentFileChanged(e){d.clearCachedResourceSpecificIngterpreterData("getEnvironmentVariables",e),d.clearCachedResourceSpecificIngterpreterData("CustomEnvironmentVariables",e),this.changeEventEmitter.fire(e)}};r([d.cacheResourceSpecificInterpreterData("getEnvironmentVariables",36e5)],p.prototype,"getEnvironmentVariables",null),p=r([s.injectable(),i(0,s.inject(h.IEnvironmentVariablesService)),i(1,s.inject(l.IDisposableRegistry)),i(2,s.inject(u.IPlatformService)),i(3,s.inject(c.IWorkspaceService)),i(4,s.inject(l.IConfigurationService)),i(5,s.inject(l.ICurrentProcess))],p),t.EnvironmentVariablesProvider=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(554),i=n(557),o=n(560),s=n(561),a=n(562),c=n(563),u=n(564),l=n(565),d=n(566),h=n(569),p=n(570),f=n(571),g=n(572),m=n(574),y=n(29);t.registerTypes=function(e){e.addSingleton(y.IDataScienceCodeLensProvider,o.DataScienceCodeLensProvider),e.addSingleton(y.IDataScience,i.DataScience),e.addSingleton(y.IJupyterExecution,d.JupyterExecution),e.add(y.IDataScienceCommandListener,c.HistoryCommandListener),e.addSingleton(y.IHistoryProvider,u.HistoryProvider),e.add(y.IHistory,a.History),e.add(y.INotebookExporter,h.JupyterExporter),e.add(y.INotebookImporter,p.JupyterImporter),e.add(y.INotebookServer,f.JupyterServer),e.addSingleton(y.ICodeCssGenerator,r.CodeCssGenerator),e.addSingleton(y.IStatusProvider,m.StatusProvider),e.addSingleton(y.IJupyterSessionManager,g.JupyterSessionManager),e.add(y.ICodeWatcher,s.CodeWatcher),e.add(y.IJupyterCommandFactory,l.JupyterCommandFactory)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(28),a=n(0),c=n(3),u=n(555),l=n(4),d=n(1),h=n(45),p=n(31);let f=class{constructor(e,t,r){this.workspaceService=e,this.currentProcess=t,this.logger=r,this.generateThemeCss=(()=>o(this,void 0,void 0,function*(){try{const e=this.workspaceService.getConfiguration("workbench"),t=e.get("colorTheme"),n=e.get("terminal.integrated.cursorStyle","block"),r=this.workspaceService.getConfiguration("editor",void 0),i=r.get("fontFamily"),o=r.get("fontSize");if(t){const e=yield this.findTokenColors(t);if(e&&i&&o)return this.generateCss(t,e,i,o,n)}}catch(e){this.logger.logError(e)}return""})),this.getScopeColor=((e,t,n)=>{let r=this.matchTokenColor(e,t);r<0&&n&&(r=this.matchTokenColor(e,n));const i=r>=0?e[r]:null;if(null!==i){const e=i.settings;if(e&&null!==e)return e.foreground}return"var(--vscode-editor-foreground)"}),this.mergeColors=((e,t)=>[...e,...t]),this.readTokenColors=(e=>o(this,void 0,void 0,function*(){const t=yield s.readFile(e,"utf8"),n=JSON.parse(u(t)),r=n.tokenColors;if(r&&r.length>0){const t=n?n.include:void 0;if(t&&null!==t){const n=c.join(c.dirname(e),t.toString()),i=yield this.readTokenColors(n);return this.mergeColors(r,i)}return r}return[]})),this.findTokenColors=(e=>o(this,void 0,void 0,function*(){const t=this.currentProcess.execPath;let r=c.dirname(t),i=c.join(r,"resources","app","extensions");(yield s.pathExists(i))||(r=c.resolve(r,"../../../.."),i=c.join(r,"resources","app","extensions"));const o=this.escapeThemeName(e),a={path:i,recursiveSearch:!0,fileFilter:{fileNamePattern:"**/*.json",content:new RegExp(`[name|id][',"]:\\s*[',"]${o}[',"]`)}},l=new(n(556).FileMatcher);try{const t=yield l.find(a);if(t&&t.length>0){const n=yield s.readFile(t[0],"utf8"),r=JSON.parse(u(n)),i=r.contributes;if(!i){if(r.tokenColors)return yield this.readTokenColors(t[0])}const o=i.themes,a=o.findIndex(t=>null!==t&&t.id===e),l=a>=0?o[a]:null;if(null!==l){const e=c.join(c.dirname(t[0]),l.path);return yield this.readTokenColors(e)}}}catch(e){this.logger.logError(e)}const d=c.join(h.EXTENSION_ROOT_DIR,"resources","defaultTheme.json");return this.readTokenColors(d)}))}escapeThemeName(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}matchTokenColor(e,t){return e.findIndex(e=>{if(e){const n=e.scope;if(n&&Array.isArray(n)){if(n.find(e=>null!==e&&void 0!==e&&e.toString()===t))return!0}else if(n&&n.toString()===t)return!0}return!1})}generateCss(e,t,n,r,i){const o=p.Identifiers.GeneratedThemeName,s=this.getScopeColor(t,"comment"),a=this.getScopeColor(t,"constant.numeric"),c=this.getScopeColor(t,"string"),u=this.getScopeColor(t,"keyword.control","keyword"),l=this.getScopeColor(t,"keyword.operator"),d=this.getScopeColor(t,"variable"),h=this.getScopeColor(t,"support.function"),f="var(--vscode-editor-foreground)";return`\n        :root {\n            --code-comment-color: ${s};\n            --code-font-family: ${n};\n            --code-font-size:${r}px;\n        }\n        .cm-header, .cm-strong {font-weight: bold;}\n        .cm-em {font-style: italic;}\n        .cm-link {text-decoration: underline;}\n        .cm-strikethrough {text-decoration: line-through;}\n\n        .cm-s-${o} span.cm-keyword {color: ${u};}\n        .cm-s-${o} span.cm-number {color: ${a};}\n        .cm-s-${o} span.cm-def {color: ${f};}\n        .cm-s-${o} span.cm-variable {color: ${d};}\n        .cm-s-${o} span.cm-punctuation {color: ${this.getScopeColor(t,"punctuation")};}\n        .cm-s-${o} span.cm-property,\n        .cm-s-${o} span.cm-operator {color: ${l};}\n        .cm-s-${o} span.cm-variable-2 {color: ${d};}\n        .cm-s-${o} span.cm-variable-3, .cm-s-${e} .cm-type {color: ${d};}\n        .cm-s-${o} span.cm-comment {color: ${s};}\n        .cm-s-${o} span.cm-string {color: ${c};}\n        .cm-s-${o} span.cm-string-2 {color: ${c};}\n        .cm-s-${o} span.cm-builtin {color: ${h};}\n        .cm-s-${o} div.CodeMirror-cursor ${"block"===i?`{ border: 1px solid ${f}; background: ${f}; width: 5px; z-index=100; }`:"underline"===i?`{ border-bottom: 1px solid ${f}; z-index=100; width: 5px; }`:`{ border-left: 1px solid ${f}; border-right: none; z-index=100; }`}\n        .cm-s-${o} div.CodeMirror-selected {background: var(--vscode-editor-selectionBackground) !important;}\n`}};f=r([a.injectable(),i(0,a.inject(l.IWorkspaceService)),i(1,a.inject(d.ICurrentProcess)),i(2,a.inject(d.ILogger))],f),t.CodeCssGenerator=f},function(e,t,n){"use strict";function r(){return""}function i(e,t,n){return e.slice(t,n).replace(/\S/g," ")}e.exports=function(e,t){for(var n,o,s=!1,a=!1,c=0,u="",l=!1===(t=t||{}).whitespace?r:i,d=0;d<e.length;d++){if(n=e[d],o=e[d+1],!a&&'"'===n)"\\"===e[d-1]&&"\\"!==e[d-2]||(s=!s);if(!s)if(a||n+o!=="//"){if(1===a&&n+o==="\r\n"){a=!1,u+=l(e,c,++d),c=d;continue}if(1===a&&"\n"===n)a=!1,u+=l(e,c,d),c=d;else{if(!a&&n+o==="/*"){u+=e.slice(c,d),c=d,a=2,d++;continue}if(2===a&&n+o==="*/"){a=!1,u+=l(e,c,++d+1),c=d+1;continue}}}else u+=e.slice(c,d),c=d,a=1,d++}return u+(a?l(e.substr(c)):e.substr(c))}},function(e,t){e.exports=require("./node_modules/file-matcher")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const s=n(0),a=n(62),c=n(2),u=n(4),l=n(11),d=n(141),h=n(1),p=n(13),f=n(5),g=n(7),m=n(97),y=n(31),v=n(29);let b=class{constructor(e,t,n,r,i,o,s,c){this.serviceContainer=e,this.commandManager=t,this.disposableRegistry=n,this.extensionContext=r,this.dataScienceCodeLensProvider=i,this.configuration=o,this.documentManager=s,this.appShell=c,this.isDisposed=!1,this.validateURI=(e=>{try{new a.URL(e)}catch(e){return p.DataScience.jupyterSelectURIInvalidURI()}return null}),this.onSettingsChanged=(()=>{const e=this.configuration.getSettings().datascience.enabled;new d.ContextKey(y.EditorContexts.DataScienceEnabled,this.commandManager).set(e).catch()}),this.commandListeners=this.serviceContainer.getAll(v.IDataScienceCommandListener),this.dataScienceSurveyBanner=this.serviceContainer.get(h.IPythonExtensionBanner,h.BANNER_NAME_DS_SURVEY)}activate(){return o(this,void 0,void 0,function*(){this.registerCommands(),this.extensionContext.subscriptions.push(c.languages.registerCodeLensProvider(l.PYTHON,this.dataScienceCodeLensProvider)),this.onSettingsChanged(),this.changeHandler=this.configuration.getSettings().onDidChange(this.onSettingsChanged.bind(this)),this.disposableRegistry.push(this),this.disposableRegistry.push(this.documentManager.onDidChangeActiveTextEditor(()=>this.onChangedActiveTextEditor())),this.onChangedActiveTextEditor()})}dispose(){return o(this,void 0,void 0,function*(){this.changeHandler&&(this.changeHandler.dispose(),this.changeHandler=void 0)})}runAllCells(e){return o(this,void 0,void 0,function*(){this.dataScienceSurveyBanner.showBanner().ignoreErrors();let t=e;return t||(t=this.getCurrentCodeWatcher()),t?t.runAllCells():Promise.resolve()})}runCell(e,t){return o(this,void 0,void 0,function*(){return this.dataScienceSurveyBanner.showBanner().ignoreErrors(),e?e.runCell(t):this.runCurrentCell()})}runCurrentCell(){return o(this,void 0,void 0,function*(){this.dataScienceSurveyBanner.showBanner().ignoreErrors();const e=this.getCurrentCodeWatcher();return e?e.runCurrentCell():Promise.resolve()})}runCurrentCellAndAdvance(){return o(this,void 0,void 0,function*(){this.dataScienceSurveyBanner.showBanner().ignoreErrors();const e=this.getCurrentCodeWatcher();return e?e.runCurrentCellAndAdvance():Promise.resolve()})}selectJupyterURI(){return o(this,void 0,void 0,function*(){const e=[p.DataScience.jupyterSelectURILaunchLocal(),p.DataScience.jupyterSelectURISpecifyURI()];switch(yield this.appShell.showQuickPick(e)){case p.DataScience.jupyterSelectURILaunchLocal():return this.setJupyterURIToLocal();case p.DataScience.jupyterSelectURISpecifyURI():return this.selectJupyterLaunchURI()}})}setJupyterURIToLocal(){return o(this,void 0,void 0,function*(){yield this.configuration.updateSetting("dataScience.jupyterServerURI",y.Settings.JupyterServerLocalLaunch,void 0,c.ConfigurationTarget.Workspace)})}selectJupyterLaunchURI(){return o(this,void 0,void 0,function*(){const e=yield this.appShell.showInputBox({prompt:p.DataScience.jupyterSelectURIPrompt(),placeHolder:"https://hostname:8080/?token=849d61a414abafab97bc4aab1f3547755ddc232c2b8cb7fe",validateInput:this.validateURI,ignoreFocusOut:!0});e&&(yield this.configuration.updateSetting("dataScience.jupyterServerURI",e,void 0,c.ConfigurationTarget.Workspace))})}getCurrentCodeWatcher(){const e=c.window.activeTextEditor;if(e&&e.document)return this.dataScienceCodeLensProvider.getCodeWatcher(e.document)}registerCommands(){let e=this.commandManager.registerCommand(y.Commands.RunAllCells,this.runAllCells,this);this.disposableRegistry.push(e),e=this.commandManager.registerCommand(y.Commands.RunCell,this.runCell,this),this.disposableRegistry.push(e),e=this.commandManager.registerCommand(y.Commands.RunCurrentCell,this.runCurrentCell,this),this.disposableRegistry.push(e),e=this.commandManager.registerCommand(y.Commands.RunCurrentCellAdvance,this.runCurrentCellAndAdvance,this),this.disposableRegistry.push(e),e=this.commandManager.registerCommand(y.Commands.SelectJupyterURI,this.selectJupyterURI,this),this.disposableRegistry.push(e),this.commandListeners.forEach(e=>{e.register(this.commandManager)})}onChangedActiveTextEditor(){const e=new d.ContextKey(y.EditorContexts.HasCodeCells,this.commandManager),t=this.documentManager.activeTextEditor;t&&t.document.languageId===l.PYTHON_LANGUAGE?e.set(m.hasCells(t.document,this.configuration.getSettings().datascience)).catch():e.set(!1).catch()}};r([g.captureTelemetry(y.Telemetry.SelectJupyterURI)],b.prototype,"selectJupyterURI",null),r([g.captureTelemetry(y.Telemetry.SetJupyterURIToLocal)],b.prototype,"setJupyterURIToLocal",null),r([g.captureTelemetry(y.Telemetry.SetJupyterURIToUserSpecified)],b.prototype,"selectJupyterLaunchURI",null),b=r([s.injectable(),i(0,s.inject(f.IServiceContainer)),i(1,s.inject(u.ICommandManager)),i(2,s.inject(h.IDisposableRegistry)),i(3,s.inject(h.IExtensionContext)),i(4,s.inject(v.IDataScienceCodeLensProvider)),i(5,s.inject(h.IConfigurationService)),i(6,s.inject(u.IDocumentManager)),i(7,s.inject(u.IApplicationShell))],b),t.DataScience=b},function(e,t,n){var r=n(61);e.exports=function(){return r.randomBytes(16)}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(1),a=n(5),c=n(29);let u=class{constructor(e,t){this.serviceContainer=e,this.configuration=t,this.activeCodeWatchers=[]}provideCodeLenses(e,t){if(!this.configuration.getSettings().datascience.enabled)return this.activeCodeWatchers.length>0&&(this.activeCodeWatchers=[]),[];const n=this.matchWatcher(e.fileName,e.version,this.configuration.getSettings().datascience);if(n)return n.getCodeLenses();const r=this.serviceContainer.get(c.ICodeWatcher);return r.setDocument(e),this.activeCodeWatchers.push(r),r.getCodeLenses()}getCodeWatcher(e){return this.matchWatcher(e.fileName,e.version,this.configuration.getSettings().datascience)}matchWatcher(e,t,n){const r=this.activeCodeWatchers.findIndex(t=>t.getFileName()===e);if(r>=0){const e=this.activeCodeWatchers[r];if(e.getVersion()===t){if(JSON.stringify(n)===JSON.stringify(e.getCachedSettings()))return e}this.activeCodeWatchers.splice(r,1)}}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer)),i(1,o.inject(s.IConfigurationService))],u),t.DataScienceCodeLensProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(6),l=n(1),d=n(13),h=n(7),p=n(97),f=n(31),g=n(220),m=n(29);let y=class{constructor(e,t,n,r,i,o){this.applicationShell=e,this.logger=t,this.historyProvider=n,this.fileSystem=r,this.configService=i,this.documentManager=o,this.version=-1,this.fileName="",this.codeLenses=[],this.handleError=(e=>{if(e instanceof g.JupyterInstallError){const t=e;this.applicationShell.showErrorMessage(t.message,t.actionTitle).then(e=>{e===t.actionTitle&&this.applicationShell.openUrl(t.action)})}else e.message?this.applicationShell.showErrorMessage(e.message):this.applicationShell.showErrorMessage(e.toString());this.logger.logError(e)})}setDocument(e){this.document=e,this.fileName=e.fileName,this.version=e.version,this.cachedSettings=JSON.parse(JSON.stringify(this.configService.getSettings().datascience));const t=p.generateCellRanges(e,this.cachedSettings);this.codeLenses=[],t.forEach(e=>{const t={arguments:[this,e.range],title:d.DataScience.runCellLensCommandTitle(),command:f.Commands.RunCell};this.codeLenses.push(new a.CodeLens(e.range,t));const n={arguments:[this],title:d.DataScience.runAllCellsLensCommandTitle(),command:f.Commands.RunAllCells};this.codeLenses.push(new a.CodeLens(e.range,n))})}getFileName(){return this.fileName}getVersion(){return this.version}getCachedSettings(){return this.cachedSettings}getCodeLenses(){return this.codeLenses}runAllCells(){return o(this,void 0,void 0,function*(){const e=this.historyProvider.getOrCreateActive();for(const t of this.codeLenses)if(t.command&&t.command.command===f.Commands.RunCell&&t.command.arguments&&t.command.arguments.length>=2){const n=t.command.arguments[1];if(this.document&&n){const t=this.document.getText(n);yield e.addCode(t,this.getFileName(),n.start.line)}}if(0===this.codeLenses.length&&this.document){const t=this.document.getText();yield e.addCode(t,this.getFileName(),0)}})}runCell(e){return o(this,void 0,void 0,function*(){const t=this.historyProvider.getOrCreateActive();if(this.document){const n=this.document.getText(e);try{yield t.addCode(n,this.getFileName(),e.start.line,this.documentManager.activeTextEditor)}catch(e){this.handleError(e)}}})}runCurrentCell(){return o(this,void 0,void 0,function*(){if(this.documentManager.activeTextEditor&&this.documentManager.activeTextEditor.document)for(const e of this.codeLenses)if(e.range.contains(this.documentManager.activeTextEditor.selection.start)&&e.command&&e.command.command===f.Commands.RunCell){yield this.runCell(e.range);break}})}runCurrentCellAndAdvance(){return o(this,void 0,void 0,function*(){if(!this.documentManager.activeTextEditor||!this.documentManager.activeTextEditor.document)return;let e,t;for(const n of this.codeLenses){if(e&&n.command&&n.command.command===f.Commands.RunCell){t=n;break}n.range.contains(this.documentManager.activeTextEditor.selection.start)&&n.command&&n.command.command===f.Commands.RunCell&&(e=n)}if(e){let n;(n=t?t.range:this.createNewCell(e.range))&&this.advanceToRange(n),yield this.runCell(e.range)}})}createNewCell(e){const t=this.documentManager.activeTextEditor,n=new a.Position(e.end.line+3,0);return t&&t.edit(t=>{t.insert(new a.Position(e.end.line+1,0),"\n\n#%%\n")}),new a.Range(n,n)}advanceToRange(e){const t=this.documentManager.activeTextEditor,n=new a.Selection(e.start,e.start);t&&(t.selection=n,t.revealRange(e,a.TextEditorRevealType.Default))}};r([h.captureTelemetry(f.Telemetry.RunAllCells)],y.prototype,"runAllCells",null),r([h.captureTelemetry(f.Telemetry.RunCell)],y.prototype,"runCell",null),r([h.captureTelemetry(f.Telemetry.RunCurrentCell)],y.prototype,"runCurrentCell",null),r([h.captureTelemetry(f.Telemetry.RunCurrentCellAndAdvance)],y.prototype,"runCurrentCellAndAdvance",null),y=r([s.injectable(),i(0,s.inject(c.IApplicationShell)),i(1,s.inject(l.ILogger)),i(2,s.inject(m.IHistoryProvider)),i(3,s.inject(u.IFileSystem)),i(4,s.inject(l.IConfigurationService)),i(5,s.inject(c.IDocumentManager))],y),t.CodeWatcher=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const s=n(28),a=n(0),c=n(3),u=n(98),l=n(2),d=n(4),h=n(74),p=n(11),f=n(141),g=n(6),m=n(1),y=n(16),v=n(13),b=n(10),S=n(7),_=n(31),w=n(220),P=n(29);var C;!function(e){e[e.Start=0]="Start",e[e.Restart=1]="Restart",e[e.Interrupt=2]="Interrupt"}(C=t.SysInfoReason||(t.SysInfoReason={}));let T=class{constructor(e,t,n,r,i,s,a,d,h,g,m,y,b,T){this.applicationShell=e,this.documentManager=t,this.interpreterService=n,this.provider=r,this.disposables=i,this.cssGenerator=s,this.logger=a,this.statusProvider=d,this.jupyterExecution=h,this.fileSystem=g,this.configuration=m,this.commandManager=y,this.jupyterExporter=b,this.workspaceService=T,this.disposed=!1,this.unfinishedCells=[],this.restartingKernel=!1,this.potentiallyUnfinishedStatus=[],this.addedSysInfo=!1,this.ignoreCount=0,this.waitingForExportCells=!1,this.onMessage=((e,t)=>{switch(e){case _.HistoryMessages.GotoCodeCell:this.gotoCode(t.file,t.line);break;case _.HistoryMessages.RestartKernel:this.restartKernel();break;case _.HistoryMessages.ReturnAllCells:this.handleReturnAllCells(t);break;case _.HistoryMessages.Interrupt:this.interruptKernel();break;case _.HistoryMessages.Export:this.export(t);break;case _.HistoryMessages.SendInfo:this.updateContexts(t);break;case _.HistoryMessages.SubmitNewCell:this.submitNewCell(t);break;case _.HistoryMessages.DeleteAllCells:this.logTelemetry(_.Telemetry.DeleteAllCells);break;case _.HistoryMessages.DeleteCell:this.logTelemetry(_.Telemetry.DeleteCell);break;case _.HistoryMessages.Undo:this.logTelemetry(_.Telemetry.Undo);break;case _.HistoryMessages.Redo:this.logTelemetry(_.Telemetry.Redo);break;case _.HistoryMessages.ExpandAll:this.logTelemetry(_.Telemetry.ExpandAll);break;case _.HistoryMessages.CollapseAll:this.logTelemetry(_.Telemetry.CollapseAll)}}),this.handleReturnAllCells=(e=>{this.waitingForExportCells&&this.export(e)}),this.updateContexts=(e=>{new f.ContextKey(_.EditorContexts.HaveInteractive,this.commandManager).set(!this.disposed).catch();const t=new f.ContextKey(_.EditorContexts.HaveInteractiveCells,this.commandManager),n=new f.ContextKey(_.EditorContexts.HaveRedoableCells,this.commandManager);if(e&&e.info){const r=e.info;r?(t.set(r.cellCount>0).catch(),n.set(r.redoCount>0).catch()):(t.set(!1).catch(),n.set(!1).catch())}else t.set(!1).catch(),n.set(!1).catch()}),this.setStatus=(e=>{const t=this.statusProvider.set(e);return this.potentiallyUnfinishedStatus.push(t),t}),this.logTelemetry=(e=>{S.sendTelemetryEvent(e)}),this.onAddCodeEvent=((e,t)=>{e.forEach(e=>{if(this.webPanel)switch(e.state){case P.CellState.init:this.sendCell(e,_.HistoryMessages.StartCell),this.unfinishedCells.push(e);break;case P.CellState.executing:this.sendCell(e,_.HistoryMessages.UpdateCell);break;case P.CellState.error:case P.CellState.finished:this.sendCell(e,_.HistoryMessages.FinishCell),this.unfinishedCells=this.unfinishedCells.filter(t=>t.id!==e.id)}}),e.length>1&&e[1].state===P.CellState.finished&&t&&t.edit(t=>{t.insert(new l.Position(e[1].line,0),"#%%\n")})}),this.onSettingsChanged=(()=>{const e=JSON.stringify(this.generateDataScienceExtraSettings());this.webPanel&&this.webPanel.postMessage({type:_.HistoryMessages.UpdateSettings,payload:e})}),this.onInterpreterChanged=(()=>o(this,void 0,void 0,function*(){this.loadPromise&&(yield this.loadPromise,this.jupyterServer&&(yield this.jupyterServer.shutdown())),this.loadPromise=this.load()})),this.exportToFile=((e,t)=>o(this,void 0,void 0,function*(){if(this.jupyterServer){let n;this.configuration.getSettings().datascience.changeDirOnImportExport&&(n=t);const r=yield this.jupyterExporter.translateToNotebook(e,n);try{yield this.fileSystem.writeFile(t,JSON.stringify(r),{encoding:"utf8",flag:"w"}),this.applicationShell.showInformationMessage(v.DataScience.exportDialogComplete().format(t),v.DataScience.exportOpenQuestion()).then(e=>{e&&this.jupyterServer&&this.jupyterExecution.spawnNotebook(t).ignoreErrors()})}catch(e){this.logger.logError("Error in exporting notebook file"),this.applicationShell.showInformationMessage(v.DataScience.exportDialogFailed().format(e))}}})),this.loadJupyterServer=(e=>o(this,void 0,void 0,function*(){const t=this.configuration.getSettings();let n,r=t.datascience.jupyterServerURI;const i=t.datascience.useDefaultConfigForJupyter,o=this.setStatus(v.DataScience.connectingToJupyter());let s=!1;const a=this.workspaceService.getConfiguration("workbench");if(a){const e=a.get("colorTheme");e&&(s=/dark/i.test(e))}try{r===_.Settings.JupyterServerLocalLaunch&&(r=void 0,n=yield this.calculateWorkingDirectory()),this.jupyterServer=yield this.jupyterExecution.connectToNotebookServer(r,s,i,void 0,n),e&&(yield this.addSysInfo(C.Restart))}finally{o&&o.dispose()}})),this.calculateWorkingDirectory=(()=>o(this,void 0,void 0,function*(){let e;const t=this.configuration.getSettings().datascience.notebookFileRoot;if(t&&this.workspaceService.hasWorkspaceFolders){const n=this.workspaceService.workspaceFolders[0].uri.fsPath;if(c.isAbsolute(t))e=(yield this.fileSystem.directoryExists(t))?t:n;else{const r=c.join(n,t);e=(yield this.fileSystem.directoryExists(r))?r:n}}return e})),this.generateSysInfoCell=(e=>o(this,void 0,void 0,function*(){if(this.jupyterServer){const t=yield this.generateSysInfoMessage(e),n=yield this.jupyterServer.execute("import sys\r\nsys.version","foo.py",0),r=yield this.jupyterServer.execute("import sys\r\nsys.executable","foo.py",0),i=yield this.jupyterServer.execute("import notebook\r\nnotebook.version_info","foo.py",0),o=n.length>0?this.extractStreamOutput(n[0]).trimQuotes():"",s=i.length>0?this.extractStreamOutput(i[0]).trimQuotes():"",a=n.length>0?this.extractStreamOutput(r[0]).trimQuotes():"";this.ignoreCount=this.ignoreCount+3;let c="";return e===C.Start&&(c=this.generateConnectionInfoString(this.jupyterServer.getConnectionInfo())),{data:{cell_type:"sys_info",message:t,version:o,notebook_version:v.DataScience.notebookVersionFormat().format(s),path:a,connection:c,metadata:{},source:[]},id:u(),file:"",line:0,state:P.CellState.finished}}})),this.addSysInfo=(e=>o(this,void 0,void 0,function*(){if(!this.addedSysInfo||e===C.Interrupt||e===C.Restart){this.addedSysInfo=!0,this.ignoreCount=0;const t=yield this.generateSysInfoCell(e);t&&this.onAddCodeEvent([t])}})),this.loadWebPanel=(()=>o(this,void 0,void 0,function*(){if(void 0===this.webPanel){const e=c.join(p.EXTENSION_ROOT_DIR,"out","datascience-ui","history-react","index_bundle.js"),t=yield this.cssGenerator.generateThemeCss(),n=this.generateDataScienceExtraSettings();this.webPanel=this.provider.create(this,v.DataScience.historyTitle(),e,t,n)}})),this.load=(()=>o(this,void 0,void 0,function*(){const e=this.setStatus(v.DataScience.startingJupyter());try{const t=yield this.jupyterExecution.getUsableJupyterPython();if(!t)throw e.dispose(),new w.JupyterInstallError(v.DataScience.jupyterNotSupported(),v.DataScience.pythonInteractiveHelpLink());{const e=yield this.interpreterService.getActiveInterpreter(),n=e?e.displayName:void 0,r=e?e.path:void 0,i=t?t.displayName:void 0,o=t?t.path:void 0;r&&o&&!this.fileSystem.arePathsSame(r,o)&&n&&i&&this.applicationShell.showWarningMessage(v.DataScience.jupyterKernelNotSupportedOnActive().format(n,i))}yield Promise.all([this.loadJupyterServer(),this.loadWebPanel()])}finally{e.dispose()}})),this.interpreterChangedDisposable=this.interpreterService.onDidChangeInterpreter(this.onInterpreterChanged),this.changeHandler=this.configuration.getSettings().onDidChange(this.onSettingsChanged.bind(this)),this.closedEvent=new l.EventEmitter,this.disposables.push(this.closedEvent),this.loadPromise=this.load()}show(){return o(this,void 0,void 0,function*(){this.disposed||(yield this.loadPromise,yield this.addSysInfo(C.Start),this.webPanel&&this.jupyterServer&&(yield this.webPanel.show()))})}get closed(){return this.closedEvent.event}addCode(e,t,n,r){return this.submitCode(e,t,n,r)}postMessage(e,t){this.webPanel&&this.webPanel.postMessage({type:e,payload:t})}dispose(){return o(this,void 0,void 0,function*(){this.disposed||(this.disposed=!0,this.interpreterChangedDisposable.dispose(),this.closedEvent.fire(this),this.jupyterServer&&(yield this.jupyterServer.shutdown()),this.updateContexts()),this.changeHandler&&(this.changeHandler.dispose(),this.changeHandler=void 0)})}undoCells(){this.postMessage(_.HistoryMessages.Undo)}redoCells(){this.postMessage(_.HistoryMessages.Redo)}removeAllCells(){this.postMessage(_.HistoryMessages.DeleteAllCells)}expandAllCells(){this.postMessage(_.HistoryMessages.ExpandAll)}collapseAllCells(){this.postMessage(_.HistoryMessages.CollapseAll)}exportCells(){this.waitingForExportCells=!0,this.postMessage(_.HistoryMessages.GetAllCells)}restartKernel(){if(this.jupyterServer&&!this.restartingKernel){const e=v.DataScience.restartKernelMessage(),t=v.DataScience.restartKernelMessageYes(),n=v.DataScience.restartKernelMessageNo();this.applicationShell.showInformationMessage(e,t,n).then(e=>{e===t&&this.restartKernelInternal().catch(e=>{this.applicationShell.showErrorMessage(e),this.logger.logError(e)})})}}interruptKernel(){if(this.jupyterServer&&!this.restartingKernel){const e=this.statusProvider.set(v.DataScience.interruptKernelStatus()),t=this.configuration.getSettings().datascience.jupyterInterruptTimeout;this.jupyterServer.interruptKernel(t).then(t=>{if(e.dispose(),t===P.InterruptResult.TimedOut){const e=v.DataScience.restartKernelAfterInterruptMessage(),t=v.DataScience.restartKernelMessageYes(),n=v.DataScience.restartKernelMessageNo();this.applicationShell.showInformationMessage(e,t,n).then(e=>{e===t&&this.restartKernelInternal().catch(e=>{this.applicationShell.showErrorMessage(e),this.logger.logError(e)})})}else t===P.InterruptResult.Restarted&&this.addSysInfo(C.Interrupt).ignoreErrors()}).catch(t=>{e.dispose(),this.logger.logError(t),this.applicationShell.showErrorMessage(t)})}}restartKernelInternal(){return o(this,void 0,void 0,function*(){this.restartingKernel=!0,this.unfinishedCells.forEach(e=>{e.state=P.CellState.error,this.webPanel&&this.webPanel.postMessage({type:_.HistoryMessages.FinishCell,payload:e})}),this.unfinishedCells=[],this.potentiallyUnfinishedStatus.forEach(e=>e.dispose()),this.potentiallyUnfinishedStatus=[];const e=this.statusProvider.set(v.DataScience.restartingKernelStatus());try{this.jupyterServer&&(yield this.jupyterServer.restartKernel(),yield this.addSysInfo(C.Restart))}finally{e.dispose(),this.restartingKernel=!1}})}submitNewCell(e){e&&e.code&&e.id&&this.submitCode(e.code,_.Identifiers.EmptyFileName,0,void 0,e.id).ignoreErrors()}submitCode(e,t,n,r,i){return o(this,void 0,void 0,function*(){const r=this.setStatus(v.DataScience.executingCode()),o=y.createDeferred(),s=r.dispose;r.dispose=(()=>{o.resolve(),s()});try{const s=this.setStatus(v.DataScience.startingJupyter());try{yield this.loadPromise}finally{s.dispose()}if(yield this.show(),t!==_.Identifiers.EmptyFileName&&(yield this.addSysInfo(C.Start)),this.jupyterServer){t!==_.Identifiers.EmptyFileName&&(yield this.jupyterServer.setInitialDirectory(c.dirname(t))),this.jupyterServer.executeObservable(e,t,n,i).subscribe(e=>{this.onAddCodeEvent(e,void 0)},e=>{r.dispose(),e instanceof h.CancellationError||this.applicationShell.showErrorMessage(e)},()=>{r.dispose()}),yield o.promise}}catch(e){r.dispose();const t=v.DataScience.executingCodeFailure().format(e);this.applicationShell.showErrorMessage(t)}})}sendCell(e,t){const n=JSON.parse(JSON.stringify(e));if(n.data&&null!==n.data.execution_count&&n.data.execution_count>0){const t=e.data.execution_count;n.data.execution_count=t-this.ignoreCount}this.webPanel&&this.webPanel.postMessage({type:t,payload:n})}gotoCode(e,t){this.gotoCodeInternal(e,t).catch(e=>{this.applicationShell.showErrorMessage(e)})}gotoCodeInternal(e,t){return o(this,void 0,void 0,function*(){let n;(yield s.pathExists(e))?n=yield this.documentManager.showTextDocument(l.Uri.file(e),{viewColumn:l.ViewColumn.One}):(n=this.documentManager.visibleTextEditors.find(t=>t.document.fileName===e))&&n.show(),n&&(n.revealRange(new l.Range(t,0,t,0)),n.selection=new l.Selection(new l.Position(t,0),new l.Position(t,0)))})}export(e){if(e.contents){const t=e.contents;if(t&&this.applicationShell){const e={};e[v.DataScience.exportDialogFilter()]=["ipynb"],this.applicationShell.showSaveDialog({saveLabel:v.DataScience.exportDialogTitle(),filters:e}).then(e=>o(this,void 0,void 0,function*(){e&&(yield this.exportToFile(t,e.fsPath))}))}}}extractStreamOutput(e){let t="";if(e.state===P.CellState.error||e.state===P.CellState.finished){const n=e.data.outputs;n&&n.forEach(e=>{if("stream"===e.output_type){const n=e;t=t.concat(n.text.toString())}else{const n=e.data;n&&n.hasOwnProperty("text/plain")&&(t=t.concat(n["text/plain"]))}})}return t}generateSysInfoMessage(e){return o(this,void 0,void 0,function*(){switch(e){case C.Start:return(yield this.jupyterExecution.isKernelCreateSupported())?v.DataScience.pythonVersionHeader():v.DataScience.pythonVersionHeaderNoPyKernel();case C.Restart:return v.DataScience.pythonRestartHeader();case C.Interrupt:return v.DataScience.pythonInterruptFailedHeader();default:return this.logger.logError("Invalid SysInfoReason"),""}})}generateConnectionInfoString(e){if(!e)return"";const t=e.token.length>0?`?token=${e.token}`:"",n=`${e.baseUrl}${t}`;return`${v.DataScience.sysInfoURILabel()}${n}`}generateDataScienceExtraSettings(){const e=this.workspaceService.getConfiguration("terminal"),t=e?e.get("integrated.cursorStyle","block"):"block";return Object.assign({},this.configuration.getSettings().datascience,{extraSettings:{terminalCursor:t}})}};r([S.captureTelemetry(_.Telemetry.Undo)],T.prototype,"undoCells",null),r([S.captureTelemetry(_.Telemetry.Redo)],T.prototype,"redoCells",null),r([S.captureTelemetry(_.Telemetry.DeleteAllCells)],T.prototype,"removeAllCells",null),r([S.captureTelemetry(_.Telemetry.ExpandAll)],T.prototype,"expandAllCells",null),r([S.captureTelemetry(_.Telemetry.CollapseAll)],T.prototype,"collapseAllCells",null),r([S.captureTelemetry(_.Telemetry.RestartKernel)],T.prototype,"restartKernel",null),r([S.captureTelemetry(_.Telemetry.Interrupt)],T.prototype,"interruptKernel",null),r([S.captureTelemetry(_.Telemetry.SubmitCellThroughInput,void 0,!1)],T.prototype,"submitNewCell",null),r([S.captureTelemetry(_.Telemetry.GotoSourceCode,void 0,!1)],T.prototype,"gotoCode",null),r([S.captureTelemetry(_.Telemetry.ExportNotebook,void 0,!1)],T.prototype,"export",null),T=r([a.injectable(),i(0,a.inject(d.IApplicationShell)),i(1,a.inject(d.IDocumentManager)),i(2,a.inject(b.IInterpreterService)),i(3,a.inject(d.IWebPanelProvider)),i(4,a.inject(m.IDisposableRegistry)),i(5,a.inject(P.ICodeCssGenerator)),i(6,a.inject(m.ILogger)),i(7,a.inject(P.IStatusProvider)),i(8,a.inject(P.IJupyterExecution)),i(9,a.inject(g.IFileSystem)),i(10,a.inject(m.IConfigurationService)),i(11,a.inject(d.ICommandManager)),i(12,a.inject(P.INotebookExporter)),i(13,a.inject(d.IWorkspaceService))],T),t.History=T},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const s=n(0),a=n(2),c=n(48),u=n(4),l=n(74),d=n(11),h=n(6),p=n(1),f=n(13),g=n(7),m=n(20),y=n(97),v=n(31),b=n(29);let S=class{constructor(e,t,n,r,i,s,c,u,l,d,h){this.disposableRegistry=e,this.historyProvider=t,this.jupyterImporter=n,this.jupyterExporter=r,this.jupyterExecution=i,this.documentManager=s,this.applicationShell=c,this.fileSystem=u,this.logger=l,this.configuration=d,this.statusProvider=h,this.canImportFromOpenedFile=(()=>{const e=this.configuration.getSettings();return e&&(!e.datascience||e.datascience.allowImportFromNotebook)}),this.disableImportOnOpenedFile=(()=>{const e=this.configuration.getSettings();e&&e.datascience&&(e.datascience.allowImportFromNotebook=!1)}),this.onOpenedDocument=(e=>o(this,void 0,void 0,function*(){if(e.fileName.endsWith(".ipynb")&&this.canImportFromOpenedFile()){const t=f.DataScience.notebookCheckForImportYes(),n=f.DataScience.notebookCheckForImportNo(),r=f.DataScience.notebookCheckForImportDontAskAgain(),i=yield this.applicationShell.showInformationMessage(f.DataScience.notebookCheckForImportTitle(),t,n,r);try{i===t?yield this.importNotebookOnFile(e.fileName):i===r&&this.disableImportOnOpenedFile()}catch(e){this.applicationShell.showErrorMessage(e)}}})),this.viewDocument=(e=>o(this,void 0,void 0,function*(){const t=yield this.documentManager.openTextDocument({language:"python",content:e}),n=yield this.documentManager.showTextDocument(t,a.ViewColumn.One);n.edit(e=>{e.insert(new a.Position(n.document.lineCount,0),"\n")})}));const p=this.documentManager.onDidOpenTextDocument(this.onOpenedDocument);this.disposableRegistry.push(p)}register(e){let t=e.registerCommand(v.Commands.ShowHistoryPane,()=>this.showHistoryPane());this.disposableRegistry.push(t),t=e.registerCommand(v.Commands.ImportNotebook,(e,t=m.CommandSource.commandPalette)=>o(this,void 0,void 0,function*(){yield this.listenForErrors(()=>o(this,void 0,void 0,function*(){e&&e.fsPath?yield this.importNotebookOnFile(e.fsPath):yield this.importNotebook()}))})),this.disposableRegistry.push(t),t=e.registerCommand(v.Commands.ExportFileAsNotebook,(e,t=m.CommandSource.commandPalette)=>o(this,void 0,void 0,function*(){yield this.listenForErrors(()=>o(this,void 0,void 0,function*(){if(e&&e.fsPath)yield this.exportFile(e.fsPath);else{const e=this.documentManager.activeTextEditor;e&&e.document.languageId===d.PYTHON_LANGUAGE&&(yield this.exportFile(e.document.fileName))}}))})),this.disposableRegistry.push(t),t=e.registerCommand(v.Commands.ExportFileAndOutputAsNotebook,(e,t=m.CommandSource.commandPalette)=>o(this,void 0,void 0,function*(){yield this.listenForErrors(()=>o(this,void 0,void 0,function*(){if(e&&e.fsPath)yield this.exportFileAndOutput(e.fsPath);else{const e=this.documentManager.activeTextEditor;e&&e.document.languageId===d.PYTHON_LANGUAGE&&(yield this.exportFileAndOutput(e.document.fileName))}}))})),this.disposableRegistry.push(t),this.disposableRegistry.push(e.registerCommand(v.Commands.UndoCells,()=>this.undoCells())),this.disposableRegistry.push(e.registerCommand(v.Commands.RedoCells,()=>this.redoCells())),this.disposableRegistry.push(e.registerCommand(v.Commands.RemoveAllCells,()=>this.removeAllCells())),this.disposableRegistry.push(e.registerCommand(v.Commands.InterruptKernel,()=>this.interruptKernel())),this.disposableRegistry.push(e.registerCommand(v.Commands.RestartKernel,()=>this.restartKernel())),this.disposableRegistry.push(e.registerCommand(v.Commands.ExpandAllCells,()=>this.expandAllCells())),this.disposableRegistry.push(e.registerCommand(v.Commands.CollapseAllCells,()=>this.collapseAllCells())),this.disposableRegistry.push(e.registerCommand(v.Commands.ExportOutputAsNotebook,()=>this.exportCells()))}listenForErrors(e){return o(this,void 0,void 0,function*(){try{yield e()}catch(e){e instanceof l.CancellationError?this.logger.logInformation("Canceled"):e.message?(this.logger.logError(e.message),this.applicationShell.showErrorMessage(e.message)):(this.logger.logError(e.toString()),this.applicationShell.showErrorMessage(e.toString()))}})}exportFile(e){return o(this,void 0,void 0,function*(){if(e&&e.length>0){const t=this.documentManager.activeTextEditor;if(t&&this.fileSystem.arePathsSame(t.document.fileName,e)){const n=y.generateCellsFromDocument(t.document,this.configuration.getSettings().datascience);if(n){const t={};t[f.DataScience.exportDialogFilter()]=["ipynb"];const r=yield this.applicationShell.showSaveDialog({saveLabel:f.DataScience.exportDialogTitle(),filters:t});yield this.waitForStatus(()=>o(this,void 0,void 0,function*(){if(r){let e;this.configuration.getSettings().datascience.changeDirOnImportExport&&(e=r.fsPath);const t=yield this.jupyterExporter.translateToNotebook(n,e);yield this.fileSystem.writeFile(r.fsPath,JSON.stringify(t))}}),f.DataScience.exportingFormat(),e);const i=f.DataScience.exportOpenQuestion();r&&r.fsPath&&this.applicationShell.showInformationMessage(f.DataScience.exportDialogComplete().format(r.fsPath),i).then(e=>{e===i&&this.jupyterExecution.spawnNotebook(r.fsPath).ignoreErrors()})}}}})}exportFileAndOutput(e){return o(this,void 0,void 0,function*(){if(e&&e.length>0&&this.jupyterExecution.isNotebookSupported()){const t=this.documentManager.activeTextEditor;if(t&&this.fileSystem.arePathsSame(t.document.fileName,e)){const n=y.generateCellRanges(t.document);if(n.length>0){const r=yield this.showExportDialog();if(r){const i=new c.CancellationTokenSource;yield this.waitForStatus(()=>{try{return this.exportCellsWithOutput(n,t.document,r,i.token)}catch(e){e instanceof l.CancellationError||this.applicationShell.showInformationMessage(f.DataScience.exportDialogFailed().format(e))}return Promise.resolve()},f.DataScience.exportingFormat(),e,()=>{i.cancel()},!0);const o=f.DataScience.exportOpenQuestion();this.applicationShell.showInformationMessage(f.DataScience.exportDialogComplete().format(r),o).then(e=>{e===o&&r&&this.jupyterExecution.spawnNotebook(r).ignoreErrors()})}}}}else this.applicationShell.showErrorMessage(f.DataScience.jupyterNotSupported())})}exportCellsWithOutput(e,t,n,r){return o(this,void 0,void 0,function*(){let i;try{const o=this.configuration.getSettings(),s=o.datascience.useDefaultConfigForJupyter;i=yield this.jupyterExecution.connectToNotebookServer(void 0,!1,s,r);const a=Array.prototype.concat(...yield Promise.all(e.map(e=>{const n=t.getText(e.range);return i?i.execute(n,t.fileName,e.range.start.line,r):[]})));let c;o.datascience.changeDirOnImportExport&&(c=n);const u=yield this.jupyterExporter.translateToNotebook(a,c);yield this.fileSystem.writeFile(n,JSON.stringify(u))}finally{i&&i.dispose()}})}showExportDialog(){return o(this,void 0,void 0,function*(){const e={};e[f.DataScience.exportDialogFilter()]=["ipynb"];const t=yield this.applicationShell.showSaveDialog({saveLabel:f.DataScience.exportDialogTitle(),filters:e});return t?t.fsPath:void 0})}undoCells(){const e=this.historyProvider.getActive();e&&e.undoCells()}redoCells(){const e=this.historyProvider.getActive();e&&e.redoCells()}removeAllCells(){const e=this.historyProvider.getActive();e&&e.removeAllCells()}interruptKernel(){const e=this.historyProvider.getActive();e&&e.interruptKernel()}restartKernel(){const e=this.historyProvider.getActive();e&&e.restartKernel()}expandAllCells(){const e=this.historyProvider.getActive();e&&e.expandAllCells()}collapseAllCells(){const e=this.historyProvider.getActive();e&&e.collapseAllCells()}exportCells(){const e=this.historyProvider.getActive();e&&e.exportCells()}showHistoryPane(){return this.historyProvider.getOrCreateActive().show()}waitForStatus(e,t,n,r,i){const o=n?t.format(n):t;return this.statusProvider.waitWithStatus(e,o,void 0,r,i)}importNotebook(){return o(this,void 0,void 0,function*(){const e={};e[f.DataScience.importDialogFilter()]=["ipynb"];const t=yield this.applicationShell.showOpenDialog({openLabel:f.DataScience.importDialogTitle(),filters:e});t&&t.length>0&&(yield this.waitForStatus(()=>o(this,void 0,void 0,function*(){const e=yield this.jupyterImporter.importFromFile(t[0].fsPath);yield this.viewDocument(e)}),f.DataScience.importingFormat(),t[0].fsPath))})}importNotebookOnFile(e){return o(this,void 0,void 0,function*(){e&&e.length>0&&(yield this.waitForStatus(()=>o(this,void 0,void 0,function*(){const t=yield this.jupyterImporter.importFromFile(e);yield this.viewDocument(t)}),f.DataScience.importingFormat(),e))})}};r([g.captureTelemetry(v.Telemetry.ExportPythonFile,void 0,!1)],S.prototype,"exportFile",null),r([g.captureTelemetry(v.Telemetry.ExportPythonFileAndOutput,void 0,!1)],S.prototype,"exportFileAndOutput",null),r([g.captureTelemetry(v.Telemetry.ShowHistoryPane,void 0,!1)],S.prototype,"showHistoryPane",null),r([g.captureTelemetry(v.Telemetry.ImportNotebook,{scope:"command"},!1)],S.prototype,"importNotebook",null),r([g.captureTelemetry(v.Telemetry.ImportNotebook,{scope:"file"},!1)],S.prototype,"importNotebookOnFile",null),S=r([s.injectable(),i(0,s.inject(p.IDisposableRegistry)),i(1,s.inject(b.IHistoryProvider)),i(2,s.inject(b.INotebookImporter)),i(3,s.inject(b.INotebookExporter)),i(4,s.inject(b.IJupyterExecution)),i(5,s.inject(u.IDocumentManager)),i(6,s.inject(u.IApplicationShell)),i(7,s.inject(h.IFileSystem)),i(8,s.inject(p.ILogger)),i(9,s.inject(p.IConfigurationService)),i(10,s.inject(b.IStatusProvider))],S),t.HistoryCommandListener=S},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(1),a=n(5),c=n(29);let u=class{constructor(e,t){this.serviceContainer=e,this.disposables=t,this.create=(()=>{const e=this.serviceContainer.get(c.IHistory),t=e.closed(this.onHistoryClosed);return this.disposables.push(e),this.disposables.push(t),e}),this.onHistoryClosed=(e=>{this.activeHistory===e&&(this.activeHistory=void 0)})}getActive(){return this.activeHistory}getOrCreateActive(){return this.activeHistory||(this.activeHistory=this.create()),this.activeHistory}};u=r([o.injectable(),i(0,o.inject(a.IServiceContainer)),i(1,o.inject(s.IDisposableRegistry))],u),t.HistoryProvider=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(14),c=n(139),u=n(10);let l=class{constructor(e,t,n,r){this.executionFactory=e,this.activationHelper=t,this.processServiceFactory=n,this.interpreterService=r}createInterpreterCommand(e,t){return new class{constructor(e,t,n){this.requiredArgs=e,this.interpreterPromise=Promise.resolve(n),this.pythonLauncher=t.createActivatedEnvironment({resource:void 0,interpreter:n})}interpreter(){return this.interpreterPromise}execObservable(e,t){return o(this,void 0,void 0,function*(){const n=Object.assign({},t),r=yield this.pythonLauncher,i=[...this.requiredArgs,...e];return r.execObservable(i,n)})}exec(e,t){return o(this,void 0,void 0,function*(){const n=Object.assign({},t),r=yield this.pythonLauncher,i=[...this.requiredArgs,...e];return r.exec(i,n)})}}(e,this.executionFactory,t)}createProcessCommand(e,t){return new class{constructor(e,t,n,r,i){this.exe=e,this.requiredArgs=t,this.launcherPromise=n.create(),this.activationHelper=r,this.interpreterPromise=i.getInterpreterDetails(this.exe).catch(e=>void 0)}interpreter(){return this.interpreterPromise}execObservable(e,t){return o(this,void 0,void 0,function*(){const n=Object.assign({},t);n.env=yield this.fixupEnv(n.env);const r=yield this.launcherPromise,i=[...this.requiredArgs,...e];return r.execObservable(this.exe,i,n)})}exec(e,t){return o(this,void 0,void 0,function*(){const n=Object.assign({},t);n.env=yield this.fixupEnv(n.env);const r=yield this.launcherPromise,i=[...this.requiredArgs,...e];return r.exec(this.exe,i,n)})}fixupEnv(e){return this.activationHelper?this.activationHelper.getActivatedEnvironmentVariables(void 0):Promise.resolve(process.env)}}(e,t,this.processServiceFactory,this.activationHelper,this.interpreterService)}};l=r([s.injectable(),i(0,s.inject(a.IPythonExecutionFactory)),i(1,s.inject(c.IEnvironmentActivationService)),i(2,s.inject(a.IProcessServiceFactory)),i(3,s.inject(u.IInterpreterService))],l),t.JupyterCommandFactory=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(28),a=n(0),c=n(17),u=n(3),l=n(62),d=n(98),h=n(4),p=n(74),f=n(47),g=n(6),m=n(14),y=n(1),v=n(13),b=n(22),S=n(45),_=n(10),w=n(5),P=n(7),C=n(31),T=n(29),I=n(567),E=n(221),O=f.IS_WINDOWS?/^jupyter?\.exe$/:/^jupyter?$/,R=/.*\s+(.+)$/m,x=/^\s*(\S+)\s+(\S+)$/;let k=class{constructor(e,t,n,r,i,a,c,d,h,f,g,m,y){if(this.executionFactory=e,this.interpreterService=t,this.processServiceFactory=n,this.knownSearchPaths=r,this.logger=i,this.disposableRegistry=a,this.asyncRegistry=c,this.fileSystem=d,this.sessionManager=h,this.configuration=g,this.commandFactory=m,this.serviceContainer=y,this.commands={},this.isImportSupported=(e=>o(this,void 0,void 0,function*(){return p.Cancellation.race(()=>this.isCommandSupported("nbconvert"),e)})),this.isKernelCreateSupported=(e=>o(this,void 0,void 0,function*(){return p.Cancellation.race(()=>this.isCommandSupported("ipykernel"),e)})),this.isKernelSpecSupported=(e=>o(this,void 0,void 0,function*(){return p.Cancellation.race(()=>this.isCommandSupported("kernelspec"),e)})),this.spawnNotebook=(e=>o(this,void 0,void 0,function*(){const t=yield this.findBestCommand("notebook");if(!t)throw new Error(v.DataScience.jupyterNotSupported());const n=[`--NotebookApp.file_to_run=${e}`];t.exec(n,{throwOnStdErr:!1,encoding:"utf8"}).ignoreErrors()})),this.importNotebook=((e,t)=>o(this,void 0,void 0,function*(){const n=yield this.findBestCommand("nbconvert");if(!n)throw new Error(v.DataScience.jupyterNbConvertNotSupported());const r=yield n.exec([e,"--to","python","--stdout","--template",t],{throwOnStdErr:!1,encoding:"utf8"});return r.stderr&&this.logger.logInformation(r.stderr),r.stdout})),this.createRemoteConnectionInfo=(e=>{let t;try{t=new l.URL(e)}catch(e){throw e}return{baseUrl:`${t.protocol}//${t.host}${t.pathname}`,token:`${t.searchParams.get("token")}`,localLaunch:!1,dispose:b.noop}}),this.getUsableJupyterPythonImpl=(e=>o(this,void 0,void 0,function*(){const t=yield this.findBestCommand("notebook",e);if(t)return t.interpreter()})),this.getJupyterServerInfo=(e=>o(this,void 0,void 0,function*(){const t=yield this.getUsableJupyterPython(e);if(t){const n={mergeStdOutErr:!0,token:e},r=yield this.executionFactory.createActivatedEnvironment({resource:void 0,interpreter:t}),i=u.join(S.EXTENSION_ROOT_DIR,"pythonFiles","datascience","getServerInfo.py"),o=yield r.exec([i],n);let s;try{s=JSON.parse(o.stdout.trim())}catch(e){return}return s}})),this.findSpecPath=((e,t)=>o(this,void 0,void 0,function*(){const n=(yield this.enumerateSpecs(t)).filter(e=>void 0!==e).find(t=>{return t&&t.name===e});return n?n.specFile:void 0})),this.isCommandSupported=((e,t)=>o(this,void 0,void 0,function*(){try{return void 0!==(yield this.findBestCommand(e,t))}catch(e){return this.logger.logWarning(e),!1}})),this.hasSpecPathMatch=((e,t)=>o(this,void 0,void 0,function*(){if(e){return(yield this.enumerateSpecs(t)).findIndex(t=>!!(e&&t&&t.path)&&this.fileSystem.arePathsSame(t.path,e.path))>=0}return!0})),this.findSpecMatch=(e=>o(this,void 0,void 0,function*(){const t=yield this.interpreterService.getActiveInterpreter();let n,r=0;const i=yield e(),a=yield Promise.all(i.map(e=>o(this,void 0,void 0,function*(){if(e&&e.path&&e.path.length>0&&(yield s.pathExists(e.path)))return this.interpreterService.getInterpreterDetails(e.path)})));for(let e=0;i&&e<i.length;e+=1){const o=i[e];let s=0;if(o&&o.path&&o.path.length>0&&t&&o.path===t.path&&(s+=10),o&&o.language&&"python"===o.language.toLocaleLowerCase())if(s+=1,t&&t.version&&a[e]){const n=a[e];n&&n.version&&n.version.major===t.version.major&&(s+=4,n.version.minor===t.version.minor&&(s+=2,n.version.patch===t.version.patch&&(s+=1)))}else if(t&&t.version&&o&&o.path&&"python"===o.path.toLocaleLowerCase()&&o.name){const e=/\D+(\d+)/.exec(o.name);if(e&&null!==e&&e.length>0){const n=parseInt(e[0],10);n&&n===t.version.major&&(s+=4)}}s>r&&(r=s,n=o)}return!n&&i&&i.length>0&&(n=i[0]),n})),this.enumerateSpecs=(e=>o(this,void 0,void 0,function*(){if(yield this.isKernelSpecSupported()){const e=yield this.findBestCommand("kernelspec");if(e)try{const t=(yield e.exec(["list"],{throwOnStdErr:!0,encoding:"utf8"})).stdout.splitLines({trim:!1,removeEmptyEntries:!0}).map(e=>this.readSpec(e));return(yield Promise.all(t)).filter(e=>e)}catch(e){return[]}}return[]})),this.findInterpreterCommand=((e,t,n)=>o(this,void 0,void 0,function*(){if(t&&(yield this.doesModuleExist(e,t,n))&&!p.Cancellation.isCanceled(n)){const n="ipykernel"===e?["-m",e]:["-m","jupyter",e];return this.commandFactory.createInterpreterCommand(n,t)}})),this.lookForJupyterInDirectory=(e=>o(this,void 0,void 0,function*(){try{const t=yield this.fileSystem.getFiles(e);return t?t.filter(e=>O.test(u.basename(e))):[]}catch(e){this.logger.logWarning("Python Extension (fileSystem.getFiles):",e)}return[]})),this.searchPathsForJupyter=(()=>o(this,void 0,void 0,function*(){if(!this.jupyterPath){const e=this.knownSearchPaths.getSearchPaths();for(let t=0;t<e.length&&!this.jupyterPath;t+=1){const n=yield this.lookForJupyterInDirectory(e[t]);n.length>0&&(this.jupyterPath=n[0])}}return this.jupyterPath})),this.findPathCommand=((e,t)=>o(this,void 0,void 0,function*(){if((yield this.doesJupyterCommandExist(e,t))&&!p.Cancellation.isCanceled(t)){const t=yield this.searchPathsForJupyter();if(t)return this.commandFactory.createProcessCommand(t,[e])}})),this.findBestCommand=((e,t)=>o(this,void 0,void 0,function*(){if(!this.commands.hasOwnProperty(e)){const n=yield this.interpreterService.getActiveInterpreter();let r=n?yield this.findInterpreterCommand(e,n,t):void 0;if(!r&&this.supportsSearchingForCommands()){const i=(yield this.interpreterService.getInterpreters()).filter(e=>e!==n).map(n=>this.findInterpreterCommand(e,n,t)),o=yield Promise.all(i);if(n&&n.version){let e=-1;for(let t=0;t<o.length;t+=1){let i=0;const s=o[t];if(s){const a=yield s.interpreter(),c=a?a.version:void 0;c&&c.major===n.version.major&&(i+=4,c.minor===n.version.minor&&(i+=2,c.patch===n.version.patch&&(i+=1))),i>e&&(r=o[t],e=i)}}}else r=o.find(e=>void 0!==e)}!r&&this.supportsSearchingForCommands()&&(r=yield this.findPathCommand(e,t)),r&&(this.commands[e]=r)}return this.commands.hasOwnProperty(e)?this.commands[e]:void 0})),this.doesModuleExist=((e,t,n)=>o(this,void 0,void 0,function*(){if(!t||null===t)return!1;{const r={throwOnStdErr:!0,encoding:"utf8",token:n},i=yield this.executionFactory.createActivatedEnvironment({resource:void 0,interpreter:t});try{const n="ipykernel"===e?e:"jupyter",o="ipykernel"===e?["--version"]:[e,"--version"];return!(yield i.execModule(n,o,r)).stderr}catch(e){return this.logger.logWarning(`${e} for ${t.path}`),!1}}})),this.doesJupyterCommandExist=((e,t)=>o(this,void 0,void 0,function*(){const n={throwOnStdErr:!0,encoding:"utf8",token:t},r=e?[e,"--version"]:["--version"],i=yield this.processServicePromise;try{return!(yield i.exec("jupyter",r,n)).stderr}catch(e){return this.logger.logWarning(e),!1}})),this.processServicePromise=this.processServiceFactory.create(),this.disposableRegistry.push(this.interpreterService.onDidChangeInterpreter(()=>this.onSettingsChanged())),this.disposableRegistry.push(this),f){const e=f.onDidChangeConfiguration(e=>{e.affectsConfiguration("python.dataScience",void 0)&&this.dispose()});this.disposableRegistry.push(e)}}dispose(){this.usablePythonInterpreter=void 0,this.commands={}}isNotebookSupported(e){return p.Cancellation.race(()=>this.isCommandSupported("notebook",e),e)}getUsableJupyterPython(e){return o(this,void 0,void 0,function*(){return this.usablePythonInterpreter||(this.usablePythonInterpreter=yield p.Cancellation.race(()=>this.getUsableJupyterPythonImpl(e),e)),this.usablePythonInterpreter})}connectToNotebookServer(e,t,n,r,i){return p.Cancellation.race(()=>o(this,void 0,void 0,function*(){let o,s;if(e)o=this.createRemoteConnectionInfo(e),s=void 0;else{const e=yield this.startNotebookServer(n,r);if(!e)throw p.Cancellation.throwIfCanceled(r),new Error(v.DataScience.jupyterNotebookFailure().format(""));o=e.connection,s=e.kernelSpec}try{s||(s=yield this.getMatchingKernelSpec(o,r)),s||this.logger.logError(v.DataScience.jupyterKernelSpecNotFound());const n=this.serviceContainer.get(T.INotebookServer);return yield n.connect(o,s,t,r,i),P.sendTelemetryEvent(e?C.Telemetry.ConnectRemoteJupyter:C.Telemetry.ConnectLocalJupyter),n}catch(e){throw P.sendTelemetryEvent(C.Telemetry.ConnectFailedJupyter),new Error(v.DataScience.jupyterNotebookConnectFailed().format(o.baseUrl,e))}}),r)}getMatchingKernelSpec(e,t){return o(this,void 0,void 0,function*(){if(!e){const e=yield this.getUsableJupyterPython(t);e&&!(yield this.hasSpecPathMatch(e,t))&&(yield this.isKernelCreateSupported(t))&&(yield this.addMatchingSpec(e,t))}const n=e?()=>this.sessionManager.getActiveKernelSpecs(e):()=>this.enumerateSpecs(t);return this.findSpecMatch(n)})}startNotebookServer(e,t){return o(this,void 0,void 0,function*(){const n=yield this.findBestCommand("notebook",t);if(!n)throw new Error(v.DataScience.jupyterNotSupported());try{const r=yield this.generateTempDir();this.disposableRegistry.push(r);const i=e?u.join(r.path,"jupyter_notebook_config.py"):void 0;i&&(yield this.fileSystem.writeFile(i,""),this.logger.logInformation(`Generating custom default config at ${i}`));const o=[];e&&o.push(`--config=${i}`),process.env&&process.env.VSCODE_PYTHON_DEBUG_JUPYTER&&o.push("--debug");const s=[...["--no-browser",`--notebook-dir=${r.path}`],...o],a=yield this.getMatchingKernelSpec(void 0,t),c=yield n.execObservable(s,{throwOnStdErr:!1,encoding:"utf8",token:t});return c&&t&&t.onCancellationRequested(()=>{c.dispose()}),{connection:yield I.JupyterConnection.waitForConnection(r.path,this.getJupyterServerInfo,c,this.serviceContainer,t),kernelSpec:a}}catch(e){if(e instanceof p.CancellationError)throw e;throw new Error(v.DataScience.jupyterNotebookFailure().format(e))}})}onSettingsChanged(){this.dispose()}addMatchingSpec(e,t){return o(this,void 0,void 0,function*(){const n=v.DataScience.historyTitle(),r=yield this.findBestCommand("ipykernel",t);try{const i=d();if(r){const a=yield r.exec(["install","--user","--name",i,"--display-name",`'${n}'`],{throwOnStdErr:!0,encoding:"utf8",token:t}),c=R.exec(a.stdout),l=c&&null!==c&&c.length>1?u.join(c[1],"kernel.json"):yield this.findSpecPath(i);if(this.asyncRegistry.push({dispose:()=>o(this,void 0,void 0,function*(){if(l)try{yield s.remove(u.dirname(l))}catch(e){b.noop()}})}),l&&e&&(yield s.pathExists(l))){const t=yield s.readJSON(l);t.argv[0]=e.path,yield s.writeJSON(l,t,{flag:"w",encoding:"utf8"})}}}catch(e){this.logger.logError(e)}})}generateTempDir(){return o(this,void 0,void 0,function*(){const e=u.join(c.tmpdir(),d());return yield this.fileSystem.createDirectory(e),{path:e,dispose:()=>o(this,void 0,void 0,function*(){let t=0;for(;t<10;)try{yield s.remove(e),t=10}catch(e){t+=1}})}})}readSpec(e){return o(this,void 0,void 0,function*(){const t=x.exec(e);if(t&&null!==t&&t.length>2){const e=u.join(t[2],"kernel.json");if(yield s.pathExists(e)){const n=yield s.readJSON(e,{encoding:"utf8"});return n.name=t[1],new E.JupyterKernelSpec(n,e)}}})}supportsSearchingForCommands(){if(this.configuration){const e=this.configuration.getSettings();if(e)return e.datascience.searchForJupyter}return!0}};r([P.captureTelemetry(C.Telemetry.StartJupyter)],k.prototype,"startNotebookServer",null),k=r([a.injectable(),i(0,a.inject(m.IPythonExecutionFactory)),i(1,a.inject(_.IInterpreterService)),i(2,a.inject(m.IProcessServiceFactory)),i(3,a.inject(_.IKnownSearchPathsForInterpreters)),i(4,a.inject(y.ILogger)),i(5,a.inject(y.IDisposableRegistry)),i(6,a.inject(y.IAsyncDisposableRegistry)),i(7,a.inject(g.IFileSystem)),i(8,a.inject(T.IJupyterSessionManager)),i(9,a.inject(h.IWorkspaceService)),i(10,a.inject(y.IConfigurationService)),i(11,a.inject(T.IJupyterCommandFactory)),i(12,a.inject(w.IServiceContainer))],k),t.JupyterExecution=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(74),o=n(6),s=n(1),a=n(16),c=n(13),u=n(568),l=/(https?:\/\/[^\s]+)/,d=/https?:\/\//;class h{constructor(e,t,n,l,h,p){this.stderr=[],this.output=(e=>{this.logger&&this.logger.logInformation(e.toString("utf8"))}),this.extractConnectionInformation=(e=>{this.output(e),d.exec(e)&&this.notebook_dir&&this.startPromise&&!this.startPromise.completed&&this.getServerInfo&&this.getServerInfo(this.cancelToken).then(t=>{this.getJupyterURL(t,e)}).ignoreErrors()}),this.launchTimedOut=(()=>{this.startPromise.completed||this.rejectStartPromise(c.DataScience.jupyterLaunchTimedOut())}),this.resolveStartPromise=((e,t)=>{clearTimeout(this.launchTimeout),this.startPromise.resolve(this.createConnection(e,t,this.launchResult))}),this.rejectStartPromise=(e=>{clearTimeout(this.launchTimeout),this.startPromise.reject(new u.JupyterConnectError(e,this.stderr.join("\n")))}),this.configService=h.get(s.IConfigurationService),this.logger=h.get(s.ILogger),this.fileSystem=h.get(o.IFileSystem),this.getServerInfo=n,this.createConnection=l,this.launchResult=e,this.cancelToken=p,p&&p.onCancellationRequested(()=>this.startPromise.reject(new i.CancellationError)),this.notebook_dir=r.dirname(t),this.startPromise=a.createDeferred();const f=this.configService.getSettings().datascience.jupyterLaunchTimeout;this.launchTimeout=setTimeout(()=>{this.launchTimedOut()},f),e.out.subscribe(e=>{"stderr"===e.source?(this.stderr.push(e.out),this.extractConnectionInformation(e.out)):this.output(e.out)})}waitForConnection(){return this.startPromise.promise}getJupyterURL(e,t){if(e&&!this.startPromise.completed){const t=e.find(e=>this.fileSystem.arePathsSame(this.notebook_dir,e.notebook_dir));if(t){const e=t.url,n=t.token;this.resolveStartPromise(e,n)}}this.startPromise.completed||this.getJupyterURLFromString(t)}getJupyterURLFromString(e){const t=l.exec(e);if(t&&!this.startPromise.completed){const e=n(62).URL;let r;try{r=new e(t[0])}catch(e){return void this.rejectStartPromise(c.DataScience.jupyterLaunchNoURL())}this.resolveStartPromise(`${r.protocol}//${r.host}${r.pathname}`,`${r.searchParams.get("token")}`)}}}class p{constructor(e,t,n){this.baseUrl=e,this.token=t,this.localLaunch=!0,this.disposable=n}static waitForConnection(e,t,n,r,i){return new h(n,e,t,(e,t,n)=>new p(e,t,n),r,i).waitForConnection()}dispose(){this.disposable&&(this.disposable.dispose(),this.disposable=void 0)}}t.JupyterConnection=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8);t.JupyterConnectError=class extends Error{constructor(e,t){super(e+(t?`\n${t}`:""))}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(17),c=n(3),u=n(98),l=n(4),d=n(6),h=n(1),p=n(13),f=n(22),g=n(218),m=n(31),y=n(29);let v=class{constructor(e,t,n,r,i){this.jupyterExecution=e,this.logger=t,this.workspaceService=n,this.configService=r,this.fileSystem=i,this.addDirectoryChangeCell=((e,t)=>o(this,void 0,void 0,function*(){const n=yield this.calculateDirectoryChange(t,e);if(n){return[{data:{source:m.CodeSnippits.ChangeDirectory.join(a.EOL).format(p.DataScience.exportChangeDirectoryComment(),n),cell_type:"code",outputs:[],metadata:{},execution_count:0},id:u(),file:"",line:0,state:y.CellState.finished},...e]}return e})),this.firstWorkspaceFolder=(e=>o(this,void 0,void 0,function*(){for(const t of e){const e=t.file;if(c.isAbsolute(e)&&(yield this.fileSystem.fileExists(e)))for(const t of this.workspaceService.workspaceFolders)if(e.toLowerCase().startsWith(t.uri.fsPath.toLowerCase()))return t.uri.fsPath}})),this.calculateDirectoryChange=((e,t)=>o(this,void 0,void 0,function*(){let n;const r=c.dirname(e);if(this.workspaceService.hasWorkspaceFolders){const e=yield this.firstWorkspaceFolder(t);e&&c.isAbsolute(e)&&r&&c.isAbsolute(r)&&(n=c.relative(r,e))}return n&&!c.isAbsolute(n)?n:void 0})),this.pruneCells=((e,t)=>e.filter(e=>"sys_info"!==e.data.cell_type).map(e=>this.pruneCell(e,t))),this.pruneCell=((e,t)=>{const n=Object.assign({},e.data);return n.source=this.pruneSource(e.data.source,t),n}),this.pruneSource=((e,t)=>{if(Array.isArray(e)&&e.length>0){if(t.isCell(e[0]))return e.slice(1)}else{const n=e.toString().split("\n").map(e=>`${e}\n`);if(n.length>0&&t.isCell(n[0]))return n.slice(1)}return e}),this.extractPythonMainVersion=(e=>o(this,void 0,void 0,function*(){let t;const n=e.filter(e=>"sys_info"===e.data.cell_type);if(n.length>0){const e=n[0].data.version;if(e)return t=e.substr(0,e.indexOf(".")),Number(t)}this.logger.logInformation("Failed to find python main version from sys_info cell");const r=yield this.jupyterExecution.getUsableJupyterPython();return r&&r.version?r.version.major:3}))}dispose(){f.noop()}translateToNotebook(e,t){return o(this,void 0,void 0,function*(){t&&(e=yield this.addDirectoryChangeCell(e,t));const n=yield this.extractPythonMainVersion(e),r={language_info:{name:"python",codemirror_mode:{name:"ipython",version:n}},orig_nbformat:2,file_extension:".py",mimetype:"text/x-python",name:"python",npconvert_exporter:"python",pygments_lexer:`ipython${n}`,version:n},i=new g.CellMatcher(this.configService.getSettings().datascience);return{cells:this.pruneCells(e,i),nbformat:4,nbformat_minor:2,metadata:r}})}};v=r([s.injectable(),i(0,s.inject(y.IJupyterExecution)),i(1,s.inject(h.ILogger)),i(2,s.inject(l.IWorkspaceService)),i(3,s.inject(h.IConfigurationService)),i(4,s.inject(d.IFileSystem))],v),t.JupyterExporter=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(28),a=n(0),c=n(17),u=n(3),l=n(4),d=n(6),h=n(1),p=n(13),f=n(31),g=n(29);let m=class{constructor(e,t,n,r,i){this.fileSystem=e,this.disposableRegistry=t,this.configuration=n,this.jupyterExecution=r,this.workspaceService=i,this.isDisposed=!1,this.nbconvertTemplate="{%- extends 'null.tpl' -%}\n{% block codecell %}\n#%%\n{{ super() }}\n{% endblock codecell %}\n{% block in_prompt %}{% endblock in_prompt %}\n{% block input %}{{ cell.source | ipython2python }}{% endblock input %}\n{% block markdowncell scoped %}#%% [markdown]\n{{ cell.source | comment_lines }}\n{% endblock markdowncell %}",this.dispose=(()=>{this.isDisposed=!0}),this.addDirectoryChange=((e,t)=>{return f.CodeSnippits.ChangeDirectory.join(c.EOL).format(p.DataScience.importChangeDirectoryComment(),t).concat(e)}),this.calculateDirectoryChange=(e=>{let t;const n=u.dirname(e);if(this.workspaceService.hasWorkspaceFolders){const e=this.workspaceService.workspaceFolders[0].uri.fsPath;e&&u.isAbsolute(e)&&n&&u.isAbsolute(n)&&(t=u.relative(e,n))}return t&&!u.isAbsolute(t)?t:void 0}),this.templatePromise=this.createTemplateFile()}importFromFile(e){return o(this,void 0,void 0,function*(){const t=yield this.templatePromise;let n;if(this.configuration.getSettings().datascience.changeDirOnImportExport&&(n=this.calculateDirectoryChange(e)),yield this.jupyterExecution.isImportSupported()){const r=yield this.jupyterExecution.importNotebook(e,t);return n?this.addDirectoryChange(r,n):r}throw new Error(p.DataScience.jupyterNbConvertNotSupported())})}createTemplateFile(){return o(this,void 0,void 0,function*(){const e=yield this.fileSystem.createTemporaryFile(".tpl");return yield s.appendFile(e.filePath,this.nbconvertTemplate),this.disposableRegistry.push(e),e.filePath})}};m=r([a.injectable(),i(0,a.inject(d.IFileSystem)),i(1,a.inject(h.IDisposableRegistry)),i(2,a.inject(h.IConfigurationService)),i(3,a.inject(g.IJupyterExecution)),i(4,a.inject(l.IWorkspaceService))],m),t.JupyterImporter=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const s=n(28),a=n(0),c=n(17),u=n(205),l=n(2),d=n(74),h=n(1),p=n(16),f=n(13),g=n(22),m=n(97),y=n(219),v=n(29);let b=class{constructor(e,t,r,i,a){this.logger=e,this.disposableRegistry=t,this.asyncRegistry=r,this.configService=i,this.sessionManager=a,this.onStatusChangedEvent=new l.EventEmitter,this.pendingCellSubscriptions=[],this.ranInitialSetup=!1,this.connect=((e,t,n,r,i)=>o(this,void 0,void 0,function*(){this.connInfo=e,this.workingDir=i,this.usingDarkTheme=n,this.session=yield this.sessionManager.startNew(e,t,r),this.sessionStartTime=Date.now(),yield this.session.waitForIdle(),this.initialNotebookSetup(r)})),this.setInitialDirectory=(e=>o(this,void 0,void 0,function*(){!this.workingDir&&this.connInfo&&this.connInfo.localLaunch&&(yield this.changeDirectoryIfPossible(e),this.workingDir=e)})),this.executeObservable=((e,t,n,r)=>{if(this.initialNotebookSetup(),this.session){const i=m.generateCells(this.configService.getSettings().datascience,e,t,n,!0,r);if(i.length>1)return this.combineObservables(this.executeMarkdownObservable(i[0]),this.executeCodeObservable(i[1]));if(i.length>0)return this.combineObservables("code"===i[0].data.cell_type?this.executeCodeObservable(i[0]):this.executeMarkdownObservable(i[0]))}return new u.Observable(e=>{e.error(new Error(f.DataScience.sessionDisposed())),e.complete()})}),this.executeSilently=((e,t)=>new Promise((n,r)=>{if(t&&this.disposableRegistry.push(t.onCancellationRequested(()=>r(new d.CancellationError))),this.initialNotebookSetup(),this.session){const t=this.generateRequest(e,!0);t?t.done.then(()=>{this.logger.logInformation(`Execute for ${e} silently finished.`),n()}).catch(r):r(new Error(f.DataScience.sessionDisposed()))}else r(new Error(f.DataScience.sessionDisposed()))})),this.restartKernel=(()=>o(this,void 0,void 0,function*(){if(this.session){return this.sessionStartTime=Date.now(),[...this.pendingCellSubscriptions].forEach(e=>e.reject()),yield this.session.restart(),this.ranInitialSetup=!1,void this.initialNotebookSetup()}throw new Error(f.DataScience.sessionDisposed())})),this.interruptKernel=(e=>o(this,void 0,void 0,function*(){if(this.session){const t=Date.now(),n=[...this.pendingCellSubscriptions],r=n.length>0?Promise.all(n.map(e=>e.promise)):Promise.resolve([v.CellState.finished]),i=p.createDeferred(),o=()=>{this.sessionStartTime=Date.now(),this.logger.logWarning("Kernel restarting during interrupt"),this.ranInitialSetup=!1,i.resolve([]),[...this.pendingCellSubscriptions].forEach(e=>{e.reject()})},s=this.session.onRestarted(o);this.session.interrupt().catch(e=>{this.logger.logWarning(`Error during interrupt: ${e}`),i.resolve([])});try{const n=yield Promise.race([r,i.promise,p.sleep(e)]);return i.completed?v.InterruptResult.Restarted:n?v.InterruptResult.Success:v.InterruptResult.TimedOut}catch(e){if(this.sessionStartTime&&t<this.sessionStartTime)return v.InterruptResult.Restarted;throw e}finally{s.dispose()}}throw new Error(f.DataScience.sessionDisposed())})),this.generateRequest=((e,t)=>{try{return this.session?this.session.requestExecute({code:e.replace(/\r\n/g,"\n"),stop_on_error:!1,allow_stdin:!1,silent:t},!0):void 0}catch(e){this.logger.logError(e)}}),this.initialNotebookSetup=(e=>{this.ranInitialSetup||(this.ranInitialSetup=!0,this.connInfo&&this.connInfo.localLaunch&&this.workingDir&&this.changeDirectoryIfPossible(this.workingDir).ignoreErrors(),this.executeSilently(`%matplotlib inline${c.EOL}import matplotlib.pyplot as plt${this.usingDarkTheme?`${c.EOL}from matplotlib import style${c.EOL}style.use('dark_background')`:""}`,e).ignoreErrors())}),this.combineObservables=((...e)=>new u.Observable(t=>{const n={};e.forEach(r=>{r.subscribe(r=>{n[r.id]=r;const i=Object.keys(n).map(e=>n[e]);i.length===e.length&&(t.next(i),i.every(e=>e.state===v.CellState.finished||e.state===v.CellState.error)&&t.complete())},e=>{t.error(e)})})})),this.executeMarkdownObservable=(e=>new u.Observable(t=>{t.next(e),t.complete()})),this.changeDirectoryIfPossible=(e=>o(this,void 0,void 0,function*(){this.connInfo&&this.connInfo.localLaunch&&(yield s.pathExists(e))&&(yield this.executeSilently(`%cd "${e}"`))})),this.handleCodeRequest=(e=>{if(e.isValid(this.sessionStartTime)){const t=this.generateRequest(y.concatMultilineString(e.cell.data.source),!1),r=n(142);e.cell.state=v.CellState.executing,t?(t.onIOPub=(t=>{try{r.KernelMessage.isExecuteResultMsg(t)?this.handleExecuteResult(t,e.cell):r.KernelMessage.isExecuteInputMsg(t)?this.handleExecuteInput(t,e.cell):r.KernelMessage.isStatusMsg(t)?this.handleStatusMessage(t,e.cell):r.KernelMessage.isStreamMsg(t)?this.handleStreamMesssage(t,e.cell):r.KernelMessage.isDisplayDataMsg(t)?this.handleDisplayData(t,e.cell):r.KernelMessage.isUpdateDisplayDataMsg(t)?this.handleUpdateDisplayData(t,e.cell):r.KernelMessage.isErrorMsg(t)?this.handleError(t,e.cell):this.logger.logWarning(`Unknown message ${t.header.msg_type} : hasData=${"data"in t.content}`),t.content.execution_count&&(e.cell.data.execution_count=t.content.execution_count),e.next(this.sessionStartTime)}catch(t){e.error(this.sessionStartTime,t)}}),t.done.then(()=>e.complete(this.sessionStartTime)).catch(t=>e.error(this.sessionStartTime,t))):e.error(this.sessionStartTime,new Error(f.DataScience.sessionDisposed()))}else this.handleInterrupted(e.cell),e.cell.state=v.CellState.error,e.complete(this.sessionStartTime)}),this.addToCellData=((e,t)=>{const n=e.data;n.outputs=[...n.outputs,t],e.data=n}),this.asyncRegistry.push(this)}shutdown(){const e=this.session?this.session.dispose():void 0;return e||Promise.resolve()}dispose(){return this.onStatusChangedEvent.dispose(),this.shutdown()}waitForIdle(){return this.session?this.session.waitForIdle():Promise.resolve()}execute(e,t,n,r){this.initialNotebookSetup();const i=p.createDeferred();let o;return this.executeObservable(e,t,n).subscribe(e=>{o=e},e=>{i.reject(e)},()=>{i.resolve(o)}),r&&this.disposableRegistry.push(r.onCancellationRequested(()=>i.reject(new d.CancellationError))),i.promise}get onStatusChanged(){return this.onStatusChangedEvent.event.bind(this.onStatusChangedEvent)}getConnectionInfo(){if(this.connInfo)return Object.assign({},this.connInfo,{dispose:g.noop})}executeCodeObservable(e){return new u.Observable(t=>{t.next(e);const n=new class{constructor(e,t,n){this.deferred=p.createDeferred(),this.cellRef=e,this.subscriber=t,this.promiseComplete=n,this.startTime=Date.now()}isValid(e){return e&&this.startTime>e}next(e){this.isValid(e)&&this.subscriber.next(this.cellRef),this.attemptToFinish()}error(e,t){this.isValid(e)&&this.subscriber.error(t)}complete(e){this.isValid(e)&&this.subscriber.next(this.cellRef),this.subscriber.complete(),this.attemptToFinish()}reject(){this.deferred.completed||(this.cellRef.state=v.CellState.error,this.subscriber.next(this.cellRef),this.subscriber.complete(),this.deferred.reject(),this.promiseComplete(this))}get promise(){return this.deferred.promise}get cell(){return this.cellRef}attemptToFinish(){this.deferred.completed||this.cell.state!==v.CellState.finished&&this.cell.state!==v.CellState.error||(this.deferred.resolve(this.cell.state),this.promiseComplete(this))}}(e,t,e=>{this.pendingCellSubscriptions=this.pendingCellSubscriptions.filter(t=>t!==e)});this.pendingCellSubscriptions.push(n),this.handleCodeRequest(n)})}handleExecuteResult(e,t){this.addToCellData(t,{output_type:"execute_result",data:e.content.data,metadata:e.content.metadata,execution_count:e.content.execution_count})}handleExecuteInput(e,t){t.data.execution_count=e.content.execution_count}handleStatusMessage(e,t){"busy"===e.content.execution_state?this.onStatusChangedEvent.fire(!0):this.onStatusChangedEvent.fire(!1),"idle"===e.content.execution_state&&t.state!==v.CellState.error&&(t.state=v.CellState.finished)}handleStreamMesssage(e,t){const n=t.data.outputs.find(e=>"stream"===e.output_type);if(n&&n.name===e.content.name)n.text=n.text+e.content.text;else{const n={output_type:"stream",name:e.content.name,text:e.content.text};this.addToCellData(t,n)}}handleDisplayData(e,t){const n={output_type:"display_data",data:e.content.data,metadata:e.content.metadata};this.addToCellData(t,n)}handleUpdateDisplayData(e,t){const n=t.data.outputs.find(e=>"display_data"===e.output_type);n&&(n.data=e.content.data,n.metadata=e.content.metadata)}handleInterrupted(e){this.handleError({channel:"iopub",parent_header:{},metadata:{},header:{username:"",version:"",session:"",msg_id:"",msg_type:"error"},content:{ename:"KeyboardInterrupt",evalue:"",traceback:["[1;31m---------------------------------------------------------------------------[0m","[1;31mKeyboardInterrupt[0m: "]}},e)}handleError(e,t){const n={output_type:"error",ename:e.content.ename,evalue:e.content.evalue,traceback:e.content.traceback};this.addToCellData(t,n),t.state=v.CellState.error}};b=r([a.injectable(),i(0,a.inject(h.ILogger)),i(1,a.inject(h.IDisposableRegistry)),i(2,a.inject(h.IAsyncDisposableRegistry)),i(3,a.inject(h.IConfigurationService)),i(4,a.inject(v.IJupyterSessionManager))],b),t.JupyterServer=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(142),s=n(0),a=n(221),c=n(573);let u=class{startNew(e,t,n){return i(this,void 0,void 0,function*(){const r=new c.JupyterSession(e,t);try{yield r.connect(n)}finally{r.isConnected||(yield r.dispose())}return r})}getActiveKernelSpecs(e){return i(this,void 0,void 0,function*(){const t=o.ServerConnection.makeSettings({baseUrl:e.baseUrl,token:e.token,pageUrl:"",wsUrl:e.baseUrl.replace("http","ws"),init:{cache:"no-store",credentials:"same-origin"}}),n=new o.SessionManager({serverSettings:t});try{yield n.refreshSpecs();const e=n.specs&&n.specs.kernelspecs?n.specs.kernelspecs:{};return Object.keys(e).map(t=>{const n=e[t];return new a.JupyterKernelSpec(n)})}catch(e){return[]}finally{n&&n.dispose()}})}};u=r([s.injectable()],u),t.JupyterSessionManager=u},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(142),o=n(2),s=n(74),a=n(16),c=n(13),u=n(22);t.JupyterSession=class{constructor(e,t){this.onRestartedEvent=new o.EventEmitter,this.connected=!1,this.shutdown=(()=>r(this,void 0,void 0,function*(){if(yield this.destroyKernelSpec(),this.notebookFile&&this.contentsManager&&this.connInfo&&!this.connInfo.localLaunch)try{this.sessionManager&&(yield this.sessionManager.refreshRunning(),yield this.contentsManager.delete(this.notebookFile.path))}catch(e){u.noop()}yield this.shutdownSessionAndConnection()})),this.shutdownSessionAndConnection=(()=>r(this,void 0,void 0,function*(){if(this.contentsManager&&(this.contentsManager.dispose(),this.contentsManager=void 0),this.session||this.sessionManager){try{this.statusHandler&&this.session&&(this.session.statusChanged.disconnect(this.statusHandler),this.statusHandler=void 0),this.session&&(yield Promise.race([this.session.shutdown(),a.sleep(100)]),this.session.dispose()),this.sessionManager&&this.sessionManager.dispose()}catch(e){this.session&&this.session.dispose(),this.sessionManager&&this.sessionManager.dispose()}this.session=void 0,this.sessionManager=void 0}this.onRestartedEvent.dispose(),this.connInfo&&(this.connInfo.dispose(),this.connInfo=void 0)})),this.connInfo=e,this.kernelSpec=t}dispose(){return this.shutdown()}get onRestarted(){return this.onRestartedEvent.event.bind(this.onRestartedEvent)}waitForIdle(){return r(this,void 0,void 0,function*(){if(this.session&&this.session.kernel)for(yield this.session.kernel.ready;"idle"!==this.session.kernel.status;)yield a.sleep(0)})}restart(){return this.session&&this.session.kernel?this.session.kernel.restart():Promise.resolve()}interrupt(){return this.session&&this.session.kernel?this.session.kernel.interrupt():Promise.resolve()}requestExecute(e,t,n){return this.session&&this.session.kernel?this.session.kernel.requestExecute(e,t,n):void 0}connect(e){return r(this,void 0,void 0,function*(){if(!this.connInfo)throw new Error(c.DataScience.sessionDisposed());const t=i.ServerConnection.makeSettings({baseUrl:this.connInfo.baseUrl,token:this.connInfo.token,pageUrl:"",wsUrl:this.connInfo.baseUrl.replace("http","ws"),init:{cache:"no-store",credentials:"same-origin"}});this.sessionManager=new i.SessionManager({serverSettings:t}),this.contentsManager=new i.ContentsManager({serverSettings:t}),this.notebookFile=yield this.contentsManager.newUntitled({type:"notebook"});const n={path:this.notebookFile.path,kernelName:this.kernelSpec?this.kernelSpec.name:"",serverSettings:t};this.session=yield s.Cancellation.race(()=>this.sessionManager.startNew(n),e),this.statusHandler=this.onStatusChanged.bind(this.onStatusChanged),this.session.statusChanged.connect(this.statusHandler),this.connected=!0})}get isConnected(){return this.connected}onStatusChanged(e,t){"starting"===t&&this.onRestartedEvent.fire()}destroyKernelSpec(){return r(this,void 0,void 0,function*(){try{this.kernelSpec&&(yield this.kernelSpec.dispose())}catch(e){u.noop()}this.kernelSpec=void 0})}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(16),l=n(31),d=n(29);let h=class{constructor(e,t){this.applicationShell=e,this.historyProvider=t,this.statusCount=0,this.incrementCount=(e=>{if(0===this.statusCount){const t=this.historyProvider.getActive();t&&!e&&t.postMessage(l.HistoryMessages.StartProgress)}this.statusCount+=1}),this.decrementCount=(e=>{const t=this.statusCount-1;if(0===t){const t=this.historyProvider.getActive();t&&!e&&t.postMessage(l.HistoryMessages.StopProgress)}this.statusCount=Math.max(t,0)})}set(e,t,n,r){this.incrementCount(r);const i=new class{constructor(e,t,n){this.disposed=!1,this.dispose=(()=>{this.disposed||(this.disposed=!0,this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.disposeCallback(),this.deferred.completed||this.deferred.resolve())}),this.promise=(()=>this.deferred.promise),this.reject=(()=>{this.deferred.reject(),this.dispose()}),this.deferred=u.createDeferred(),this.disposeCallback=t,n&&(this.timeout=setTimeout(this.dispose,n))}}(e,()=>this.decrementCount(r),t),o={location:n?a.ProgressLocation.Notification:a.ProgressLocation.Window,title:e,cancellable:void 0!==n};return this.applicationShell.withProgress(o,(e,t)=>(t&&n&&t.onCancellationRequested(()=>{n(),i.reject()}),i.promise())),i}waitWithStatus(e,t,n,r,i){return o(this,void 0,void 0,function*(){const o=this.set(t,n,r,i);let s;try{s=yield e()}finally{o.dispose()}return s})}};h=r([s.injectable(),i(0,s.inject(c.IApplicationShell)),i(1,s.inject(d.IHistoryProvider))],h),t.StatusProvider=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(4),a=n(1),c=n(99);let u=class{constructor(e,t,n){this.eventHandlers=e,this.debugService=t,this.disposables=n}registerEventHandlers(){this.disposables.push(this.debugService.onDidReceiveDebugSessionCustomEvent(e=>{this.eventHandlers.forEach(t=>t.handleCustomEvent?t.handleCustomEvent(e).ignoreErrors():void 0)})),this.disposables.push(this.debugService.onDidTerminateDebugSession(e=>{this.eventHandlers.forEach(t=>t.handleTerminateEvent?t.handleTerminateEvent(e).ignoreErrors():void 0)}))}};u=r([i(0,o.multiInject(c.IDebugSessionEventHandlers)),i(1,o.inject(s.IDebugService)),i(2,o.inject(a.IDisposableRegistry))],u),t.DebugSessionEventDispatcher=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(577),i=n(578),o=n(579),s=n(580),a=n(581),c=n(582),u=n(583),l=n(584),d=n(585),h=n(586),p=n(587),f=n(588),g=n(143),m=n(589),y=n(591),v=n(99),b=n(40);t.registerTypes=function(e){e.addSingleton(b.IDebugConfigurationService,o.PythonDebugConfigurationService),e.addSingleton(g.IConfigurationProviderUtils,i.ConfigurationProviderUtils),e.addSingleton(b.IDebuggerBanner,r.DebuggerBanner),e.addSingleton(v.IChildProcessAttachService,y.ChildProcessAttachService),e.addSingleton(v.IDebugSessionEventHandlers,m.ChildProcessAttachEventHandler),e.addSingleton(g.IDebugConfigurationResolver,f.LaunchConfigurationResolver,"launch"),e.addSingleton(g.IDebugConfigurationResolver,p.AttachConfigurationResolver,"attach"),e.addSingleton(g.IDebugConfigurationProviderFactory,l.DebugConfigurationProviderFactory),e.addSingleton(b.IDebugConfigurationProvider,a.FileLaunchDebugConfigurationProvider,b.DebugConfigurationType.launchFile),e.addSingleton(b.IDebugConfigurationProvider,s.DjangoLaunchDebugConfigurationProvider,b.DebugConfigurationType.launchDjango),e.addSingleton(b.IDebugConfigurationProvider,c.FlaskLaunchDebugConfigurationProvider,b.DebugConfigurationType.launchFlask),e.addSingleton(b.IDebugConfigurationProvider,h.RemoteAttachDebugConfigurationProvider,b.DebugConfigurationType.remoteAttach),e.addSingleton(b.IDebugConfigurationProvider,u.ModuleLaunchDebugConfigurationProvider,b.DebugConfigurationType.launchModule),e.addSingleton(b.IDebugConfigurationProvider,d.PyramidLaunchDebugConfigurationProvider,b.DebugConfigurationType.launchPyramid)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4);n(8);const c=n(1),u=n(5),l=n(49);var d;!function(e){e.ShowBanner="ShowBanner",e.DebuggerLaunchCounter="DebuggerLaunchCounter",e.DebuggerLaunchThresholdCounter="DebuggerLaunchThresholdCounter",e.UserSelected="DebuggerUserSelected"}(d=t.PersistentStateKeys||(t.PersistentStateKeys={}));let h=class{constructor(e){this.serviceContainer=e}initialize(){this.initialized||(this.initialized=!0,this.isEnabled()&&this.addCallback())}isEnabled(){const e=this.serviceContainer.get(c.IPersistentStateFactory),t=d.ShowBanner;return e.createGlobalPersistentState(t,!0).value}disable(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(c.IPersistentStateFactory),t=d.ShowBanner;yield e.createGlobalPersistentState(t,!1).updateValue(!1)})}shouldShow(){return o(this,void 0,void 0,function*(){return!(!this.isEnabled()||this.disabledInCurrentSession)&&(!!(yield this.passedThreshold())&&this.isUserSelected())})}show(){return o(this,void 0,void 0,function*(){const e="Yes, take survey now",t="No thanks";switch(yield this.serviceContainer.get(a.IApplicationShell).showInformationMessage("Can you please take 2 minutes to tell us how the debugger is working for you?",e,t,"Remind me later")){case e:yield this.action(),yield this.disable();break;case t:yield this.disable();break;default:this.disabledInCurrentSession=!0}})}action(){return o(this,void 0,void 0,function*(){const e=yield this.getGetDebuggerLaunchCounter();this.serviceContainer.get(c.IBrowserService).launch(`https://www.research.net/r/N7B25RV?n=${e}`)})}isUserSelected(){return o(this,void 0,void 0,function*(){if(void 0!==this.userSelected)return this.userSelected;const e=this.serviceContainer.get(c.IPersistentStateFactory),t=d.UserSelected,n=e.createGlobalPersistentState(t,void 0);let r=n.value;if(void 0===r){r=this.serviceContainer.get(c.IRandom).getRandomInt(0,100)<10,n.updateValue(r).ignoreErrors()}return this.userSelected=r,r})}passedThreshold(){return o(this,void 0,void 0,function*(){const[e,t]=yield Promise.all([this.getDebuggerLaunchThresholdCounter(),this.getGetDebuggerLaunchCounter()]);return t>=e})}incrementDebuggerLaunchCounter(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(c.IPersistentStateFactory),t=d.DebuggerLaunchCounter,n=e.createGlobalPersistentState(t,0);yield n.updateValue(n.value+1)})}getGetDebuggerLaunchCounter(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(c.IPersistentStateFactory),t=d.DebuggerLaunchCounter;return e.createGlobalPersistentState(t,0).value})}getDebuggerLaunchThresholdCounter(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(c.IPersistentStateFactory),t=d.DebuggerLaunchThresholdCounter,n=e.createGlobalPersistentState(t,void 0);if(void 0===n.value){const e=this.serviceContainer.get(c.IRandom).getRandomInt(1,11);yield n.updateValue(e)}return n.value})}addCallback(){const e=this.serviceContainer.get(a.IDebugService).onDidTerminateDebugSession(e=>o(this,void 0,void 0,function*(){if(e.type===l.DebuggerTypeName){const e=this.serviceContainer.get(c.ILogger);yield this.onDidTerminateDebugSession().catch(t=>e.logError("Error in debugger Banner",t))}}));this.serviceContainer.get(c.IDisposableRegistry).push(e)}onDidTerminateDebugSession(){return o(this,void 0,void 0,function*(){if(!this.isEnabled())return;yield this.incrementDebuggerLaunchCounter(),(yield this.shouldShow())&&(yield this.show())})}};h=r([s.injectable(),i(0,s.inject(u.IServiceContainer))],h),t.DebuggerBanner=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(4),u=n(12),l=n(6),d=n(14),h=n(22);let p=class{constructor(e,t,n){this.executionFactory=e,this.fs=t,this.shell=n}getPyramidStartupScriptFilePath(e){return o(this,void 0,void 0,function*(){try{const t=yield(yield this.executionFactory.create({resource:e})).exec(["-c","import pyramid;print(pyramid.__file__)"],{throwOnStdErr:!0}),n=a.join(a.dirname(t.stdout.trim()),"scripts","pserve.py");return(yield this.fs.fileExists(n))?n:void 0}catch(e){const t="Unable to locate 'pserve.py' required for debugging of Pyramid applications.";return u.traceError(t,e),void this.shell.showErrorMessage(t).then(h.noop,h.noop)}})}};p=r([s.injectable(),i(0,s.inject(d.IPythonExecutionFactory)),i(1,s.inject(l.IFileSystem)),i(2,s.inject(c.IApplicationShell))],p),t.ConfigurationProviderUtils=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(6),u=n(13),l=n(45),d=n(7),h=n(9),p=n(40),f=n(143);let g=class{constructor(e,t,n,r){this.attachResolver=e,this.launchResolver=t,this.providerFactory=n,this.fs=r}provideDebugConfigurations(e,t){return o(this,void 0,void 0,function*(){const n={config:{},folder:e,token:t};return 0===Object.keys(n.config).length?this.getDefaultDebugConfig():[n.config]})}resolveDebugConfiguration(e,t,n){return o(this,void 0,void 0,function*(){return"attach"===t.request?this.attachResolver.resolveDebugConfiguration(e,t,n):this.launchResolver.resolveDebugConfiguration(e,t,n)})}getDefaultDebugConfig(){return o(this,void 0,void 0,function*(){d.sendTelemetryEvent(h.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:p.DebugConfigurationType.default});const e=a.join(l.EXTENSION_ROOT_DIR,"resources","default.launch.json"),t=yield this.fs.readFile(e);return JSON.parse(t)})}pickDebugConfiguration(e,t){return o(this,void 0,void 0,function*(){const n=[{label:u.DebugConfigurationPrompts.debugFileConfigurationLabel(),type:p.DebugConfigurationType.launchFile,description:u.DebugConfigurationPrompts.debugFileConfigurationDescription()},{label:u.DebugConfigurationPrompts.debugModuleConfigurationLabel(),type:p.DebugConfigurationType.launchModule,description:u.DebugConfigurationPrompts.debugModuleConfigurationDescription()},{label:u.DebugConfigurationPrompts.remoteAttachConfigurationLabel(),type:p.DebugConfigurationType.remoteAttach,description:u.DebugConfigurationPrompts.remoteAttachConfigurationDescription()},{label:u.DebugConfigurationPrompts.debugDjangoConfigurationLabel(),type:p.DebugConfigurationType.launchDjango,description:u.DebugConfigurationPrompts.debugDjangoConfigurationDescription()},{label:u.DebugConfigurationPrompts.debugFlaskConfigurationLabel(),type:p.DebugConfigurationType.launchFlask,description:u.DebugConfigurationPrompts.debugFlaskConfigurationDescription()},{label:u.DebugConfigurationPrompts.debugPyramidConfigurationLabel(),type:p.DebugConfigurationType.launchPyramid,description:u.DebugConfigurationPrompts.debugPyramidConfigurationDescription()}];t.config={};const r=yield e.showQuickPick({title:u.DebugConfigurationPrompts.selectConfigurationTitle(),placeholder:u.DebugConfigurationPrompts.selectConfigurationPlaceholder(),activeItem:n[0],items:n});if(r){const e=this.providerFactory.create(r.type);return e.buildConfiguration.bind(e)}})}};g=r([s.injectable(),i(0,s.inject(f.IDebugConfigurationResolver)),i(0,s.named("attach")),i(1,s.inject(f.IDebugConfigurationResolver)),i(1,s.named("launch")),i(2,s.inject(f.IDebugConfigurationProviderFactory)),i(3,s.inject(c.IFileSystem))],g),t.PythonDebugConfigurationService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(4),u=n(6),l=n(1),d=n(13),h=n(95),p=n(7),f=n(9),g=n(49),m=n(40);let y=class{constructor(e,t,n){this.fs=e,this.workspace=t,this.pathUtils=n}buildConfiguration(e,t){return o(this,void 0,void 0,function*(){const n=yield this.getManagePyPath(t.folder);let r;const i=`\${workspaceFolder}${this.pathUtils.separator}manage.py`,o={name:d.localize("python.snippet.launch.django.label","Python: Django")(),type:g.DebuggerTypeName,request:"launch",program:n||i,args:["runserver","--noreload","--nothreading"],django:!0};if(!n){const n=yield e.showInputBox({title:d.DebugConfigurationPrompts.djangoEnterManagePyPathTitle(),value:i,prompt:d.DebugConfigurationPrompts.djangoEnterManagePyPathPrompt(),validate:e=>this.validateManagePy(t.folder,i,e)});n&&(r=!0,o.program=n)}p.sendTelemetryEvent(f.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:m.DebugConfigurationType.launchDjango,autoDetectedDjangoManagePyPath:!!n,manuallyEnteredAValue:r}),Object.assign(t.config,o)})}validateManagePy(e,t,n){return o(this,void 0,void 0,function*(){const r=d.DebugConfigurationPrompts.djangoEnterManagePyPathInvalidFilePathError();if(!n||0===n.trim().length)return r;const i=this.resolveVariables(n,e?e.uri:void 0);return(n===t||(yield this.fs.fileExists(i)))&&i.trim().toLowerCase().endsWith(".py")?void 0:r})}resolveVariables(e,t){const n=t?this.workspace.getWorkspaceFolder(t):void 0;return new h.SystemVariables(n?n.uri.fsPath:void 0).resolveAny(e)}getManagePyPath(e){return o(this,void 0,void 0,function*(){if(!e)return;const t=a.join(e.uri.fsPath,"manage.py");return(yield this.fs.fileExists(t))?`\${workspaceFolder}${this.pathUtils.separator}manage.py`:void 0})}};y=r([s.injectable(),i(0,s.inject(u.IFileSystem)),i(1,s.inject(c.IWorkspaceService)),i(2,s.inject(l.IPathUtils))],y),t.DjangoLaunchDebugConfigurationProvider=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(13),a=n(7),c=n(9),u=n(49),l=n(40);let d=class{buildConfiguration(e,t){return i(this,void 0,void 0,function*(){const e={name:s.localize("python.snippet.launch.standard.label","Python: Current File")(),type:u.DebuggerTypeName,request:"launch",program:"${file}",console:"integratedTerminal"};Object.assign(t.config,e)})}};r([a.captureTelemetry(c.EventName.DEBUGGER_CONFIGURATION_PROMPTS,{configurationType:l.DebugConfigurationType.launchFile},!1)],d.prototype,"buildConfiguration",null),d=r([o.injectable()],d),t.FileLaunchDebugConfigurationProvider=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(6),u=n(13),l=n(7),d=n(9),h=n(49),p=n(40);let f=class{constructor(e){this.fs=e}isSupported(e){return e===p.DebugConfigurationType.launchFlask}buildConfiguration(e,t){return o(this,void 0,void 0,function*(){const n=yield this.getApplicationPath(t.folder);let r;const i={name:u.localize("python.snippet.launch.flask.label","Python: Flask")(),type:h.DebuggerTypeName,request:"launch",module:"flask",env:{FLASK_APP:n||"app.py",FLASK_ENV:"development",FLASK_DEBUG:"0"},args:["run","--no-debugger","--no-reload"],jinja:!0};if(!n){const t=yield e.showInputBox({title:u.DebugConfigurationPrompts.flaskEnterAppPathOrNamePathTitle(),value:"app.py",prompt:u.DebugConfigurationPrompts.debugFlaskConfigurationDescription(),validate:e=>Promise.resolve(e&&e.trim().length>0?void 0:u.DebugConfigurationPrompts.flaskEnterAppPathOrNamePathInvalidNameError())});t&&(r=!0,i.env.FLASK_APP=t)}l.sendTelemetryEvent(d.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:p.DebugConfigurationType.launchFlask,autoDetectedFlaskAppPyPath:!!n,manuallyEnteredAValue:r}),Object.assign(t.config,i)})}getApplicationPath(e){return o(this,void 0,void 0,function*(){if(!e)return;const t=a.join(e.uri.fsPath,"app.py");return(yield this.fs.fileExists(t))?"app.py":void 0})}};f=r([s.injectable(),i(0,s.inject(c.IFileSystem))],f),t.FlaskLaunchDebugConfigurationProvider=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(13),a=n(7),c=n(9),u=n(49),l=n(40);let d=class{buildConfiguration(e,t){return i(this,void 0,void 0,function*(){let n;const r={name:s.localize("python.snippet.launch.module.label","Python: Module")(),type:u.DebuggerTypeName,request:"launch",module:"enter-your-module-name"},i=yield e.showInputBox({title:s.DebugConfigurationPrompts.moduleEnterModuleTitle(),value:r.module||"enter-your-module-name",prompt:s.DebugConfigurationPrompts.moduleEnterModulePrompt(),validate:e=>Promise.resolve(e&&e.trim().length>0?void 0:s.DebugConfigurationPrompts.moduleEnterModuleInvalidNameError())});i&&(n=!0,r.module=i),a.sendTelemetryEvent(c.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:l.DebugConfigurationType.launchModule,manuallyEnteredAValue:n}),Object.assign(t.config,r)})}};d=r([o.injectable()],d),t.ModuleLaunchDebugConfigurationProvider=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(40);let a=class{constructor(e,t,n,r,i,o){this.providers=new Map,this.providers.set(s.DebugConfigurationType.launchDjango,t),this.providers.set(s.DebugConfigurationType.launchFlask,e),this.providers.set(s.DebugConfigurationType.launchFile,r),this.providers.set(s.DebugConfigurationType.launchModule,n),this.providers.set(s.DebugConfigurationType.launchPyramid,i),this.providers.set(s.DebugConfigurationType.remoteAttach,o)}create(e){return this.providers.get(e)}};a=r([o.injectable(),i(0,o.inject(s.IDebugConfigurationProvider)),i(0,o.named(s.DebugConfigurationType.launchFlask)),i(1,o.inject(s.IDebugConfigurationProvider)),i(1,o.named(s.DebugConfigurationType.launchDjango)),i(2,o.inject(s.IDebugConfigurationProvider)),i(2,o.named(s.DebugConfigurationType.launchModule)),i(3,o.inject(s.IDebugConfigurationProvider)),i(3,o.named(s.DebugConfigurationType.launchFile)),i(4,o.inject(s.IDebugConfigurationProvider)),i(4,o.named(s.DebugConfigurationType.launchPyramid)),i(5,o.inject(s.IDebugConfigurationProvider)),i(5,o.named(s.DebugConfigurationType.remoteAttach))],a),t.DebugConfigurationProviderFactory=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(4),u=n(6),l=n(1),d=n(13),h=n(95),p=n(7),f=n(9),g=n(49),m=n(40);let y=class{constructor(e,t,n){this.fs=e,this.workspace=t,this.pathUtils=n}buildConfiguration(e,t){return o(this,void 0,void 0,function*(){const n=yield this.getDevelopmentIniPath(t.folder),r=`\${workspaceFolder}${this.pathUtils.separator}development.ini`;let i;const o={name:d.localize("python.snippet.launch.pyramid.label","Python: Pyramid Application")(),type:g.DebuggerTypeName,request:"launch",args:[n||r],pyramid:!0,jinja:!0};if(!n){const n=yield e.showInputBox({title:d.DebugConfigurationPrompts.pyramidEnterDevelopmentIniPathTitle(),value:r,prompt:d.DebugConfigurationPrompts.pyramidEnterDevelopmentIniPathPrompt(),validate:e=>this.validateIniPath(t?t.folder:void 0,r,e)});n&&(i=!0,o.args=[n])}p.sendTelemetryEvent(f.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:m.DebugConfigurationType.launchPyramid,autoDetectedPyramidIniPath:!!n,manuallyEnteredAValue:i}),Object.assign(t.config,o)})}validateIniPath(e,t,n){return o(this,void 0,void 0,function*(){if(!e)return;const r=d.DebugConfigurationPrompts.pyramidEnterDevelopmentIniPathInvalidFilePathError();if(!n||0===n.trim().length)return r;const i=this.resolveVariables(n,e.uri);return(n===t||(yield this.fs.fileExists(i)))&&i.trim().toLowerCase().endsWith(".ini")?void 0:r})}resolveVariables(e,t){const n=t?this.workspace.getWorkspaceFolder(t):void 0;return new h.SystemVariables(n?n.uri.fsPath:void 0).resolveAny(e)}getDevelopmentIniPath(e){return o(this,void 0,void 0,function*(){if(!e)return;const t=a.join(e.uri.fsPath,"development.ini");return(yield this.fs.fileExists(t))?`\${workspaceFolder}${this.pathUtils.separator}development.ini`:void 0})}};y=r([s.injectable(),i(0,s.inject(u.IFileSystem)),i(1,s.inject(c.IWorkspaceService)),i(2,s.inject(l.IPathUtils))],y),t.PyramidLaunchDebugConfigurationProvider=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(13),a=n(7),c=n(9),u=n(49),l=n(40);let d=class{buildConfiguration(e,t){return i(this,void 0,void 0,function*(){const n={name:s.localize("python.snippet.launch.attach.label","Python: Remote Attach")(),type:u.DebuggerTypeName,request:"attach",port:5678,host:"localhost",pathMappings:[{localRoot:"${workspaceFolder}",remoteRoot:"."}]};return n.host=yield e.showInputBox({title:s.DebugConfigurationPrompts.attachRemoteHostTitle(),step:1,totalSteps:2,value:n.host||"localhost",prompt:s.DebugConfigurationPrompts.attachRemoteHostPrompt(),validate:e=>Promise.resolve(e&&e.trim().length>0?void 0:s.DebugConfigurationPrompts.attachRemoteHostValidationError())}),n.host||(n.host="localhost"),a.sendTelemetryEvent(c.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:l.DebugConfigurationType.remoteAttach,manuallyEnteredAValue:"localhost"!==n.host}),Object.assign(t.config,n),n=>this.configurePort(e,t.config)})}configurePort(e,t){return i(this,void 0,void 0,function*(){const n=yield e.showInputBox({title:s.DebugConfigurationPrompts.attachRemotePortTitle(),step:2,totalSteps:2,value:(t.port||5678).toString(),prompt:s.DebugConfigurationPrompts.attachRemotePortPrompt(),validate:e=>Promise.resolve(e&&/^\d+$/.test(e.trim())?void 0:s.DebugConfigurationPrompts.attachRemotePortValidationError())});n&&/^\d+$/.test(n.trim())&&(t.port=parseInt(n,10)),t.port||(t.port=5678),a.sendTelemetryEvent(c.EventName.DEBUGGER_CONFIGURATION_PROMPTS,void 0,{configurationType:l.DebugConfigurationType.remoteAttach,manuallyEnteredAValue:5678!==t.port})})}};d=r([o.injectable()],d),t.RemoteAttachDebugConfigurationProvider=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4),c=n(6),u=n(1),l=n(144),d=n(222);let h=class extends d.BaseConfigurationResolver{constructor(e,t,n,r){super(e,t,r),this.platformService=n}resolveDebugConfiguration(e,t,n){return o(this,void 0,void 0,function*(){const n=this.getWorkspaceFolder(e);yield this.provideAttachDefaults(n,t);const r=t;return Array.isArray(r.debugOptions)&&(r.debugOptions=r.debugOptions.filter((e,t)=>r.debugOptions.indexOf(e)===t)),t})}provideAttachDefaults(e,t){return o(this,void 0,void 0,function*(){Array.isArray(t.debugOptions)||(t.debugOptions=[]),t.host||(t.host="localhost"),t.workspaceFolder=e?e.fsPath:void 0;const n=t.debugOptions;t.debugStdLib&&this.debugOption(n,l.DebugOptions.DebugStdLib),t.django&&this.debugOption(n,l.DebugOptions.Django),t.jinja&&this.debugOption(n,l.DebugOptions.Jinja),!0===t.subProcess&&this.debugOption(n,l.DebugOptions.SubProcess),t.pyramid&&-1===n.indexOf(l.DebugOptions.Jinja)&&!1!==t.jinja&&this.debugOption(n,l.DebugOptions.Jinja),(t.redirectOutput||void 0===t.redirectOutput)&&this.debugOption(n,l.DebugOptions.RedirectOutput);const r=this.isLocalHost(t.host);this.platformService.isWindows&&r&&this.debugOption(n,l.DebugOptions.FixFilePathCase),this.platformService.isWindows?this.debugOption(n,l.DebugOptions.WindowsClient):this.debugOption(n,l.DebugOptions.UnixClient),t.pathMappings||(t.pathMappings=[]),t.localRoot&&t.remoteRoot&&t.pathMappings.push({localRoot:t.localRoot,remoteRoot:t.remoteRoot}),e&&t.host&&0===t.pathMappings.length&&["LOCALHOST","127.0.0.1","::1"].indexOf(t.host.toUpperCase())>=0&&t.pathMappings.push({localRoot:e.fsPath,remoteRoot:e.fsPath}),this.sendTelemetry("attach",t)})}};h=r([s.injectable(),i(0,s.inject(a.IWorkspaceService)),i(1,s.inject(a.IDocumentManager)),i(2,s.inject(c.IPlatformService)),i(3,s.inject(u.IConfigurationService))],h),t.AttachConfigurationResolver=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(193),u=n(26),l=n(4),d=n(6),h=n(1),p=n(49),f=n(144),g=n(143),m=n(222);let y=class extends m.BaseConfigurationResolver{constructor(e,t,n,r,i,o){super(e,t,o),this.configurationProviderUtils=n,this.invalidPythonPathInDebuggerService=r,this.platformService=i}resolveDebugConfiguration(e,t,n){return o(this,void 0,void 0,function*(){const n=this.getWorkspaceFolder(e),r=t,i=Object.keys(r);if(!0===r.noDebug&&1===i.length||0===i.length){const e=this.getProgram();r.name="Launch",r.type=p.DebuggerTypeName,r.request="launch",r.program=e||"",r.env={}}if(yield this.provideLaunchDefaults(n,r),!(yield this.validateLaunchConfiguration(e,r)))return;const o=t;return Array.isArray(o.debugOptions)&&(o.debugOptions=o.debugOptions.filter((e,t)=>o.debugOptions.indexOf(e)===t)),t})}provideLaunchDefaults(e,t){return o(this,void 0,void 0,function*(){if(this.resolveAndUpdatePythonPath(e,t),"string"!=typeof t.cwd&&e&&(t.cwd=e.fsPath),"string"!=typeof t.envFile&&e){const n=a.join(e.fsPath,".env");t.envFile=n}"boolean"!=typeof t.stopOnEntry&&(t.stopOnEntry=!1),"boolean"!=typeof t.showReturnValue&&(t.showReturnValue=!1),t.console||(t.console="integratedTerminal"),"none"===t.console||t.internalConsoleOptions||(t.internalConsoleOptions="neverOpen"),Array.isArray(t.debugOptions)||(t.debugOptions=[]),t.workspaceFolder=e?e.fsPath:void 0;const n=t.debugOptions;t.debugStdLib&&this.debugOption(n,f.DebugOptions.DebugStdLib),t.stopOnEntry&&this.debugOption(n,f.DebugOptions.StopOnEntry),t.showReturnValue&&this.debugOption(n,f.DebugOptions.ShowReturnValue),t.django&&this.debugOption(n,f.DebugOptions.Django),t.jinja&&this.debugOption(n,f.DebugOptions.Jinja),(t.redirectOutput||void 0===t.redirectOutput)&&this.debugOption(n,f.DebugOptions.RedirectOutput),t.sudo&&this.debugOption(n,f.DebugOptions.Sudo),!0===t.subProcess&&this.debugOption(n,f.DebugOptions.SubProcess),this.platformService.isWindows&&this.debugOption(n,f.DebugOptions.FixFilePathCase);const r=this.isDebuggingFlask(t);(t.pyramid||r)&&-1===n.indexOf(f.DebugOptions.Jinja)&&!1!==t.jinja&&this.debugOption(n,f.DebugOptions.Jinja),t.pyramid&&(t.program=yield this.configurationProviderUtils.getPyramidStartupScriptFilePath(e)),this.sendTelemetry("launch",t)})}validateLaunchConfiguration(e,t){return o(this,void 0,void 0,function*(){return this.invalidPythonPathInDebuggerService.validatePythonPath(t.pythonPath,this.pythonPathSource,e?e.uri:void 0)})}};y=r([s.injectable(),i(0,s.inject(l.IWorkspaceService)),i(1,s.inject(l.IDocumentManager)),i(2,s.inject(g.IConfigurationProviderUtils)),i(3,s.inject(u.IDiagnosticsService)),i(3,s.named(c.InvalidPythonPathInDebuggerServiceId)),i(4,s.inject(d.IPlatformService)),i(5,s.inject(h.IConfigurationService))],y),t.LaunchConfigurationResolver=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(56),c=n(590),u=n(99);let l=class{constructor(e){this.childProcessAttachService=e}handleCustomEvent(e){return o(this,void 0,void 0,function*(){if(!e||e.event!==c.PTVSDEvents.ChildProcessLaunched)return;const t=e.body;yield this.childProcessAttachService.attach(t)})}};r([a.swallowExceptions("Handle child process launch")],l.prototype,"handleCustomEvent",null),l=r([s.injectable(),i(0,s.inject(u.IChildProcessAttachService))],l),t.ChildProcessAttachEventHandler=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ChildProcessLaunched="ptvsd_subprocess"}(t.PTVSDEvents||(t.PTVSDEvents={}))},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4),c=n(22),u=n(7),l=n(9);let d=class{constructor(e,t,n){this.appShell=e,this.debugService=t,this.workspaceService=n}attach(e){return o(this,void 0,void 0,function*(){const t=this.getRelatedWorkspaceFolder(e),n=this.getAttachConfiguration(e);(yield this.debugService.startDebugging(t,n))||this.appShell.showErrorMessage(`Failed to launch debugger for child process ${e.processId}`).then(c.noop,c.noop)})}getRelatedWorkspaceFolder(e){const t=e.rootStartRequest.arguments.workspaceFolder;if(this.workspaceService.hasWorkspaceFolders&&t)return this.workspaceService.workspaceFolders.find(e=>e.uri.fsPath===t)}getAttachConfiguration(e){const t=e.rootStartRequest.arguments,n=JSON.parse(JSON.stringify(t));return n.host="attach"===t.request?t.host:"localhost",n.port=e.port,n.name=`Child Process ${e.processId}`,n.request="attach",n}};r([u.captureTelemetry(l.EventName.DEBUGGER_ATTACH_TO_CHILD_PROCESS)],d.prototype,"attach",null),d=r([s.injectable(),i(0,s.inject(a.IApplicationShell)),i(1,s.inject(a.IDebugService)),i(2,s.inject(a.IWorkspaceService))],d),t.ChildProcessAttachService=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(593),i=n(135);t.registerTypes=function(e){e.addSingleton(i.IFormatterHelper,r.FormatterHelper)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(3),a=n(1),c=n(5);let u=class{constructor(e){this.serviceContainer=e}translateToId(e){switch(e){case a.Product.autopep8:return"autopep8";case a.Product.black:return"black";case a.Product.yapf:return"yapf";default:throw new Error(`Unrecognized Formatter '${e}'`)}}getSettingsPropertyNames(e){const t=this.translateToId(e);return{argsName:`${t}Args`,pathName:`${t}Path`}}getExecutionInfo(e,t,n){const r=this.serviceContainer.get(a.IConfigurationService).getSettings(n),i=this.getSettingsPropertyNames(e),o=r.formatting[i.pathName];let c,u=Array.isArray(r.formatting[i.argsName])?r.formatting[i.argsName]:[];return u=u.concat(t),s.basename(o)===o&&(c=o),{execPath:o,moduleName:c,args:u,product:e}}};u=r([o.injectable(),i(0,o.inject(c.IServiceContainer))],u),t.FormatterHelper=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(595),i=n(139),o=n(596),s=n(597),a=n(598),c=n(599),u=n(600),l=n(601),d=n(602),h=n(603),p=n(38),f=n(604),g=n(605),m=n(606),y=n(607),v=n(85),b=n(10),S=n(611),_=n(612),w=n(613),P=n(614),C=n(615),T=n(616),I=n(145),E=n(617),O=n(618),R=n(619),x=n(620),k=n(621),D=n(623),A=n(624),j=n(625),N=n(626),F=n(627),M=n(628),L=n(629),W=n(630),U=n(631),H=n(101),B=n(632),V=n(100);t.registerTypes=function(e){e.addSingleton(b.IKnownSearchPathsForInterpreters,N.KnownSearchPathsForInterpreters),e.addSingleton(b.IVirtualEnvironmentsSearchPathProvider,A.GlobalVirtualEnvironmentsSearchPathProvider,"global"),e.addSingleton(b.IVirtualEnvironmentsSearchPathProvider,W.WorkspaceVirtualEnvironmentsSearchPathProvider,"workspace"),e.addSingleton(b.ICondaService,k.CondaService),e.addSingleton(H.IPipEnvServiceHelper,M.PipEnvServiceHelper),e.addSingleton(V.IVirtualEnvironmentManager,B.VirtualEnvironmentManager),e.addSingleton(H.IPythonInPathCommandProvider,D.PythonInPathCommandProvider),e.add(b.IInterpreterWatcher,U.WorkspaceVirtualEnvWatcherService,b.WORKSPACE_VIRTUAL_ENV_SERVICE),e.addSingleton(b.IInterpreterWatcherBuilder,j.InterpreterWatcherBuilder),e.addSingleton(b.IInterpreterVersionService,T.InterpreterVersionService),e.addSingleton(b.IInterpreterLocatorService,E.PythonInterpreterLocatorService,b.INTERPRETER_LOCATOR_SERVICE),e.addSingleton(b.IInterpreterLocatorService,R.CondaEnvFileService,b.CONDA_ENV_FILE_SERVICE),e.addSingleton(b.IInterpreterLocatorService,x.CondaEnvService,b.CONDA_ENV_SERVICE),e.addSingleton(b.IInterpreterLocatorService,D.CurrentPathService,b.CURRENT_PATH_SERVICE),e.addSingleton(b.IInterpreterLocatorService,A.GlobalVirtualEnvService,b.GLOBAL_VIRTUAL_ENV_SERVICE),e.addSingleton(b.IInterpreterLocatorService,W.WorkspaceVirtualEnvService,b.WORKSPACE_VIRTUAL_ENV_SERVICE),e.addSingleton(b.IInterpreterLocatorService,F.PipEnvService,b.PIPENV_SERVICE),e.addSingleton(b.IPipEnvService,F.PipEnvService),e.addSingleton(b.IInterpreterLocatorService,L.WindowsRegistryService,b.WINDOWS_REGISTRY_SERVICE),e.addSingleton(b.IInterpreterLocatorService,N.KnownPathsService,b.KNOWN_PATH_SERVICE),e.addSingleton(b.IInterpreterService,C.InterpreterService),e.addSingleton(b.IInterpreterDisplay,S.InterpreterDisplay),e.addSingleton(v.IPythonPathUpdaterServiceFactory,y.PythonPathUpdaterServiceFactory),e.addSingleton(v.IPythonPathUpdaterServiceManager,m.PythonPathUpdaterService),e.addSingleton(v.IInterpreterSelector,g.InterpreterSelector),e.addSingleton(b.IShebangCodeLensProvider,w.ShebangCodeLensProvider),e.addSingleton(b.IInterpreterHelper,P.InterpreterHelper),e.addSingleton(b.IInterpreterLocatorHelper,I.InterpreterLocatorHelper),e.addSingleton(v.IInterpreterComparer,f.InterpreterComparer),e.addSingleton(b.InterpreterLocatorProgressHandler,_.InterpreterLocatorProgressStatubarHandler),e.addSingleton(b.IInterpreterLocatorProgressService,O.InterpreterLocatorProgressService),e.addSingleton(p.IInterpreterAutoSelectionRule,c.CurrentPathInterpretersAutoSelectionRule,p.AutoSelectionRule.currentPath),e.addSingleton(p.IInterpreterAutoSelectionRule,l.SystemWideInterpretersAutoSelectionRule,p.AutoSelectionRule.systemWide),e.addSingleton(p.IInterpreterAutoSelectionRule,d.WindowsRegistryInterpretersAutoSelectionRule,p.AutoSelectionRule.windowsRegistry),e.addSingleton(p.IInterpreterAutoSelectionRule,h.WorkspaceVirtualEnvInterpretersAutoSelectionRule,p.AutoSelectionRule.workspaceVirtualEnvs),e.addSingleton(p.IInterpreterAutoSelectionRule,a.CachedInterpretersAutoSelectionRule,p.AutoSelectionRule.cachedInterpreters),e.addSingleton(p.IInterpreterAutoSelectionRule,u.SettingsInterpretersAutoSelectionRule,p.AutoSelectionRule.settings),e.addSingleton(p.IInterpreterAutoSeletionProxyService,s.InterpreterAutoSeletionProxyService),e.addSingleton(p.IInterpreterAutoSelectionService,o.InterpreterAutoSelectionService),e.addSingleton(i.IEnvironmentActivationService,r.EnvironmentActivationService)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const s=n(0),a=n(3),c=n(12),u=n(6),l=n(14),d=n(23),h=n(1),p=n(56),f=n(34),g=n(70),m=n(45),y=n(7),v=n(9),b={[f.OSType.Windows]:"cmd",[f.OSType.OSX]:"bash",[f.OSType.Linux]:"bash",[f.OSType.Unknown]:void 0};let S=class{constructor(e,t,n,r,i){this.helper=e,this.platform=t,this.processServiceFactory=n,this.currentProcess=r,this.envVarsService=i,this.disposables=[],this.envVarsService.onDidEnvironmentVariablesChange(this.onDidEnvironmentVariablesChange,this,this.disposables)}dispose(){this.disposables.forEach(e=>e.dispose())}getActivatedEnvironmentVariables(e,t){return o(this,void 0,void 0,function*(){const n=b[this.platform.osType];if(!n)return;const r=yield this.helper.getEnvironmentActivationShellCommands(e,t);if(c.traceVerbose(`Activation Commands received ${r}`),!r||!Array.isArray(r)||0===r.length)return;const i=this.fixActivationCommands(r).join(" && "),o=yield this.processServiceFactory.create(e),s=yield this.envVarsService.getEnvironmentVariables(e),u=Object.keys(s).length,l=u?s:this.currentProcess.env;c.traceVerbose(`${u?"Has":"No"} Custom Env Vars`);const d=`${i} && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ${a.join(m.EXTENSION_ROOT_DIR,"pythonFiles","printEnvVariables.py").fileToCommandArgument()}`;c.traceVerbose(`Activating Environment to capture Environment variables, ${d}`);const h=yield o.shellExec(d,{env:l,shell:n});if(h.stderr&&h.stderr.length>0)throw new Error(`StdErr from ShellExec, ${h.stderr}`);return this.parseEnvironmentOutput(h.stdout)})}onDidEnvironmentVariablesChange(e){p.clearCachedResourceSpecificIngterpreterData("ActivatedEnvironmentVariables",e)}fixActivationCommands(e){return e.map(e=>e.replace(/^source\s+/,". "))}parseEnvironmentOutput(e){const t=(e=e.substring(e.indexOf("e8b39361-0157-4923-80e1-22d70d46dee6")+"e8b39361-0157-4923-80e1-22d70d46dee6".length)).substring(e.indexOf("{")).trim();return JSON.parse(t)}};r([c.traceDecorators.verbose("getActivatedEnvironmentVariables",c.LogOptions.Arguments),p.swallowExceptions("getActivatedEnvironmentVariables"),y.captureTelemetry(v.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,{failed:!1},!0),p.cacheResourceSpecificInterpreterData("ActivatedEnvironmentVariables",6e5)],S.prototype,"getActivatedEnvironmentVariables",null),r([c.traceDecorators.error("Failed to parse Environment variables"),c.traceDecorators.verbose("parseEnvironmentOutput",c.LogOptions.None)],S.prototype,"parseEnvironmentOutput",null),S=r([s.injectable(),i(0,s.inject(d.ITerminalHelper)),i(1,s.inject(u.IPlatformService)),i(2,s.inject(l.IProcessServiceFactory)),i(3,s.inject(h.ICurrentProcess)),i(4,s.inject(g.IEnvironmentVariablesProvider))],S),t.EnvironmentActivationService=S},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(42),c=n(2),u=n(4);n(8);const l=n(6),d=n(1),h=n(16),p=n(7),f=n(9),g=n(10),m=n(38);let y=class{constructor(e,t,n,r,i,o,s,a,u,l,d){this.workspaceService=e,this.stateFactory=t,this.fs=n,this.userDefinedInterpreter=a,this.interpreterHelper=d,this.autoSelectedWorkspacePromises=new Map,this.didAutoSelectedInterpreterEmitter=new c.EventEmitter,this.autoSelectedInterpreterByWorkspace=new Map,this.rules=[],this.rules.push(...[o,i,r,s,a,u]),l.registerInstance(this),a.setNextRule(u),u.setNextRule(s),s.setNextRule(i),i.setNextRule(o),o.setNextRule(r)}autoSelectInterpreter(e){return o(this,void 0,void 0,function*(){const t=this.getWorkspacePathKey(e);if(!this.autoSelectedWorkspacePromises.has(t)){const n=h.createDeferred();this.autoSelectedWorkspacePromises.set(t,n),yield this.initializeStore(e),yield this.clearWorkspaceStoreIfInvalid(e),yield this.userDefinedInterpreter.autoSelectInterpreter(e,this),this.didAutoSelectedInterpreterEmitter.fire(),Promise.all(this.rules.map(t=>t.autoSelectInterpreter(e))).ignoreErrors(),n.resolve()}return this.autoSelectedWorkspacePromises.get(t).promise})}get onDidChangeAutoSelectedInterpreter(){return this.didAutoSelectedInterpreterEmitter.event}getAutoSelectedInterpreter(e){const t=this.getWorkspaceState(e);if(t&&t.value)return t.value;const n=this.getWorkspacePathKey(e);return this.autoSelectedInterpreterByWorkspace.has(n)?this.autoSelectedInterpreterByWorkspace.get(n):this.globallyPreferredInterpreter.value}setWorkspaceInterpreter(e,t){return o(this,void 0,void 0,function*(){this.autoSelectedWorkspacePromises.has(this.getWorkspacePathKey(e))&&this.autoSelectedWorkspacePromises.get(this.getWorkspacePathKey(e)).completed&&(yield this.storeAutoSelectedInterpreter(e,t))})}setGlobalInterpreter(e){return o(this,void 0,void 0,function*(){yield this.storeAutoSelectedInterpreter(void 0,e)})}clearWorkspaceStoreIfInvalid(e){return o(this,void 0,void 0,function*(){const t=this.getWorkspaceState(e);t&&t.value&&!(yield this.fs.fileExists(t.value.path))&&(p.sendTelemetryEvent(f.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{},{interpreterMissing:!0}),yield t.updateValue(void 0))})}storeAutoSelectedInterpreter(e,t){return o(this,void 0,void 0,function*(){const n=this.getWorkspacePathKey(e);if(""===n){if(this.globallyPreferredInterpreter.value&&this.globallyPreferredInterpreter.value.version&&t&&t.version&&a.compare(this.globallyPreferredInterpreter.value.version.raw,t.version.raw)>0)return;yield this.globallyPreferredInterpreter.updateValue(t),this.autoSelectedInterpreterByWorkspace.set(n,t)}else{const r=this.getWorkspaceState(e);r&&t&&(yield r.updateValue(t)),this.autoSelectedInterpreterByWorkspace.set(n,t)}})}initializeStore(e){return o(this,void 0,void 0,function*(){const t=this.getWorkspacePathKey(e);this.autoSelectedInterpreterByWorkspace.delete(t),this.globallyPreferredInterpreter||(yield this.clearStoreIfFileIsInvalid())})}clearStoreIfFileIsInvalid(){return o(this,void 0,void 0,function*(){this.globallyPreferredInterpreter=this.stateFactory.createGlobalPersistentState("preferredGlobalPyInterpreter",void 0),this.globallyPreferredInterpreter.value&&!(yield this.fs.fileExists(this.globallyPreferredInterpreter.value.path))&&(yield this.globallyPreferredInterpreter.updateValue(void 0))})}getWorkspacePathKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}getWorkspaceState(e){const t=this.interpreterHelper.getActiveWorkspaceUri(e);if(!t)return;const n=`autoSelectedWorkspacePythonInterpreter-${t.folderUri.fsPath}`;return this.stateFactory.createWorkspacePersistentState(n,void 0)}};r([p.captureTelemetry(f.EventName.PYTHON_INTERPRETER_AUTO_SELECTION,{rule:m.AutoSelectionRule.all},!0)],y.prototype,"autoSelectInterpreter",null),y=r([s.injectable(),i(0,s.inject(u.IWorkspaceService)),i(1,s.inject(d.IPersistentStateFactory)),i(2,s.inject(l.IFileSystem)),i(3,s.inject(m.IInterpreterAutoSelectionRule)),i(3,s.named(m.AutoSelectionRule.systemWide)),i(4,s.inject(m.IInterpreterAutoSelectionRule)),i(4,s.named(m.AutoSelectionRule.currentPath)),i(5,s.inject(m.IInterpreterAutoSelectionRule)),i(5,s.named(m.AutoSelectionRule.windowsRegistry)),i(6,s.inject(m.IInterpreterAutoSelectionRule)),i(6,s.named(m.AutoSelectionRule.cachedInterpreters)),i(7,s.inject(m.IInterpreterAutoSelectionRule)),i(7,s.named(m.AutoSelectionRule.settings)),i(8,s.inject(m.IInterpreterAutoSelectionRule)),i(8,s.named(m.AutoSelectionRule.workspaceVirtualEnvs)),i(9,s.inject(m.IInterpreterAutoSeletionProxyService)),i(10,s.inject(g.IInterpreterHelper))],y),t.InterpreterAutoSelectionService=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(1);let u=class{constructor(e){this.disposables=e,this.didAutoSelectedInterpreterEmitter=new a.EventEmitter}registerInstance(e){this.instance=e,this.disposables.push(this.instance.onDidChangeAutoSelectedInterpreter(()=>this.didAutoSelectedInterpreterEmitter.fire()))}get onDidChangeAutoSelectedInterpreter(){return this.didAutoSelectedInterpreterEmitter.event}getAutoSelectedInterpreter(e){return this.instance?this.instance.getAutoSelectedInterpreter(e):void 0}setWorkspaceInterpreter(e,t){return o(this,void 0,void 0,function*(){return this.instance?this.instance.setWorkspaceInterpreter(e,t):void 0})}};u=r([s.injectable(),i(0,s.inject(c.IDisposableRegistry))],u),t.InterpreterAutoSeletionProxyService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(12),c=n(6),u=n(1),l=n(10),d=n(38),h=n(75);let p=class extends h.BaseRuleService{constructor(e,t,n,r,i,o){super(d.AutoSelectionRule.cachedInterpreters,e,n),this.helper=t,this.rules=[r,i,o]}onAutoSelectInterpreter(e,t){return o(this,void 0,void 0,function*(){const n=this.rules.map(t=>t.getPreviouslyAutoSelectedInterpreter(e)).filter(e=>!!e).map(e=>e),r=this.helper.getBestInterpreter(n);return a.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${r?JSON.stringify(r):"Nothing Selected"}`),(yield this.setGlobalInterpreter(r,t))?h.NextAction.exit:h.NextAction.runNextRule})}};p=r([s.injectable(),i(0,s.inject(c.IFileSystem)),i(1,s.inject(l.IInterpreterHelper)),i(2,s.inject(u.IPersistentStateFactory)),i(3,s.inject(d.IInterpreterAutoSelectionRule)),i(3,s.named(d.AutoSelectionRule.systemWide)),i(4,s.inject(d.IInterpreterAutoSelectionRule)),i(4,s.named(d.AutoSelectionRule.currentPath)),i(5,s.inject(d.IInterpreterAutoSelectionRule)),i(5,s.named(d.AutoSelectionRule.windowsRegistry))],p),t.CachedInterpretersAutoSelectionRule=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(12),c=n(6),u=n(1),l=n(10),d=n(38),h=n(75);let p=class extends h.BaseRuleService{constructor(e,t,n,r){super(d.AutoSelectionRule.currentPath,e,n),this.helper=t,this.currentPathInterpreterLocator=r}onAutoSelectInterpreter(e,t){return o(this,void 0,void 0,function*(){const n=yield this.currentPathInterpreterLocator.getInterpreters(e),r=this.helper.getBestInterpreter(n);return a.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${r?JSON.stringify(r):"Nothing Selected"}`),(yield this.setGlobalInterpreter(r,t))?h.NextAction.exit:h.NextAction.runNextRule})}};p=r([s.injectable(),i(0,s.inject(c.IFileSystem)),i(1,s.inject(l.IInterpreterHelper)),i(2,s.inject(u.IPersistentStateFactory)),i(3,s.inject(l.IInterpreterLocatorService)),i(3,s.named(l.CURRENT_PATH_SERVICE))],p),t.CurrentPathInterpretersAutoSelectionRule=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4),c=n(6),u=n(1),l=n(38),d=n(75);let h=class extends d.BaseRuleService{constructor(e,t,n){super(l.AutoSelectionRule.settings,e,t),this.workspaceService=n}onAutoSelectInterpreter(e,t){return o(this,void 0,void 0,function*(){const e=this.workspaceService.getConfiguration("python",null).inspect("pythonPath");return e.globalValue&&"python"!==e.globalValue?d.NextAction.exit:d.NextAction.runNextRule})}};h=r([s.injectable(),i(0,s.inject(c.IFileSystem)),i(1,s.inject(u.IPersistentStateFactory)),i(2,s.inject(a.IWorkspaceService))],h),t.SettingsInterpretersAutoSelectionRule=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(12),c=n(6),u=n(1),l=n(10),d=n(38),h=n(75);let p=class extends h.BaseRuleService{constructor(e,t,n,r){super(d.AutoSelectionRule.systemWide,e,n),this.helper=t,this.interpreterService=r}onAutoSelectInterpreter(e,t){return o(this,void 0,void 0,function*(){const n=(yield this.interpreterService.getInterpreters(e)).filter(e=>e.type!==l.InterpreterType.VirtualEnv&&e.type!==l.InterpreterType.Venv&&e.type!==l.InterpreterType.Pipenv),r=this.helper.getBestInterpreter(n);return a.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${r?JSON.stringify(r):"Nothing Selected"}`),(yield this.setGlobalInterpreter(r,t))?h.NextAction.exit:h.NextAction.runNextRule})}};p=r([s.injectable(),i(0,s.inject(c.IFileSystem)),i(1,s.inject(l.IInterpreterHelper)),i(2,s.inject(u.IPersistentStateFactory)),i(3,s.inject(l.IInterpreterService))],p),t.SystemWideInterpretersAutoSelectionRule=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(12),c=n(6),u=n(1),l=n(34),d=n(10),h=n(38),p=n(75);let f=class extends p.BaseRuleService{constructor(e,t,n,r,i){super(h.AutoSelectionRule.windowsRegistry,e,n),this.helper=t,this.platform=r,this.winRegInterpreterLocator=i}onAutoSelectInterpreter(e,t){return o(this,void 0,void 0,function*(){if(this.platform.osType!==l.OSType.Windows)return p.NextAction.runNextRule;const n=yield this.winRegInterpreterLocator.getInterpreters(e),r=this.helper.getBestInterpreter(n);return a.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${r?JSON.stringify(r):"Nothing Selected"}`),(yield this.setGlobalInterpreter(r,t))?p.NextAction.exit:p.NextAction.runNextRule})}};f=r([s.injectable(),i(0,s.inject(c.IFileSystem)),i(1,s.inject(d.IInterpreterHelper)),i(2,s.inject(u.IPersistentStateFactory)),i(3,s.inject(c.IPlatformService)),i(4,s.inject(d.IInterpreterLocatorService)),i(4,s.named(d.WINDOWS_REGISTRY_SERVICE))],f),t.WindowsRegistryInterpretersAutoSelectionRule=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(12),l=n(6),d=n(1),h=n(16),p=n(34),f=n(85),g=n(10),m=n(38),y=n(75);let v=class extends y.BaseRuleService{constructor(e,t,n,r,i,o,s,a){super(m.AutoSelectionRule.workspaceVirtualEnvs,e,n),this.helper=t,this.platform=r,this.workspaceService=i,this.pythonPathUpdaterService=o,this.pipEnvInterpreterLocator=s,this.workspaceVirtualEnvInterpreterLocator=a}onAutoSelectInterpreter(e,t){return o(this,void 0,void 0,function*(){const n=this.helper.getActiveWorkspaceUri(e);if(!n)return y.NextAction.runNextRule;if(this.workspaceService.getConfiguration("python",n.folderUri).inspect("pythonPath").workspaceFolderValue)return y.NextAction.runNextRule;const r=h.createDeferredFromPromise(this.pipEnvInterpreterLocator.getInterpreters(n.folderUri,!0)),i=h.createDeferredFromPromise(this.getWorkspaceVirtualEnvInterpreters(n.folderUri)),o=yield Promise.race([r.promise,i.promise]);let s;if(Array.isArray(o)&&o.length>0)s=this.helper.getBestInterpreter(o);else{const[e,t]=yield Promise.all([r.promise,i.promise]),n=Array.isArray(e)?e:[],o=Array.isArray(t)?t:[];s=this.helper.getBestInterpreter(n.concat(o))}return s&&t&&(yield this.cacheSelectedInterpreter(n.folderUri,s),yield t.setWorkspaceInterpreter(n.folderUri,s)),u.traceVerbose(`Selected Interpreter from ${this.ruleName}, ${s?JSON.stringify(s):"Nothing Selected"}`),y.NextAction.runNextRule})}getWorkspaceVirtualEnvInterpreters(e){return o(this,void 0,void 0,function*(){if(!e)return;const t=this.workspaceService.getWorkspaceFolder(e);if(!t)return;const n=yield this.workspaceVirtualEnvInterpreterLocator.getInterpreters(e,!0),r=this.platform.osType===p.OSType.Windows?t.uri.fsPath.toUpperCase():t.uri.fsPath;return n.filter(e=>{const t=a.Uri.file(e.path).fsPath;return(this.platform.osType===p.OSType.Windows?t.toUpperCase():t).startsWith(r)})})}cacheSelectedInterpreter(e,t){const n=Object.create(null,{cacheSelectedInterpreter:{get:()=>super.cacheSelectedInterpreter}});return o(this,void 0,void 0,function*(){if(!t)return void(yield n.cacheSelectedInterpreter.call(this,e,t));const r=this.helper.getActiveWorkspaceUri(e);r&&(yield this.pythonPathUpdaterService.updatePythonPath(t.path,r.configTarget,"load",r.folderUri),yield n.cacheSelectedInterpreter.call(this,e,t))})}};v=r([s.injectable(),i(0,s.inject(l.IFileSystem)),i(1,s.inject(g.IInterpreterHelper)),i(2,s.inject(d.IPersistentStateFactory)),i(3,s.inject(l.IPlatformService)),i(4,s.inject(c.IWorkspaceService)),i(5,s.inject(f.IPythonPathUpdaterServiceManager)),i(6,s.inject(g.IInterpreterLocatorService)),i(6,s.named(g.PIPENV_SERVICE)),i(7,s.inject(g.IInterpreterLocatorService)),i(7,s.named(g.WORKSPACE_VIRTUAL_ENV_SERVICE))],v),t.WorkspaceVirtualEnvInterpretersAutoSelectionRule=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(137),a=n(10);let c=class{constructor(e){this.interpreterHelper=e}compare(e,t){const n=this.getSortName(e),r=this.getSortName(t);return n===r?0:n>r?1:-1}getSortName(e){const t=[],n=[];if(e.version&&t.push(e.version.raw),e.architecture&&t.push(s.getArchitectureDisplayName(e.architecture)),e.companyDisplayName&&e.companyDisplayName.length>0?t.push(e.companyDisplayName.trim()):t.push("Python"),e.type){const t=this.interpreterHelper.getInterpreterTypeDisplayName(e.type);t&&n.push(t)}e.envName&&e.envName.length>0&&n.push(e.envName);const r=0===n.length?"":`(${n.join(": ")})`;return`${t.join(" ")} ${r}`.trim()}};c=r([o.injectable(),i(0,o.inject(a.IInterpreterHelper))],c),t.InterpreterComparer=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(11),l=n(1),d=n(10),h=n(85);let p=class{constructor(e,t,n,r,i,o,s,a,c,u){this.interpreterManager=e,this.workspaceService=t,this.applicationShell=n,this.documentManager=r,this.pathUtils=i,this.interpreterComparer=o,this.pythonPathUpdaterService=s,this.shebangCodeLensProvider=a,this.configurationService=c,this.commandManager=u,this.disposables=[]}dispose(){this.disposables.forEach(e=>e.dispose())}initialize(){this.disposables.push(this.commandManager.registerCommand(u.Commands.Set_Interpreter,this.setInterpreter.bind(this))),this.disposables.push(this.commandManager.registerCommand(u.Commands.Set_ShebangInterpreter,this.setShebangInterpreter.bind(this)))}getSuggestions(e){return o(this,void 0,void 0,function*(){const t=yield this.interpreterManager.getInterpreters(e);return t.sort(this.interpreterComparer.compare.bind(this.interpreterComparer)),Promise.all(t.map(t=>this.suggestionToQuickPickItem(t,e)))})}suggestionToQuickPickItem(e,t){return o(this,void 0,void 0,function*(){const n=this.pathUtils.getDisplayName(e.path,t?t.fsPath:void 0),r=e.cachedEntry?"(cached) ":"";return{label:e.displayName,detail:`${r}${n}`,path:e.path}})}setInterpreter(){return o(this,void 0,void 0,function*(){const e=!Array.isArray(this.workspaceService.workspaceFolders)||0===this.workspaceService.workspaceFolders.length;let t,n=a.ConfigurationTarget.Global;if(!e){const e=yield this.getWorkspaceToSetPythonPath();if(!e)return;n=e.configTarget,t=e.folderUri}const r=yield this.getSuggestions(t),i={matchOnDetail:!0,matchOnDescription:!0,placeHolder:`current: ${this.pathUtils.getDisplayName(this.configurationService.getSettings(t).pythonPath,t?t.fsPath:void 0)}`},o=yield this.applicationShell.showQuickPick(r,i);void 0!==o&&(yield this.pythonPathUpdaterService.updatePythonPath(o.path,n,"ui",t))})}setShebangInterpreter(){return o(this,void 0,void 0,function*(){const e=yield this.shebangCodeLensProvider.detectShebang(this.documentManager.activeTextEditor.document);if(!e)return;const t=!Array.isArray(this.workspaceService.workspaceFolders)||0===this.workspaceService.workspaceFolders.length,n=this.workspaceService.getWorkspaceFolder(this.documentManager.activeTextEditor.document.uri),r=Array.isArray(this.workspaceService.workspaceFolders)&&1===this.workspaceService.workspaceFolders.length;t?yield this.pythonPathUpdaterService.updatePythonPath(e,a.ConfigurationTarget.Global,"shebang"):!r&&n?yield this.pythonPathUpdaterService.updatePythonPath(e,a.ConfigurationTarget.WorkspaceFolder,"shebang",n.uri):yield this.pythonPathUpdaterService.updatePythonPath(e,a.ConfigurationTarget.Workspace,"shebang",this.workspaceService.workspaceFolders[0].uri)})}getWorkspaceToSetPythonPath(){return o(this,void 0,void 0,function*(){if(!Array.isArray(this.workspaceService.workspaceFolders)||0===this.workspaceService.workspaceFolders.length)return;if(1===this.workspaceService.workspaceFolders.length)return{folderUri:this.workspaceService.workspaceFolders[0].uri,configTarget:a.ConfigurationTarget.WorkspaceFolder};const e=yield this.applicationShell.showWorkspaceFolderPick({placeHolder:"Select a workspace"});return e?{folderUri:e.uri,configTarget:a.ConfigurationTarget.WorkspaceFolder}:void 0})}};p=r([s.injectable(),i(0,s.inject(d.IInterpreterService)),i(1,s.inject(c.IWorkspaceService)),i(2,s.inject(c.IApplicationShell)),i(3,s.inject(c.IDocumentManager)),i(4,s.inject(l.IPathUtils)),i(5,s.inject(h.IInterpreterComparer)),i(6,s.inject(h.IPythonPathUpdaterServiceManager)),i(7,s.inject(d.IShebangCodeLensProvider)),i(8,s.inject(l.IConfigurationService)),i(9,s.inject(c.ICommandManager))],p),t.InterpreterSelector=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(14),l=n(36),d=n(5),h=n(7),p=n(9),f=n(10),g=n(85);let m=class{constructor(e){this.pythonPathSettingsUpdaterFactory=e.get(g.IPythonPathUpdaterServiceFactory),this.interpreterVersionService=e.get(f.IInterpreterVersionService),this.executionFactory=e.get(u.IPythonExecutionFactory)}updatePythonPath(e,t,n,r){return o(this,void 0,void 0,function*(){const i=new l.StopWatch,o=this.getPythonUpdaterService(t,r);let s=!1;try{yield o.updatePythonPath(a.normalize(e))}catch(e){s=!0;const t=e&&"string"==typeof e.message?e.message:"";c.window.showErrorMessage(`Failed to set 'pythonPath'. Error: ${t}`),console.error(e)}this.sendTelemetry(i.elapsedTime,s,n,e).catch(e=>console.error("Python Extension: sendTelemetry",e))})}sendTelemetry(e,t,n,r){return o(this,void 0,void 0,function*(){const i={failed:t,trigger:n};if(!t){const e=(yield this.executionFactory.create({pythonPath:r})).getInterpreterInformation().catch(()=>void 0),t=this.interpreterVersionService.getPipVersion(r).then(e=>0===e.length?void 0:e).catch(()=>""),[n,o]=yield Promise.all([e,t]);n&&n.version&&(i.pythonVersion=n.version.raw),o&&(i.pipVersion=o)}h.sendTelemetryEvent(p.EventName.PYTHON_INTERPRETER,e,i)})}getPythonUpdaterService(e,t){switch(e){case c.ConfigurationTarget.Global:return this.pythonPathSettingsUpdaterFactory.getGlobalPythonPathConfigurationService();case c.ConfigurationTarget.Workspace:if(!t)throw new Error("Workspace Uri not defined");return this.pythonPathSettingsUpdaterFactory.getWorkspacePythonPathConfigurationService(t);default:if(!t)throw new Error("Workspace Uri not defined");return this.pythonPathSettingsUpdaterFactory.getWorkspaceFolderPythonPathConfigurationService(t)}}};m=r([s.injectable(),i(0,s.inject(d.IServiceContainer))],m),t.PythonPathUpdaterService=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(4),a=n(5),c=n(608),u=n(609),l=n(610);let d=class{constructor(e){this.workspaceService=e.get(s.IWorkspaceService)}getGlobalPythonPathConfigurationService(){return new c.GlobalPythonPathUpdaterService(this.workspaceService)}getWorkspacePythonPathConfigurationService(e){return new l.WorkspacePythonPathUpdaterService(e,this.workspaceService)}getWorkspaceFolderPythonPathConfigurationService(e){return new u.WorkspaceFolderPythonPathUpdaterService(e,this.workspaceService)}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.PythonPathUpdaterServiceFactory=d},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});t.GlobalPythonPathUpdaterService=class{constructor(e){this.workspaceService=e}updatePythonPath(e){return r(this,void 0,void 0,function*(){const t=this.workspaceService.getConfiguration("python"),n=t.inspect("pythonPath");n&&n.globalValue===e||(yield t.update("pythonPath",e,!0))})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(2);t.WorkspaceFolderPythonPathUpdaterService=class{constructor(e,t){this.workspaceFolder=e,this.workspaceService=t}updatePythonPath(e){return r(this,void 0,void 0,function*(){const t=this.workspaceService.getConfiguration("python",this.workspaceFolder),n=t.inspect("pythonPath");n&&n.workspaceFolderValue===e||(e.startsWith(this.workspaceFolder.fsPath)&&(e=i.relative(this.workspaceFolder.fsPath,e)),yield t.update("pythonPath",e,o.ConfigurationTarget.WorkspaceFolder))})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3);t.WorkspacePythonPathUpdaterService=class{constructor(e,t){this.workspace=e,this.workspaceService=t}updatePythonPath(e){return r(this,void 0,void 0,function*(){const t=this.workspaceService.getConfiguration("python",this.workspace),n=t.inspect("pythonPath");n&&n.workspaceValue===e||(e.startsWith(this.workspace.fsPath)&&(e=i.relative(this.workspace.fsPath,e)),yield t.update("pythonPath",e,!1))})}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4);n(8);const u=n(1),l=n(5),d=n(38),h=n(10);let p=class{constructor(e){this.helper=e.get(h.IInterpreterHelper),this.workspaceService=e.get(c.IWorkspaceService),this.pathUtils=e.get(u.IPathUtils),this.interpreterService=e.get(h.IInterpreterService),this.autoSelection=e.get(d.IInterpreterAutoSelectionService);const t=e.get(c.IApplicationShell),n=e.get(u.IDisposableRegistry);this.statusBar=t.createStatusBarItem(a.StatusBarAlignment.Left,100),this.statusBar.command="python.setInterpreter",n.push(this.statusBar),this.interpreterService.onDidChangeInterpreterInformation(this.onDidChangeInterpreterInformation,this,n)}refresh(e){return o(this,void 0,void 0,function*(){if(e&&this.workspaceService.getWorkspaceFolder(e)&&(e=this.workspaceService.getWorkspaceFolder(e).uri),!e){const t=this.helper.getActiveWorkspaceUri(e);e=t?t.folderUri:void 0}yield this.updateDisplay(e)})}onDidChangeInterpreterInformation(e){this.currentlySelectedInterpreterPath&&this.currentlySelectedInterpreterPath!==e.path||this.updateDisplay(this.currentlySelectedWorkspaceFolder).ignoreErrors()}updateDisplay(e){return o(this,void 0,void 0,function*(){yield this.autoSelection.autoSelectInterpreter(e);const t=yield this.interpreterService.getActiveInterpreter(e);this.currentlySelectedWorkspaceFolder=e,t?(this.statusBar.color="",this.statusBar.tooltip=this.pathUtils.getDisplayName(t.path,e?e.fsPath:void 0),this.statusBar.text=t.displayName,this.currentlySelectedInterpreterPath=t.path):(this.statusBar.tooltip="",this.statusBar.color="yellow",this.statusBar.text="$(alert) Select Python Interpreter",this.currentlySelectedInterpreterPath=void 0),this.statusBar.show()})}};p=r([s.injectable(),i(0,s.inject(l.IServiceContainer))],p),t.InterpreterDisplay=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(2),a=n(4),c=n(12),u=n(1),l=n(16),d=n(13),h=n(10);let p=class{constructor(e,t,n){this.shell=e,this.progressService=t,this.disposables=n,this.isFirstTimeLoadingInterpreters=!0}register(){this.progressService.onRefreshing(()=>this.showProgress(),this,this.disposables),this.progressService.onRefreshed(()=>this.hideProgress(),this,this.disposables)}showProgress(){this.deferred||this.createProgress()}hideProgress(){this.deferred&&(this.deferred.resolve(),this.deferred=void 0)}createProgress(){const e={location:s.ProgressLocation.Window,title:this.isFirstTimeLoadingInterpreters?d.Common.loadingExtension():d.Interpreters.refreshing()};this.isFirstTimeLoadingInterpreters=!1,this.shell.withProgress(e,()=>(this.deferred=l.createDeferred(),this.deferred.promise))}};r([c.traceDecorators.verbose("Display locator refreshing progress")],p.prototype,"showProgress",null),r([c.traceDecorators.verbose("Hide locator refreshing progress")],p.prototype,"hideProgress",null),p=r([o.injectable(),i(0,o.inject(a.IApplicationShell)),i(1,o.inject(h.IInterpreterLocatorProgressService)),i(2,o.inject(u.IDisposableRegistry))],p),t.InterpreterLocatorProgressStatubarHandler=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(6),l=n(14),d=n(1);let h=class{constructor(e,t,n,r){this.processServiceFactory=e,this.configurationService=t,this.platformService=n,this.onDidChangeCodeLenses=r.onDidChangeConfiguration}detectShebang(e){return o(this,void 0,void 0,function*(){const t=e.lineAt(0);if(t.isEmptyOrWhitespace)return;if(!t.text.startsWith("#!"))return;const n=t.text.substr(2).trim(),r=yield this.getFullyQualifiedPathToInterpreter(n,e.uri);return"string"==typeof r&&r.length>0?r:void 0})}provideCodeLenses(e,t){return o(this,void 0,void 0,function*(){return this.createShebangCodeLens(e)})}getFullyQualifiedPathToInterpreter(e,t){return o(this,void 0,void 0,function*(){let n=e,r=["-c","import sys;print(sys.executable)"];if(e.indexOf("bin/env ")>=0&&!this.platformService.isWindows){const t=e.split(" ").map(e=>e.trim()).filter(e=>e.length>0);n=t.shift(),r=t.concat(r)}return(yield this.processServiceFactory.create(t)).exec(n,r).then(e=>e.stdout.trim()).catch(()=>"")})}createShebangCodeLens(e){return o(this,void 0,void 0,function*(){const t=yield this.detectShebang(e),n=this.configurationService.getSettings(e.uri).pythonPath;if(!t||t===n)return[];const r=e.lineAt(0),i=new a.Position(0,0),o=new a.Position(0,r.text.length-1),s=new a.Range(i,o);return[new a.CodeLens(s,{command:"python.setShebangInterpreter",title:"Set as interpreter"})]})}};h=r([s.injectable(),i(0,s.inject(l.IProcessServiceFactory)),i(1,s.inject(d.IConfigurationService)),i(2,s.inject(u.IPlatformService)),i(3,s.inject(c.IWorkspaceService))],h),t.ShebangCodeLensProvider=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(42),c=n(2),u=n(4),l=n(6),d=n(14),h=n(1),p=n(5),f=n(10);t.getFirstNonEmptyLineFromMultilineString=function(e){if(!e)return"";const t=e.split(/\r?\n/g).map(e=>e.trim()).filter(e=>e.length>0);return t.length>0?t[0]:""};let g=class{constructor(e){this.serviceContainer=e,this.persistentFactory=this.serviceContainer.get(h.IPersistentStateFactory),this.fs=this.serviceContainer.get(l.IFileSystem)}getActiveWorkspaceUri(e){const t=this.serviceContainer.get(u.IWorkspaceService);if(!t.hasWorkspaceFolders)return;if(Array.isArray(t.workspaceFolders)&&1===t.workspaceFolders.length)return{folderUri:t.workspaceFolders[0].uri,configTarget:c.ConfigurationTarget.Workspace};if(e){const n=t.getWorkspaceFolder(e);if(n)return{configTarget:c.ConfigurationTarget.WorkspaceFolder,folderUri:n.uri}}const n=this.serviceContainer.get(u.IDocumentManager);if(n.activeTextEditor){const e=t.getWorkspaceFolder(n.activeTextEditor.document.uri);if(e)return{configTarget:c.ConfigurationTarget.WorkspaceFolder,folderUri:e.uri}}}getInterpreterInformation(e){return o(this,void 0,void 0,function*(){let t=yield this.fs.getFileHash(e).catch(()=>"");t=t||"";const n=this.persistentFactory.createGlobalPersistentState(`${e}.v3`,void 0,864e5);if(n.value&&t&&n.value.fileHash===t)return n.value;const r=yield this.serviceContainer.get(d.IPythonExecutionFactory).create({pythonPath:e});try{const i=yield r.getInterpreterInformation().catch(()=>void 0);if(!i)return;const o=Object.assign({},i,{fileHash:t});return yield n.updateValue(o),o}catch(t){return void console.error(`Failed to get interpreter information for '${e}'`,t)}})}isMacDefaultPythonPath(e){return"python"===e||"/usr/bin/python"===e}getInterpreterTypeDisplayName(e){switch(e){case f.InterpreterType.Conda:return"conda";case f.InterpreterType.Pipenv:return"pipenv";case f.InterpreterType.Pyenv:return"pyenv";case f.InterpreterType.Venv:return"venv";case f.InterpreterType.VirtualEnv:return"virtualenv";default:return""}}getBestInterpreter(e){if(!Array.isArray(e)||0===e.length)return;if(1===e.length)return e[0];const t=e.slice();return t.sort((e,t)=>e.version&&t.version?a.compare(e.version.raw,t.version.raw):0),t[t.length-1]}};g=r([s.injectable(),i(0,s.inject(p.IServiceContainer))],g),t.InterpreterHelper=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(120),c=n(3),u=n(2);n(8);const l=n(4),d=n(137),h=n(6),p=n(14),f=n(1),g=n(16),m=n(5),y=n(7),v=n(9),b=n(10),S=n(100);let _=class{constructor(e){this.serviceContainer=e,this.didChangeInterpreterEmitter=new u.EventEmitter,this.didChangeInterpreterInformation=new u.EventEmitter,this.inMemoryCacheOfDisplayNames=new Map,this.updatedInterpreters=new Set,this.pythonPathSetting="",this.onConfigChanged=(()=>{const e=this.configService.getSettings();if(this.pythonPathSetting!==e.pythonPath){this.pythonPathSetting=e.pythonPath,this.didChangeInterpreterEmitter.fire(),this.serviceContainer.get(b.IInterpreterDisplay).refresh().catch(e=>console.error("Python Extension: display.refresh",e))}}),this.locator=e.get(b.IInterpreterLocatorService,b.INTERPRETER_LOCATOR_SERVICE),this.fs=this.serviceContainer.get(h.IFileSystem),this.persistentStateFactory=this.serviceContainer.get(f.IPersistentStateFactory),this.configService=this.serviceContainer.get(f.IConfigurationService)}get hasInterpreters(){return this.locator.hasInterpreters}refresh(e){return o(this,void 0,void 0,function*(){return this.serviceContainer.get(b.IInterpreterDisplay).refresh(e)})}initialize(){const e=this.serviceContainer.get(f.IDisposableRegistry),t=this.serviceContainer.get(l.IDocumentManager);e.push(t.onDidChangeActiveTextEditor(e=>e?this.refresh(e.document.uri):void 0));const n=this.serviceContainer.get(l.IWorkspaceService),r=this.configService.getSettings();this.pythonPathSetting=r.pythonPath;const i=n.onDidChangeConfiguration(e=>{e.affectsConfiguration("python.pythonPath",void 0)&&this.onConfigChanged()});e.push(i)}getInterpreters(e){return o(this,void 0,void 0,function*(){const t=yield this.locator.getInterpreters(e);return yield Promise.all(t.filter(e=>!e.displayName).map(t=>o(this,void 0,void 0,function*(){t.displayName=yield this.getDisplayName(t,e),t.cachedEntry||this.updateCachedInterpreterInformation(t,e).ignoreErrors()}))),t})}dispose(){this.locator.dispose(),this.didChangeInterpreterEmitter.dispose(),this.didChangeInterpreterInformation.dispose()}get onDidChangeInterpreter(){return this.didChangeInterpreterEmitter.event}get onDidChangeInterpreterInformation(){return this.didChangeInterpreterInformation.event}getActiveInterpreter(e){return o(this,void 0,void 0,function*(){const t=yield(yield this.serviceContainer.get(p.IPythonExecutionFactory).create({resource:e})).getExecutablePath().catch(()=>void 0);if(t)return this.getInterpreterDetails(t,e)})}getInterpreterDetails(e,t){return o(this,void 0,void 0,function*(){if(c.basename(e)===e){const n=yield this.serviceContainer.get(p.IPythonExecutionFactory).create({resource:t});if(!(e=yield n.getExecutablePath().catch(()=>"")))return}const n=yield this.getInterpreterCache(e);if(n.value&&n.value.info)return n.value.info;const r=this.serviceContainer.get(h.IFileSystem),i=(()=>o(this,void 0,void 0,function*(){const n=this.collectInterpreterDetails(e,t);return yield g.sleep(1e3),n}))(),s=(()=>o(this,void 0,void 0,function*(){const n=(yield this.getInterpreters(t)).find(t=>r.arePathsSame(t.path,e));return n?(n.__store=!0,n):i}))(),a=yield Promise.race([s,i]);return a&&a.__store?yield this.updateCachedInterpreterInformation(a,t):s.then(e=>o(this,void 0,void 0,function*(){e&&e.__store&&(yield this.updateCachedInterpreterInformation(e,t))})).ignoreErrors(),a})}getDisplayName(e,t){return o(this,void 0,void 0,function*(){if(!e.cachedEntry&&e.path&&this.inMemoryCacheOfDisplayNames.has(e.path))return this.inMemoryCacheOfDisplayNames.get(e.path);const n=`${(e.path?yield this.fs.getFileHash(e.path).catch(()=>""):"")||""}-${a(JSON.stringify(Object.assign({},e,{displayName:""})))}`,r=this.persistentStateFactory.createGlobalPersistentState(`${e.path}.interpreter.displayName.v7`,void 0,864e5);if(r.value&&r.value.hash===n&&r.value.displayName)return this.inMemoryCacheOfDisplayNames.set(e.path,r.value.displayName),r.value.displayName;const i=yield this.buildInterpreterDisplayName(e,t);return e.cachedEntry||(yield r.updateValue({displayName:i,hash:n}),this.inMemoryCacheOfDisplayNames.set(e.path,i)),i})}getInterpreterCache(e){return o(this,void 0,void 0,function*(){const t=(e?yield this.fs.getFileHash(e).catch(()=>""):"")||"",n=this.persistentStateFactory.createGlobalPersistentState(`${e}.interpreter.Details.v7`,void 0,864e5);return n.value&&n.value.fileHash===t||(yield n.updateValue({fileHash:t})),n})}updateCachedInterpreterInformation(e,t){return o(this,void 0,void 0,function*(){const n=JSON.stringify(e);if(this.updatedInterpreters.has(n))return;this.updatedInterpreters.add(n);const r=yield this.getInterpreterCache(e.path);e.displayName=yield this.getDisplayName(e,t),r.value&&r.value.info&&JSON.stringify(e)===JSON.stringify(r.value.info)||(this.inMemoryCacheOfDisplayNames.delete(e.path),yield r.updateValue({fileHash:r.value.fileHash,info:e}),this.didChangeInterpreterInformation.fire(e))})}buildInterpreterDisplayName(e,t){return o(this,void 0,void 0,function*(){const n=["Python"],r=[];if(e.version&&n.push(`${e.version.major}.${e.version.minor}.${e.version.patch}`),e.architecture&&n.push(d.getArchitectureDisplayName(e.architecture)),!e.envName&&e.path&&e.type&&e.type===b.InterpreterType.Pipenv){const n=this.serviceContainer.get(S.IVirtualEnvironmentManager);e.envName=yield n.getEnvironmentName(e.path,t)}if(e.envName&&e.envName.length>0&&r.push(`'${e.envName}'`),e.type){const t=this.serviceContainer.get(b.IInterpreterHelper).getInterpreterTypeDisplayName(e.type);t&&r.push(t)}const i=0===r.length?"":`(${r.join(": ")})`;return`${n.join(" ")} ${i}`.trim()})}collectInterpreterDetails(e,t){return o(this,void 0,void 0,function*(){const n=this.serviceContainer.get(b.IInterpreterHelper),r=this.serviceContainer.get(S.IVirtualEnvironmentManager),[i,o]=yield Promise.all([n.getInterpreterInformation(e),r.getEnvironmentType(e)]);if(!i)return;const s=Object.assign({},i,{path:e,type:o}),a=o===b.InterpreterType.Unknown?void 0:yield r.getEnvironmentName(e,t),c=Object.assign({},s,{envName:a});return c.displayName=yield this.getDisplayName(c,t),c})}};r([y.captureTelemetry(v.EventName.PYTHON_INTERPRETER_DISCOVERY,{locator:"all"},!0)],_.prototype,"getInterpreters",null),_=r([s.injectable(),i(0,s.inject(m.IServiceContainer))],_),t.InterpreterService=_},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0);n(8);const a=n(14);t.PIP_VERSION_REGEX="\\d+\\.\\d+(\\.\\d+)?";let c=class{constructor(e){this.processServiceFactory=e}getVersion(e,t){return o(this,void 0,void 0,function*(){return(yield this.processServiceFactory.create()).exec(e,["--version"],{mergeStdOutErr:!0}).then(e=>e.stdout.splitLines()[0]).then(e=>0===e.length?t:e).catch(()=>t)})}getPipVersion(e){return o(this,void 0,void 0,function*(){const n=yield(yield this.processServiceFactory.create()).exec(e,["-m","pip","--version"],{mergeStdOutErr:!0});if(n.stdout.length>0){const e=new RegExp(t.PIP_VERSION_REGEX,"g").exec(n.stdout);if(e&&e.length>0)return e[0].trim()}throw new Error(`Unable to determine pip version from output '${n.stdout}'`)})}};c=r([s.injectable(),i(0,s.inject(a.IProcessServiceFactory))],c),t.InterpreterVersionService=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(6),u=n(1),l=n(16),d=n(34),h=n(5),p=n(10),f=n(82);let g=class{constructor(e){this.serviceContainer=e,this.disposables=[],this._hasInterpreters=l.createDeferred(),e.get(u.IDisposableRegistry).push(this),this.platform=e.get(c.IPlatformService),this.interpreterLocatorHelper=e.get(p.IInterpreterLocatorHelper)}get onLocating(){return(new a.EventEmitter).event}get hasInterpreters(){return this._hasInterpreters.promise}dispose(){this.disposables.forEach(e=>e.dispose())}getInterpreters(e){return o(this,void 0,void 0,function*(){const t=this.getLocators(),n=t.map(t=>o(this,void 0,void 0,function*(){return t.getInterpreters(e)}));t.forEach(e=>{e.hasInterpreters.then(e=>{e&&this._hasInterpreters.resolve(!0)}).ignoreErrors()});const r=yield Promise.all(n),i=f(r).filter(e=>!!e).map(e=>e);return this._hasInterpreters.resolve(i.length>0),this.interpreterLocatorHelper.mergeInterpreters(i)})}getLocators(){return[[p.WINDOWS_REGISTRY_SERVICE,d.OSType.Windows],[p.CONDA_ENV_SERVICE,void 0],[p.CONDA_ENV_FILE_SERVICE,void 0],[p.PIPENV_SERVICE,void 0],[p.GLOBAL_VIRTUAL_ENV_SERVICE,void 0],[p.WORKSPACE_VIRTUAL_ENV_SERVICE,void 0],[p.KNOWN_PATH_SERVICE,void 0],[p.CURRENT_PATH_SERVICE,void 0]].filter(e=>void 0===e[1]||e[1]===this.platform.osType).map(e=>this.serviceContainer.get(p.IInterpreterLocatorService,e[0]))}};g=r([s.injectable(),i(0,s.inject(h.IServiceContainer))],g),t.PythonInterpreterLocatorService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(2),a=n(12),c=n(1),u=n(16),l=n(22),d=n(5),h=n(10);let p=class{constructor(e,t){this.disposables=t,this.deferreds=[],this.refreshing=new s.EventEmitter,this.refreshed=new s.EventEmitter,this.locators=[],this.locators=e.getAll(h.IInterpreterLocatorService)}get onRefreshing(){return this.refreshing.event}get onRefreshed(){return this.refreshed.event}register(){this.locators.forEach(e=>{e.onLocating(this.handleProgress,this,this.disposables)})}handleProgress(e){this.deferreds.push(u.createDeferredFrom(e)),this.notifyRefreshing(),this.checkProgress()}notifyCompleted(){this.refreshed.fire()}notifyRefreshing(){this.refreshing.fire()}checkProgress(){if(0!==this.deferreds.length)return this.areAllItemsComplete()?this.notifyCompleted():void Promise.all(this.deferreds.map(e=>e.promise)).catch(l.noop).then(()=>this.checkProgress()).ignoreErrors()}areAllItemsComplete(){return this.deferreds=this.deferreds.filter(e=>!e.completed),0===this.deferreds.length}};r([a.traceDecorators.verbose("Detected refreshing of Interpreters")],p.prototype,"handleProgress",null),r([a.traceDecorators.verbose("All locators have completed locating")],p.prototype,"notifyCompleted",null),r([a.traceDecorators.verbose("Notify locators are locating")],p.prototype,"notifyRefreshing",null),r([a.traceDecorators.verbose("Checking whether locactors have completed locating")],p.prototype,"areAllItemsComplete",null),p=r([o.injectable(),i(0,o.inject(d.IServiceContainer)),i(1,o.inject(c.IDisposableRegistry))],p),t.InterpreterLocatorProgressService=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(6),u=n(1),l=n(5),d=n(10),h=n(67),p=n(102);let f=class extends h.CacheableLocatorService{constructor(e,t,n,r,i){super("CondaEnvFileService",r),this.helperService=e,this.condaService=t,this.fileSystem=n,this.logger=i}dispose(){}getInterpretersImplementation(e){return this.getSuggestionsFromConda()}getSuggestionsFromConda(){return o(this,void 0,void 0,function*(){return this.condaService.condaEnvironmentsFile?this.fileSystem.fileExists(this.condaService.condaEnvironmentsFile).then(e=>e?this.getEnvironmentsFromFile(this.condaService.condaEnvironmentsFile):Promise.resolve([])):[]})}getEnvironmentsFromFile(e){return o(this,void 0,void 0,function*(){try{const t=(yield this.fileSystem.readFile(e)).split(/\r?\n/g).map(e=>e.trim()).filter(e=>e.length>0),n=(yield Promise.all(t.map(e=>this.getInterpreterDetails(e)))).filter(e=>!!e).map(e=>e),r=yield this.condaService.getCondaEnvironments(!0);return Array.isArray(r)&&r.length>0&&n.forEach(e=>{const t=r.find(t=>this.fileSystem.arePathsSame(t.path,e.envPath));t&&(e.envName=t.name)}),n}catch(e){return this.logger.logError("Python Extension (getEnvironmentsFromFile.readFile):",e),[]}})}getInterpreterDetails(e){return o(this,void 0,void 0,function*(){const t=this.condaService.getInterpreterPath(e);if(!t||!(yield this.fileSystem.fileExists(t)))return;const n=yield this.helperService.getInterpreterInformation(t);if(!n)return;const r=n.envName?n.envName:a.basename(e);return this._hasInterpreters.resolve(!0),Object.assign({},n,{path:t,companyDisplayName:p.AnacondaCompanyName,type:d.InterpreterType.Conda,envPath:e,envName:r})})}};f=r([s.injectable(),i(0,s.inject(d.IInterpreterHelper)),i(1,s.inject(d.ICondaService)),i(2,s.inject(c.IFileSystem)),i(3,s.inject(l.IServiceContainer)),i(4,s.inject(u.ILogger))],f),t.CondaEnvFileService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(6),c=n(1),u=n(5),l=n(10),d=n(67),h=n(102);let p=class extends d.CacheableLocatorService{constructor(e,t,n,r,i){super("CondaEnvService",r),this.condaService=e,this.helper=t,this.logger=n,this.fileSystem=i}dispose(){}getInterpretersImplementation(e){return this.getSuggestionsFromConda()}getSuggestionsFromConda(){return o(this,void 0,void 0,function*(){try{const e=yield this.condaService.getCondaInfo();if(!e)return[];const t=yield f(e,this.condaService,this.fileSystem,this.helper);this._hasInterpreters.resolve(t.length>0);const n=yield this.condaService.getCondaEnvironments(!0);return Array.isArray(n)&&n.length>0&&t.forEach(e=>{const t=n.find(t=>this.fileSystem.arePathsSame(t.path,e.envPath));t&&(e.envName=t.name)}),t}catch(e){return this.logger.logError("Failed to get Suggestions from conda",e),[]}})}};function f(e,t,n,r){return o(this,void 0,void 0,function*(){const i=Array.isArray(e.envs)?e.envs:[];e.default_prefix&&e.default_prefix.length>0&&i.push(e.default_prefix);const s=i.map(e=>o(this,void 0,void 0,function*(){const i=t.getInterpreterPath(e);if(!(yield n.fileExists(i)))return;const o=yield r.getInterpreterInformation(i);return o?Object.assign({},o,{path:i,companyDisplayName:h.AnacondaCompanyName,type:l.InterpreterType.Conda,envPath:e}):void 0}));return Promise.all(s).then(e=>e.filter(e=>null!==e&&void 0!==e)).then(e=>e.map(e=>e))})}p=r([s.injectable(),i(0,s.inject(l.ICondaService)),i(1,s.inject(l.IInterpreterHelper)),i(2,s.inject(c.ILogger)),i(3,s.inject(u.IServiceContainer)),i(4,s.inject(a.IFileSystem))],p),t.CondaEnvService=p,t.parseCondaInfo=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(42),u=n(4),l=n(12),d=n(6),h=n(14),p=n(1),f=n(10),g=n(622),m=n(96),y=["/opt/*conda*/bin/conda","/usr/share/*conda*/bin/conda",m("~/*conda*/bin/conda")];t.CondaLocationsGlob=`{${y.join(",")}}`;const v=["/ProgramData/[Mm]iniconda*/Scripts/conda.exe","/ProgramData/[Aa]naconda*/Scripts/conda.exe",m("~/[Mm]iniconda*/Scripts/conda.exe"),m("~/[Aa]naconda*/Scripts/conda.exe"),m("~/AppData/Local/Continuum/[Mm]iniconda*/Scripts/conda.exe"),m("~/AppData/Local/Continuum/[Aa]naconda*/Scripts/conda.exe")];t.CondaLocationsGlobWin=`{${v.join(",")}}`,t.CondaGetEnvironmentPrefix="Outputting Environment Now...";let b=class{constructor(e,t,n,r,i,o,s,a,c){this.processServiceFactory=e,this.platform=t,this.fileSystem=n,this.persistentStateFactory=r,this.configService=i,this.logger=o,this.disposableRegistry=s,this.workspaceService=a,this.registryLookupForConda=c,this.condaHelper=new g.CondaHelper,this.addCondaPathChangedHandler()}get condaEnvironmentsFile(){const e=this.platform.isWindows?process.env.USERPROFILE:process.env.HOME||process.env.HOMEPATH;return e?a.join(e,".conda","environments.txt"):void 0}dispose(){}getCondaFile(){return o(this,void 0,void 0,function*(){return this.condaFile||(this.condaFile=this.getCondaFileImpl()),yield this.condaFile})}isCondaAvailable(){return o(this,void 0,void 0,function*(){return"boolean"==typeof this.isAvailable?this.isAvailable:this.getCondaVersion().then(e=>this.isAvailable=void 0!==e).catch(()=>this.isAvailable=!1)})}getCondaVersion(){return o(this,void 0,void 0,function*(){const e=yield this.processServiceFactory.create(),t=yield this.getCondaInfo().catch(()=>void 0);let n;if(t&&t.conda_version)n=t.conda_version;else{const t=yield this.getCondaFile().then(t=>e.exec(t,["--version"],{})).then(e=>e.stdout.trim()).catch(()=>void 0);n=t&&t.startsWith("conda ")?t.substring("conda ".length).trim():t}if(!n)return;const r=c.parse(n,!0);return r||(l.Logger.warn(`Unable to parse Version of Conda, ${n}`),new c.SemVer("0.0.1"))})}isCondaInCurrentPath(){return o(this,void 0,void 0,function*(){return(yield this.processServiceFactory.create()).exec("conda",["--version"]).then(e=>e.stdout.length>0).catch(()=>!1)})}getCondaInfo(){return o(this,void 0,void 0,function*(){try{const e=yield this.getCondaFile(),t=yield(yield this.processServiceFactory.create()).exec(e,["info","--json"]).then(e=>e.stdout);return JSON.parse(t)}catch(e){}})}isCondaEnvironment(e){return o(this,void 0,void 0,function*(){const t=a.dirname(e),n=this.platform.isWindows?a.join(t,"conda-meta"):a.join(t,"..","conda-meta");return this.fileSystem.directoryExists(n)})}getCondaEnvironment(e){return o(this,void 0,void 0,function*(){if(!(yield this.isCondaEnvironment(e)))return;let t=yield this.getCondaEnvironments(!1);const n=a.dirname(e),r=a.basename(n),i=-1!==["BIN","SCRIPTS"].indexOf(r.toUpperCase())?a.join(n,".."):n;let o=Array.isArray(t)?t.filter(e=>this.fileSystem.arePathsSame(e.path,i)):[];return 0===o.length&&(t=yield this.getCondaEnvironments(!0),o=Array.isArray(t)?t.filter(e=>this.fileSystem.arePathsSame(e.path,i)):[]),o.length>0?{name:o[0].name,path:i}:void 0})}getCondaEnvironments(e){return o(this,void 0,void 0,function*(){const t=this.persistentStateFactory.createGlobalPersistentState("CONDA_ENVIRONMENTS",void 0);if(!e&&t.value)return t.value.data;try{const e=yield this.getCondaFile(),n=yield(yield this.processServiceFactory.create()).exec(e,["env","list"]).then(e=>e.stdout),r=this.condaHelper.parseCondaEnvironmentNames(n);return yield t.updateValue({data:r}),r}catch(e){yield t.updateValue({data:void 0}),this.logger.logInformation("Failed to get conda environment list from conda",e)}})}getInterpreterPath(e){const t=this.platform.isWindows?"python.exe":a.join("bin","python");return a.join(e,t)}getCondaFileFromInterpreter(e,t){return o(this,void 0,void 0,function*(){const n=this.platform.isWindows?"conda.exe":"conda",r=this.platform.isWindows?"Scripts":"bin",i=e?a.dirname(e):"";let o=a.join(i,n);if(yield this.fileSystem.fileExists(o))return o;if(o=a.join(i,r,n),yield this.fileSystem.fileExists(o))return o;const s=t?i.indexOf(a.join("envs",t)):-1;if(s>0){const e=i.slice(0,s);if(o=a.join(e,n),yield this.fileSystem.fileExists(o))return o;if(o=a.join(e,r,n),yield this.fileSystem.fileExists(o))return o}})}detectCondaEnvironment(e){return e.type===f.InterpreterType.Conda||(e.displayName?e.displayName:"").toUpperCase().indexOf("ANACONDA")>=0||(e.companyDisplayName?e.companyDisplayName:"").toUpperCase().indexOf("ANACONDA")>=0||(e.companyDisplayName?e.companyDisplayName:"").toUpperCase().indexOf("CONTINUUM")>=0}getLatestVersion(e){const t=e.slice();if(t.sort((e,t)=>e.version&&t.version?c.compare(e.version.raw,t.version.raw):0),t.length>0)return t[t.length-1]}addCondaPathChangedHandler(){const e=this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this));this.disposableRegistry.push(e)}onDidChangeConfiguration(e){return o(this,void 0,void 0,function*(){-1!==(this.workspaceService.hasWorkspaceFolders?this.workspaceService.workspaceFolders.map(e=>e.uri):[void 0]).findIndex(t=>e.affectsConfiguration("python.condaPath",t))&&(this.condaFile=void 0)})}getCondaFileImpl(){return o(this,void 0,void 0,function*(){const e=this.configService.getSettings().condaPath;if(e&&""!==e)return e;if(yield this.isCondaInCurrentPath())return"conda";if(this.platform.isWindows&&this.registryLookupForConda){const e=(yield this.registryLookupForConda.getInterpreters()).filter(this.detectCondaEnvironment),t=this.getLatestVersion(e);if(t){const e=yield this.getCondaFileFromInterpreter(t.path,t.envName);if(e)return e}}return this.getCondaFileFromKnownLocations()})}getCondaFileFromKnownLocations(){return o(this,void 0,void 0,function*(){const e=this.platform.isWindows?t.CondaLocationsGlobWin:t.CondaLocationsGlob,n=(yield this.fileSystem.search(e).catch(e=>(l.Logger.warn("Default conda location search failed.",`Searching for default install locations for conda results in error: ${e}`),[]))).filter(e=>e.length>0);return 0===n.length?"conda":n[0]})}};b=r([s.injectable(),i(0,s.inject(h.IProcessServiceFactory)),i(1,s.inject(d.IPlatformService)),i(2,s.inject(d.IFileSystem)),i(3,s.inject(p.IPersistentStateFactory)),i(4,s.inject(p.IConfigurationService)),i(5,s.inject(p.ILogger)),i(6,s.inject(p.IDisposableRegistry)),i(7,s.inject(u.IWorkspaceService)),i(8,s.inject(f.IInterpreterLocatorService)),i(8,s.named(f.WINDOWS_REGISTRY_SERVICE)),i(8,s.optional())],b),t.CondaService=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);n(8);const i=n(102);t.CondaHelper=class{getDisplayName(e={}){const t=e["sys.version"];if(!t)return i.AnacondaDisplayName;const n=t.split("|",2);if(2===n.length){const e=n[1].trim();return this.isIdentifiableAsAnaconda(e)?e:`${e} : ${i.AnacondaDisplayName}`}return i.AnacondaDisplayName}parseCondaEnvironmentNames(e){const t=e.splitLines({trim:!1}),n=t.filter(e=>e.indexOf("*")>0);if(0===n.length)return;const i=n[0].indexOf(n[0].split("*")[1].trim()),o=[];return t.forEach(e=>{if(e.length<=i)return;let t=e.substring(0,i).trim();t.endsWith("*")&&(t=t.substring(0,t.length-1).trim());const n=e.substring(i).trim();(t=0===t.length?r.basename(n):t).length>0&&n.length>0&&o.push({name:t,path:n})}),o}isIdentifiableAsAnaconda(e){const t=e.toLowerCase();return i.AnacondaIdentfiers.some(e=>-1!==t.indexOf(e.toLowerCase()))}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(12),c=n(6),u=n(14),l=n(1),d=n(34),h=n(5),p=n(10),f=n(101),g=n(67);let m=class extends g.CacheableLocatorService{constructor(e,t,n,r){super("CurrentPathService",r),this.helper=e,this.processServiceFactory=t,this.pythonCommandProvider=n,this.fs=r.get(c.IFileSystem)}dispose(){}getInterpretersImplementation(e){return this.suggestionsFromKnownPaths(e)}suggestionsFromKnownPaths(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.get(l.IConfigurationService).getSettings(e),n=[...this.pythonCommandProvider.getCommands(),{command:t.pythonPath}];return Promise.all(n.map(e=>this.getInterpreter(e))).then(e=>e.filter(e=>e.length>0)).then(e=>Promise.all(e.map(e=>this.getInterpreterDetails(e)))).then(e=>e.filter(e=>!!e).map(e=>e))})}getInterpreterDetails(e){return o(this,void 0,void 0,function*(){return this.helper.getInterpreterInformation(e).then(t=>{if(t)return this._hasInterpreters.resolve(!0),Object.assign({},t,{path:e,type:t.type?t.type:p.InterpreterType.Unknown})})})}getInterpreter(e){return o(this,void 0,void 0,function*(){try{const t=yield this.processServiceFactory.create(),n=Array.isArray(e.args)?e.args:[];return t.exec(e.command,n.concat(["-c","import sys;print(sys.executable)"]),{}).then(e=>e.stdout.trim()).then(t=>o(this,void 0,void 0,function*(){return t.length>0&&(yield this.fs.fileExists(t))?t:(a.traceError(`Detection of Python Interpreter for Command ${e.command} and args ${n.join(" ")} failed as file ${t} does not exist`),"")})).catch(t=>(a.traceInfo(`Detection of Python Interpreter for Command ${e.command} and args ${n.join(" ")} failed`),""))}catch(t){return a.traceError(`Detection of Python Interpreter for Command ${e.command} failed`,t),""}})}};m=r([s.injectable(),i(0,s.inject(p.IInterpreterHelper)),i(1,s.inject(u.IProcessServiceFactory)),i(2,s.inject(f.IPythonInPathCommandProvider)),i(3,s.inject(h.IServiceContainer))],m),t.CurrentPathService=m;let y=class{constructor(e){this.platform=e}getCommands(){const e=["python3.7","python3.6","python3","python2","python"].map(e=>({command:e}));if(this.platform.osType!==d.OSType.Windows)return e;return e.concat(["3.7","3.6","3","2"].map(e=>({command:"py",args:[`-${e}`]})))}};y=r([s.injectable(),i(0,s.inject(c.IPlatformService))],y),t.PythonInPathCommandProvider=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(17),c=n(3),u=n(1),l=n(5),d=n(10),h=n(100),p=n(223);let f=class extends p.BaseVirtualEnvService{constructor(e,t){super(e,t,"VirtualEnvService")}};f=r([s.injectable(),i(0,s.inject(d.IVirtualEnvironmentsSearchPathProvider)),i(0,s.named("global")),i(1,s.inject(l.IServiceContainer))],f),t.GlobalVirtualEnvService=f;let g=class{constructor(e){this.config=e.get(u.IConfigurationService),this.virtualEnvMgr=e.get(h.IVirtualEnvironmentManager)}getSearchPaths(e){return o(this,void 0,void 0,function*(){const t=a.homedir(),n=this.config.getSettings(e).venvFolders.map(e=>c.join(t,e)),r=yield this.virtualEnvMgr.getPyEnvRoot(e);return r&&(n.push(r),n.push(c.join(r,"versions"))),n})}};g=r([s.injectable(),i(0,s.inject(l.IServiceContainer))],g),t.GlobalVirtualEnvironmentsSearchPathProvider=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4),c=n(12),u=n(16),l=n(5),d=n(10);let h=class{constructor(e,t){this.workspaceService=e,this.serviceContainer=t,this.watchersByResource=new Map}getWorkspaceVirtualEnvInterpreterWatcher(e){return o(this,void 0,void 0,function*(){const t=this.getResourceKey(e);if(!this.watchersByResource.has(t)){const n=u.createDeferred();this.watchersByResource.set(t,n.promise);const r=this.serviceContainer.get(d.IInterpreterWatcher,d.WORKSPACE_VIRTUAL_ENV_SERVICE);yield r.register(e),n.resolve(r)}return this.watchersByResource.get(t)})}getResourceKey(e){const t=e?this.workspaceService.getWorkspaceFolder(e):void 0;return t?t.uri.fsPath:""}};r([c.traceDecorators.verbose("Build the workspace interpreter watcher")],h.prototype,"getWorkspaceVirtualEnvInterpreterWatcher",null),h=r([s.injectable(),i(0,s.inject(a.IWorkspaceService)),i(1,s.inject(l.IServiceContainer))],h),t.InterpreterWatcherBuilder=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(6),u=n(1),l=n(91),d=n(5),h=n(10),p=n(145),f=n(67),g=n(82);let m=class extends f.CacheableLocatorService{constructor(e,t,n){super("KnownPathsService",n),this.knownSearchPaths=e,this.helper=t}dispose(){}getInterpretersImplementation(e){return this.suggestionsFromKnownPaths()}suggestionsFromKnownPaths(){const e=this.knownSearchPaths.getSearchPaths().map(e=>this.getInterpretersInDirectory(e));return Promise.all(e).then(e=>g(e)).then(e=>e.filter(e=>e.length>0)).then(e=>Promise.all(e.map(e=>this.getInterpreterDetails(e)))).then(e=>e.filter(e=>!!e).map(e=>e))}getInterpreterDetails(e){return o(this,void 0,void 0,function*(){const t=yield this.helper.getInterpreterInformation(e);if(t)return this._hasInterpreters.resolve(!0),Object.assign({},t,{path:e,type:h.InterpreterType.Unknown})})}getInterpretersInDirectory(e){return l.fsExistsAsync(e).then(t=>t?p.lookForInterpretersInDirectory(e):Promise.resolve([]))}};m=r([s.injectable(),i(0,s.inject(h.IKnownSearchPathsForInterpreters)),i(1,s.inject(h.IInterpreterHelper)),i(2,s.inject(d.IServiceContainer))],m),t.KnownPathsService=m;let y=class{constructor(e){this.serviceContainer=e}getSearchPaths(){const e=this.serviceContainer.get(u.ICurrentProcess),t=this.serviceContainer.get(c.IPlatformService),n=this.serviceContainer.get(u.IPathUtils),r=e.env[t.pathVariableName].split(n.delimiter).map(e=>e.trim()).filter(e=>e.length>0);return t.isWindows||(["/usr/local/bin","/usr/bin","/bin","/usr/sbin","/sbin","/usr/local/sbin"].forEach(e=>{r.push(e),r.push(a.join(n.home,e))}),process.env.HOME&&(r.push(a.join(n.home,"anaconda","bin")),r.push(a.join(n.home,"python","bin")))),r}};y=r([s.injectable(),i(0,s.inject(d.IServiceContainer))],y),t.KnownSearchPathsForInterpreters=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(4),l=n(12),d=n(6),h=n(14),p=n(1),f=n(5),g=n(10),m=n(101),y=n(67);let v=class extends y.CacheableLocatorService{constructor(e){super("PipEnvService",e,!0),this.helper=this.serviceContainer.get(g.IInterpreterHelper),this.processServiceFactory=this.serviceContainer.get(h.IProcessServiceFactory),this.workspace=this.serviceContainer.get(u.IWorkspaceService),this.fs=this.serviceContainer.get(d.IFileSystem),this.logger=this.serviceContainer.get(p.ILogger),this.configService=this.serviceContainer.get(p.IConfigurationService),this.pipEnvServiceHelper=this.serviceContainer.get(m.IPipEnvServiceHelper)}dispose(){}isRelatedPipEnvironment(e,t){return o(this,void 0,void 0,function*(){if(-1===t.indexOf(`${a.sep}${a.basename(e)}-`))return!1;return!!(yield this.getInterpreterPathFromPipenv(e,!0))})}get executable(){return this.configService.getSettings().pipenvPath}getInterpretersImplementation(e){const t=this.getPipenvWorkingDirectory(e);return t?this.getInterpreterFromPipenv(t).then(e=>e?[e]:[]).catch(()=>[]):Promise.resolve([])}getInterpreterFromPipenv(e){return o(this,void 0,void 0,function*(){const t=yield this.getInterpreterPathFromPipenv(e);if(!t)return;const n=yield this.helper.getInterpreterInformation(t);return n?(this._hasInterpreters.resolve(!0),yield this.pipEnvServiceHelper.trackWorkspaceFolder(t,c.Uri.file(e)),Object.assign({},n,{path:t,type:g.InterpreterType.Pipenv,pipEnvWorkspaceFolder:e})):void 0})}getPipenvWorkingDirectory(e){const t=e?this.workspace.getWorkspaceFolder(e):void 0;return t?t.uri.fsPath:this.workspace.rootPath}getInterpreterPathFromPipenv(e,t=!1){return o(this,void 0,void 0,function*(){if(yield this.checkIfPipFileExists(e))try{const n=yield this.invokePipenv("--py",e);return n&&(yield this.fs.fileExists(n))?n:void 0}catch(e){if(l.traceError("PipEnv identification failed",e),t)return;const n=e.message||e;this.serviceContainer.get(u.IApplicationShell).showWarningMessage(`Workspace contains pipfile but attempt to run 'pipenv --py' failed with ${n}. Make sure pipenv is on the PATH.`)}})}checkIfPipFileExists(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.get(p.ICurrentProcess).env.PIPENV_PIPFILE;return!("string"!=typeof t||!(yield this.fs.fileExists(a.join(e,t))))||!!(yield this.fs.fileExists(a.join(e,"Pipfile")))})}invokePipenv(e,t){return o(this,void 0,void 0,function*(){try{const n=yield this.processServiceFactory.create(c.Uri.file(t)),r=this.executable,i=yield n.exec(r,[e],{cwd:t});if(i){const e=i.stdout?i.stdout.trim():"",t=i.stderr?i.stderr.trim():"";if(t.length>0&&0===e.length)throw new Error(t);return e}}catch(e){const t=this.serviceContainer.get(d.IPlatformService),n=this.serviceContainer.get(p.ICurrentProcess),r={LC_ALL:n.env.LC_ALL,LANG:n.env.LANG};r[t.pathVariableName]=n.env[t.pathVariableName],this.logger.logWarning("Error in invoking PipEnv",e),this.logger.logWarning(`Relevant Environment Variables ${JSON.stringify(r,void 0,4)}`);const i=e.message||e;this.serviceContainer.get(u.IApplicationShell).showWarningMessage(`Workspace contains pipfile but attempt to run 'pipenv --venv' failed with '${i}'. Make sure pipenv is on the PATH.`)}})}};v=r([s.injectable(),i(0,s.inject(f.IServiceContainer))],v),t.PipEnvService=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(6),l=n(1);let d=class{constructor(e,t){this.statefactory=e,this.fs=t,this.initialized=!1,this.state=this.statefactory.createGlobalPersistentState("PipEnvInformation",[])}getPipEnvInfo(e){return o(this,void 0,void 0,function*(){yield this.initializeStateStore();const t=this.state.value.find(t=>this.fs.arePathsSame(t.pythonPath,e));return t?{workspaceFolder:c.Uri.file(t.workspaceFolder),envName:t.envName}:void 0})}trackWorkspaceFolder(e,t){return o(this,void 0,void 0,function*(){yield this.initializeStateStore();const n=[...this.state.value].filter(t=>!this.fs.arePathsSame(t.pythonPath,e)),r=a.basename(t.fsPath);n.push({pythonPath:e,workspaceFolder:t.fsPath,envName:r}),yield this.state.updateValue(n)})}initializeStateStore(){return o(this,void 0,void 0,function*(){if(this.initialized)return;const e=(yield Promise.all(this.state.value.map(e=>o(this,void 0,void 0,function*(){return(yield this.fs.fileExists(e.pythonPath))?e:void 0})))).filter(e=>!!e);yield this.state.updateValue(e),this.initialized=!0})}};d=r([s.injectable(),i(0,s.inject(l.IPersistentStateFactory)),i(1,s.inject(u.IFileSystem))],d),t.PipEnvServiceHelper=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(28),a=n(0),c=n(3),u=n(6),l=n(1),d=n(34),h=n(136),p=n(5),f=n(10),g=n(67),m=n(102),y=n(82),v=["PYLAUNCHER"];let b=class extends g.CacheableLocatorService{constructor(e,t,n){super("WindowsRegistryService",n),this.registry=e,this.platform=t,this.pathUtils=n.get(l.IPathUtils)}dispose(){}getInterpretersImplementation(e){return o(this,void 0,void 0,function*(){return this.platform.isWindows?this.getInterpretersFromRegistry():[]})}getInterpretersFromRegistry(){return o(this,void 0,void 0,function*(){const e=this.platform.is64bit?void 0:d.Architecture.x86,t=[this.getCompanies(u.RegistryHive.HKCU,e),this.getCompanies(u.RegistryHive.HKLM,d.Architecture.x86)];this.platform.is64bit&&t.push(this.getCompanies(u.RegistryHive.HKLM,d.Architecture.x64));const n=yield Promise.all(t),r=yield Promise.all(y(n).filter(e=>void 0!==e&&null!==e).map(e=>this.getInterpretersForCompany(e.companyKey,e.hive,e.arch)));return y(r).filter(e=>void 0!==e&&null!==e).map(e=>e).reduce((e,t)=>(-1===e.findIndex(e=>e.path.toUpperCase()===t.path.toUpperCase())&&e.push(t),e),[])})}getCompanies(e,t){return o(this,void 0,void 0,function*(){return this.registry.getKeys("\\Software\\Python",e,t).then(n=>n.filter(e=>-1===v.indexOf(this.pathUtils.basename(e).toUpperCase())).map(n=>({companyKey:n,hive:e,arch:t})))})}getInterpretersForCompany(e,t,n){return o(this,void 0,void 0,function*(){const r=yield this.registry.getKeys(e,t,n);return Promise.all(r.map(r=>this.getInreterpreterDetailsForCompany(r,e,t,n)))})}getInreterpreterDetailsForCompany(e,t,n,r){const i=`${e}\\InstallPath`;return this.registry.getValue(i,n,r).then(o=>o?Promise.all([Promise.resolve(o),this.registry.getValue(i,n,r,"ExecutablePath"),this.registry.getValue(e,n,r,"SysVersion"),this.getCompanyDisplayName(t,n,r)]).then(([e,t,n,r])=>({installPath:e,executablePath:t,version:n,companyDisplayName:r=-1===m.AnacondaCompanyNames.indexOf(r)?r:m.AnacondaCompanyName})):Promise.resolve(null)).then(t=>o(this,void 0,void 0,function*(){if(!t)return;const n=t.executablePath&&t.executablePath.length>0?t.executablePath:c.join(t.installPath,"python.exe"),r=yield this.serviceContainer.get(f.IInterpreterHelper).getInterpreterInformation(n);if(!r)return;const i=t.version?this.pathUtils.basename(t.version):this.pathUtils.basename(e);return this._hasInterpreters.resolve(!0),Object.assign({},r,{path:n,version:r.version||h.parsePythonVersion(i),companyDisplayName:t.companyDisplayName,type:f.InterpreterType.Unknown})})).then(e=>e?s.pathExists(e.path).catch(()=>!1).then(t=>t?e:null):null).catch(i=>(console.error(`Failed to retrieve interpreter details for company ${t},tag: ${e}, hive: ${n}, arch: ${r}`),console.error(i),null))}getCompanyDisplayName(e,t,n){return o(this,void 0,void 0,function*(){const r=yield this.registry.getValue(e,t,n,"DisplayName");if(r&&r.length>0)return r;const i=this.pathUtils.basename(e);return"PYTHONCORE"===i.toUpperCase()?"Python Software Foundation":i})}};b=r([a.injectable(),i(0,a.inject(u.IRegistry)),i(1,a.inject(u.IPlatformService)),i(2,a.inject(p.IServiceContainer))],b),t.WindowsRegistryService=b},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(96),u=n(4),l=n(1),d=n(5),h=n(10),p=n(223);let f=class extends p.BaseVirtualEnvService{constructor(e,t,n){super(e,t,"WorkspaceVirtualEnvService",!0),this.builder=n}getInterpreterWatchers(e){return o(this,void 0,void 0,function*(){return[yield this.builder.getWorkspaceVirtualEnvInterpreterWatcher(e)]})}};f=r([s.injectable(),i(0,s.inject(h.IVirtualEnvironmentsSearchPathProvider)),i(0,s.named("workspace")),i(1,s.inject(d.IServiceContainer)),i(2,s.inject(h.IInterpreterWatcherBuilder))],f),t.WorkspaceVirtualEnvService=f;let g=class{constructor(e){this.serviceContainer=e}getSearchPaths(e){return o(this,void 0,void 0,function*(){const t=[],n=this.serviceContainer.get(l.IConfigurationService).getSettings(e).venvPath;n&&t.push(c(n));const r=this.serviceContainer.get(u.IWorkspaceService);if(Array.isArray(r.workspaceFolders)&&r.workspaceFolders.length>0){let n;if(e&&r.workspaceFolders.length>1){const t=r.getWorkspaceFolder(e);t&&(n=t.uri.fsPath)}else n=r.workspaceFolders[0].uri.fsPath;n&&(t.push(n),t.push(a.join(n,".direnv")))}return t})}};g=r([s.injectable(),i(0,s.inject(d.IServiceContainer))],g),t.WorkspaceVirtualEnvironmentsSearchPathProvider=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(4);n(8);const l=n(12),d=n(6),h=n(14),p=n(1);let f=class{constructor(e,t,n,r){this.disposableRegistry=e,this.workspaceService=t,this.platformService=n,this.pythonExecFactory=r,this.timers=new Map,this.fsWatchers=[],this.didCreate=new c.EventEmitter,e.push(this)}get onDidCreate(){return this.didCreate.event}dispose(){this.clearTimers()}register(e){return o(this,void 0,void 0,function*(){if(this.fsWatchers.length>0)return;const t=e?this.workspaceService.getWorkspaceFolder(e):void 0,n=this.platformService.isWindows?"python.exe":"python",r=[a.join("*",n),a.join("*","*",n)];for(const e of r){const n=t?new c.RelativePattern(t.uri.fsPath,e):e;l.Logger.verbose(`Create file systemwatcher with pattern ${e}`);const r=this.workspaceService.createFileSystemWatcher(n);r.onDidCreate(e=>this.createHandler(e),this,this.disposableRegistry),this.disposableRegistry.push(r),this.fsWatchers.push(r)}})}createHandler(e){return o(this,void 0,void 0,function*(){this.didCreate.fire(),this.notifyCreationWhenReady(e.fsPath).ignoreErrors()})}notifyCreationWhenReady(e){return o(this,void 0,void 0,function*(){const t=this.timers.has(e)?this.timers.get(e).counter+1:0;if(yield this.isValidExecutable(e))return t>0&&this.didCreate.fire(),this.timers.delete(e);if(t>30)return this.didCreate.fire(),void this.timers.delete(e);const n=setTimeout(()=>this.notifyCreationWhenReady(e).ignoreErrors(),2e3);this.timers.set(e,{timer:n,counter:t})})}clearTimers(){this.timers.forEach(e=>clearTimeout(e.timer)),this.timers.clear()}isValidExecutable(e){return o(this,void 0,void 0,function*(){return void 0!==(yield(yield this.pythonExecFactory.create({pythonPath:e})).getInterpreterInformation().catch(()=>void 0))})}};r([l.traceDecorators.verbose("Register Intepreter Watcher")],f.prototype,"register",null),r([l.traceDecorators.verbose("Intepreter Watcher change handler")],f.prototype,"createHandler",null),f=r([s.injectable(),i(0,s.inject(p.IDisposableRegistry)),i(1,s.inject(u.IWorkspaceService)),i(2,s.inject(d.IPlatformService)),i(3,s.inject(h.IPythonExecutionFactory))],f),t.WorkspaceVirtualEnvWatcherService=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(4),u=n(6),l=n(14),d=n(23),h=n(1),p=n(224),f=n(22),g=n(5),m=n(10),y=["pyvenv.cfg",a.join("..","pyvenv.cfg")];let v=class{constructor(e){this.serviceContainer=e,this.processServiceFactory=e.get(l.IProcessServiceFactory),this.fs=e.get(u.IFileSystem),this.pipEnvService=e.get(m.IPipEnvService),this.workspaceService=e.get(c.IWorkspaceService)}getEnvironmentName(e,t){return o(this,void 0,void 0,function*(){const n=this.workspaceService.hasWorkspaceFolders?this.workspaceService.workspaceFolders[0].uri:void 0,r=t?this.workspaceService.getWorkspaceFolder(t):void 0,i=r?r.uri:n,o=a.basename(a.dirname(a.dirname(e)));return i&&(yield this.pipEnvService.isRelatedPipEnvironment(i.fsPath,e))?a.basename(i.fsPath):o})}getEnvironmentType(e,t){return o(this,void 0,void 0,function*(){return(yield this.isVenvEnvironment(e))?m.InterpreterType.Venv:(yield this.isPyEnvEnvironment(e,t))?m.InterpreterType.Pyenv:(yield this.isPipEnvironment(e,t))?m.InterpreterType.Pipenv:(yield this.isVirtualEnvironment(e))?m.InterpreterType.VirtualEnv:m.InterpreterType.Unknown})}isVenvEnvironment(e){return o(this,void 0,void 0,function*(){const t=a.dirname(e),n=y.map(e=>a.join(t,e));for(const e of n)if(yield this.fs.fileExists(e))return!0;return!1})}isPyEnvEnvironment(e,t){return o(this,void 0,void 0,function*(){const n=yield this.getPyEnvRoot(t);return n&&e.startsWith(n)})}isPipEnvironment(e,t){return o(this,void 0,void 0,function*(){const n=this.workspaceService.hasWorkspaceFolders?this.workspaceService.workspaceFolders[0].uri:void 0,r=t?this.workspaceService.getWorkspaceFolder(t):void 0,i=r?r.uri:n;return!(!i||!(yield this.pipEnvService.isRelatedPipEnvironment(i.fsPath,e)))})}getPyEnvRoot(e){return o(this,void 0,void 0,function*(){if(this.pyEnvRoot)return this.pyEnvRoot;const t=this.serviceContainer.get(h.ICurrentProcess).env.PYENV_ROOT;if(t)return this.pyEnvRoot=t;try{const t=yield(yield this.processServiceFactory.create(e)).exec("pyenv",["root"]);if(t.stdout.trim().length>0)return this.pyEnvRoot=t.stdout.trim()}catch(e){f.noop()}const n=this.serviceContainer.get(h.IPathUtils);return this.pyEnvRoot=a.join(n.home,".pyenv")})}isVirtualEnvironment(e){return o(this,void 0,void 0,function*(){const t=this.getTerminalActivationProviderForVirtualEnvs(),n=p.getNamesAndValues(d.TerminalShellType).filter(e=>t.isShellSupported(e.value)).map(e=>e.value);for(const r of n){const n=yield t.getActivationCommandsForInterpreter(e,r);if(n&&n.length>0)return!0}return!1})}getTerminalActivationProviderForVirtualEnvs(){const e=this.serviceContainer.get(u.IPlatformService).isWindows?"commandPromptAndPowerShell":"bashCShellFish";return this.serviceContainer.get(d.ITerminalActivationCommandProvider,e)}};v=r([s.injectable(),i(0,s.inject(g.IServiceContainer))],v),t.VirtualEnvironmentManager=v},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(69),o=n(0);try{o.decorate(o.injectable(),i.EventEmitter)}catch(e){console.warn("Failed to decorate EventEmitter for DI (possibly already decorated by another Extension)",e)}let s=class{constructor(e){this.container=e}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}};s=r([o.injectable()],s),t.ServiceContainer=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});let i=class{constructor(e){this.container=e}add(e,t,n){n?this.container.bind(e).to(t).whenTargetNamed(n):this.container.bind(e).to(t)}addFactory(e,t){this.container.bind(e).toFactory(t)}addSingleton(e,t,n){n?this.container.bind(e).to(t).inSingletonScope().whenTargetNamed(n):this.container.bind(e).to(t).inSingletonScope()}addSingletonInstance(e,t,n){n?this.container.bind(e).toConstantValue(t).whenTargetNamed(n):this.container.bind(e).toConstantValue(t)}get(e,t){return t?this.container.getNamed(e,t):this.container.get(e)}getAll(e,t){return t?this.container.getAllNamed(e,t):this.container.getAll(e)}rebind(e,t,n){n?this.container.rebind(e).to(t).whenTargetNamed(n):this.container.rebind(e).to(t)}rebindInstance(e,t,n){n?this.container.rebind(e).toConstantValue(t).whenTargetNamed(n):this.container.rebind(e).toConstantValue(t)}};i=r([n(0).injectable()],i),t.ServiceManager=i},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(4),o=n(11),s=n(13),a=n(7),c=n(9),u=n(35);t.LinterCommands=class{constructor(e){this.serviceContainer=e,this.disposables=[],this.linterManager=this.serviceContainer.get(u.ILinterManager),this.appShell=this.serviceContainer.get(i.IApplicationShell),this.documentManager=this.serviceContainer.get(i.IDocumentManager);const t=this.serviceContainer.get(i.ICommandManager);t.registerCommand(o.Commands.Set_Linter,this.setLinterAsync.bind(this)),t.registerCommand(o.Commands.Enable_Linter,this.enableLintingAsync.bind(this)),t.registerCommand(o.Commands.Run_Linter,this.runLinting.bind(this))}dispose(){this.disposables.forEach(e=>e.dispose())}setLinterAsync(){return r(this,void 0,void 0,function*(){const e=this.linterManager.getAllLinterInfos(),t=["Disable Linting",...e.map(e=>e.id).sort()],n=yield this.linterManager.getActiveLinters(!0,this.settingsUri);let r;switch(n.length){case 0:r="none";break;case 1:r=n[0].id;break;default:r="multiple selected"}const i={matchOnDetail:!0,matchOnDescription:!0,placeHolder:`current: ${r}`},o=yield this.appShell.showQuickPick(t,i);if(void 0!==o)if("Disable Linting"===o)yield this.linterManager.enableLintingAsync(!1),a.sendTelemetryEvent(c.EventName.SELECT_LINTER,void 0,{enabled:!1});else{const t=e.findIndex(e=>e.id===o);if(n.length>1&&"Yes"!==(yield this.appShell.showWarningMessage(s.Linters.replaceWithSelectedLinter().format(o),"Yes","No")))return;yield this.linterManager.setActiveLintersAsync([e[t].product],this.settingsUri),a.sendTelemetryEvent(c.EventName.SELECT_LINTER,void 0,{tool:o,enabled:!0})}})}enableLintingAsync(){return r(this,void 0,void 0,function*(){const e=["on","off"],t={matchOnDetail:!0,matchOnDescription:!0,placeHolder:`current: ${(yield this.linterManager.isLintingEnabled(!0,this.settingsUri))?e[0]:e[1]}`},n=yield this.appShell.showQuickPick(e,t);if(void 0!==n){const t=n===e[0];yield this.linterManager.enableLintingAsync(t,this.settingsUri)}})}runLinting(){return this.serviceContainer.get(u.ILintingEngine).lintOpenPythonFiles()}get settingsUri(){return this.documentManager.activeTextEditor?this.documentManager.activeTextEditor.document.uri:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(637),i=n(638),o=n(651),s=n(35);t.registerTypes=function(e){e.addSingleton(s.ILintingEngine,o.LintingEngine),e.addSingleton(s.ILinterManager,i.LinterManager),e.add(s.IAvailableLinterActivator,r.AvailableLinterActivator)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4);n(8);const c=n(12),u=n(1),l=n(13);let d=class{constructor(e,t,n,r){this.appShell=e,this.installer=t,this.workspaceConfig=n,this.configService=r}promptIfLinterAvailable(e,t){return o(this,void 0,void 0,function*(){return!!this.isFeatureEnabled&&(!!this.isLinterUsingDefaultConfiguration(e,t)&&(!!(yield this.isLinterAvailable(e.product,t))&&this.promptToConfigureAvailableLinter(e)))})}promptToConfigureAvailableLinter(e){return o(this,void 0,void 0,function*(){const t=[{title:`Enable ${e.id}`,enabled:!0},{title:`Disable ${e.id}`,enabled:!1}],n=yield this.appShell.showInformationMessage(l.Linters.installedButNotEnabled().format(e.id),...t);return!!n&&(yield e.enableAsync(n.enabled),!0)})}isLinterAvailable(e,t){return o(this,void 0,void 0,function*(){return this.installer.isInstalled(e,t).catch(t=>(c.traceError(`[WARNING]: Failed to discover if linter ${e} is installed.`,t),!1))})}isLinterUsingDefaultConfiguration(e,t){const n=this.workspaceConfig.getConfiguration("python.linting",t).inspect(e.enabledSettingName);return void 0===n.globalValue&&void 0===n.workspaceValue&&void 0===n.workspaceFolderValue}get isFeatureEnabled(){return!this.configService.getSettings().jediEnabled}};d=r([s.injectable(),i(0,s.inject(a.IApplicationShell)),i(1,s.inject(u.IInstaller)),i(2,s.inject(a.IWorkspaceService)),i(3,s.inject(u.IConfigurationService))],d),t.AvailableLinterActivator=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4),c=n(1),u=n(5),l=n(639),d=n(643),h=n(644),p=n(645),f=n(646),g=n(647),m=n(648),y=n(649),v=n(650),b=n(35);let S=class{constructor(e,t){this.serviceContainer=e,this.workspaceService=t,this.checkedForInstalledLinters=new Set,this.configService=e.get(c.IConfigurationService),this.linters=[new h.LinterInfo(c.Product.bandit,"bandit",this.configService),new h.LinterInfo(c.Product.flake8,"flake8",this.configService),new h.PylintLinterInfo(this.configService,this.workspaceService,[".pylintrc","pylintrc"]),new h.LinterInfo(c.Product.mypy,"mypy",this.configService),new h.LinterInfo(c.Product.pep8,"pep8",this.configService),new h.LinterInfo(c.Product.prospector,"prospector",this.configService),new h.LinterInfo(c.Product.pydocstyle,"pydocstyle",this.configService),new h.LinterInfo(c.Product.pylama,"pylama",this.configService)]}getAllLinterInfos(){return this.linters}getLinterInfo(e){const t=this.linters.findIndex((t,n,r)=>t.product===e);if(t>=0)return this.linters[t];throw new Error("Invalid linter")}isLintingEnabled(e,t){return o(this,void 0,void 0,function*(){const n=this.configService.getSettings(t),r=yield this.getActiveLinters(e,t);return n.linting.enabled&&r.length>0})}enableLintingAsync(e,t){return o(this,void 0,void 0,function*(){yield this.configService.updateSetting("linting.enabled",e,t)})}getActiveLinters(e,t){return o(this,void 0,void 0,function*(){return e||(yield this.enableUnconfiguredLinters(t)),this.linters.filter(e=>e.isEnabled(t))})}setActiveLintersAsync(e,t){return o(this,void 0,void 0,function*(){if(e.filter(e=>{return-1!==this.linters.findIndex(t=>t.product===e)}).length>0){const n=yield this.getActiveLinters(!0,t);for(const e of n)yield e.enableAsync(!1,t);if(e.length>0){const n=this.linters.filter(t=>e.findIndex(e=>t.product===e)>=0);for(const e of n)yield e.enableAsync(!0,t);yield this.enableLintingAsync(!0,t)}}})}createLinter(e,t,n,r){return o(this,void 0,void 0,function*(){if(!(yield this.isLintingEnabled(!0,r)))return new class{constructor(e){this.configService=e}get info(){return new h.LinterInfo(c.Product.pylint,"pylint",this.configService)}lint(e,t){return o(this,void 0,void 0,function*(){return[]})}}(this.configService);const i="Linter manager: Unknown linter";switch(e){case c.Product.bandit:return new l.Bandit(t,n);case c.Product.flake8:return new d.Flake8(t,n);case c.Product.pylint:return new v.Pylint(t,n);case c.Product.mypy:return new p.MyPy(t,n);case c.Product.prospector:return new g.Prospector(t,n);case c.Product.pylama:return new y.PyLama(t,n);case c.Product.pydocstyle:return new m.PyDocStyle(t,n);case c.Product.pep8:return new f.Pep8(t,n);default:n.get(c.ILogger).logError(i)}throw new Error(i)})}enableUnconfiguredLinters(e){return o(this,void 0,void 0,function*(){const t=this.configService.getSettings(e);if(!t.linting.pylintEnabled||!t.linting.enabled)return;const n=`${this.workspaceService.getWorkspaceFolderIdentifier(e)}${t.pythonPath}`;if(this.checkedForInstalledLinters.has(n))return;this.checkedForInstalledLinters.add(n);const r=this.linters.find(e=>"pylint"===e.id);yield this.serviceContainer.get(b.IAvailableLinterActivator).promptIfLinterAvailable(r,e)})}};S=r([s.injectable(),i(0,s.inject(u.IServiceContainer)),i(1,s.inject(a.IWorkspaceService))],S),t.LinterManager=S},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const i=n(1),o=n(58),s=n(35),a={LOW:s.LintMessageSeverity.Information,MEDIUM:s.LintMessageSeverity.Warning,HIGH:s.LintMessageSeverity.Error};t.Bandit=class extends o.BaseLinter{constructor(e,t){super(i.Product.bandit,e,t)}runLinter(e,t){return r(this,void 0,void 0,function*(){const n=yield this.run(["-f","custom","--msg-template","{line},0,{severity},{test_id}:{msg}","-n","-1",e.uri.fsPath],e,t);return n.forEach(e=>{e.severity=a[e.type]}),n})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(641),i=n(642);t.ErrorHandler=class{constructor(e,t,n){const o=new i.StandardErrorHandler(e,t,n);this.handler=new r.NotInstalledErrorHandler(e,t,n),this.handler.setNextHandler(o)}handleError(e,t,n){return this.handler.handleError(e,t,n)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(14),o=n(35),s=n(225);t.NotInstalledErrorHandler=class extends s.BaseErrorHandler{constructor(e,t,n){super(e,t,n)}handleError(e,t,n){return r(this,void 0,void 0,function*(){if(yield(yield this.serviceContainer.get(i.IPythonExecutionFactory).create({resource:t})).isModuleInstalled(n.moduleName))return!!this.nextHandler&&this.nextHandler.handleError(e,t,n);this.installer.promptToInstall(this.product,t).catch(this.logger.logError.bind(this,"NotInstalledErrorHandler.promptToInstall"));const r=`Linter '${this.serviceContainer.get(o.ILinterManager).getLinterInfo(n.product).id}' is not installed. Please install it or select another linter".`;return this.outputChannel.appendLine(`\n${r}\n${e}`),this.logger.logWarning(r,e),!0})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(35),s=n(225);t.StandardErrorHandler=class extends s.BaseErrorHandler{constructor(e,t,n){super(e,t,n)}handleError(e,t,n){return r(this,void 0,void 0,function*(){if("string"==typeof e&&e.indexOf("OSError: [Errno 2] No such file or directory: '/")>0)return this.nextHandler?this.nextHandler.handleError(e,t,n):Promise.resolve(!1);const r=this.serviceContainer.get(o.ILinterManager).getLinterInfo(n.product);return this.logger.logError(`There was an error in running the linter ${r.id}`,e),this.outputChannel.appendLine(`Linting with ${r.id} failed.`),this.outputChannel.appendLine(e.toString()),this.displayLinterError(r.id,t),!0})}displayLinterError(e,t){return r(this,void 0,void 0,function*(){const t=`There was an error in running the linter '${e}'`;yield i.window.showErrorMessage(t,"View Errors"),this.outputChannel.show()})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const i=n(1),o=n(58),s=1;t.Flake8=class extends o.BaseLinter{constructor(e,t){super(i.Product.flake8,e,t,s)}runLinter(e,t){return r(this,void 0,void 0,function*(){const n=yield this.run(["--format=%(row)d,%(col)d,%(code).1s,%(code)s:%(text)s",e.uri.fsPath],e,t);return n.forEach(e=>{e.severity=this.parseMessagesSeverity(e.type,this.pythonSettings.linting.flake8CategorySeverity)}),n})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(1);class s{constructor(e,t,n,r=[]){this.configService=n,this._product=e,this._id=t,this._configFileNames=r}get id(){return this._id}get product(){return this._product}get pathSettingName(){return`${this.id}Path`}get argsSettingName(){return`${this.id}Args`}get enabledSettingName(){return`${this.id}Enabled`}get configFileNames(){return this._configFileNames}enableAsync(e,t){return r(this,void 0,void 0,function*(){return this.configService.updateSetting(`linting.${this.enabledSettingName}`,e,t)})}isEnabled(e){return this.configService.getSettings(e).linting[this.enabledSettingName]}pathName(e){return this.configService.getSettings(e).linting[this.pathSettingName]}linterArgs(e){const t=this.configService.getSettings(e).linting[this.argsSettingName];return Array.isArray(t)?t:[]}getExecutionInfo(e,t){const n=this.pathName(t),r=this.linterArgs(t).concat(e);let o;return i.basename(n)===n&&(o=n),{execPath:n,moduleName:o,args:r,product:this.product}}}t.LinterInfo=s;t.PylintLinterInfo=class extends s{constructor(e,t,n=[]){super(o.Product.pylint,"pylint",e,n),this.workspaceService=t}isEnabled(e){const t=super.isEnabled(e);if(!t||this.configService.getSettings(e).jediEnabled)return t;const n=this.workspaceService.getConfiguration("python",e).inspect("linting.pylintEnabled");return!(!n||void 0===n.globalValue&&(void 0===n.workspaceFolderValue||void 0===n.workspaceValue))&&t}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const i=n(1),o=n(58);t.REGEX="(?<file>[^:]+):(?<line>\\d+)(:(?<column>\\d+))?: (?<type>\\w+): (?<message>.*)\\r?(\\n|$)";t.MyPy=class extends o.BaseLinter{constructor(e,t){super(i.Product.mypy,e,t)}runLinter(e,n){return r(this,void 0,void 0,function*(){const r=yield this.run([e.uri.fsPath],e,n,t.REGEX);return r.forEach(e=>{e.severity=this.parseMessagesSeverity(e.type,this.pythonSettings.linting.mypyCategorySeverity),e.code=e.type}),r})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const i=n(1),o=n(58),s=1;t.Pep8=class extends o.BaseLinter{constructor(e,t){super(i.Product.pep8,e,t,s)}runLinter(e,t){return r(this,void 0,void 0,function*(){const n=yield this.run(["--format=%(row)d,%(col)d,%(code).1s,%(code)s:%(text)s",e.uri.fsPath],e,t);return n.forEach(e=>{e.severity=this.parseMessagesSeverity(e.type,this.pythonSettings.linting.pep8CategorySeverity)}),n})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3);n(8);const o=n(1),s=n(58);t.Prospector=class extends s.BaseLinter{constructor(e,t){super(o.Product.prospector,e,t)}runLinter(e,t){return r(this,void 0,void 0,function*(){const n=this.getWorkspaceRootPath(e),r=i.relative(n,e.uri.fsPath);return this.run(["--absolute-paths","--output-format=json",r],e,t)})}parseMessages(e,t,n,i){return r(this,void 0,void 0,function*(){let t;try{t=JSON.parse(e)}catch(t){return this.outputChannel.appendLine(`${"#".repeat(10)}Linting Output - ${this.info.id}${"#".repeat(10)}`),this.outputChannel.append(e),this.logger.logError("Failed to parse Prospector output",t),[]}return t.messages.filter((e,t)=>t<=this.pythonSettings.linting.maxNumberOfProblems).map(e=>{const t=null===e.location.line||isNaN(e.location.line)?1:e.location.line;return{code:e.code,message:e.message,column:e.location.character,line:t,type:e.code,provider:`${this.info.id} - ${e.source}`}})})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3);n(8);const o=n(1),s=n(47),a=n(58),c=n(35);t.PyDocStyle=class extends a.BaseLinter{constructor(e,t){super(o.Product.pydocstyle,e,t)}runLinter(e,t){return r(this,void 0,void 0,function*(){const n=yield this.run([e.uri.fsPath],e,t);return n.forEach(e=>{e.severity=c.LintMessageSeverity.Warning}),n})}parseMessages(e,t,n,o){return r(this,void 0,void 0,function*(){let n=e.split(/\r?\n/g);const r=i.basename(t.uri.fsPath),o=2*this.pythonSettings.linting.maxNumberOfProblems,a=n.filter(e=>e.length>0);n=[];for(let e=0;e<a.length/2;e+=1)n.push(a[2*e]+a[2*e+1]);return n.filter((e,t)=>t<o&&e.indexOf(":")>=0).map(e=>s.IS_WINDOWS?e.substring(e.indexOf(`${r}:`)+r.length+1).trim():e.substring(e.indexOf(":")+1).trim()).map(e=>{try{if(0===e.trim().length)return;const n=parseInt(e.substring(0,e.indexOf(" ")),10),r=e.substring(e.indexOf(":")+1).trim(),i=r.substring(0,r.indexOf(":")).trim(),o=r.substring(r.indexOf(":")+1).trim(),s=t.lineAt(n-1).text,a=s.trim();return{code:i,message:o,column:s.indexOf(a),line:n,type:"",provider:this.info.id}}catch(t){return void this.logger.logError(`Failed to parse pydocstyle line '${e}'`,t)}}).filter(e=>void 0!==e).map(e=>e)})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),n(8);const i=n(1),o=n(58),s=n(35),a="(?<file>.py):(?<line>\\d+):(?<column>\\d+): \\[(?<type>\\w+)\\] (?<code>\\w\\d+):? (?<message>.*)\\r?(\\n|$)",c=1;t.PyLama=class extends o.BaseLinter{constructor(e,t){super(i.Product.pylama,e,t,c)}runLinter(e,t){return r(this,void 0,void 0,function*(){const n=yield this.run(["--format=parsable",e.uri.fsPath],e,t,a);return n.forEach(e=>{e.severity=s.LintMessageSeverity.Warning}),n})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(17),o=n(3);n(8);const s=n(6),a=n(1),c=n(58),u="pylintrc",l=".pylintrc",d="(?<line>\\d+),(?<column>-?\\d+),(?<type>\\w+),(?<code>[\\w-]+):(?<message>.*)\\r?(\\n|$)";class h extends c.BaseLinter{constructor(e,t){super(a.Product.pylint,e,t),this.fileSystem=t.get(s.IFileSystem),this.platformService=t.get(s.IPlatformService)}runLinter(e,t){return r(this,void 0,void 0,function*(){let n=[];const r=e.uri,i=this.getWorkspaceRootPath(e);!this.configService.getSettings(r).linting.pylintUseMinimalCheckers||0!==this.info.linterArgs(r).length||(yield h.hasConfigrationFileInWorkspace(this.fileSystem,o.dirname(r.fsPath),i))||(yield h.hasConfigurationFile(this.fileSystem,this.getWorkspaceRootPath(e),this.platformService))||(n=["--disable=all","--enable=F,unreachable,duplicate-key,unnecessary-semicolon,global-variable-not-assigned,unused-variable,unused-wildcard-import,binary-op-exception,bad-format-string,anomalous-backslash-in-string,bad-open-mode,E0001,E0011,E0012,E0100,E0101,E0102,E0103,E0104,E0105,E0107,E0108,E0110,E0111,E0112,E0113,E0114,E0115,E0116,E0117,E0118,E0202,E0203,E0211,E0213,E0236,E0237,E0238,E0239,E0240,E0241,E0301,E0302,E0303,E0401,E0402,E0601,E0602,E0603,E0604,E0611,E0632,E0633,E0701,E0702,E0703,E0704,E0710,E0711,E0712,E1003,E1101,E1102,E1111,E1120,E1121,E1123,E1124,E1125,E1126,E1127,E1128,E1129,E1130,E1131,E1132,E1133,E1134,E1135,E1136,E1137,E1138,E1139,E1200,E1201,E1205,E1206,E1300,E1301,E1302,E1303,E1304,E1305,E1306,E1310,E1700,E1701"]);const s=["--msg-template='{line},{column},{category},{symbol}:{msg}'","--reports=n","--output-format=text",r.fsPath],a=yield this.run(n.concat(s),e,t,d);return a.forEach(e=>{e.severity=this.parseMessagesSeverity(e.type,this.pythonSettings.linting.pylintCategorySeverity)}),a})}static hasConfigurationFile(e,t,n){return r(this,void 0,void 0,function*(){if(process.env.PYLINTRC)return!0;if((yield e.fileExists(o.join(t,u)))||(yield e.fileExists(o.join(t,l))))return!0;let r=t,s=o.dirname(t);do{if(!(yield e.fileExists(o.join(r,"__init__.py"))))break;if((yield e.fileExists(o.join(r,u)))||(yield e.fileExists(o.join(r,l))))return!0;r=s,s=o.dirname(s)}while(!e.arePathsSame(r,s));const a=i.homedir();return!!(yield e.fileExists(o.join(a,l)))||(!!(yield e.fileExists(o.join(a,".config",u)))||!(n.isWindows||!(yield e.fileExists(o.join("/etc",u)))))})}static hasConfigrationFileInWorkspace(e,t,n){return r(this,void 0,void 0,function*(){let r=t,i=o.dirname(r);do{if((yield e.fileExists(o.join(r,u)))||(yield e.fileExists(o.join(r,l))))return!0;r=i,i=o.dirname(i)}while(!e.arePathsSame(r,n)&&!e.arePathsSame(r,i));return!1})}}t.Pylint=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(94),c=n(3),u=n(2),l=n(4),d=n(11),h=n(6),p=n(1),f=n(36),g=n(5),m=n(652),y=n(7),v=n(9),b=n(35),S="python",_=new Map;_.set(b.LintMessageSeverity.Error,u.DiagnosticSeverity.Error),_.set(b.LintMessageSeverity.Hint,u.DiagnosticSeverity.Hint),_.set(b.LintMessageSeverity.Information,u.DiagnosticSeverity.Information),_.set(b.LintMessageSeverity.Warning,u.DiagnosticSeverity.Warning);let w=class{constructor(e){this.serviceContainer=e,this.pendingLintings=new Map,this.documentHasJupyterCodeCells=((e,t)=>Promise.resolve(!1)),this.documents=e.get(l.IDocumentManager),this.workspace=e.get(l.IWorkspaceService),this.configurationService=e.get(p.IConfigurationService),this.outputChannel=e.get(p.IOutputChannel,d.STANDARD_OUTPUT_CHANNEL),this.linterManager=e.get(b.ILinterManager),this.fileSystem=e.get(h.IFileSystem),this.diagnosticCollection=u.languages.createDiagnosticCollection("python")}get diagnostics(){return this.diagnosticCollection}clearDiagnostics(e){this.diagnosticCollection.has(e.uri)&&this.diagnosticCollection.delete(e.uri)}lintOpenPythonFiles(){return o(this,void 0,void 0,function*(){this.diagnosticCollection.clear();const e=this.documents.textDocuments.map(e=>o(this,void 0,void 0,function*(){return this.lintDocument(e,"auto")}));return yield Promise.all(e),this.diagnosticCollection})}lintDocument(e,t){return o(this,void 0,void 0,function*(){if(this.diagnosticCollection.set(e.uri,[]),!(yield this.shouldLintDocument(e)))return;this.pendingLintings.has(e.uri.fsPath)&&(this.pendingLintings.get(e.uri.fsPath).cancel(),this.pendingLintings.delete(e.uri.fsPath));const n=new u.CancellationTokenSource;n.token.onCancellationRequested(()=>{this.pendingLintings.has(e.uri.fsPath)&&this.pendingLintings.delete(e.uri.fsPath)}),this.pendingLintings.set(e.uri.fsPath,n);const r=(yield this.linterManager.getActiveLinters(!1,e.uri)).map(r=>o(this,void 0,void 0,function*(){const i=new f.StopWatch,o=(yield this.linterManager.createLinter(r.product,this.outputChannel,this.serviceContainer,e.uri)).lint(e,n.token);return this.sendLinterRunTelemetry(r,e.uri,o,i,t),o})),i=yield this.documentHasJupyterCodeCells(e,n.token);let s=[];const a=this.configurationService.getSettings(e.uri);for(const t of r){const r=yield t;if(n.token.isCancellationRequested)break;if(this.isDocumentOpen(e.uri)){for(const t of r)i&&e.lineAt(t.line-1).text.trim().startsWith("%")&&(t.code===d.LinterErrors.pylint.InvalidSyntax||t.code===d.LinterErrors.prospector.InvalidSyntax||t.code===d.LinterErrors.flake8.InvalidSyntax)||s.push(this.createDiagnostics(t,e));s=s.filter((e,t)=>t<=a.linting.maxNumberOfProblems)}}this.diagnosticCollection.set(e.uri,s)})}linkJupyterExtension(e){return o(this,void 0,void 0,function*(){e&&(e.isActive||(yield e.activate()),e.exports.registerLanguageProvider(S,new m.JupyterProvider),this.documentHasJupyterCodeCells=e.exports.hasCodeCells)})}sendLinterRunTelemetry(e,t,n,r,i){const o=e.pathName(t),s={tool:e.id,hasCustomArgs:e.linterArgs(t).length>0,trigger:i,executableSpecified:o.length>0};y.sendTelemetryWhenDone(v.EventName.LINTING,n,r,s)}isDocumentOpen(e){return this.documents.textDocuments.some(t=>t.uri.fsPath===e.fsPath)}createDiagnostics(e,t){const n=new u.Position(e.line-1,e.column),r=new u.Range(n,n),i=_.get(e.severity),o=new u.Diagnostic(r,e.message,i);return o.code=e.code,o.source=e.provider,o}shouldLintDocument(e){return o(this,void 0,void 0,function*(){if(!(yield this.linterManager.isLintingEnabled(!1,e.uri)))return this.diagnosticCollection.set(e.uri,[]),!1;if(e.languageId!==S)return!1;const t=this.workspace.getWorkspaceFolder(e.uri),n=t&&"string"==typeof t.uri.fsPath?t.uri.fsPath:void 0,r="string"==typeof n?c.relative(n,e.fileName):e.fileName;return!this.configurationService.getSettings(e.uri).linting.ignorePatterns.map(e=>new a.Minimatch(e,{dot:!0})).some(t=>t.match(e.fileName)||t.match(r))&&(!("file"!==e.uri.scheme||!e.uri.fsPath)&&this.fileSystem.fileExists(e.uri.fsPath))})}};w=r([s.injectable(),i(0,s.inject(g.IServiceContainer))],w),t.LintingEngine=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);class i{static isCodeBlock(e){return e.trim().endsWith(":")&&-1===e.indexOf("#")}get cellIdentifier(){return/^(# %%|#%%|# \<codecell\>|# In\[\d*?\]|# In\[ \])(.*)/i}getSelectedCode(e,t){return i.isCodeBlock(e)?new Promise((n,i)=>{const o=r.window.activeTextEditor;if(!o)return n("");const s=t?t.end.line:o.document.lineCount-1,a=e.indexOf(e.trim());for(let e=o.selection.start.line+1;e<=s;e+=1){const t=o.document.lineAt(e).text,i=t.indexOf(t.trim());if(0!==t.trim().indexOf("#")&&i===a){const t=o.document.lineAt(e-1).range.end;n(o.document.getText(new r.Range(o.selection.start,t)))}}n(o.document.getText(t))}):Promise.resolve(e)}getFirstLineOfExecutableCode(e,t){for(let n=t.start.line;n<t.end.line;n+=1){const t=e.lineAt(n);if(t.isEmptyOrWhitespace)continue;const i=t.text,o=i.trim();if(!o.startsWith("#"))return Promise.resolve(new r.Position(n,i.indexOf(o)))}return Promise.resolve(new r.Position(t.start.line,0))}}t.JupyterProvider=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.PythonCodeActionProvider=class{provideCodeActions(e,t,n,i){const o=new r.CodeAction("Sort imports",r.CodeActionKind.SourceOrganizeImports);return o.command={title:"Sort imports",command:"python.sortImports"},[o]}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(158),o=n(4),s=n(1),a=n(655),c=n(656),u=n(657),l=n(658);t.PythonFormattingEditProvider=class{constructor(e,t){this.formatters=new Map,this.disposables=[],this.documentVersionBeforeFormatting=-1,this.formatterMadeChanges=!1,this.saving=!1;const n=new l.YapfFormatter(t),i=new a.AutoPep8Formatter(t),d=new c.BlackFormatter(t),h=new u.DummyFormatter(t);this.formatters.set(n.Id,n),this.formatters.set(d.Id,d),this.formatters.set(i.Id,i),this.formatters.set(h.Id,h),this.commands=t.get(o.ICommandManager),this.workspace=t.get(o.IWorkspaceService),this.documentManager=t.get(o.IDocumentManager),this.config=t.get(s.IConfigurationService),this.disposables.push(this.documentManager.onDidSaveTextDocument(e=>r(this,void 0,void 0,function*(){return this.onSaveDocument(e)})))}dispose(){this.disposables.forEach(e=>e.dispose())}provideDocumentFormattingEdits(e,t,n){return this.provideDocumentRangeFormattingEdits(e,void 0,t,n)}provideDocumentRangeFormattingEdits(e,t,n,i){return r(this,void 0,void 0,function*(){if(this.saving)return[];!0===this.workspace.getConfiguration("editor",e.uri).get("formatOnSave")&&(this.documentVersionBeforeFormatting=e.version);const r=this.config.getSettings(e.uri),o=yield this.formatters.get(r.formatting.provider).formatDocument(e,n,i,t);return this.formatterMadeChanges=o.length>0,o})}onSaveDocument(e){return r(this,void 0,void 0,function*(){i.setTimeout(()=>{try{this.formatterMadeChanges&&!e.isDirty&&e.version===this.documentVersionBeforeFormatting&&this.commands.executeCommand("editor.action.formatDocument").then(()=>r(this,void 0,void 0,function*(){this.saving=!0,yield e.save(),this.saving=!1}))}finally{this.documentVersionBeforeFormatting=-1,this.saving=!1,this.formatterMadeChanges=!1}},50)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(140),i=n(1),o=n(36),s=n(7),a=n(9),c=n(103);t.AutoPep8Formatter=class extends c.BaseFormatter{constructor(e){super("autopep8",r.Product.autopep8,e)}formatDocument(e,t,n,r){const c=new o.StopWatch,u=this.serviceContainer.get(i.IConfigurationService).getSettings(e.uri),l=Array.isArray(u.formatting.autopep8Args)&&u.formatting.autopep8Args.length>0,d=!!r&&!r.isEmpty,h=["--diff"];d&&h.push(...["--line-range",(r.start.line+1).toString(),(r.end.line+1).toString()]);const p=super.provideDocumentFormattingEdits(e,t,n,h);return s.sendTelemetryWhenDone(a.EventName.FORMAT,p,c,{tool:"autopep8",hasCustomArgs:l,formatSelection:d}),p}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(140),s=n(1),a=n(36),c=n(7),u=n(9),l=n(103);t.BlackFormatter=class extends l.BaseFormatter{constructor(e){super("black",o.Product.black,e)}formatDocument(e,t,n,o){const l=new a.StopWatch,d=this.serviceContainer.get(s.IConfigurationService).getSettings(e.uri),h=Array.isArray(d.formatting.blackArgs)&&d.formatting.blackArgs.length>0,p=!!o&&!o.isEmpty;if(p)return(()=>r(this,void 0,void 0,function*(){return yield i.window.showErrorMessage('Black does not support the "Format Selection" command'),[]}))();const f=super.provideDocumentFormattingEdits(e,t,n,["--diff","--quiet"]);return c.sendTelemetryWhenDone(u.EventName.FORMAT,f,l,{tool:"black",hasCustomArgs:h,formatSelection:p}),f}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(103);t.DummyFormatter=class extends i.BaseFormatter{constructor(e){super("none",r.Product.yapf,e)}formatDocument(e,t,n,r){return Promise.resolve([])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(36),o=n(7),s=n(9),a=n(103);t.YapfFormatter=class extends a.BaseFormatter{constructor(e){super("yapf",r.Product.yapf,e)}formatDocument(e,t,n,a){const c=new i.StopWatch,u=this.serviceContainer.get(r.IConfigurationService).getSettings(e.uri),l=Array.isArray(u.formatting.yapfArgs)&&u.formatting.yapfArgs.length>0,d=!!a&&!a.isEmpty,h=["--diff"];d&&h.push(...["--lines",`${a.start.line+1}-${a.end.line+1}`]);const p=this.getWorkspaceUri(e).fsPath,f=this.getDocumentPath(e,p),g=super.provideDocumentFormattingEdits(e,t,n,h,f);return o.sendTelemetryWhenDone(s.EventName.FORMAT,g,c,{tool:"yapf",hasCustomArgs:l,formatSelection:d}),g}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(2),o=n(4),s=n(11);n(8);const a=n(6),c=n(1),u=n(10),l=n(35);t.LinterProvider=class{constructor(e,t){this.context=e,this.disposables=[],this.fs=t.get(a.IFileSystem),this.engine=t.get(l.ILintingEngine),this.linterManager=t.get(l.ILinterManager),this.interpreterService=t.get(u.IInterpreterService),this.documents=t.get(o.IDocumentManager),this.configuration=t.get(c.IConfigurationService),this.workspaceService=t.get(o.IWorkspaceService),this.disposables.push(this.interpreterService.onDidChangeInterpreter(()=>this.engine.lintOpenPythonFiles())),this.documents.onDidOpenTextDocument(e=>this.onDocumentOpened(e),this.context.subscriptions),this.documents.onDidCloseTextDocument(e=>this.onDocumentClosed(e),this.context.subscriptions),this.documents.onDidSaveTextDocument(e=>this.onDocumentSaved(e),this.context.subscriptions);const n=this.workspaceService.onDidChangeConfiguration(this.lintSettingsChangedHandler.bind(this));this.disposables.push(n),s.isTestExecution()||setTimeout(()=>this.engine.lintOpenPythonFiles().ignoreErrors(),1200)}dispose(){this.disposables.forEach(e=>e.dispose())}isDocumentOpen(e){return this.documents.textDocuments.some(t=>this.fs.arePathsSame(t.uri.fsPath,e.fsPath))}lintSettingsChangedHandler(e){i.workspace.textDocuments.forEach(t=>{e.affectsConfiguration("python.linting",t.uri)&&this.engine.lintDocument(t,"auto").ignoreErrors()})}onDocumentOpened(e){this.engine.lintDocument(e,"auto").ignoreErrors()}onDocumentSaved(e){const t=this.configuration.getSettings(e.uri);"python"===e.languageId&&t.linting.enabled&&t.linting.lintOnSave?this.engine.lintDocument(e,"save").ignoreErrors():this.linterManager.getActiveLinters(!1,e.uri).then(t=>{const n=r.basename(e.uri.fsPath).toLowerCase();t.filter(e=>e.configFileNames.indexOf(n)>=0).length>0&&setTimeout(()=>this.engine.lintOpenPythonFiles(),1e3)}).ignoreErrors()}onDocumentClosed(e){e&&e.fileName&&e.uri&&(this.isDocumentOpen(e.uri)||this.engine.clearDiagnostics(e))}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),s=n(11),a=n(7),c=n(9),u=n(104);class l{constructor(e){this.serviceContainer=e,this.disposables=[],this.registerCommand()}dispose(){this.disposables.forEach(e=>e.dispose())}registerCommand(){const e=this.serviceContainer.get(o.ICommandManager).registerCommand(s.Commands.Start_REPL,this.commandHandler,this);this.disposables.push(e)}commandHandler(){return i(this,void 0,void 0,function*(){const e=this.getActiveResourceUri();yield this.serviceContainer.get(u.ICodeExecutionService,"repl").initializeRepl(e)})}getActiveResourceUri(){const e=this.serviceContainer.get(o.IDocumentManager);if(e.activeTextEditor&&!e.activeTextEditor.document.isUntitled)return e.activeTextEditor.document.uri;const t=this.serviceContainer.get(o.IWorkspaceService);return Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0?t.workspaceFolders[0].uri:void 0}}r([a.captureTelemetry(c.EventName.REPL)],l.prototype,"commandHandler",null),t.ReplProvider=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(662),i=n(226);t.registerTypes=function(e){e.addSingleton(i.ISortImportsEditingProvider,r.SortImportsEditingProvider)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(17),c=n(3),u=n(2),l=n(4),d=n(11),h=n(6),p=n(14),f=n(1),g=n(22),m=n(5),y=n(7),v=n(9);let b=class{constructor(e){this.serviceContainer=e,this.shell=e.get(l.IApplicationShell),this.documentManager=e.get(l.IDocumentManager),this.configurationService=e.get(f.IConfigurationService),this.pythonExecutionFactory=e.get(p.IPythonExecutionFactory),this.processServiceFactory=e.get(p.IProcessServiceFactory),this.editorUtils=e.get(f.IEditorUtils)}provideDocumentSortImportsEdits(e,t){return o(this,void 0,void 0,function*(){const n=yield this.documentManager.openTextDocument(e);if(!n)return;if(n.lineCount<=1)return;const r=c.join(d.EXTENSION_ROOT_DIR,"pythonFiles","sortImports.py"),i=this.serviceContainer.get(h.IFileSystem),o=n.isDirty?yield i.createTemporaryFile(c.extname(n.uri.fsPath)):void 0;o&&(yield i.writeFile(o.filePath,n.getText()));const s=this.configurationService.getSettings(e),a=s.sortImports.path,u=[o?o.filePath:n.uri.fsPath,"--diff"].concat(s.sortImports.args);let l;if(!t||!t.isCancellationRequested)try{if("string"==typeof a&&a.length>0){l=(yield(yield this.processServiceFactory.create(n.uri)).exec(a,u,{throwOnStdErr:!0,token:t})).stdout}else{l=(yield(yield this.pythonExecutionFactory.create({resource:n.uri})).exec([r].concat(u),{throwOnStdErr:!0,token:t})).stdout}return this.editorUtils.getWorkspaceEditsFromPatch(n.getText(),l,n.uri)}finally{o&&o.dispose()}})}registerCommands(){const e=this.serviceContainer.get(l.ICommandManager).registerCommand(d.Commands.Sort_Imports,this.sortImports,this);this.serviceContainer.get(f.IDisposableRegistry).push(e)}sortImports(e){return o(this,void 0,void 0,function*(){if(!e){const t=this.documentManager.activeTextEditor;if(!t||t.document.languageId!==d.PYTHON_LANGUAGE)return void this.shell.showErrorMessage("Please open a Python file to sort the imports.").then(g.noop,g.noop);e=t.document.uri}const t=yield this.documentManager.openTextDocument(e);if(t.lineCount<=1)return;const n=t.lineAt(t.lineCount-1);if(n.text.trim().length>0){const t=new u.WorkspaceEdit;t.insert(e,n.range.end,a.EOL),yield this.documentManager.applyEdit(t)}try{const t=yield this.provideDocumentSortImportsEdits(e);if(!t||0===t.entries().length)return;yield this.documentManager.applyEdit(t)}catch(t){const n="string"==typeof t?t:t.message?t.message:t,r=this.serviceContainer.get(f.IOutputChannel,d.STANDARD_OUTPUT_CHANNEL);r.appendLine(t),r.show(),this.serviceContainer.get(f.ILogger).logError(`Failed to format imports for '${e.fsPath}'.`,t),this.shell.showErrorMessage(n).then(g.noop,g.noop)}})}};r([y.captureTelemetry(v.EventName.FORMAT_SORT_IMPORTS)],b.prototype,"provideDocumentSortImportsEdits",null),b=r([s.injectable(),i(0,s.inject(m.IServiceContainer))],b),t.SortImportsEditingProvider=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(90),o=n(1),s=n(36),a=n(181),c=n(7),u=n(9);let l;function d(e,t,n,i,s){let c=r.workspace.getWorkspaceFolder(t.document.uri);!c&&Array.isArray(r.workspace.workspaceFolders)&&r.workspace.workspaceFolders.length>0&&(c=r.workspace.workspaceFolders[0]);const u=c?c.uri.fsPath:__dirname,l=s.get(o.IConfigurationService).getSettings(c?c.uri:void 0);return p(t).then(()=>{const r=`newvariable${(new Date).getMilliseconds().toString()}`,o=new a.RefactorProxy(e,l,u,s).extractVariable(t.document,r,t.document.uri.fsPath,n,t.options).then(e=>e.results[0].diff);return f(e,t,n,r,o,i)})}function h(e,t,n,i,s){let c=r.workspace.getWorkspaceFolder(t.document.uri);!c&&Array.isArray(r.workspace.workspaceFolders)&&r.workspace.workspaceFolders.length>0&&(c=r.workspace.workspaceFolders[0]);const u=c?c.uri.fsPath:__dirname,l=s.get(o.IConfigurationService).getSettings(c?c.uri:void 0);return p(t).then(()=>{const r=`newmethod${(new Date).getMilliseconds().toString()}`,o=new a.RefactorProxy(e,l,u,s).extractMethod(t.document,r,t.document.uri.fsPath,n,t.options).then(e=>e.results[0].diff);return f(e,t,n,r,o,i)})}function p(e){return e.document.isDirty?new Promise((t,n)=>{r.window.showInformationMessage("Please save changes before refactoring","Save").then(r=>{if("Save"!==r)return n();e.document.save().then(t,n)})}):Promise.resolve()}function f(e,t,n,s,a,c){let u=-1;return a.then(e=>0===e.length?[]:i.getTextEditsFromPatch(t.document.getText(),e)).then(e=>t.edit(t=>{e.forEach(e=>{(-1===u||u>e.range.start.line)&&(u=e.range.start.line),t.replace(e.range,e.newText)})})).then(e=>{if(e&&u>=0){let e;for(let n=u;n<t.document.lineCount;n+=1){const i=t.document.lineAt(n),o=i.text.indexOf(s);if(o>=0){e=new r.Position(i.range.start.line,o);break}}return e&&(t.selections=[new r.Selection(e,new r.Position(e.line,e.character+s.length))],t.revealRange(new r.Range(t.selection.start,t.selection.end),r.TextEditorRevealType.Default)),e}return null}).then(e=>{if(e)return t.document.save().then(()=>r.commands.executeCommand("editor.action.rename"))}).catch(e=>{if("Not installed"===e)return l.promptToInstall(o.Product.rope,t.document.uri).catch(e=>console.error("Python Extension: simpleRefactorProvider.promptToInstall",e)),Promise.reject("");let n=`${e}`;return"string"==typeof e&&(n=e),"object"==typeof e&&e.message&&(n=e.message),c.appendLine(`${"#".repeat(10)}Refactor Output${"#".repeat(10)}`),c.appendLine(`Error in refactoring:\n${n}`),r.window.showErrorMessage(`Cannot perform refactoring using selected element(s). (${n})`),Promise.reject(e)})}t.activateSimplePythonRefactorProvider=function(e,t,n){l=n.get(o.IInstaller);let i=r.commands.registerCommand("python.refactorExtractVariable",()=>{const i=new s.StopWatch,o=d(e.extensionPath,r.window.activeTextEditor,r.window.activeTextEditor.selection,t,n).catch(()=>{});c.sendTelemetryWhenDone(u.EventName.REFACTOR_EXTRACT_VAR,o,i)});e.subscriptions.push(i),i=r.commands.registerCommand("python.refactorExtractMethod",()=>{const i=new s.StopWatch,o=h(e.extensionPath,r.window.activeTextEditor,r.window.activeTextEditor.selection,t,n).catch(()=>{});c.sendTelemetryWhenDone(u.EventName.REFACTOR_EXTRACT_FUNCTION,o,i)}),e.subscriptions.push(i)},t.extractVariable=d,t.extractMethod=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),s=n(11),a=n(23),c=n(7),u=n(9);class l{constructor(e){this.serviceContainer=e,this.disposables=[],this.registerCommands()}dispose(){this.disposables.forEach(e=>e.dispose())}registerCommands(){const e=this.serviceContainer.get(o.ICommandManager).registerCommand(s.Commands.Create_Terminal,this.onCreateTerminal,this);this.disposables.push(e)}onCreateTerminal(){return i(this,void 0,void 0,function*(){const e=this.serviceContainer.get(a.ITerminalServiceFactory),t=this.getActiveResource();yield e.createTerminalService(t,"Python").show(!1)})}getActiveResource(){const e=this.serviceContainer.get(o.IDocumentManager);if(e.activeTextEditor&&!e.activeTextEditor.document.isUntitled)return e.activeTextEditor.document.uri;const t=this.serviceContainer.get(o.IWorkspaceService);return Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0?t.workspaceFolders[0].uri:void 0}}r([c.captureTelemetry(u.EventName.TERMINAL_CREATE,{triggeredBy:"commandpalette"})],l.prototype,"onCreateTerminal",null),t.TerminalProvider=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),i=n(2),o=n(11),s=n(7),a=n(9);function c(){i.workspace.getConfiguration("python").update("autoComplete.extraPaths",[r.join("${env:SPARK_HOME}","python"),r.join("${env:SPARK_HOME}","python/pyspark")]).then(()=>{},e=>{i.window.showErrorMessage(`Failed to update autoComplete.extraPaths. Error: ${e.message}`),console.error(e)}),i.window.showInformationMessage("Make sure you have SPARK_HOME environment variable set to the root path of the local spark installation!"),s.sendTelemetryEvent(a.EventName.UPDATE_PYSPARK_LIBRARY)}t.activateUpdateSparkLibraryProvider=function(){return i.commands.registerCommand(o.Commands.Update_SparkLibrary,c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(667),i=n(668),o=n(669),s=n(671),a=n(672),c=n(146),u=n(104);t.registerTypes=function(e){e.addSingleton(u.ICodeExecutionHelper,s.CodeExecutionHelper),e.addSingleton(u.ICodeExecutionManager,i.CodeExecutionManager),e.addSingleton(u.ICodeExecutionService,o.DjangoShellCodeExecutionProvider,"djangoShell"),e.addSingleton(u.ICodeExecutionService,c.TerminalCodeExecutionProvider,"standard"),e.addSingleton(u.ICodeExecutionService,a.ReplProvider,"repl"),e.addSingleton(u.ITerminalAutoActivation,r.TerminalAutoActivation)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4),c=n(23),u=n(1);let l=class{constructor(e,t,n,r){this.terminalManager=e,this.activator=n,this.workspaceService=r,t.push(this)}dispose(){this.handler&&(this.handler.dispose(),this.handler=void 0)}register(){this.handler||(this.handler=this.terminalManager.onDidOpenTerminal(this.activateTerminal,this))}activateTerminal(e){return o(this,void 0,void 0,function*(){const t=this.workspaceService.hasWorkspaceFolders&&this.workspaceService.workspaceFolders.length>0?this.workspaceService.workspaceFolders[0].uri:void 0;yield this.activator.activateEnvironmentInTerminal(e,t)})}};l=r([s.injectable(),i(0,s.inject(a.ITerminalManager)),i(1,s.inject(u.IDisposableRegistry)),i(2,s.inject(c.ITerminalActivator)),i(3,s.inject(a.IWorkspaceService))],l),t.TerminalAutoActivation=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(11),l=n(1),d=n(5),h=n(7),p=n(9),f=n(104);let g=class{constructor(e,t,n,r){this.commandManager=e,this.documentManager=t,this.disposableRegistry=n,this.serviceContainer=r}registerCommands(){this.disposableRegistry.push(this.commandManager.registerCommand(u.Commands.Exec_In_Terminal,this.executeFileInterTerminal.bind(this))),this.disposableRegistry.push(this.commandManager.registerCommand(u.Commands.Exec_Selection_In_Terminal,this.executeSelectionInTerminal.bind(this))),this.disposableRegistry.push(this.commandManager.registerCommand(u.Commands.Exec_Selection_In_Django_Shell,this.executeSelectionInDjangoShell.bind(this)))}executeFileInterTerminal(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.get(f.ICodeExecutionHelper),n=(e=e instanceof a.Uri?e:void 0)||(yield t.getFileToExecute());n&&(yield t.saveFileIfDirty(n),yield this.serviceContainer.get(f.ICodeExecutionService,"standard").executeFile(n))})}executeSelectionInTerminal(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(f.ICodeExecutionService,"standard");yield this.executeSelection(e)})}executeSelectionInDjangoShell(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(f.ICodeExecutionService,"djangoShell");yield this.executeSelection(e)})}executeSelection(e){return o(this,void 0,void 0,function*(){const t=this.documentManager.activeTextEditor;if(!t)return;const n=this.serviceContainer.get(f.ICodeExecutionHelper),r=yield n.getSelectedTextToExecute(t),i=yield n.normalizeLines(r);i&&0!==i.trim().length&&(yield e.execute(i,t.document.uri))})}};r([h.captureTelemetry(p.EventName.EXECUTION_CODE,{scope:"file"},!1)],g.prototype,"executeFileInterTerminal",null),r([h.captureTelemetry(p.EventName.EXECUTION_CODE,{scope:"selection"},!1)],g.prototype,"executeSelectionInTerminal",null),r([h.captureTelemetry(p.EventName.EXECUTION_DJANGO,{scope:"selection"},!1)],g.prototype,"executeSelectionInDjangoShell",null),g=r([s.injectable(),i(0,s.inject(c.ICommandManager)),i(1,s.inject(c.IDocumentManager)),i(2,s.inject(l.IDisposableRegistry)),i(3,s.inject(d.IServiceContainer))],g),t.CodeExecutionManager=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(3),a=n(4);n(8);const c=n(6),u=n(23),l=n(1),d=n(670),h=n(146);let p=class extends h.TerminalCodeExecutionProvider{constructor(e,t,n,r,i,o,s,a){super(e,t,n,a,i),this.terminalTitle="Django Shell",a.push(new d.DjangoContextInitializer(r,n,s,o))}getReplCommandArgs(e){const t=this.configurationService.getSettings(e),n=this.platformService.isWindows?t.pythonPath.replace(/\\/g,"/"):t.pythonPath,r=t.terminal.launchArgs.slice(),i=e?this.workspace.getWorkspaceFolder(e):void 0,o=Array.isArray(this.workspace.workspaceFolders)&&this.workspace.workspaceFolders.length>0?this.workspace.workspaceFolders[0].uri.fsPath:"",a=i?i.uri.fsPath:o,c=0===a.length?"manage.py":s.join(a,"manage.py");return r.push(c.fileToCommandArgument()),r.push("shell"),{command:n,args:r}}};p=r([o.injectable(),i(0,o.inject(u.ITerminalServiceFactory)),i(1,o.inject(l.IConfigurationService)),i(2,o.inject(a.IWorkspaceService)),i(3,o.inject(a.IDocumentManager)),i(4,o.inject(c.IPlatformService)),i(5,o.inject(a.ICommandManager)),i(6,o.inject(c.IFileSystem)),i(7,o.inject(l.IDisposableRegistry))],p),t.DjangoShellCodeExecutionProvider=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(3),a=n(141);let c=class{constructor(e,t,n,r){this.documentManager=e,this.workpaceService=t,this.fileSystem=n,this.workspaceContextKeyValues=new Map,this.disposables=[],this.isDjangoProject=new a.ContextKey("python.isDjangoProject",r),this.ensureContextStateIsSet().catch(e=>console.error("Python Extension: ensureState",e)),this.disposables.push(this.workpaceService.onDidChangeWorkspaceFolders(()=>this.updateContextKeyBasedOnActiveWorkspace()))}dispose(){this.disposables.forEach(e=>e.dispose())}updateContextKeyBasedOnActiveWorkspace(){this.monitoringActiveTextEditor||(this.monitoringActiveTextEditor=!0,this.disposables.push(this.documentManager.onDidChangeActiveTextEditor(()=>this.ensureContextStateIsSet())))}getActiveWorkspace(){if(!Array.isArray(this.workpaceService.workspaceFolders)||0===this.workpaceService.workspaceFolders.length)return;if(1===this.workpaceService.workspaceFolders.length)return this.workpaceService.workspaceFolders[0].uri.fsPath;const e=this.documentManager.activeTextEditor;if(!e)return;const t=this.workpaceService.getWorkspaceFolder(e.document.uri);return t?t.uri.fsPath:void 0}ensureContextStateIsSet(){return i(this,void 0,void 0,function*(){const e=this.getActiveWorkspace();if(!e)return this.isDjangoProject.set(!1);if(this.lastCheckedWorkspace!==e)if(this.workspaceContextKeyValues.has(e))yield this.isDjangoProject.set(this.workspaceContextKeyValues.get(e));else{const t=yield this.fileSystem.fileExists(s.join(e,"manage.py"));yield this.isDjangoProject.set(t),this.workspaceContextKeyValues.set(e,t),this.lastCheckedWorkspace=e}})}};c=r([o.injectable()],c),t.DjangoContextInitializer=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(4),l=n(11);n(8);const d=n(14),h=n(1),p=n(5);let f=class{constructor(e){this.documentManager=e.get(u.IDocumentManager),this.applicationShell=e.get(u.IApplicationShell),this.processServiceFactory=e.get(d.IProcessServiceFactory),this.configurationService=e.get(h.IConfigurationService)}normalizeLines(e,t){return o(this,void 0,void 0,function*(){try{if(0===e.trim().length)return"";const n=this.configurationService.getSettings(t).pythonPath,r=[a.join(l.EXTENSION_ROOT_DIR,"pythonFiles","normalizeForInterpreter.py"),e];return(yield(yield this.processServiceFactory.create(t)).exec(n,r,{throwOnStdErr:!0})).stdout}catch(t){return console.error(t,"Python: Failed to normalize code for execution in terminal"),e}})}getFileToExecute(){return o(this,void 0,void 0,function*(){const e=this.documentManager.activeTextEditor;if(e)if(e.document.isUntitled)this.applicationShell.showErrorMessage("The active file needs to be saved before it can be run");else{if(e.document.languageId===l.PYTHON_LANGUAGE)return e.document.isDirty&&(yield e.document.save()),e.document.uri;this.applicationShell.showErrorMessage("The active file is not a Python source file")}else this.applicationShell.showErrorMessage("No open file to run in terminal")})}getSelectedTextToExecute(e){return o(this,void 0,void 0,function*(){if(!e)return;const t=e.selection;let n;if(t.isEmpty)n=e.document.lineAt(t.start.line).text;else{const r=new c.Range(t.start,t.end);n=e.document.getText(r)}return n})}saveFileIfDirty(e){return o(this,void 0,void 0,function*(){const t=this.documentManager.textDocuments.filter(t=>t.uri.path===e.path);1===t.length&&t[0].isDirty&&(yield t[0].save())})}};f=r([s.injectable(),i(0,s.inject(p.IServiceContainer))],f),t.CodeExecutionHelper=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(4),a=n(6),c=n(23),u=n(1),l=n(1),d=n(146);let h=class extends d.TerminalCodeExecutionProvider{constructor(e,t,n,r,i){super(e,t,n,r,i),this.terminalTitle="REPL"}};h=r([o.injectable(),i(0,o.inject(c.ITerminalServiceFactory)),i(1,o.inject(u.IConfigurationService)),i(2,o.inject(s.IWorkspaceService)),i(3,o.inject(l.IDisposableRegistry)),i(4,o.inject(a.IPlatformService))],h),t.ReplProvider=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),i=n(674),o=n(20),s=n(675),a=n(676),c=n(677),u=n(678),l=n(679),d=n(680),h=n(681),p=n(682),f=n(86),g=n(683),m=n(684),y=n(685),v=n(15),b=n(686),S=n(688),_=n(689),w=n(693),P=n(694),C=n(695),T=n(698),I=n(699),E=n(700),O=n(701),R=n(702),x=n(703),k=n(704),D=n(705),A=n(706),j=n(707),N=n(708),F=n(19),M=n(709),L=n(710),W=n(711),U=n(712),H=n(713),B=n(714),V=n(715);t.registerTypes=function(e){e.addSingleton(v.ITestDebugLauncher,s.DebugLauncher),e.addSingleton(v.ITestCollectionStorageService,u.TestCollectionStorageService),e.addSingleton(v.IWorkspaceTestManagerService,p.WorkspaceTestManagerService),e.add(v.ITestsHelper,f.TestsHelper),e.add(v.IUnitTestSocketServer,V.UnitTestSocketServer),e.add(v.ITestResultsService,d.TestResultsService),e.add(v.ITestVisitor,g.TestFlatteningVisitor,"TestFlatteningVisitor"),e.add(v.ITestVisitor,m.TestFolderGenerationVisitor,"TestFolderGenerationVisitor"),e.add(v.ITestVisitor,y.TestResultResetVisitor,"TestResultResetVisitor"),e.add(v.ITestsParser,B.TestsParser,o.UNITTEST_PROVIDER),e.add(v.ITestsParser,j.TestsParser,o.PYTEST_PROVIDER),e.add(v.ITestsParser,R.TestsParser,o.NOSETEST_PROVIDER),e.add(v.ITestDiscoveryService,H.TestDiscoveryService,o.UNITTEST_PROVIDER),e.add(v.ITestDiscoveryService,A.TestDiscoveryService,o.PYTEST_PROVIDER),e.add(v.ITestDiscoveryService,O.TestDiscoveryService,o.NOSETEST_PROVIDER),e.add(F.IArgumentsHelper,i.ArgumentsHelper),e.add(v.ITestRunner,a.TestRunner),e.add(v.IXUnitParser,b.XUnitParser),e.add(F.IUnitTestHelper,M.UnitTestHelper),e.add(F.IArgumentsService,D.ArgumentsService,o.PYTEST_PROVIDER),e.add(F.IArgumentsService,E.ArgumentsService,o.NOSETEST_PROVIDER),e.add(F.IArgumentsService,U.ArgumentsService,o.UNITTEST_PROVIDER),e.add(F.ITestManagerRunner,k.TestManagerRunner,o.PYTEST_PROVIDER),e.add(F.ITestManagerRunner,I.TestManagerRunner,o.NOSETEST_PROVIDER),e.add(F.ITestManagerRunner,W.TestManagerRunner,o.UNITTEST_PROVIDER),e.addSingleton(F.IUnitTestConfigurationService,S.UnitTestConfigurationService),e.addSingleton(F.IUnitTestManagementService,C.UnitTestManagementService),e.addSingleton(F.ITestResultDisplay,w.TestResultDisplay),e.addSingleton(F.ITestDisplay,P.TestDisplay),e.addSingleton(v.ITestConfigSettingsService,c.TestConfigSettingsService),e.addSingleton(F.ITestConfigurationManagerFactory,_.TestConfigurationManagerFactory),e.addSingleton(F.IUnitTestDiagnosticService,h.UnitTestDiagnosticService),e.addSingleton(v.ITestMessageService,N.TestMessageService,o.PYTEST_PROVIDER),e.addFactory(v.ITestManagerFactory,e=>(t,n,i)=>{const s=e.container.get(r.IServiceContainer);switch(t){case o.NOSETEST_PROVIDER:return new T.TestManager(n,i,s);case o.PYTEST_PROVIDER:return new x.TestManager(n,i,s);case o.UNITTEST_PROVIDER:return new L.TestManager(n,i,s);default:throw new Error(`Unrecognized test provider '${t}'`)}}),e.addFactory(v.ITestManagerServiceFactory,e=>t=>{const n=e.container.get(r.IServiceContainer),i=e.container.get(v.ITestsHelper);return new l.TestManagerService(t,i,n)})}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(1),a=n(5);let c=class{constructor(e){this.logger=e.get(s.ILogger)}getOptionValues(e,t){const n=[];let r=!1;for(const i of e)r?(n.push(i),r=!1):i.startsWith(`${t}=`)?n.push(i.substring(`${t}=`.length)):i===t&&(r=!0);switch(n.length){case 0:return;case 1:return n[0];default:return n}}getPositionalArguments(e,t=[],n=[]){let r=-1;return e.forEach((i,o)=>{if(-1===n.indexOf(i))if(-1!==t.indexOf(i))r=o+1;else{if(-1!==t.findIndex(e=>i.startsWith(`${e}=`)))return void(r=o);if(i.startsWith("-"))return this.logger.logWarning(`Unknown command line option passed into args parser for tests '${i}'. Please report on https://github.com/Microsoft/vscode-python/issues/new`),void(r=o);e.indexOf("=")>0&&(this.logger.logWarning(`Unknown command line option passed into args parser for tests '${i}'. Please report on https://github.com/Microsoft/vscode-python/issues/new`),r=o)}else r=o}),e.slice(r+1)}filterArguments(e,t=[],n=[]){let r=-1;return e.filter((e,i)=>r!==i&&(!(n.indexOf(e)>=0||n.filter(t=>t.endsWith("*")&&e.startsWith(t.slice(0,-1))).length>0)&&(t.indexOf(e)>=0?(r=i+1,!1):!(t.filter(t=>e.startsWith(`${t}=`)).length>0)&&(-1===e.indexOf("=")&&n.filter(t=>t.endsWith("*")&&e.startsWith(t.slice(0,-1))).length>0?(r=i+1,!1):!(e.indexOf("=")>=0&&n.filter(t=>t.endsWith("*")&&e.startsWith(t.slice(0,-1))).length>0)))))}};c=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],c),t.ArgumentsHelper=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(4),l=n(11),d=n(1),h=n(144),p=n(5);let f=class{constructor(e){this.serviceContainer=e}launchDebugger(e){return o(this,void 0,void 0,function*(){if(e.token&&e.token.isCancellationRequested)return;const t=e.cwd?c.Uri.file(e.cwd):void 0,n=this.serviceContainer.get(u.IWorkspaceService);if(!n.hasWorkspaceFolders)throw new Error("Please open a workspace");let r=n.getWorkspaceFolder(t);r||(r=n.workspaceFolders[0]);const i=t?t.fsPath:r.uri.fsPath,o=this.serviceContainer.get(d.IConfigurationService).getSettings(c.Uri.file(i)),s=this.serviceContainer.get(u.IDebugService),a=this.fixArgs(e.args,e.testProvider),l=this.getTestLauncherScript(e.testProvider);return s.startDebugging(r,{name:"Debug Unit Test",type:"python",request:"launch",program:l,cwd:i,args:a,console:"none",envFile:o.envFile,debugOptions:[h.DebugOptions.RedirectOutput]}).then(()=>void 0)})}fixArgs(e,t){return"unittest"===t?e.filter(e=>"--debug"!==e):e}getTestLauncherScript(e){switch(e){case"unittest":return a.join(l.EXTENSION_ROOT_DIR,"pythonFiles","visualstudio_py_testlauncher.py");case"pytest":case"nosetest":return a.join(l.EXTENSION_ROOT_DIR,"pythonFiles","testlauncher.py");default:throw new Error(`Unknown test provider '${e}'`)}}};f=r([s.injectable(),i(0,s.inject(p.IServiceContainer))],f),t.DebugLauncher=f},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(213),u=n(115),l=n(14),d=n(1),h=n(5),p=n(20),f=n(15);let g=class{constructor(e){this.serviceContainer=e}run(e,t){return m(this.serviceContainer,e,t)}};function m(e,t,n){return o(this,void 0,void 0,function*(){const r=function(e,t){let n;switch(e){case p.NOSETEST_PROVIDER:n=t.unitTest.nosetestPath;break;case p.PYTEST_PROVIDER:n=t.unitTest.pyTestPath;break;default:return}return a.basename(n)===n?void 0:n}(t,e.get(d.IConfigurationService).getSettings(n.workspaceFolder)),i=function(e){switch(e){case p.NOSETEST_PROVIDER:return"nose";case p.PYTEST_PROVIDER:return"pytest";case p.UNITTEST_PROVIDER:return"unittest";default:throw new Error(`Test provider '${e}' not supported`)}}(t),s=n;let h,g;s.mergeStdOutErr="boolean"!=typeof s.mergeStdOutErr||s.mergeStdOutErr;const m=e.get(f.ITestsHelper),y={execPath:r,args:n.args,moduleName:r&&r.length>0?void 0:i,product:m.parseProduct(t)};if(t===p.UNITTEST_PROVIDER)g=e.get(l.IPythonExecutionFactory).createActivatedEnvironment({resource:n.workspaceFolder}).then(e=>e.execObservable(n.args,Object.assign({},s)));else if("string"==typeof y.moduleName&&y.moduleName.length>0)g=(h=e.get(l.IPythonExecutionFactory).createActivatedEnvironment({resource:n.workspaceFolder})).then(e=>e.execModuleObservable(y.moduleName,y.args,n));else{g=e.get(l.IPythonToolExecutionService).execObservable(y,s,n.workspaceFolder)}return g.then(e=>new Promise((t,r)=>{let s="",a="";e.out.subscribe(e=>{s+=e.out,"stderr"===e.source&&(a+=e.out),n.outChannel&&n.outChannel.append(e.out)},r,()=>o(this,void 0,void 0,function*(){if(i&&h&&c.ErrorUtils.outputHasModuleNotInstalledError(i,a)){if(!(yield(yield h).isModuleInstalled(i)))return r(new u.ModuleNotInstalledError(i))}t(s)}))}))})}g=r([s.injectable(),i(0,s.inject(h.IServiceContainer))],g),t.TestRunner=g,t.run=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(1),l=n(5);let d=class{constructor(e){this.workspaceService=e.get(c.IWorkspaceService)}updateTestArgs(e,t,n){return o(this,void 0,void 0,function*(){const r=this.getTestArgSetting(t);return this.updateSetting(e,r,n)})}enable(e,t){return o(this,void 0,void 0,function*(){const n=this.getTestEnablingSetting(t);return this.updateSetting(e,n,!0)})}disable(e,t){return o(this,void 0,void 0,function*(){const n=this.getTestEnablingSetting(t);return this.updateSetting(e,n,!1)})}getTestArgSetting(e){switch(e){case u.Product.unittest:return"unitTest.unittestArgs";case u.Product.pytest:return"unitTest.pyTestArgs";case u.Product.nosetest:return"unitTest.nosetestArgs";default:throw new Error("Invalid Test Product")}}getTestEnablingSetting(e){switch(e){case u.Product.unittest:return"unitTest.unittestEnabled";case u.Product.pytest:return"unitTest.pyTestEnabled";case u.Product.nosetest:return"unitTest.nosetestsEnabled";default:throw new Error("Invalid Test Product")}}updateSetting(e,t,n){return o(this,void 0,void 0,function*(){let r;const i="string"==typeof e?a.Uri.file(e):e;if(this.workspaceService.hasWorkspaceFolders)if(1===this.workspaceService.workspaceFolders.length)r=this.workspaceService.getConfiguration("python",this.workspaceService.workspaceFolders[0].uri);else{const t=this.workspaceService.getWorkspaceFolder(i);if(!t)throw new Error(`Test directory does not belong to any workspace (${e})`);r=this.workspaceService.getConfiguration("python",t.uri)}else r=this.workspaceService.getConfiguration("python");return r.update(t,n)})}};d=r([s.injectable(),i(0,s.inject(l.IServiceContainer))],d),t.TestConfigSettingsService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(2),a=n(1);let c=class{constructor(e){this.testsIndexedByWorkspaceUri=new Map,e.push(this)}getTests(e){const t=this.getWorkspaceFolderPath(e)||"";return this.testsIndexedByWorkspaceUri.has(t)?this.testsIndexedByWorkspaceUri.get(t):void 0}storeTests(e,t){const n=this.getWorkspaceFolderPath(e)||"";this.testsIndexedByWorkspaceUri.set(n,t)}dispose(){this.testsIndexedByWorkspaceUri.clear()}getWorkspaceFolderPath(e){const t=s.workspace.getWorkspaceFolder(e);return t?t.uri.path:void 0}};c=r([o.injectable(),i(0,o.inject(a.IDisposableRegistry))],c),t.TestCollectionStorageService=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=n(15);t.TestManagerService=class{constructor(e,t,n){this.wkspace=e,this.testsHelper=t,this.serviceContainer=n,this.cachedTestManagers=new Map;const i=n.get(r.IDisposableRegistry);this.configurationService=n.get(r.IConfigurationService),i.push(this)}dispose(){this.cachedTestManagers.forEach(e=>{e.dispose()})}getTestManager(){const e=this.getPreferredTestManager();if("number"!=typeof e)return;if(!this.cachedTestManagers.has(e)){const t=this.getTestWorkingDirectory(),n=this.testsHelper.parseProviderName(e),r=this.serviceContainer.get(i.ITestManagerFactory);this.cachedTestManagers.set(e,r(n,this.wkspace,t))}const t=this.cachedTestManagers.get(e);return t.enabled?t:void 0}getTestWorkingDirectory(){const e=this.configurationService.getSettings(this.wkspace);return e.unitTest.cwd&&e.unitTest.cwd.length>0?e.unitTest.cwd:this.wkspace.fsPath}getPreferredTestManager(){const e=this.configurationService.getSettings(this.wkspace);return e.unitTest.nosetestsEnabled?r.Product.nosetest:e.unitTest.pyTestEnabled?r.Product.pytest:e.unitTest.unittestEnabled?r.Product.unittest:void 0}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(15);let a=class{constructor(e){this.resultResetVisitor=e}resetResults(e){e.testFolders.forEach(e=>this.resultResetVisitor.visitTestFolder(e)),e.testFunctions.forEach(e=>this.resultResetVisitor.visitTestFunction(e.testFunction)),e.testSuites.forEach(e=>this.resultResetVisitor.visitTestSuite(e.testSuite)),e.testFiles.forEach(e=>this.resultResetVisitor.visitTestFile(e))}updateResults(e){e.testFiles.forEach(e=>this.updateTestFileResults(e)),e.testFolders.forEach(e=>this.updateTestFolderResults(e))}updateTestSuiteResults(e){this.updateTestSuiteAndFileResults(e)}updateTestFileResults(e){this.updateTestSuiteAndFileResults(e)}updateTestFolderResults(e){let t=!0,n=!0;e.testFiles.forEach(r=>{t&&"boolean"==typeof r.passed?r.passed||(t=!1):n=!1,e.functionsFailed+=r.functionsFailed,e.functionsPassed+=r.functionsPassed});let r=!0,i=!0;e.folders.forEach(t=>{this.updateTestFolderResults(t),r&&"boolean"==typeof t.passed?t.passed||(r=!1):i=!1,e.functionsFailed+=t.functionsFailed,e.functionsPassed+=t.functionsPassed}),n&&i?(e.passed=t&&r,e.status=e.passed?s.TestStatus.Idle:s.TestStatus.Fail):(e.passed=void 0,e.status=s.TestStatus.Unknown)}updateTestSuiteAndFileResults(e){let t=0,n=!0,r=!0;e.functions.forEach(i=>{t+=i.time,"boolean"==typeof i.passed?i.passed?e.functionsPassed+=1:(e.functionsFailed+=1,n=!1):r=!1});let i=!0,o=!0;e.suites.forEach(n=>{this.updateTestSuiteResults(n),t+=n.time,o&&"boolean"==typeof n.passed?n.passed||(i=!1):o=!1,e.functionsFailed+=n.functionsFailed,e.functionsPassed+=n.functionsPassed}),e.time=t,o&&r?(e.passed=n&&i,e.status=e.passed?s.TestStatus.Idle:s.TestStatus.Error):(e.passed=void 0,e.status=s.TestStatus.Unknown)}};a=r([o.injectable(),i(0,o.inject(s.ITestVisitor)),i(0,o.named("TestResultResetVisitor"))],a),t.TestResultsService=a},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(2),s=n(13),a=n(19),c=n(15);let u=class{constructor(){this.MessageTypes=new Map,this.MessageSeverities=new Map,this.MessagePrefixes=new Map,this.MessageTypes.set(c.TestStatus.Error,a.DiagnosticMessageType.Error),this.MessageTypes.set(c.TestStatus.Fail,a.DiagnosticMessageType.Fail),this.MessageTypes.set(c.TestStatus.Skipped,a.DiagnosticMessageType.Skipped),this.MessageTypes.set(c.TestStatus.Pass,a.DiagnosticMessageType.Pass),this.MessageSeverities.set(a.PythonUnitTestMessageSeverity.Error,o.DiagnosticSeverity.Error),this.MessageSeverities.set(a.PythonUnitTestMessageSeverity.Failure,o.DiagnosticSeverity.Error),this.MessageSeverities.set(a.PythonUnitTestMessageSeverity.Skip,o.DiagnosticSeverity.Information),this.MessageSeverities.set(a.PythonUnitTestMessageSeverity.Pass,null),this.MessagePrefixes.set(a.DiagnosticMessageType.Error,s.UnitTests.testErrorDiagnosticMessage()),this.MessagePrefixes.set(a.DiagnosticMessageType.Fail,s.UnitTests.testFailDiagnosticMessage()),this.MessagePrefixes.set(a.DiagnosticMessageType.Skipped,s.UnitTests.testSkippedDiagnosticMessage()),this.MessagePrefixes.set(a.DiagnosticMessageType.Pass,"")}getMessagePrefix(e){return this.MessagePrefixes.get(this.MessageTypes.get(e))}getSeverity(e){return this.MessageSeverities.get(e)}};u=r([i.injectable()],u),t.UnitTestDiagnosticService=u},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(2),a=n(1),c=n(20),u=n(15);let l=class{constructor(e,t,n){this.outChannel=e,this.testManagerServiceFactory=t,this.workspaceTestManagers=new Map,n.push(this)}dispose(){this.workspaceTestManagers.forEach(e=>e.dispose())}getTestManager(e){const t=this.getWorkspace(e);return this.ensureTestManagerService(t),this.workspaceTestManagers.get(t.fsPath).getTestManager()}getTestWorkingDirectory(e){const t=this.getWorkspace(e);return this.ensureTestManagerService(t),this.workspaceTestManagers.get(t.fsPath).getTestWorkingDirectory()}getPreferredTestManager(e){const t=this.getWorkspace(e);return this.ensureTestManagerService(t),this.workspaceTestManagers.get(t.fsPath).getPreferredTestManager()}getWorkspace(e){if(!Array.isArray(s.workspace.workspaceFolders)||0===s.workspace.workspaceFolders.length){const e="Please open a workspace";throw this.outChannel.appendLine(e),new Error(e)}if(!e||1===s.workspace.workspaceFolders.length)return s.workspace.workspaceFolders[0].uri;const t=s.workspace.getWorkspaceFolder(e);if(t)return t.uri;const n=`Resource '${e.fsPath}' does not belong to any workspace`;throw this.outChannel.appendLine(n),new Error(n)}ensureTestManagerService(e){this.workspaceTestManagers.has(e.fsPath)||this.workspaceTestManagers.set(e.fsPath,this.testManagerServiceFactory(e))}};l=r([o.injectable(),i(0,o.inject(a.IOutputChannel)),i(0,o.named(c.TEST_OUTPUT_CHANNEL)),i(1,o.inject(u.ITestManagerServiceFactory)),i(2,o.inject(a.IDisposableRegistry))],l),t.WorkspaceTestManagerService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(86);let s=class{constructor(){this._flattedTestFunctions=new Map,this._flattenedTestSuites=new Map}get flattenedTestFunctions(){return[...this._flattedTestFunctions.values()]}get flattenedTestSuites(){return[...this._flattenedTestSuites.values()]}visitTestFunction(e){}visitTestSuite(e){}visitTestFile(e){const t=o.convertFileToPackage(e.name);e.functions.forEach(n=>this.addTestFunction(n,e,t)),e.suites.forEach(t=>this.visitTestSuiteOfAFile(t,e))}visitTestFolder(e){}visitTestSuiteOfAFile(e,t){e.functions.forEach(n=>this.visitTestFunctionOfASuite(n,e,t)),e.suites.forEach(e=>this.visitTestSuiteOfAFile(e,t)),this.addTestSuite(e,t)}visitTestFunctionOfASuite(e,t,n){const r=`Function:${e.name},Suite:${t.name},SuiteXmlName:${t.xmlName},ParentFile:${n.fullPath}`;if(this._flattenedTestSuites.has(r))return;const i={testFunction:e,xmlClassName:t.xmlName,parentTestFile:n,parentTestSuite:t};this._flattedTestFunctions.set(r,i)}addTestSuite(e,t){const n=`Suite:${e.name},SuiteXmlName:${e.xmlName},ParentFile:${t.fullPath}`;if(this._flattenedTestSuites.has(n))return;const r={parentTestFile:t,testSuite:e,xmlClassName:e.xmlName};this._flattenedTestSuites.set(n,r)}addTestFunction(e,t,n){const r=`Function:${e.name},ParentFile:${t.fullPath}`;if(this._flattedTestFunctions.has(r))return;const i={testFunction:e,xmlClassName:n,parentTestFile:t};this._flattedTestFunctions.set(r,i)}};s=r([i.injectable()],s),t.TestFlatteningVisitor=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(3);let s=class{constructor(){this._testFolders=[],this._rootTestFolders=[],this.folderMap=new Map}get testFolders(){return[...this._testFolders]}get rootTestFolders(){return[...this._rootTestFolders]}visitTestFunction(e){}visitTestSuite(e){}visitTestFile(e){const t=o.dirname(e.name);if(this.folderMap.has(t)){this.folderMap.get(t).testFiles.push(e)}else t.split(o.sep).reduce((e,t,n)=>{let r,i=t;if(e.length>0&&(r=this.folderMap.get(e),i=o.join(e,t)),!this.folderMap.has(i)){const e={name:i,testFiles:[],folders:[],nameToRun:i,time:0};this.folderMap.set(i,e),r?r.folders.push(e):this._rootTestFolders.push(e),this._testFolders.push(e)}return i},""),this.folderMap.get(t).testFiles.push(e)}visitTestFolder(e){}};s=r([i.injectable()],s),t.TestFolderGenerationVisitor=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),o=n(15);let s=class{visitTestFunction(e){e.passed=void 0,e.time=0,e.message="",e.traceback="",e.status=o.TestStatus.Unknown,e.functionsFailed=0,e.functionsPassed=0,e.functionsDidNotRun=0}visitTestSuite(e){e.passed=void 0,e.time=0,e.status=o.TestStatus.Unknown,e.functionsFailed=0,e.functionsPassed=0,e.functionsDidNotRun=0}visitTestFile(e){e.passed=void 0,e.time=0,e.status=o.TestStatus.Unknown,e.functionsFailed=0,e.functionsPassed=0,e.functionsDidNotRun=0}visitTestFolder(e){e.functionsDidNotRun=0,e.functionsFailed=0,e.functionsPassed=0,e.passed=void 0,e.status=o.TestStatus.Unknown}};s=r([i.injectable()],s),t.TestResultResetVisitor=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(18),o=n(0),s=n(15);function a(e,t=0){const n=parseInt(e,10);return isNaN(n)?t:n}let c=class{updateResultsFromXmlLogFile(e,t,n){return u(e,t,n)}};function u(e,t,r){return new Promise((o,c)=>{i.readFile(t,"utf8",(t,i)=>{if(t)return c(t);n(687).parseString(i,(t,n)=>{if(t)return c(t);const i=n.testsuite;e.summary.errors=a(i.$.errors),e.summary.failures=a(i.$.failures),e.summary.skipped=a(i.$.skips?i.$.skips:i.$.skip);const u=a(i.$.tests);switch(r){case s.PassCalculationFormulae.pytest:case s.PassCalculationFormulae.nosetests:e.summary.passed=u-e.summary.failures-e.summary.skipped-e.summary.errors;break;default:throw new Error("Unknown Test Pass Calculation")}if(!Array.isArray(i.testcase))return o();i.testcase.forEach(t=>{const n=t.$.classname.replace(/\(\)/g,"").replace(/\.\./g,".").replace(/\.\./g,".").replace(/\.+$/,""),r=e.testFunctions.find(e=>e.xmlClassName===n&&e.testFunction.name===t.$.name);if(r)r.testFunction.line=a(t.$.line,null),r.testFunction.file=t.$.file,r.testFunction.time=parseFloat(t.$.time),r.testFunction.passed=!0,r.testFunction.status=s.TestStatus.Pass,t.failure&&(r.testFunction.status=s.TestStatus.Fail,r.testFunction.passed=!1,r.testFunction.message=t.failure[0].$.message,r.testFunction.traceback=t.failure[0]._),t.error&&(r.testFunction.status=s.TestStatus.Error,r.testFunction.passed=!1,r.testFunction.message=t.error[0].$.message,r.testFunction.traceback=t.error[0]._),t.skipped&&(r.testFunction.status=s.TestStatus.Skipped,r.testFunction.passed=void 0,r.testFunction.message=t.skipped[0].$.message,r.testFunction.traceback="");else{const n=t.$.file&&e.testFiles.find(e=>e.nameToRun===t.$.file);n&&t.error&&(n.status=s.TestStatus.Error,n.passed=!1,n.message=t.error[0].$.message,n.traceback=t.error[0]._)}}),o()})})})}c=r([o.injectable()],c),t.XUnitParser=c,t.updateResultsFromXmlLogFile=u},function(e,t){e.exports=require("./node_modules/xml2js")},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(4),c=n(1),u=n(5),l=n(20),d=n(19);let h=class{constructor(e){this.serviceContainer=e,this.configurationService=e.get(c.IConfigurationService),this.appShell=e.get(a.IApplicationShell),this.installer=e.get(c.IInstaller),this.outputChannel=e.get(c.IOutputChannel,l.TEST_OUTPUT_CHANNEL),this.workspaceService=e.get(a.IWorkspaceService)}displayTestFrameworkError(e){return o(this,void 0,void 0,function*(){const t=this.configurationService.getSettings(e);let n=t.unitTest.pyTestEnabled?1:0;if(n+=t.unitTest.nosetestsEnabled?1:0,(n+=t.unitTest.unittestEnabled?1:0)>1)return this.promptToEnableAndConfigureTestFramework(e,this.installer,this.outputChannel,"Enable only one of the test frameworks (unittest, pytest or nosetest).",!0);{const t="Enable and configure a Test Framework";return(yield this.appShell.showInformationMessage("No test framework configured (unittest, pytest or nosetest)",t))===t?this.promptToEnableAndConfigureTestFramework(e,this.installer,this.outputChannel):Promise.reject(null)}})}selectTestRunner(e){return o(this,void 0,void 0,function*(){const t=[{label:"unittest",product:c.Product.unittest,description:"Standard Python test framework",detail:"https://docs.python.org/3/library/unittest.html"},{label:"pytest",product:c.Product.pytest,description:"Can run unittest (including trial) and nose test suites out of the box",detail:"http://docs.pytest.org/"},{label:"nose",product:c.Product.nosetest,description:"nose framework",detail:"https://nose.readthedocs.io/"}],n={matchOnDescription:!0,matchOnDetail:!0,placeHolder:e},r=yield this.appShell.showQuickPick(t,n);return r?r.product:void 0})}enableTest(e,t){const n=this.serviceContainer.get(d.ITestConfigurationManagerFactory).create(e,t),r=this.workspaceService.getConfiguration("python",e);return r.get("unitTest.promptToConfigure")?n.enable():r.update("unitTest.promptToConfigure",void 0).then(()=>n.enable(),e=>n.enable().then(()=>Promise.reject(e)))}promptToEnableAndConfigureTestFramework(e,t,n,r="Select a test framework/tool to enable",i=!1){return o(this,void 0,void 0,function*(){const t=yield this.selectTestRunner(r);if("number"!=typeof t)return Promise.reject(null);const n=this.serviceContainer.get(d.ITestConfigurationManagerFactory),o=n.create(e,t);return i?([c.Product.unittest,c.Product.pytest,c.Product.nosetest].filter(e=>t!==e).forEach(t=>{n.create(e,t).disable().catch(e=>console.error("Python Extension: createTestConfigurationManager.disable",e))}),o.enable()):o.configure(e).then(()=>this.enableTest(e,t)).catch(n=>this.enableTest(e,t).then(()=>Promise.reject(n)))})}};h=r([s.injectable(),i(0,s.inject(u.IServiceContainer))],h),t.UnitTestConfigurationService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(1),a=n(5),c=n(690),u=n(691),l=n(692);let d=class{constructor(e){this.serviceContainer=e}create(e,t){switch(t){case s.Product.unittest:return new l.ConfigurationManager(e,this.serviceContainer);case s.Product.pytest:return new u.ConfigurationManager(e,this.serviceContainer);case s.Product.nosetest:return new c.ConfigurationManager(e,this.serviceContainer);default:throw new Error("Invalid test configuration")}}};d=r([o.injectable(),i(0,o.inject(a.IServiceContainer))],d),t.TestConfigurationManagerFactory=d},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(6),s=n(1),a=n(147);t.ConfigurationManager=class extends a.TestConfigurationManager{constructor(e,t){super(e,s.Product.nosetest,t)}requiresUserToConfigure(e){return r(this,void 0,void 0,function*(){const t=this.serviceContainer.get(o.IFileSystem);for(const n of[".noserc","nose.cfg"])if(yield t.fileExists(i.join(e.fsPath,n)))return!0;return!1})}configure(e){return r(this,void 0,void 0,function*(){const t=[];if(yield this.requiresUserToConfigure(e))return;const n=yield this.getTestDirs(e.fsPath),r=yield this.selectTestDir(e.fsPath,n);"string"==typeof r&&"Use existing config file"!==r&&t.push(r),(yield this.installer.isInstalled(s.Product.nosetest))||(yield this.installer.install(s.Product.nosetest)),yield this.testConfigSettingsService.updateTestArgs(e.fsPath,s.Product.nosetest,t)})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(6),s=n(1),a=n(147);t.ConfigurationManager=class extends a.TestConfigurationManager{constructor(e,t){super(e,s.Product.pytest,t)}requiresUserToConfigure(e){return r(this,void 0,void 0,function*(){const t=yield this.getConfigFiles(e.fsPath);return!(t.length>0&&1!==t.length&&"setup.cfg"!==t[0])})}configure(e){return r(this,void 0,void 0,function*(){const t=[],n=[],r=yield this.getConfigFiles(e.fsPath);if(r.length>0&&1!==r.length&&"setup.cfg"!==r[0])return;1===r.length&&"setup.cfg"===r[0]&&n.push({label:"Use existing config file",description:"setup.cfg"});const i=yield this.getTestDirs(e.fsPath),o=yield this.selectTestDir(e.fsPath,i,n);"string"==typeof o&&"Use existing config file"!==o&&t.push(o),(yield this.installer.isInstalled(s.Product.pytest))||(yield this.installer.install(s.Product.pytest)),yield this.testConfigSettingsService.updateTestArgs(e.fsPath,s.Product.pytest,t)})}getConfigFiles(e){return r(this,void 0,void 0,function*(){const t=this.serviceContainer.get(o.IFileSystem),n=["pytest.ini","tox.ini","setup.cfg"].map(n=>r(this,void 0,void 0,function*(){return(yield t.fileExists(i.join(e,n)))?n:""}));return(yield Promise.all(n)).filter(e=>e.length>0)})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(147);t.ConfigurationManager=class extends o.TestConfigurationManager{constructor(e,t){super(e,i.Product.unittest,t)}requiresUserToConfigure(e){return r(this,void 0,void 0,function*(){return!0})}configure(e){return r(this,void 0,void 0,function*(){const t=["-v"],n=yield this.getTestDirs(e.fsPath),r=yield this.selectTestDir(e.fsPath,n);t.push("-s"),"string"==typeof r&&"."!==r?t.push(`./${r}`):t.push(".");const o=yield this.selectTestFilePattern();t.push("-p"),"string"==typeof o?t.push(o):t.push("test*.py"),yield this.testConfigSettingsService.updateTestArgs(e.fsPath,i.Product.unittest,t)})}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(11),l=n(79),d=n(1),h=n(22),p=n(5),f=n(20),g=n(15);let m=class{constructor(e){this.serviceContainer=e,this.discoverCounter=0,this.ticker=["|","/","-","|","/","-","\\"],this._enabled=!1,this.didChange=new a.EventEmitter,this.appShell=e.get(c.IApplicationShell),this.statusBar=this.appShell.createStatusBarItem(a.StatusBarAlignment.Left),this.testsHelper=e.get(g.ITestsHelper)}get onDidChange(){return this.didChange.event}dispose(){this.clearProgressTicker(),this.statusBar.dispose()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,e?this.statusBar.show():this.statusBar.hide()}displayProgressStatus(e,t=!1){this.displayProgress("Running Tests","Running Tests (Click to Stop)",u.Commands.Tests_Ask_To_Stop_Test),e.then(e=>this.updateTestRunWithSuccess(e,t)).catch(this.updateTestRunWithFailure.bind(this)).catch(h.noop)}displayDiscoverStatus(e,t=!1){return this.displayProgress("Discovering Tests","Discovering tests (click to stop)",u.Commands.Tests_Ask_To_Stop_Discovery),e.then(e=>(this.updateWithDiscoverSuccess(e,t),e)).catch(e=>(this.updateWithDiscoverFailure(e),Promise.reject(e)))}updateTestRunWithSuccess(e,t=!1){this.clearProgressTicker();const n=[],r=[];let i="";return e.summary.passed>0&&(n.push(`${u.Octicons.Test_Pass} ${e.summary.passed}`),r.push(`${e.summary.passed} Passed`),i="#66ff66"),e.summary.skipped>0&&(n.push(`${u.Octicons.Test_Skip} ${e.summary.skipped}`),r.push(`${e.summary.skipped} Skipped`),i="#66ff66"),e.summary.failures>0&&(n.push(`${u.Octicons.Test_Fail} ${e.summary.failures}`),r.push(`${e.summary.failures} Failed`),i="yellow"),e.summary.errors>0&&(n.push(`${u.Octicons.Test_Error} ${e.summary.errors}`),r.push(`${e.summary.errors} Error${e.summary.errors>1?"s":""}`),i="yellow"),this.statusBar.tooltip=0===r.length?"No Tests Ran":`${r.join(", ")} (Tests)`,this.statusBar.text=0===n.length?"No Tests Ran":n.join(" "),this.statusBar.color=i,this.statusBar.command=u.Commands.Tests_View_UI,this.didChange.fire(),0!==n.length||t||this.appShell.showWarningMessage("No tests ran, please check the configuration settings for the tests."),e}updateTestRunWithFailure(e){return this.clearProgressTicker(),this.statusBar.command=u.Commands.Tests_View_UI,e===f.CANCELLATION_REASON?(this.statusBar.text="$(zap) Run Tests",this.statusBar.tooltip="Run Tests"):(this.statusBar.text="$(alert) Tests Failed",this.statusBar.tooltip="Running Tests Failed",this.testsHelper.displayTestErrorMessage("There was an error in running the tests.")),Promise.reject(e)}displayProgress(e,t,n){this.progressPrefix=this.statusBar.text=`$(stop) ${e}`,this.statusBar.command=n,this.statusBar.tooltip=t,this.statusBar.show(),this.clearProgressTicker(),this.progressTimeout=setInterval(()=>this.updateProgressTicker(),150)}updateProgressTicker(){const e=`${this.progressPrefix} ${this.ticker[this.discoverCounter%7]}`;this.discoverCounter+=1,this.statusBar.text=e}clearProgressTicker(){this.progressTimeout&&clearInterval(this.progressTimeout),this.progressTimeout=null,this.discoverCounter=0}disableTests(){return o(this,void 0,void 0,function*(){const e=this.serviceContainer.get(d.IConfigurationService),t=["unitTest.promptToConfigure","unitTest.pyTestEnabled","unitTest.unittestEnabled","unitTest.nosetestsEnabled"];for(const n of t)yield e.updateSetting(n,!1).catch(h.noop)})}updateWithDiscoverSuccess(e,t=!1){this.clearProgressTicker();const n=e&&e.testFunctions.length>0;this.statusBar.text="$(zap) Run Tests",this.statusBar.tooltip="Run Tests",this.statusBar.command=u.Commands.Tests_View_UI,this.statusBar.show(),this.didChange&&this.didChange.fire(),n||t||this.appShell.showInformationMessage("No tests discovered, please check the configuration settings for the tests.","Disable Tests").then(e=>{"Disable Tests"===e&&this.disableTests().catch(e=>console.error("Python Extension: disableTests",e))})}updateWithDiscoverFailure(e){this.clearProgressTicker(),this.statusBar.text="$(zap) Discover Tests",this.statusBar.tooltip="Discover Tests",this.statusBar.command=u.Commands.Tests_Discover,this.statusBar.show(),this.statusBar.color="yellow",e!==f.CANCELLATION_REASON&&(this.statusBar.text="$(alert) Test discovery failed",this.statusBar.tooltip="Discovering Tests failed (view 'Python Test Log' output panel for details)",l.isNotInstalledError(e)||this.appShell.showErrorMessage("Test discovery error, please check the configuration settings for the tests."))}};m=r([s.injectable(),i(0,s.inject(p.IServiceContainer))],m),t.TestResultDisplay=m},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(3),a=n(2),c=n(4),u=n(11),l=n(22),d=n(5),h=n(15);let p=class{constructor(e){this.testCollectionStorage=e.get(h.ITestCollectionStorageService),this.appShell=e.get(c.IApplicationShell)}displayStopTestUI(e,t){this.appShell.showQuickPick([t]).then(n=>{n===t&&a.commands.executeCommand(u.Commands.Tests_Stop,void 0,e)})}displayTestUI(e,t){const n=this.testCollectionStorage.getTests(t);this.appShell.showQuickPick(function(e){const t=[];t.push({description:"",label:"Run All Unit Tests",type:f.RunAll}),t.push({description:"",label:"Discover Unit Tests",type:f.ReDiscover}),t.push({description:"",label:"Run Unit Test Method ...",type:f.SelectAndRunMethod});const n=function(e){if(!e||!e.summary)return"";const t=[];e.summary.passed>0&&t.push(`${u.Octicons.Test_Pass} ${e.summary.passed} Passed`);e.summary.failures>0&&t.push(`${u.Octicons.Test_Fail} ${e.summary.failures} Failed`);if(e.summary.errors>0){const n=1===e.summary.errors?"":"s";t.push(`${u.Octicons.Test_Error} ${e.summary.errors} Error${n}`)}e.summary.skipped>0&&t.push(`${u.Octicons.Test_Skip} ${e.summary.skipped} Skipped`);return t.join(", ").trim()}(e);t.push({description:"",label:"View Unit Test Output",type:f.ViewTestOutput,detail:n}),e&&e.summary.failures>0&&t.push({description:"",label:"Run Failed Tests",type:f.RunFailed,detail:`${u.Octicons.Test_Fail} ${e.summary.failures} Failed`});return t}(n),{matchOnDescription:!0,matchOnDetail:!0}).then(n=>n?v(e,t,n,!1):l.noop())}selectTestFunction(e,t){return new Promise((n,r)=>{this.appShell.showQuickPick(y(e,t.testFunctions),{matchOnDescription:!0,matchOnDetail:!0}).then(e=>e&&e.fn?n(e.fn):r(),r)})}selectTestFile(e,t){return new Promise((n,r)=>{this.appShell.showQuickPick(function(e,t){const n=t.map(t=>({description:"",detail:s.relative(e,t.fullPath),type:f.RunFile,label:s.basename(t.fullPath),testFile:t}));return n.sort((e,t)=>e.detail||t.detail?!e.detail||e.detail<t.detail?-1:!t.detail||e.detail>t.detail?1:0:0),n}(e,t.testFiles),{matchOnDescription:!0,matchOnDetail:!0}).then(e=>e&&e.testFile?n(e.testFile):r(),r)})}displayFunctionTestPickerUI(e,t,n,r,i,o){const s=this.testCollectionStorage.getTests(t);if(!s)return;const a=r.fsPath,c=s.testFiles.find(e=>e.name===a||e.fullPath===a);if(!c)return;const u=s.testFunctions.filter(e=>e.parentTestFile.name===c.name&&i.some(t=>t.nameToRun===e.testFunction.nameToRun));this.appShell.showQuickPick(y(n,u,void 0,void 0,o),{matchOnDescription:!0,matchOnDetail:!0}).then(n=>n?v(e,t,n,o):l.noop())}};var f;p=r([o.injectable(),i(0,o.inject(d.IServiceContainer))],p),t.TestDisplay=p,function(e){e[e.RunAll=0]="RunAll",e[e.ReDiscover=1]="ReDiscover",e[e.RunFailed=2]="RunFailed",e[e.RunFolder=3]="RunFolder",e[e.RunFile=4]="RunFile",e[e.RunClass=5]="RunClass",e[e.RunMethod=6]="RunMethod",e[e.ViewTestOutput=7]="ViewTestOutput",e[e.Null=8]="Null",e[e.SelectAndRunMethod=9]="SelectAndRunMethod",e[e.DebugMethod=10]="DebugMethod"}(f||(f={}));const g=new Map;g.set(h.TestStatus.Pass,u.Octicons.Test_Pass),g.set(h.TestStatus.Fail,u.Octicons.Test_Fail),g.set(h.TestStatus.Error,u.Octicons.Test_Error),g.set(h.TestStatus.Skipped,u.Octicons.Test_Skip);const m={[h.TestStatus.Error]:"1",[h.TestStatus.Fail]:"2",[h.TestStatus.Skipped]:"3",[h.TestStatus.Pass]:"4",[h.TestStatus.Discovering]:void 0,[h.TestStatus.Idle]:void 0,[h.TestStatus.Running]:void 0,[h.TestStatus.Unknown]:void 0};function y(e,t,n=!1,r=!1,i=!1){const o=[];return t.forEach(t=>{let n="";r&&t.testFunction.status&&g.has(t.testFunction.status)&&(n=`${g.get(t.testFunction.status)} `),o.push({description:"",detail:s.relative(e,t.parentTestFile.fullPath),label:n+t.testFunction.name,type:!0===i?f.DebugMethod:f.RunMethod,fn:t})}),o.sort((e,t)=>{let r="5-",i="5-";return n&&e.fn&&e.fn.testFunction.status&&t.fn&&t.fn.testFunction.status&&(r=m[e.fn.testFunction.status]?m[e.fn.testFunction.status]:r,i=m[t.fn.testFunction.status]?m[t.fn.testFunction.status]:i),`${r}${e.detail}${e.label}`<`${i}${t.detail}${t.label}`?-1:`${r}${e.detail}${e.label}`>`${i}${t.detail}${t.label}`?1:0}),o}function v(e,t,n,r){if(!n||"number"!=typeof n.type)return;let i="";const o=[void 0,e,t];switch(n.type){case f.Null:return;case f.RunAll:i=u.Commands.Tests_Run;break;case f.ReDiscover:i=u.Commands.Tests_Discover;break;case f.ViewTestOutput:i=u.Commands.Tests_ViewOutput;break;case f.RunFailed:i=u.Commands.Tests_Run_Failed;break;case f.SelectAndRunMethod:i=r?u.Commands.Tests_Select_And_Debug_Method:u.Commands.Tests_Select_And_Run_Method;break;case f.RunMethod:i=u.Commands.Tests_Run,o.push({testFunction:[n.fn.testFunction]});break;case f.DebugMethod:i=u.Commands.Tests_Debug,o.push({testFunction:[n.fn.testFunction]}),o.push(!0);break;default:return}a.commands.executeCommand(i,...o)}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(4),u=n(11),l=n(1),d=n(5),h=n(9),p=n(7),f=n(696),g=n(20),m=n(86),y=n(15),v=n(19);let b=class{constructor(e){this.serviceContainer=e,this.onDidChange=new a.EventEmitter,this.disposableRegistry=e.get(l.IDisposableRegistry),this.outputChannel=e.get(l.IOutputChannel,g.TEST_OUTPUT_CHANNEL),this.workspaceService=e.get(c.IWorkspaceService),this.documentManager=e.get(c.IDocumentManager),this.disposableRegistry.push(this)}dispose(){this.workspaceTestManagerService&&this.workspaceTestManagerService.dispose()}activate(){return o(this,void 0,void 0,function*(){this.workspaceTestManagerService=this.serviceContainer.get(y.IWorkspaceTestManagerService),this.registerHandlers(),this.registerCommands(),this.autoDiscoverTests().catch(e=>this.serviceContainer.get(l.ILogger).logError("Failed to auto discover tests upon activation",e))})}activateCodeLenses(e){return o(this,void 0,void 0,function*(){const t=this.serviceContainer.get(y.ITestCollectionStorageService);this.disposableRegistry.push(f.activateCodeLenses(this.onDidChange,e,t))})}getTestManager(e,t){return o(this,void 0,void 0,function*(){let n;if(t){const e=this.workspaceService.getWorkspaceFolder(t);n=e?e.uri:void 0}else n=yield m.selectTestWorkspace();if(!n)return;const r=this.workspaceTestManagerService.getTestManager(n);if(r)return r;if(e){yield this.serviceContainer.get(v.IUnitTestConfigurationService).displayTestFrameworkError(n)}})}configurationChangeHandler(e){return o(this,void 0,void 0,function*(){if(!this.workspaceService.hasWorkspaceFolders||this.workspaceService.workspaceFolders.length>1)return;const t=this.workspaceService.workspaceFolders[0].uri;if(!e.affectsConfiguration("python.unitTest",t))return;const n=this.serviceContainer.get(l.IConfigurationService).getSettings(t);if(!n.unitTest.nosetestsEnabled&&!n.unitTest.pyTestEnabled&&!n.unitTest.unittestEnabled)return this.testResultDisplay&&(this.testResultDisplay.enabled=!1),void(this.workspaceTestManagerService&&this.workspaceTestManagerService.dispose());this.testResultDisplay&&(this.testResultDisplay.enabled=!0),this.autoDiscoverTests().catch(e=>this.serviceContainer.get(l.ILogger).logError("Failed to auto discover tests upon activation",e))})}discoverTestsForDocument(e){return o(this,void 0,void 0,function*(){const t=yield this.getTestManager(!1,e.uri);if(!t)return;const n=yield t.discoverTests(g.CommandSource.auto,!1,!0);n&&Array.isArray(n.testFiles)&&0!==n.testFiles.length&&-1!==n.testFiles.findIndex(t=>t.fullPath===e.uri.fsPath)&&(this.autoDiscoverTimer&&clearTimeout(this.autoDiscoverTimer),this.autoDiscoverTimer=setTimeout(()=>this.discoverTests(g.CommandSource.auto,e.uri,!0,!1,!0),1e3))})}autoDiscoverTests(){return o(this,void 0,void 0,function*(){if(!this.workspaceService.hasWorkspaceFolders)return;const e=this.serviceContainer.get(l.IConfigurationService).getSettings();(e.unitTest.nosetestsEnabled||e.unitTest.pyTestEnabled||e.unitTest.unittestEnabled)&&this.discoverTests(g.CommandSource.auto,this.workspaceService.workspaceFolders[0].uri,!0).catch(()=>{})})}discoverTests(e,t,n,r,i){return o(this,void 0,void 0,function*(){const o=yield this.getTestManager(!0,t);if(!o)return;if(o.status===y.TestStatus.Discovering||o.status===y.TestStatus.Running)return;this.testResultDisplay||(this.testResultDisplay=this.serviceContainer.get(v.ITestResultDisplay),this.testResultDisplay.onDidChange(()=>this.onDidChange.fire()));const s=o.discoverTests(e,n,i,r);this.testResultDisplay.displayDiscoverStatus(s,i).catch(e=>console.error("Python Extension: displayDiscoverStatus",e)),yield s})}stopTests(e){return o(this,void 0,void 0,function*(){p.sendTelemetryEvent(h.EventName.UNITTEST_STOP);const t=yield this.getTestManager(!0,e);t&&t.stop()})}displayStopUI(e){return o(this,void 0,void 0,function*(){const t=yield this.getTestManager(!0);t&&this.serviceContainer.get(v.ITestDisplay).displayStopTestUI(t.workspaceFolder,e)})}displayUI(e){return o(this,void 0,void 0,function*(){const t=yield this.getTestManager(!0);t&&this.serviceContainer.get(v.ITestDisplay).displayTestUI(e,t.workspaceFolder)})}displayPickerUI(e,t,n,r){return o(this,void 0,void 0,function*(){const i=yield this.getTestManager(!0,t);i&&this.serviceContainer.get(v.ITestDisplay).displayFunctionTestPickerUI(e,i.workspaceFolder,i.workingDirectory,t,n,r)})}viewOutput(e){p.sendTelemetryEvent(h.EventName.UNITTEST_VIEW_OUTPUT),this.outputChannel.show()}selectAndRunTestMethod(e,t,n){return o(this,void 0,void 0,function*(){const r=yield this.getTestManager(!0,t);if(!r)return;try{yield r.discoverTests(e,!0,!0,!0)}catch(e){return}const i=this.serviceContainer.get(y.ITestCollectionStorageService).getTests(r.workspaceFolder),o=yield this.serviceContainer.get(v.ITestDisplay).selectTestFunction(r.workspaceFolder.fsPath,i);o&&(yield this.runTestsImpl(e,r.workspaceFolder,{testFunction:[o.testFunction]},!1,n))})}selectAndRunTestFile(e){return o(this,void 0,void 0,function*(){const t=yield this.getTestManager(!0);if(!t)return;try{yield t.discoverTests(e,!0,!0,!0)}catch(e){return}const n=this.serviceContainer.get(y.ITestCollectionStorageService).getTests(t.workspaceFolder),r=yield this.serviceContainer.get(v.ITestDisplay).selectTestFile(t.workspaceFolder.fsPath,n);r&&(yield this.runTestsImpl(e,t.workspaceFolder,{testFile:[r]}))})}runCurrentTestFile(e){return o(this,void 0,void 0,function*(){if(!this.documentManager.activeTextEditor)return;const t=yield this.getTestManager(!0,this.documentManager.activeTextEditor.document.uri);if(!t)return;try{yield t.discoverTests(e,!0,!0,!0)}catch(e){return}const n=this.serviceContainer.get(y.ITestCollectionStorageService).getTests(t.workspaceFolder).testFiles.filter(e=>e.fullPath===this.documentManager.activeTextEditor.document.uri.fsPath);n.length<1||(yield this.runTestsImpl(e,t.workspaceFolder,{testFile:[n[0]]}))})}runTestsImpl(e,t,n,r,i=!1){return o(this,void 0,void 0,function*(){const o=yield this.getTestManager(!0,t);if(!o)return;this.testResultDisplay||(this.testResultDisplay=this.serviceContainer.get(v.ITestResultDisplay),this.testResultDisplay.onDidChange(()=>this.onDidChange.fire()));const s=o.runTest(e,n,r,i).catch(e=>(e!==g.CANCELLATION_REASON&&this.outputChannel.appendLine(`Error: ${e}`),Promise.reject(e)));this.testResultDisplay.displayProgressStatus(s,i),yield s})}registerCommands(){const e=this.serviceContainer.get(l.IDisposableRegistry),t=this.serviceContainer.get(c.ICommandManager),n=[t.registerCommand(u.Commands.Tests_Discover,(e,t=g.CommandSource.commandPalette,n)=>{this.discoverTests(t,n,!0,!0).ignoreErrors()}),t.registerCommand(u.Commands.Tests_Run_Failed,(e,t=g.CommandSource.commandPalette,n)=>this.runTestsImpl(t,n,void 0,!0)),t.registerCommand(u.Commands.Tests_Run,(e,t=g.CommandSource.commandPalette,n,r)=>this.runTestsImpl(t,n,r)),t.registerCommand(u.Commands.Tests_Debug,(e,t=g.CommandSource.commandPalette,n,r)=>this.runTestsImpl(t,n,r,!1,!0)),t.registerCommand(u.Commands.Tests_View_UI,()=>this.displayUI(g.CommandSource.commandPalette)),t.registerCommand(u.Commands.Tests_Picker_UI,(e,t=g.CommandSource.commandPalette,n,r)=>this.displayPickerUI(t,n,r)),t.registerCommand(u.Commands.Tests_Picker_UI_Debug,(e,t=g.CommandSource.commandPalette,n,r)=>this.displayPickerUI(t,n,r,!0)),t.registerCommand(u.Commands.Tests_Stop,(e,t)=>this.stopTests(t)),t.registerCommand(u.Commands.Tests_ViewOutput,(e,t=g.CommandSource.commandPalette)=>this.viewOutput(t)),t.registerCommand(u.Commands.Tests_Ask_To_Stop_Discovery,()=>this.displayStopUI("Stop discovering tests")),t.registerCommand(u.Commands.Tests_Ask_To_Stop_Test,()=>this.displayStopUI("Stop running tests")),t.registerCommand(u.Commands.Tests_Select_And_Run_Method,(e,t=g.CommandSource.commandPalette,n)=>this.selectAndRunTestMethod(t,n)),t.registerCommand(u.Commands.Tests_Select_And_Debug_Method,(e,t=g.CommandSource.commandPalette,n)=>this.selectAndRunTestMethod(t,n,!0)),t.registerCommand(u.Commands.Tests_Select_And_Run_File,(e,t=g.CommandSource.commandPalette)=>this.selectAndRunTestFile(t)),t.registerCommand(u.Commands.Tests_Run_Current_File,(e,t=g.CommandSource.commandPalette)=>this.runCurrentTestFile(t))];e.push(...n)}onDocumentSaved(e){this.serviceContainer.get(l.IConfigurationService).getSettings(e.uri).unitTest.autoTestDiscoverOnSaveEnabled&&this.discoverTestsForDocument(e).ignoreErrors()}registerHandlers(){const e=this.serviceContainer.get(c.IDocumentManager);this.disposableRegistry.push(e.onDidSaveTextDocument(this.onDocumentSaved.bind(this))),this.disposableRegistry.push(this.workspaceService.onDidChangeConfiguration(e=>{this.configChangedTimer&&clearTimeout(this.configChangedTimer),this.configChangedTimer=setTimeout(()=>this.configurationChangeHandler(e),1e3)}))}};b=r([s.injectable(),i(0,s.inject(d.IServiceContainer))],b),t.UnitTestManagementService=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(11),o=n(697);t.activateCodeLenses=function(e,t,n){const s=[],a=new o.TestFileCodeLensProvider(e,t,n);return s.push(r.languages.registerCodeLensProvider(i.PYTHON,a)),{dispose:()=>{s.forEach(e=>e.dispose())}}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(11),s=n(20),a=n(15);function c(e){switch(e){case a.TestStatus.Pass:return" ";case a.TestStatus.Error:case a.TestStatus.Fail:return" ";case a.TestStatus.Skipped:return" ";default:return""}}function u(e){const t=[];let n=e.filter(e=>e.status===a.TestStatus.Pass).length;return n>0&&t.push(` ${n}`),(n=e.filter(e=>e.status===a.TestStatus.Error||e.status===a.TestStatus.Fail).length)>0&&t.push(` ${n}`),(n=e.filter(e=>e.status===a.TestStatus.Skipped).length)>0&&t.push(` ${n}`),t.join(" ")}t.TestFileCodeLensProvider=class{constructor(e,t,n){this._onDidChange=e,this.symbolProvider=t,this.testCollectionStorage=n}get onDidChangeCodeLenses(){return this._onDidChange.event}provideCodeLenses(e,t){return r(this,void 0,void 0,function*(){const n=i.workspace.getWorkspaceFolder(e.uri);if(!n)return[];const r=this.testCollectionStorage.getTests(n.uri);if(!r||0===r.testFiles.length||0===r.testFunctions.length)return[];const s=new i.CancellationTokenSource;return t.onCancellationRequested(()=>{s.cancel()}),setTimeout(()=>{s.token.isCancellationRequested||s.cancel()},o.Delays.MaxUnitTestCodeLensDelay),this.getCodeLenses(e,s.token,this.symbolProvider)})}resolveCodeLens(e,t){return e.command={command:"python.runtests",title:"Test"},Promise.resolve(e)}getCodeLenses(e,t,n){return r(this,void 0,void 0,function*(){const r=i.workspace.getWorkspaceFolder(e.uri);if(!r)return[];const o=this.testCollectionStorage.getTests(r.uri);if(!o)return[];const s=o.testFiles.find(t=>t.fullPath===e.uri.fsPath);if(!s)return[];const a=function(e){const t={functions:e.functions,suites:[]};return e.suites.forEach(e=>{t.suites.push(e);const n=function e(t){const n={functions:[],suites:[]};return t.functions.forEach(e=>{n.functions.push(e)}),t.suites.forEach(t=>{n.suites.push(t);const r=e(t);n.functions.push(...r.functions),n.suites.push(...r.suites)}),n}(e);t.functions.push(...n.functions),t.suites.push(...n.suites)}),t}(s);try{const r=yield n.provideDocumentSymbols(e,t);return r?r.filter(e=>e.kind===i.SymbolKind.Function||e.kind===i.SymbolKind.Method||e.kind===i.SymbolKind.Class).map(t=>{const n=new i.Range(t.location.range.start,new i.Position(t.location.range.end.line,t.location.range.end.character+1));return this.getCodeLens(e.uri,a,n,t.name,t.kind,t.containerName)}).reduce((e,t)=>e.concat(t),[]).filter(e=>null!==e):[]}catch(e){return t.isCancellationRequested?[]:Promise.reject(e)}})}getCodeLens(e,t,n,r,a,l){switch(a){case i.SymbolKind.Function:case i.SymbolKind.Method:return function(e,t,n,r,a){let l;if(0===a.length?l=t.functions.find(e=>e.name===n):t.suites.filter(e=>e.name===a).forEach(e=>{const t=e.functions.find(e=>e.name===n);t&&(l=t)}),l)return[new i.CodeLens(r,{title:c(l.status)+o.Text.CodeLensRunUnitTest,command:o.Commands.Tests_Run,arguments:[void 0,s.CommandSource.codelens,e,{testFunction:[l]}]}),new i.CodeLens(r,{title:c(l.status)+o.Text.CodeLensDebugUnitTest,command:o.Commands.Tests_Debug,arguments:[void 0,s.CommandSource.codelens,e,{testFunction:[l]}]})];const d=t.functions.filter(e=>e.name.startsWith(`${n}[`)&&e.name.endsWith("]"));return 0===d.length?[]:0===d.length?[new i.CodeLens(r,{title:o.Text.CodeLensRunUnitTest,command:o.Commands.Tests_Run,arguments:[void 0,s.CommandSource.codelens,e,{testFunction:d}]}),new i.CodeLens(r,{title:o.Text.CodeLensDebugUnitTest,command:o.Commands.Tests_Debug,arguments:[void 0,s.CommandSource.codelens,e,{testFunction:d}]})]:[new i.CodeLens(r,{title:`${u(d)}${o.Text.CodeLensRunUnitTest} (Multiple)`,command:o.Commands.Tests_Picker_UI,arguments:[void 0,s.CommandSource.codelens,e,d]}),new i.CodeLens(r,{title:`${u(d)}${o.Text.CodeLensDebugUnitTest} (Multiple)`,command:o.Commands.Tests_Picker_UI_Debug,arguments:[void 0,s.CommandSource.codelens,e,d]})]}(e,t,r,n,l);case i.SymbolKind.Class:{const a=t.suites.find(e=>e.name===r);return a?[new i.CodeLens(n,{title:c(a.status)+o.Text.CodeLensRunUnitTest,command:o.Commands.Tests_Run,arguments:[void 0,s.CommandSource.codelens,e,{testSuite:[a]}]}),new i.CodeLens(n,{title:c(a.status)+o.Text.CodeLensDebugUnitTest,command:o.Commands.Tests_Debug,arguments:[void 0,s.CommandSource.codelens,e,{testSuite:[a]}]})]:[]}default:return[]}}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(2),a=n(1),c=n(5),u=n(20),l=n(148),d=n(15),h=n(19);let p=class extends l.BaseTestManager{constructor(e,t,n){super(u.NOSETEST_PROVIDER,a.Product.nosetest,e,t,n),this.argsService=this.serviceContainer.get(h.IArgumentsService,this.testProvider),this.helper=this.serviceContainer.get(d.ITestsHelper),this.runner=this.serviceContainer.get(h.ITestManagerRunner,this.testProvider)}get enabled(){return this.settings.unitTest.nosetestsEnabled}getDiscoveryOptions(e){const t=this.settings.unitTest.nosetestArgs.slice(0);return{workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,args:t,token:this.testDiscoveryCancellationToken,ignoreCache:e,outChannel:this.outputChannel}}runTestImpl(e,t,n,r){let i;const o=this.helper.shouldRunAllTests(t);i=r?this.argsService.filterArguments(this.settings.unitTest.nosetestArgs,o?h.TestFilter.debugAll:h.TestFilter.debugSpecific):this.argsService.filterArguments(this.settings.unitTest.nosetestArgs,o?h.TestFilter.runAll:h.TestFilter.runSpecific),!0===n&&-1===i.indexOf("--failed")&&i.splice(0,0,"--failed"),n||-1!==i.indexOf("--with-id")||i.splice(0,0,"--with-id");const a={workspaceFolder:s.Uri.file(this.rootDirectory),cwd:this.rootDirectory,tests:e,args:i,testsToRun:t,token:this.testRunnerCancellationToken,outChannel:this.outputChannel,debug:r};return this.runner.runTest(this.testResultsService,a,this)}};p=r([o.injectable(),i(2,o.inject(c.IServiceContainer))],p),t.TestManager=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(6),c=n(22),u=n(5),l=n(20),d=n(15),h=n(19);let p=class{constructor(e){this.serviceContainer=e,this.argsService=e.get(h.IArgumentsService,l.NOSETEST_PROVIDER),this.argsHelper=e.get(h.IArgumentsHelper),this.testRunner=e.get(d.ITestRunner),this.xUnitParser=this.serviceContainer.get(d.IXUnitParser),this.fs=this.serviceContainer.get(a.IFileSystem)}runTest(e,t,n){return o(this,void 0,void 0,function*(){let n=[];t.testsToRun&&t.testsToRun.testFolder&&(n=n.concat(t.testsToRun.testFolder.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testFile&&(n=n.concat(t.testsToRun.testFile.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testSuite&&(n=n.concat(t.testsToRun.testSuite.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testFunction&&(n=n.concat(t.testsToRun.testFunction.map(e=>e.nameToRun)));let r=c.noop;const i=t.args;-1===i.indexOf("--with-xunit")&&i.splice(0,0,"--with-xunit");try{const o=yield this.getUnitXmlFile(i),s=o.filePath;r=o.dispose;const a=this.argsService.filterArguments(i,["--xunit-file"]);if(a.splice(0,0,`--xunit-file=${s}`),a.push(...n),!0===t.debug){const e=this.serviceContainer.get(d.ITestDebugLauncher),n=[t.cwd,"nose"].concat(a),r={cwd:t.cwd,args:n,token:t.token,outChannel:t.outChannel,testProvider:l.NOSETEST_PROVIDER};yield e.launchDebugger(r)}else{const e={args:a.concat(n),cwd:t.cwd,outChannel:t.outChannel,token:t.token,workspaceFolder:t.workspaceFolder};yield this.testRunner.run(l.NOSETEST_PROVIDER,e)}return t.debug?t.tests:yield this.updateResultsFromLogFiles(t.tests,s,e)}catch(e){return Promise.reject(e)}finally{r()}})}updateResultsFromLogFiles(e,t,n){return o(this,void 0,void 0,function*(){return yield this.xUnitParser.updateResultsFromXmlLogFile(e,t,d.PassCalculationFormulae.nosetests),n.updateResults(e),e})}getUnitXmlFile(e){return o(this,void 0,void 0,function*(){const t=this.argsHelper.getOptionValues(e,"--xunit-file");return"string"==typeof t?{filePath:t,dispose:c.noop}:this.fs.createTemporaryFile(".xml")})}};p=r([s.injectable(),i(0,s.inject(u.IServiceContainer))],p),t.TestManagerRunner=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(5),a=n(19),c=["--attr","--config","--cover-html-dir","--cover-min-percentage","--cover-package","--cover-xml-file","--debug","--debug-log","--doctest-extension","--doctest-fixtures","--doctest-options","--doctest-result-variable","--eval-attr","--exclude","--id-file","--ignore-files","--include","--log-config","--logging-config","--logging-datefmt","--logging-filter","--logging-format","--logging-level","--match","--process-timeout","--processes","--py3where","--testmatch","--tests","--verbosity","--where","--xunit-file","--xunit-testsuite-name","-A","-a","-c","-e","-i","-I","-l","-m","-w","--profile-restrict","--profile-sort","--profile-stats-file"],u=["-h","--help","-V","--version","-p","--plugins","-v","--verbose","--quiet","-x","--stop","-P","--no-path-adjustment","--exe","--noexe","--traverse-namespace","--first-package-wins","--first-pkg-wins","--1st-pkg-wins","--no-byte-compile","-s","--nocapture","--nologcapture","--logging-clear-handlers","--with-coverage","--cover-erase","--cover-tests","--cover-inclusive","--cover-html","--cover-branches","--cover-xml","--pdb","--pdb-failures","--pdb-errors","--no-deprecated","--with-doctest","--doctest-tests","--with-isolation","-d","--detailed-errors","--failure-detail","--no-skip","--with-id","--failed","--process-restartworker","--with-xunit","--all-modules","--collect-only","--with-profile"];let l=class{constructor(e){this.helper=e.get(a.IArgumentsHelper)}getKnownOptions(){return{withArgs:c,withoutArgs:u}}getOptionValue(e,t){return this.helper.getOptionValues(e,t)}filterArguments(e,t){const n=[],r=[];let i=!1;if(Array.isArray(t))t.forEach(e=>{c.indexOf(e)>=0&&r.push(e),u.indexOf(e)>=0&&n.push(e)});else switch(t){case a.TestFilter.removeTests:i=!0;break;case a.TestFilter.discovery:n.push(...["-v","--verbose","-q","--quiet","-x","--stop","--with-coverage",...u.filter(e=>e.startsWith("--cover")),...u.filter(e=>e.startsWith("--logging")),...u.filter(e=>e.startsWith("--pdb")),...u.filter(e=>e.indexOf("xunit")>=0)]),r.push(...["--verbosity","-l","--debug","--cover-package",...u.filter(e=>e.startsWith("--cover")),...c.filter(e=>e.startsWith("--logging")),...u.filter(e=>e.indexOf("xunit")>=0)]);break;case a.TestFilter.debugAll:case a.TestFilter.runAll:break;case a.TestFilter.debugSpecific:case a.TestFilter.runSpecific:i=!0;break;default:throw new Error(`Unsupported Filter '${t}'`)}let o=e.slice();if(i){const e=this.helper.getPositionalArguments(o,c,u);o=o.filter(t=>-1===e.indexOf(t))}return this.helper.filterArguments(o,r,n)}getTestFolders(e){return this.helper.getPositionalArguments(e,c,u)}};l=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],l),t.ArgumentsService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(5),u=n(20),l=n(15),d=n(19);let h=class{constructor(e,t){this.serviceContainer=e,this.testParser=t,this.argsService=this.serviceContainer.get(d.IArgumentsService,u.NOSETEST_PROVIDER),this.runner=this.serviceContainer.get(l.ITestRunner)}discoverTests(e){return o(this,void 0,void 0,function*(){const t=this.argsService.filterArguments(e.args,d.TestFilter.discovery),n=e.token?e.token:(new a.CancellationTokenSource).token,r={args:["--collect-only","-vvv"].concat(t),cwd:e.cwd,workspaceFolder:e.workspaceFolder,token:n,outChannel:e.outChannel},i=yield this.runner.run(u.NOSETEST_PROVIDER,r);return e.token&&e.token.isCancellationRequested?Promise.reject("cancelled"):this.testParser.parse(i,e)})}};h=r([s.injectable(),i(0,s.inject(c.IServiceContainer)),i(1,s.inject(l.ITestsParser)),i(1,s.named(u.NOSETEST_PROVIDER))],h),t.TestDiscoveryService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(17),a=n(3),c=n(86),u=n(15);let l=class{constructor(e){this.testsHelper=e}parse(e,t){let n=this.getTestFiles(e,t);return n=n.filter(e=>e.suites.length>0||e.functions.length>0),this.testsHelper.flattenTestFiles(n)}getTestFiles(e,t){let n=[""];const r=[];return e.split(/\r?\n/g).forEach((i,o,a)=>{if((i.startsWith("nose.selector: DEBUG: wantFile ")&&i.endsWith(".py? True")||o===a.length-1)&&(this.parseNoseTestModuleCollectionResult(t.cwd,n,r),n=[""]),0===o)return e.startsWith(s.EOL)||a.length>1?void this.appendLine(i,n):void(n[n.length-1]+=i);o!==a.length-1?this.appendLine(i,n):n[n.length-1]+=i}),r}appendLine(e,t){const n=t.length-1;t[n]+=e,t[n].endsWith("? True")?t.push(""):t[n]=""}parseNoseTestModuleCollectionResult(e,t,n){let r,i="",o="";t.forEach(t=>{if(t.startsWith("nose.selector: DEBUG: wantFile ")&&t.endsWith(".py? True")){o=(o=(o=t.substring("nose.selector: DEBUG: wantFile ".length)).substring(0,o.lastIndexOf("? True"))).substring(e.length+1),".pyc"!==a.extname(o)&&".pyo"!==a.extname(o)||(o=o.substring(0,o.length-1)),i=c.convertFileToPackage(o);const s=a.isAbsolute(o)?o:a.resolve(e,o);return r={functions:[],suites:[],name:o,nameToRun:o,xmlName:i,time:0,functionsFailed:0,functionsPassed:0,fullPath:s},void n.push(r)}if(t.startsWith("nose.selector: DEBUG: wantClass <class '")){const e=c.extractBetweenDelimiters(t,"nose.selector: DEBUG: wantClass <class '","'>? True"),n=a.extname(e).substring(1),i={name:n,nameToRun:`${o}:${n}`,functions:[],suites:[],xmlName:e,time:0,isUnitTest:!1,isInstance:!1,functionsFailed:0,functionsPassed:0};r.suites.push(i)}else if(t.startsWith("nose.selector: DEBUG: wantClass ")){const e=c.extractBetweenDelimiters(t,"nose.selector: DEBUG: wantClass ","? True"),n={name:a.extname(e).substring(1),nameToRun:`${o}:.${e}`,functions:[],suites:[],xmlName:e,time:0,isUnitTest:!1,isInstance:!1,functionsFailed:0,functionsPassed:0};r.suites.push(n)}else if(t.startsWith("nose.selector: DEBUG: wantMethod <unbound method ")){const e=c.extractBetweenDelimiters(t,"nose.selector: DEBUG: wantMethod <unbound method ",">? True"),n=a.extname(e).substring(1),i=a.basename(e,a.extname(e)),s={name:n,nameToRun:`${o}:${i}.${n}`,time:0,functionsFailed:0,functionsPassed:0},u=r.suites.find(e=>e.name===i);u&&u.functions.push(s)}else if(t.startsWith("nose.selector: DEBUG: wantFunction <function ")){const e=c.extractBetweenDelimiters(t,"nose.selector: DEBUG: wantFunction <function "," at "),n={name:e,nameToRun:`${o}:${e}`,time:0,functionsFailed:0,functionsPassed:0};r.functions.push(n)}else;})}};l=r([o.injectable(),i(0,o.inject(u.ITestsHelper))],l),t.TestsParser=l},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(20),s=n(148),a=n(15),c=n(19);t.TestManager=class extends s.BaseTestManager{get enabled(){return this.settings.unitTest.pyTestEnabled}constructor(e,t,n){super(o.PYTEST_PROVIDER,i.Product.pytest,e,t,n),this.argsService=this.serviceContainer.get(c.IArgumentsService,this.testProvider),this.helper=this.serviceContainer.get(a.ITestsHelper),this.runner=this.serviceContainer.get(c.ITestManagerRunner,this.testProvider),this.testMessageService=this.serviceContainer.get(a.ITestMessageService,this.testProvider)}getDiscoveryOptions(e){const t=this.settings.unitTest.pyTestArgs.slice(0);return{workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,args:t,token:this.testDiscoveryCancellationToken,ignoreCache:e,outChannel:this.outputChannel}}runTestImpl(e,t,n,i){return r(this,void 0,void 0,function*(){let r;const o=this.helper.shouldRunAllTests(t);r=i?this.argsService.filterArguments(this.settings.unitTest.pyTestArgs,o?c.TestFilter.debugAll:c.TestFilter.debugSpecific):this.argsService.filterArguments(this.settings.unitTest.pyTestArgs,o?c.TestFilter.runAll:c.TestFilter.runSpecific),!0===n&&-1===r.indexOf("--lf")&&-1===r.indexOf("--last-failed")&&r.splice(0,0,"--last-failed");const s={workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,tests:e,args:r,testsToRun:t,debug:i,token:this.testRunnerCancellationToken,outChannel:this.outputChannel},a=yield this.runner.runTest(this.testResultsService,s,this),u=yield this.testMessageService.getFilteredTestMessages(this.rootDirectory,a);return yield this.updateDiagnostics(e,u),a})}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(6),c=n(22),u=n(5),l=n(20),d=n(15),h=n(19);let p=class{constructor(e){this.serviceContainer=e,this.argsService=e.get(h.IArgumentsService,l.PYTEST_PROVIDER),this.argsHelper=e.get(h.IArgumentsHelper),this.testRunner=e.get(d.ITestRunner),this.xUnitParser=this.serviceContainer.get(d.IXUnitParser),this.fs=this.serviceContainer.get(a.IFileSystem)}runTest(e,t,n){return o(this,void 0,void 0,function*(){let n=[];t.testsToRun&&t.testsToRun.testFolder&&(n=n.concat(t.testsToRun.testFolder.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testFile&&(n=n.concat(t.testsToRun.testFile.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testSuite&&(n=n.concat(t.testsToRun.testSuite.map(e=>e.nameToRun))),t.testsToRun&&t.testsToRun.testFunction&&(n=n.concat(t.testsToRun.testFunction.map(e=>e.nameToRun)));let r=c.noop;const i=t.args;try{const o=yield this.getJUnitXmlFile(i),s=o.filePath;r=o.dispose;const a=this.argsService.filterArguments(i,["--junitxml"]);if(a.splice(0,0,`--junitxml=${s}`),a.push(...n),t.debug){const e=this.serviceContainer.get(d.ITestDebugLauncher),n=[t.cwd,"pytest"].concat(a),r={cwd:t.cwd,args:n,token:t.token,outChannel:t.outChannel,testProvider:l.PYTEST_PROVIDER};yield e.launchDebugger(r)}else{const e={args:a,cwd:t.cwd,outChannel:t.outChannel,token:t.token,workspaceFolder:t.workspaceFolder};yield this.testRunner.run(l.PYTEST_PROVIDER,e)}return t.debug?t.tests:yield this.updateResultsFromLogFiles(t.tests,s,e)}catch(e){return Promise.reject(e)}finally{r()}})}updateResultsFromLogFiles(e,t,n){return o(this,void 0,void 0,function*(){return yield this.xUnitParser.updateResultsFromXmlLogFile(e,t,d.PassCalculationFormulae.pytest),n.updateResults(e),e})}getJUnitXmlFile(e){return o(this,void 0,void 0,function*(){const t=this.argsHelper.getOptionValues(e,"--junitxml");return"string"==typeof t?{filePath:t,dispose:c.noop}:this.fs.createTemporaryFile(".xml")})}};p=r([s.injectable(),i(0,s.inject(u.IServiceContainer))],p),t.TestManagerRunner=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(5),a=n(19),c=["-c","-k","-m","-o","-p","-r","-W","--assert","--basetemp","--capture","--color","--confcutdir","--cov","--cov-config","--cov-fail-under","--cov-report","--deselect","--dist","--doctest-glob","--doctest-report","--durations","--ignore","--import-mode","--junit-prefix","--junit-xml","--last-failed-no-failures","--lfnf","--log-cli-date-format","--log-cli-format","--log-cli-level","--log-date-format","--log-file","--log-file-date-format","--log-file-format","--log-file-level","--log-format","--log-level","--maxfail","--override-ini","--pastebin","--pdbcls","--pythonwarnings","--result-log","--rootdir","--show-capture","--tb","--verbosity","--max-slave-restart","--numprocesses","--rsyncdir","--rsyncignore","--tx"],u=["--cache-clear","--cache-show","--collect-in-virtualenv","--collect-only","--continue-on-collection-errors","--cov-append","--cov-branch","--debug","--disable-pytest-warnings","--disable-warnings","--doctest-continue-on-failure","--doctest-ignore-import-errors","--doctest-modules","--exitfirst","--failed-first","--ff","--fixtures","--fixtures-per-test","--force-sugar","--full-trace","--funcargs","--help","--keep-duplicates","--last-failed","--lf","--markers","--new-first","--nf","--no-cov","--no-cov-on-fail","--no-print-logs","--noconftest","--old-summary","--pdb","--pyargs","-PyTest, Unittest-pyargs","--quiet","--runxfail","--setup-only","--setup-plan","--setup-show","--showlocals","--strict","--trace-config","--verbose","--version","-h","-l","-q","-s","-v","-x","--boxed","--forked","--looponfail","--trace","--tx","-d"];let l=class{constructor(e){this.helper=e.get(a.IArgumentsHelper)}getKnownOptions(){return{withArgs:c,withoutArgs:u}}getOptionValue(e,t){return this.helper.getOptionValues(e,t)}filterArguments(e,t){const n=[],r=[];let i=!1;if(Array.isArray(t))t.forEach(e=>{c.indexOf(e)>=0&&r.push(e),u.indexOf(e)>=0&&n.push(e)});else switch(t){case a.TestFilter.removeTests:n.push(...["--lf","--last-failed","--ff","--failed-first","--nf","--new-first"]),r.push(...["-k","-m","--lfnf","--last-failed-no-failures"]),i=!0;break;case a.TestFilter.discovery:n.push(...["-x","--exitfirst","--fixtures","--funcargs","--fixtures-per-test","--pdb","--lf","--last-failed","--ff","--failed-first","--nf","--new-first","--cache-show","-v","--verbose","-q","-quiet","-l","--showlocals","--no-print-logs","--debug","--setup-only","--setup-show","--setup-plan","--trace"]),r.push(...["-m","--maxfail","--pdbcls","--capture","--lfnf","--last-failed-no-failures","--verbosity","-r","--tb","--rootdir","--show-capture","--durations","--junit-xml","--junit-prefix","--result-log","-W","--pythonwarnings","--log-*"]),i=!0;break;case a.TestFilter.debugAll:case a.TestFilter.runAll:n.push(...["--collect-only","--trace"]);break;case a.TestFilter.debugSpecific:case a.TestFilter.runSpecific:n.push(...["--collect-only","--lf","--last-failed","--ff","--failed-first","--nf","--new-first","--trace"]),r.push(...["-k","-m","--lfnf","--last-failed-no-failures"]),i=!0;break;default:throw new Error(`Unsupported Filter '${t}'`)}let o=e.slice();if(i){const e=this.helper.getPositionalArguments(o,c,u);o=o.filter(t=>-1===e.indexOf(t))}return this.helper.filterArguments(o,r,n)}getTestFolders(e){const t=this.helper.getOptionValues(e,"--rootdir");return"string"==typeof t?[t]:Array.isArray(t)&&t.length>0?t:this.helper.getPositionalArguments(e,c,u).filter(e=>!e.toUpperCase().endsWith(".PY"))}};l=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],l),t.ArgumentsService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(2),c=n(5),u=n(20),l=n(15),d=n(19);let h=class{constructor(e,t){this.serviceContainer=e,this.testParser=t,this.argsService=this.serviceContainer.get(d.IArgumentsService,u.PYTEST_PROVIDER),this.helper=this.serviceContainer.get(l.ITestsHelper),this.runner=this.serviceContainer.get(l.ITestRunner)}discoverTests(e){return o(this,void 0,void 0,function*(){const t=this.buildTestCollectionArgs(e),n=this.argsService.getTestFolders(e.args);if(0===n.length){const n=Object.assign({},e,{args:t});return this.discoverTestsInTestDirectory(n)}const r=yield Promise.all(n.map(n=>{const r=Object.assign({},e,{args:[...t,n]});return this.discoverTestsInTestDirectory(r)}));return this.helper.mergeTests(r)})}buildTestCollectionArgs(e){const t=this.argsService.filterArguments(e.args,d.TestFilter.discovery);return e.ignoreCache&&-1===t.indexOf("--cache-clear")&&t.splice(0,0,"--cache-clear"),-1===t.indexOf("-s")&&t.splice(0,0,"-s"),t.splice(0,0,"--collect-only"),t}discoverTestsInTestDirectory(e){return o(this,void 0,void 0,function*(){const t=e.token?e.token:(new a.CancellationTokenSource).token,n={args:e.args,cwd:e.cwd,workspaceFolder:e.workspaceFolder,token:t,outChannel:e.outChannel},r=yield this.runner.run(u.PYTEST_PROVIDER,n);return e.token&&e.token.isCancellationRequested?Promise.reject("cancelled"):this.testParser.parse(r,e)})}};h=r([s.injectable(),i(0,s.inject(c.IServiceContainer)),i(1,s.inject(l.ITestsParser)),i(1,s.named(u.PYTEST_PROVIDER))],h),t.TestDiscoveryService=h},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(17),a=n(3);n(8);const c=n(86),u=n(15);let l=class{constructor(e){this.testsHelper=e}parse(e,t){const n=this.getTestFiles(e,t);return this.testsHelper.flattenTestFiles(n)}getTestFiles(e,t){let n=[""];const r=[],i=[],o=/==*( *)ERRORS( *)=*/,a=/__*( *)ERROR collecting (.*)/,c=/==*.*/;let u=!1,l="";return e.split(/\r?\n/g).forEach((d,h,p)=>{if(t.token&&t.token.isCancellationRequested)return;const f=d.trim();return f.startsWith("<Package ")&&(this.parsePyTestModuleCollectionResult(t.cwd,n,r,i,l),n=[""],l=this.extractPackageName(f,t.cwd)),(f.startsWith("<Module ")||h===p.length-1)&&(this.parsePyTestModuleCollectionResult(t.cwd,n,r,i,l),n=[""]),o.test(d)?(u=!0,void(n=[""])):(a.test(d)&&(u=!0,1!==n.length&&0!==n[0].length&&(this.parsePyTestModuleCollectionError(t.cwd,n,r,i),n=[""])),c.test(d)&&u&&(this.parsePyTestModuleCollectionError(t.cwd,n,r,i),n=[""]),0===h?e.startsWith(s.EOL)||p.length>1?(n[n.length-1]+=d,void n.push("")):void(n[n.length-1]+=d):void(h!==p.length-1?(n[n.length-1]+=d,n.push("")):n[n.length-1]+=d))}),r}parsePyTestModuleCollectionError(e,t,n,r){if((t=t.filter(e=>e.trim().length>0)).length<=1)return;const i=t[0];let o=i.substring(i.indexOf("ERROR collecting")+"ERROR collecting".length).trim();o=o.substr(0,o.lastIndexOf(" "));const s=c.convertFileToPackage(o),u={functions:[],suites:[],name:o,fullPath:a.isAbsolute(o)?o:a.resolve(e,o),nameToRun:o,xmlName:s,time:0,errorsWhenDiscovering:t.join("\n")};n.push(u),r.push({indent:0,item:u})}extractPackageName(e,t){const n=c.extractBetweenDelimiters(e,"<Package ",">").trimQuotes();let r=a.normalize(n);const i=a.normalize(t);return 0===r.indexOf(i)&&((r=r.substring(i.length)).startsWith(a.sep)&&(r=r.substring(1)),r.endsWith(a.sep)&&(r=r.substring(0,r.length-1))),r=r.replace(/\\/g,"/")}parsePyTestModuleCollectionResult(e,t,n,r,i=""){let o="";t.forEach(t=>{const s=t.trim();let u="";const l=t.indexOf("<");if(s.startsWith("<Module ")){u=c.extractBetweenDelimiters(s,"<Module ",">").trimQuotes(),i&&i.length>0&&(u=i.concat("/",u)),o=c.convertFileToPackage(u);const t={functions:[],suites:[],name:u,fullPath:a.isAbsolute(u)?u:a.resolve(e,u),nameToRun:u,xmlName:o,time:0};return n.push(t),void r.push({indent:l,item:t})}const d=this.findParentOfCurrentItem(l,r);if(d&&s.startsWith("<Class ")||s.startsWith("<UnitTestCase ")){const e=s.startsWith("<UnitTestCase "),t={name:u=(u=e?c.extractBetweenDelimiters(s,"<UnitTestCase ",">"):c.extractBetweenDelimiters(s,"<Class ",">")).trimQuotes(),nameToRun:`${d.item.nameToRun}::${u}`,functions:[],suites:[],isUnitTest:e,isInstance:!1,xmlName:`${d.item.xmlName}.${u}`,time:0};return d.item.suites.push(t),void r.push({indent:l,item:t})}if(d&&s.startsWith("<Instance ")){return u=c.extractBetweenDelimiters(s,"<Instance ",">").trimQuotes(),void(d.item.isInstance=!0)}if(d&&s.startsWith("<TestCaseFunction ")||s.startsWith("<Function ")){const e={name:u=(u=s.startsWith("<Function ")?c.extractBetweenDelimiters(s,"<Function ",">"):c.extractBetweenDelimiters(s,"<TestCaseFunction ",">")).trimQuotes(),nameToRun:`${d.item.nameToRun}::${u}`,time:0};d.item.functions.push(e)}else;})}findParentOfCurrentItem(e,t){for(;t.length>0;){const n=t[t.length-1];if(n.indent<e)return n;t.pop()}}};l=r([o.injectable(),i(0,o.inject(u.ITestsHelper))],l),t.TestsParser=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(2),u=n(132),l=n(6),d=n(1),h=n(5),p=n(15),f=n(19);let g=class{constructor(e){this.serviceContainer=e}getFilteredTestMessages(e,t){return o(this,void 0,void 0,function*(){const n=t.testFunctions.reduce((e,t)=>(void 0===t.testFunction.passed&&t.testFunction.status!==p.TestStatus.Skipped||e.push(t),e),[]),r=[];for(const t of n){const n=t.testFunction.nameToRun,i=u.ProductNames.get(d.Product.pytest),o=t.testFunction.status;if(o===p.TestStatus.Pass){const e={code:n,severity:f.PythonUnitTestMessageSeverity.Pass,provider:i,testTime:t.testFunction.time,status:o,testFilePath:t.parentTestFile.fullPath};r.push(e)}else{const s=yield this.getLocationStack(e,t),a=t.testFunction.message,c=t.parentTestFile.fullPath;let u=f.PythonUnitTestMessageSeverity.Error;t.testFunction.status===p.TestStatus.Skipped&&(u=f.PythonUnitTestMessageSeverity.Skip);const l={code:n,message:a,severity:u,provider:i,traceback:t.testFunction.traceback,testTime:t.testFunction.time,testFilePath:c,status:o,locationStack:s};r.push(l)}}return r})}getLocationStack(e,t){return o(this,void 0,void 0,function*(){const n=[];if(t.testFunction.traceback){const r=t.testFunction.traceback.match(/^((\.\.[\\\/])*.+\.py)\:(\d+)\:.*$/gim);for(const t of r){const r=t.split(":");let i=r[0];i=a.isAbsolute(i)?i:a.resolve(e,i);const o=c.Uri.file(i),s=yield c.workspace.openTextDocument(o),u=parseInt(r[1],10),l=s.lineAt(u-1),d=new c.Location(o,new c.Range(new c.Position(u-1,l.firstNonWhitespaceCharacterIndex),new c.Position(u-1,l.text.length))),h={location:d,lineText:s.getText(d.range)};n.push(h)}}let r=t.testFunction.file;r=a.isAbsolute(r)?r:a.resolve(e,r);const i=c.Uri.file(r),o=yield c.workspace.openTextDocument(i);let s,u,d,h=t.testFunction.line;for(;void 0===s;){const e=o.lineAt(h);(d=(u=e.text).trimLeft()).toLowerCase().startsWith("def ")?s=e:h+=1}const p=d.slice("def ".length).match(/[^ \(:]+/)[0],f=u.length-d.length+"def ".length,g=f+p.length,m=new c.Position(s.lineNumber,f),y=new c.Position(s.lineNumber,g),v=new c.Range(m,y),b={location:new c.Location(i,v),lineText:o.getText(v)};if(n.unshift(b),void 0!==t.parentTestSuite){this.serviceContainer.get(l.IFileSystem).arePathsSame(c.Uri.file(t.parentTestFile.fullPath).fsPath,n[0].location.uri.fsPath)||n.unshift(yield this.getParentSuiteLocation(t))}return n})}getParentSuiteLocation(e){return o(this,void 0,void 0,function*(){const t=e.testFunction.nameToRun.replace("::()","").split("::"),n=t.slice(1,t.length-1),r=c.Uri.file(e.parentTestFile.fullPath),i=yield c.workspace.openTextDocument(r),o=i.getText().splitLines({trim:!1,removeEmptyEntries:!1}),s=o.slice().reverse();let a,u=0,l=o.length;const d=[];for(;n.length>0;){let e,t;const o=n.shift();let h;for(let n=u;n<l;n+=1){const r=s[n];if(0===r.trim().length)continue;const i=r.trimLeft();if(!i.toLowerCase().startsWith("class "))continue;const c=i.slice("class ".length).match(/[^ \(:]+/)[0];if(void 0===a){if(i.length===r.length){if(c===o){h=n,e=0;break}u=n+1}}else{if((e=r.length-i.length)<=a){u=n+1;continue}(void 0===t||e<t)&&(c===o?(h=n,t=e):u=n+1)}}if(void 0===h)break;l=h,a=e;const p=s.length-1-h,f=e+"class ".length,g=new c.Position(p,f),m=new c.Position(p,f+o.length),y=new c.Range(g,m),v=new c.Location(r,y);d.push({location:v,lineText:i.getText(y)})}return d[d.length-1]})}};g=r([s.injectable(),i(0,s.inject(h.IServiceContainer))],g),t.TestMessageService=g},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(5),a=n(19);let c=class{constructor(e){this.argsHelper=e.get(a.IArgumentsHelper)}getStartDirectory(e){const t=this.argsHelper.getOptionValues(e,"-s");if("string"==typeof t)return t;const n=this.argsHelper.getOptionValues(e,"--start-directory");return"string"==typeof n?n:"."}getIdsOfTestsToRun(e,t){const n=[];return t&&t.testFolder&&t.testFolder.forEach(t=>{e.testFiles.forEach(e=>{e.fullPath.startsWith(t.name)&&n.push(e.nameToRun)})}),t&&t.testFile&&n.push(...t.testFile.map(e=>e.nameToRun)),t&&t.testSuite&&n.push(...t.testSuite.map(e=>e.nameToRun)),t&&t.testFunction&&n.push(...t.testFunction.map(e=>e.nameToRun)),n}};c=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],c),t.UnitTestHelper=c},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),o=n(22),s=n(20),a=n(148),c=n(15),u=n(19);t.TestManager=class extends a.BaseTestManager{get enabled(){return this.settings.unitTest.unittestEnabled}constructor(e,t,n){super(s.UNITTEST_PROVIDER,i.Product.unittest,e,t,n),this.argsService=this.serviceContainer.get(u.IArgumentsService,this.testProvider),this.helper=this.serviceContainer.get(c.ITestsHelper),this.runner=this.serviceContainer.get(u.ITestManagerRunner,this.testProvider)}configure(){o.noop()}getDiscoveryOptions(e){const t=this.settings.unitTest.unittestArgs.slice(0);return{workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,args:t,token:this.testDiscoveryCancellationToken,ignoreCache:e,outChannel:this.outputChannel}}runTestImpl(e,t,n,i){return r(this,void 0,void 0,function*(){let r;const o=this.helper.shouldRunAllTests(t);r=i?this.argsService.filterArguments(this.settings.unitTest.unittestArgs,o?u.TestFilter.debugAll:u.TestFilter.debugSpecific):this.argsService.filterArguments(this.settings.unitTest.unittestArgs,o?u.TestFilter.runAll:u.TestFilter.runSpecific),!0===n&&((t={testFile:[],testFolder:[],testSuite:[],testFunction:[]}).testFunction=e.testFunctions.filter(e=>e.testFunction.status===c.TestStatus.Error||e.testFunction.status===c.TestStatus.Fail).map(e=>e.testFunction));const s={workspaceFolder:this.workspaceFolder,cwd:this.rootDirectory,tests:e,args:r,testsToRun:t,debug:i,token:this.testRunnerCancellationToken,outChannel:this.outputChannel};return this.runner.runTest(this.testResultsService,s,this)})}}},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(3),c=n(11),u=n(1),l=n(16),d=n(22),h=n(5),p=n(20),f=n(15),g=n(19),m=new Map;m.set("passed",{status:f.TestStatus.Pass,summaryProperty:"passed"}),m.set("failed",{status:f.TestStatus.Fail,summaryProperty:"failures"}),m.set("error",{status:f.TestStatus.Error,summaryProperty:"errors"}),m.set("skipped",{status:f.TestStatus.Skipped,summaryProperty:"skipped"});let y=class{constructor(e){this.serviceContainer=e,this.argsHelper=e.get(g.IArgumentsHelper),this.testRunner=e.get(f.ITestRunner),this.server=this.serviceContainer.get(f.IUnitTestSocketServer),this.logger=this.serviceContainer.get(u.ILogger),this.helper=this.serviceContainer.get(g.IUnitTestHelper)}runTest(e,t,n){return o(this,void 0,void 0,function*(){if(this.busy&&!this.busy.completed)return this.busy.promise;this.busy=l.createDeferred(),t.tests.summary.errors=0,t.tests.summary.failures=0,t.tests.summary.passed=0,t.tests.summary.skipped=0;let r=!1;const i=a.join(c.EXTENSION_ROOT_DIR,"pythonFiles","visualstudio_py_testlauncher.py");this.server.on("error",(e,...t)=>this.logger.logError(`${e} ${t.join(" ")}`)),this.server.on("log",d.noop),this.server.on("connect",d.noop),this.server.on("start",d.noop),this.server.on("result",e=>{const i=t.tests.testFunctions.find(t=>t.testFunction.nameToRun===e.test),o=m.get(e.outcome);i?(i.testFunction.status=o.status,i.testFunction.message=e.message,i.testFunction.traceback=e.traceback,t.tests.summary[o.summaryProperty]+=1,!r||"failures"!==o.summaryProperty&&"errors"!==o.summaryProperty||n.stop()):o&&(t.tests.summary[o.summaryProperty]+=1)});const s=yield this.server.start(),u=this.helper.getIdsOfTestsToRun(t.tests,t.testsToRun);for(let e=0;e<u.length;e+=1)u[e]=`-t${u[e].trim()}`;const h=(e="",n="")=>o(this,void 0,void 0,function*(){let o=this.buildTestArgs(t.args);if(r=o.indexOf("--uf")>=0,(o=o.filter(e=>"--uf"!==e)).push(`--result-port=${s}`),n.length>0&&o.push(`-t${n}`),e.length>0&&o.push(`--testFile=${e}`),!0===t.debug){const e=this.serviceContainer.get(f.ITestDebugLauncher);o.push("--debug");const n={cwd:t.cwd,args:o,token:t.token,outChannel:t.outChannel,testProvider:p.UNITTEST_PROVIDER};return e.launchDebugger(n)}{const e={args:[i].concat(o),cwd:t.cwd,outChannel:t.outChannel,token:t.token,workspaceFolder:t.workspaceFolder};yield this.testRunner.run(p.UNITTEST_PROVIDER,e)}});if(0===u.length)yield this.removeListenersAfter(h());else{let e=Promise.resolve(void 0);t.testsToRun&&(Array.isArray(t.testsToRun.testFile)&&t.testsToRun.testFile.forEach(t=>{e=e.then(()=>h(t.fullPath,t.nameToRun))}),Array.isArray(t.testsToRun.testSuite)&&t.testsToRun.testSuite.forEach(n=>{const r=t.tests.testSuites.find(e=>e.testSuite===n).parentTestFile.fullPath;e=e.then(()=>h(r,n.nameToRun))}),Array.isArray(t.testsToRun.testFunction)&&t.testsToRun.testFunction.forEach(n=>{const r=t.tests.testFunctions.find(e=>e.testFunction===n).parentTestFile.fullPath;e=e.then(()=>h(r,n.nameToRun))}),yield this.removeListenersAfter(e))}return e.updateResults(t.tests),this.busy.resolve(t.tests),t.tests})}removeListenersAfter(e){return o(this,void 0,void 0,function*(){return e.then(()=>this.server.removeAllListeners()).catch(e=>{throw this.server.removeAllListeners(),e})})}buildTestArgs(e){const t=this.helper.getStartDirectory(e);let n="test*.py";const r=this.argsHelper.getOptionValues(e,"-p"),i=this.argsHelper.getOptionValues(e,"-pattern");"string"==typeof r?n=r:"string"==typeof i&&(n=i);const o=e.some(e=>"-f"===e.trim()||"--failfast"===e.trim()),s=[`--us=${t}`,`--up=${n}`,`--uvInt=${e.some(e=>0===e.trim().indexOf("-v"))?2:1}`];return o&&s.push("--uf"),s}};y=r([s.injectable(),i(0,s.inject(h.IServiceContainer))],y),t.TestManagerRunner=y},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(5),a=n(19),c=["-k","-p","-s","-t","--pattern","--start-directory","--top-level-directory"],u=["-b","-c","-f","-h","-q","-v","--buffer","--catch","--failfast","--help","--locals","--quiet","--verbose"];let l=class{constructor(e){this.helper=e.get(a.IArgumentsHelper)}getKnownOptions(){return{withArgs:c,withoutArgs:u}}getOptionValue(e,t){return this.helper.getOptionValues(e,t)}filterArguments(e,t){const n=[],r=[];let i=!1;Array.isArray(t)?t.forEach(e=>{c.indexOf(e)>=0&&r.push(e),u.indexOf(e)>=0&&n.push(e)}):i=!0;let o=e.slice();if(i){const e=this.helper.getPositionalArguments(o,c,u);o=o.filter(t=>-1===e.indexOf(t))}return this.helper.filterArguments(o,r,n)}getTestFolders(e){const t=this.helper.getOptionValues(e,"-s");if("string"==typeof t)return[t];const n=this.helper.getOptionValues(e,"--start-directory");return"string"==typeof n?[n]:["."]}};l=r([o.injectable(),i(0,o.inject(s.IServiceContainer))],l),t.ArgumentsService=l},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),a=n(5),c=n(20),u=n(15),l=n(19);let d=class{constructor(e,t){this.testParser=t,this.argsHelper=e.get(l.IArgumentsHelper),this.runner=e.get(u.ITestRunner)}discoverTests(e){return o(this,void 0,void 0,function*(){const t=this.getDiscoveryScript(e),n=this.translateOptions(e),r={args:["-c",t],cwd:e.cwd,workspaceFolder:e.workspaceFolder,token:e.token,outChannel:e.outChannel},i=yield this.runner.run(c.UNITTEST_PROVIDER,r);return e.token&&e.token.isCancellationRequested?Promise.reject("cancelled"):this.testParser.parse(i,n)})}getDiscoveryScript(e){const t=this.translateOptions(e);return`\nimport unittest\nloader = unittest.TestLoader()\nsuites = loader.discover("${t.startDirectory}", pattern="${t.pattern}")\nprint("start") #Don't remove this line\nfor suite in suites._tests:\n    for cls in suite._tests:\n        try:\n            for m in cls._tests:\n                print(m.id())\n        except:\n            pass`}translateOptions(e){return Object.assign({},e,{startDirectory:this.getStartDirectory(e),pattern:this.getTestPattern(e)})}getStartDirectory(e){const t=this.argsHelper.getOptionValues(e.args,"-s");if("string"==typeof t)return t;const n=this.argsHelper.getOptionValues(e.args,"--start-directory");return"string"==typeof n?n:"."}getTestPattern(e){const t=this.argsHelper.getOptionValues(e.args,"-p");if("string"==typeof t)return t;const n=this.argsHelper.getOptionValues(e.args,"--pattern");return"string"==typeof n?n:"test*.py"}};d=r([s.injectable(),i(0,s.inject(a.IServiceContainer)),i(1,s.inject(u.ITestsParser)),i(1,s.named(c.UNITTEST_PROVIDER))],d),t.TestDiscoveryService=d},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(3),a=n(15);let c=class{constructor(e){this.testsHelper=e}parse(e,t){const n=this.getTestIds(e);let r=t.cwd;return t.startDirectory.length>1&&(r=s.isAbsolute(t.startDirectory)?t.startDirectory:s.resolve(t.cwd,t.startDirectory)),this.parseTestIds(r,n)}getTestIds(e){let t=!1;return e.split(/\r?\n/g).map(e=>t?e.trim():("start"===e&&(t=!0),"")).filter(e=>e.length>0)}parseTestIds(e,t){const n=[];return t.forEach(t=>this.addTestId(e,t,n)),this.testsHelper.flattenTestFiles(n)}addTestId(e,t,n){const r=t.split(".");if(r.length<=2)return null;const i=r.slice(0,r.length-2),o=`${s.join(e,...i)}.py`,c=r.pop(),u=r.join("."),l=r.pop();let d=n.find(e=>e.fullPath===o);d||(d={name:s.basename(o),fullPath:o,functions:[],suites:[],nameToRun:`${u}.${c}`,xmlName:"",status:a.TestStatus.Idle,time:0},n.push(d));let h=d.suites.find(e=>e.nameToRun===u);h||(h={name:l,functions:[],suites:[],isUnitTest:!0,isInstance:!1,nameToRun:u,xmlName:"",status:a.TestStatus.Idle,time:0},d.suites.push(h));const p={name:c,nameToRun:t,status:a.TestStatus.Idle,time:0};h.functions.push(p)}};c=r([o.injectable(),i(0,o.inject(a.ITestsHelper))],c),t.TestsParser=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const i=n(69),o=n(0),s=n(93),a=n(16);let c=class extends i.EventEmitter{constructor(){super(),this.sockets=[],this.ipcBuffer=""}get clientsConnected(){return this.sockets.length>0}dispose(){this.stop()}stop(){this.server&&(this.server.close(),this.server=void 0)}start(e={port:0,host:"localhost"}){return this.ipcBuffer="",this.startedDef=a.createDeferred(),this.server=s.createServer(this.connectionListener.bind(this)),this.server.maxConnections=100,this.server.on("error",e=>{this.startedDef&&(this.startedDef.reject(e),this.startedDef=void 0),this.emit("error",e)}),this.log("starting server as","TCP"),e.port="number"==typeof e.port?e.port:0,e.host="string"==typeof e.host&&e.host.trim().length>0?e.host.trim():"localhost",this.server.listen(e,e=>{this.startedDef.resolve(this.server.address().port),this.startedDef=void 0,this.emit("start",e)}),this.startedDef.promise}connectionListener(e){this.sockets.push(e),e.setEncoding("utf8"),this.log("## socket connection to server detected ##"),e.on("close",()=>{this.ipcBuffer="",this.onCloseSocket()}),e.on("error",e=>{this.log("server socket error",e),this.emit("error",e)}),e.on("data",t=>{const n=e;let r=this.ipcBuffer+=t;for(;;){const e=r.indexOf("{");if(-1===e)return;const t=parseInt(r.slice(r.indexOf(":")+1,r.indexOf("{")).trim(),10);if(r.length<e+t)return;let i;try{i=JSON.parse(r.substring(e,t+e))}catch(e){return void this.emit("error",e)}r=this.ipcBuffer=r.substring(e+t),this.emit(i.event,i.body,n)}}),this.emit("connect",e)}log(e,...t){this.emit("log",e,...t)}onCloseSocket(){for(let e=0,t=this.sockets.length;e<t;e+=1){const t=this.sockets[e];let n=!1;if(!t||!t.readable)return t.id&&(n=t.id),this.log("socket disconnected",n.toString()),t&&t.destroy&&t.destroy(),this.sockets.splice(e,1),void this.emit("socket.disconnected",t,n)}}};c=r([o.injectable()],c),t.UnitTestSocketServer=c}]);
//# sourceMappingURL=extension.js.map